/*! For license information please see main.d245f822.js.LICENSE.txt */
(()=>{"use strict";var e={4:(e,t,n)=>{var r=n(853),i=n(43),s=n(950);function o(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function l(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function c(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function u(e){if(l(e)!==e)throw Error(o(188))}function d(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=d(e)))return t;e=e.sibling}return null}var h=Object.assign,f=Symbol.for("react.element"),p=Symbol.for("react.transitional.element"),m=Symbol.for("react.portal"),g=Symbol.for("react.fragment"),v=Symbol.for("react.strict_mode"),y=Symbol.for("react.profiler"),b=Symbol.for("react.provider"),w=Symbol.for("react.consumer"),x=Symbol.for("react.context"),k=Symbol.for("react.forward_ref"),S=Symbol.for("react.suspense"),E=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),N=Symbol.for("react.lazy");Symbol.for("react.scope");var I=Symbol.for("react.activity");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var _=Symbol.for("react.memo_cache_sentinel");Symbol.for("react.view_transition");var T=Symbol.iterator;function A(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=T&&e[T]||e["@@iterator"])?e:null}var D=Symbol.for("react.client.reference");function P(e){if(null==e)return null;if("function"===typeof e)return e.$$typeof===D?null:e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case g:return"Fragment";case y:return"Profiler";case v:return"StrictMode";case S:return"Suspense";case E:return"SuspenseList";case I:return"Activity"}if("object"===typeof e)switch(e.$$typeof){case m:return"Portal";case x:return(e.displayName||"Context")+".Provider";case w:return(e._context.displayName||"Context")+".Consumer";case k:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case C:return null!==(t=e.displayName||null)?t:P(e.type)||"Memo";case N:t=e._payload,e=e._init;try{return P(e(t))}catch(Vs){}}return null}var R=Array.isArray,L=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,j=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,O={pending:!1,data:null,method:null,action:null},M=[],F=-1;function U(e){return{current:e}}function B(e){0>F||(e.current=M[F],M[F]=null,F--)}function V(e,t){F++,M[F]=e.current,e.current=t}var z=U(null),W=U(null),H=U(null),q=U(null);function G(e,t){switch(V(H,t),V(W,e),V(z,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?sd(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=od(t=sd(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}B(z),V(z,e)}function K(){B(z),B(W),B(H)}function Q(e){null!==e.memoizedState&&V(q,e);var t=z.current,n=od(t,e.type);t!==n&&(V(W,e),V(z,n))}function Y(e){W.current===e&&(B(z),B(W)),q.current===e&&(B(q),Yd._currentValue=O)}var J=Object.prototype.hasOwnProperty,$=r.unstable_scheduleCallback,X=r.unstable_cancelCallback,Z=r.unstable_shouldYield,ee=r.unstable_requestPaint,te=r.unstable_now,ne=r.unstable_getCurrentPriorityLevel,re=r.unstable_ImmediatePriority,ie=r.unstable_UserBlockingPriority,se=r.unstable_NormalPriority,oe=r.unstable_LowPriority,ae=r.unstable_IdlePriority,le=r.log,ce=r.unstable_setDisableYieldValue,ue=null,de=null;function he(e){if("function"===typeof le&&ce(e),de&&"function"===typeof de.setStrictMode)try{de.setStrictMode(ue,e)}catch(t){}}var fe=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(pe(e)/me|0)|0},pe=Math.log,me=Math.LN2;var ge=256,ve=4194304;function ye(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194048&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function be(e,t,n){var r=e.pendingLanes;if(0===r)return 0;var i=0,s=e.suspendedLanes,o=e.pingedLanes;e=e.warmLanes;var a=134217727&r;return 0!==a?0!==(r=a&~s)?i=ye(r):0!==(o&=a)?i=ye(o):n||0!==(n=a&~e)&&(i=ye(n)):0!==(a=r&~s)?i=ye(a):0!==o?i=ye(o):n||0!==(n=r&~e)&&(i=ye(n)),0===i?0:0!==t&&t!==i&&0===(t&s)&&((s=i&-i)>=(n=t&-t)||32===s&&0!==(4194048&n))?t:i}function we(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function xe(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ke(){var e=ge;return 0===(4194048&(ge<<=1))&&(ge=256),e}function Se(){var e=ve;return 0===(62914560&(ve<<=1))&&(ve=4194304),e}function Ee(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Ce(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Ne(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-fe(t);e.entangledLanes|=t,e.entanglements[r]=1073741824|e.entanglements[r]|4194090&n}function Ie(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-fe(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}function _e(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Te(e){return 2<(e&=-e)?8<e?0!==(134217727&e)?32:268435456:8:2}function Ae(){var e=j.p;return 0!==e?e:void 0===(e=window.event)?32:uh(e.type)}var De=Math.random().toString(36).slice(2),Pe="__reactFiber$"+De,Re="__reactProps$"+De,Le="__reactContainer$"+De,je="__reactEvents$"+De,Oe="__reactListeners$"+De,Me="__reactHandles$"+De,Fe="__reactResources$"+De,Ue="__reactMarker$"+De;function Be(e){delete e[Pe],delete e[Re],delete e[je],delete e[Oe],delete e[Me]}function Ve(e){var t=e[Pe];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Le]||n[Pe]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=wd(e);null!==e;){if(n=e[Pe])return n;e=wd(e)}return t}n=(e=n).parentNode}return null}function ze(e){if(e=e[Pe]||e[Le]){var t=e.tag;if(5===t||6===t||13===t||26===t||27===t||3===t)return e}return null}function We(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(o(33))}function He(e){var t=e[Fe];return t||(t=e[Fe]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function qe(e){e[Ue]=!0}var Ge=new Set,Ke={};function Qe(e,t){Ye(e,t),Ye(e+"Capture",t)}function Ye(e,t){for(Ke[e]=t,e=0;e<t.length;e++)Ge.add(t[e])}var Je,$e,Xe=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ze={},et={};function tt(e,t,n){if(i=t,J.call(et,i)||!J.call(Ze,i)&&(Xe.test(i)?et[i]=!0:(Ze[i]=!0,0)))if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var r=t.toLowerCase().slice(0,5);if("data-"!==r&&"aria-"!==r)return void e.removeAttribute(t)}e.setAttribute(t,""+n)}var i}function nt(e,t,n){if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+n)}}function rt(e,t,n,r){if(null===r)e.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(n)}e.setAttributeNS(t,n,""+r)}}function it(e){if(void 0===Je)try{throw Error()}catch(Vs){var t=Vs.stack.trim().match(/\n( *(at )?)/);Je=t&&t[1]||"",$e=-1<Vs.stack.indexOf("\n    at")?" (<anonymous>)":-1<Vs.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+Je+e+$e}var st=!1;function ot(e,t){if(!e||st)return"";st=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(Vs){var r=Vs}Reflect.construct(e,[],n)}else{try{n.call()}catch(i){r=i}e.call(n.prototype)}}else{try{throw Error()}catch(s){r=s}(n=e())&&"function"===typeof n.catch&&n.catch(function(){})}}catch(o){if(o&&r&&"string"===typeof o.stack)return[o.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var i=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");i&&i.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var s=r.DetermineComponentFrameRoot(),o=s[0],a=s[1];if(o&&a){var l=o.split("\n"),c=a.split("\n");for(i=r=0;r<l.length&&!l[r].includes("DetermineComponentFrameRoot");)r++;for(;i<c.length&&!c[i].includes("DetermineComponentFrameRoot");)i++;if(r===l.length||i===c.length)for(r=l.length-1,i=c.length-1;1<=r&&0<=i&&l[r]!==c[i];)i--;for(;1<=r&&0<=i;r--,i--)if(l[r]!==c[i]){if(1!==r||1!==i)do{if(r--,0>--i||l[r]!==c[i]){var u="\n"+l[r].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=r&&0<=i);break}}}finally{st=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?it(n):""}function at(e){switch(e.tag){case 26:case 27:case 5:return it(e.type);case 16:return it("Lazy");case 13:return it("Suspense");case 19:return it("SuspenseList");case 0:case 15:return ot(e.type,!1);case 11:return ot(e.type.render,!1);case 1:return ot(e.type,!0);case 31:return it("Activity");default:return""}}function lt(e){try{var t="";do{t+=at(e),e=e.return}while(e);return t}catch(Vs){return"\nError generating stack: "+Vs.message+"\n"+Vs.stack}}function ct(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function ut(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function dt(e){e._valueTracker||(e._valueTracker=function(e){var t=ut(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function ht(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=ut(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function ft(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var pt=/[\n"\\]/g;function mt(e){return e.replace(pt,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function gt(e,t,n,r,i,s,o,a){e.name="",null!=o&&"function"!==typeof o&&"symbol"!==typeof o&&"boolean"!==typeof o?e.type=o:e.removeAttribute("type"),null!=t?"number"===o?(0===t&&""===e.value||e.value!=t)&&(e.value=""+ct(t)):e.value!==""+ct(t)&&(e.value=""+ct(t)):"submit"!==o&&"reset"!==o||e.removeAttribute("value"),null!=t?yt(e,o,ct(t)):null!=n?yt(e,o,ct(n)):null!=r&&e.removeAttribute("value"),null==i&&null!=s&&(e.defaultChecked=!!s),null!=i&&(e.checked=i&&"function"!==typeof i&&"symbol"!==typeof i),null!=a&&"function"!==typeof a&&"symbol"!==typeof a&&"boolean"!==typeof a?e.name=""+ct(a):e.removeAttribute("name")}function vt(e,t,n,r,i,s,o,a){if(null!=s&&"function"!==typeof s&&"symbol"!==typeof s&&"boolean"!==typeof s&&(e.type=s),null!=t||null!=n){if(!("submit"!==s&&"reset"!==s||void 0!==t&&null!==t))return;n=null!=n?""+ct(n):"",t=null!=t?""+ct(t):n,a||t===e.value||(e.value=t),e.defaultValue=t}r="function"!==typeof(r=null!=r?r:i)&&"symbol"!==typeof r&&!!r,e.checked=a?e.checked:!!r,e.defaultChecked=!!r,null!=o&&"function"!==typeof o&&"symbol"!==typeof o&&"boolean"!==typeof o&&(e.name=o)}function yt(e,t,n){"number"===t&&ft(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function bt(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ct(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function wt(e,t,n){null==t||((t=""+ct(t))!==e.value&&(e.value=t),null!=n)?e.defaultValue=null!=n?""+ct(n):"":e.defaultValue!==t&&(e.defaultValue=t)}function xt(e,t,n,r){if(null==t){if(null!=r){if(null!=n)throw Error(o(92));if(R(r)){if(1<r.length)throw Error(o(93));r=r[0]}n=r}null==n&&(n=""),t=n}n=ct(t),e.defaultValue=n,(r=e.textContent)===n&&""!==r&&null!==r&&(e.value=r)}function kt(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var St=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Et(e,t,n){var r=0===t.indexOf("--");null==n||"boolean"===typeof n||""===n?r?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":r?e.setProperty(t,n):"number"!==typeof n||0===n||St.has(t)?"float"===t?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function Ct(e,t,n){if(null!=t&&"object"!==typeof t)throw Error(o(62));if(e=e.style,null!=n){for(var r in n)!n.hasOwnProperty(r)||null!=t&&t.hasOwnProperty(r)||(0===r.indexOf("--")?e.setProperty(r,""):"float"===r?e.cssFloat="":e[r]="");for(var i in t)r=t[i],t.hasOwnProperty(i)&&n[i]!==r&&Et(e,i,r)}else for(var s in t)t.hasOwnProperty(s)&&Et(e,s,t[s])}function Nt(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var It=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),_t=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Tt(e){return _t.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var At=null;function Dt(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Pt=null,Rt=null;function Lt(e){var t=ze(e);if(t&&(e=t.stateNode)){var n=e[Re]||null;e:switch(e=t.stateNode,t.type){case"input":if(gt(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+mt(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=r[Re]||null;if(!i)throw Error(o(90));gt(r,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name)}}for(t=0;t<n.length;t++)(r=n[t]).form===e.form&&ht(r)}break e;case"textarea":wt(e,n.value,n.defaultValue);break e;case"select":null!=(t=n.value)&&bt(e,!!n.multiple,t,!1)}}}var jt=!1;function Ot(e,t,n){if(jt)return e(t,n);jt=!0;try{return e(t)}finally{if(jt=!1,(null!==Pt||null!==Rt)&&(zc(),Pt&&(t=Pt,e=Rt,Rt=Pt=null,Lt(t),e)))for(t=0;t<e.length;t++)Lt(e[t])}}function Mt(e,t){var n=e.stateNode;if(null===n)return null;var r=n[Re]||null;if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var Ft=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),Ut=!1;if(Ft)try{var Bt={};Object.defineProperty(Bt,"passive",{get:function(){Ut=!0}}),window.addEventListener("test",Bt,Bt),window.removeEventListener("test",Bt,Bt)}catch(Lh){Ut=!1}var Vt=null,zt=null,Wt=null;function Ht(){if(Wt)return Wt;var e,t,n=zt,r=n.length,i="value"in Vt?Vt.value:Vt.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[s-t];t++);return Wt=i.slice(e,1<t?1-t:void 0)}function qt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Gt(){return!0}function Kt(){return!1}function Qt(e){function t(t,n,r,i,s){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?Gt:Kt,this.isPropagationStopped=Kt,this}return h(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Gt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Gt)},persist:function(){},isPersistent:Gt}),t}var Yt,Jt,$t,Xt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zt=Qt(Xt),en=h({},Xt,{view:0,detail:0}),tn=Qt(en),nn=h({},en,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:pn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==$t&&($t&&"mousemove"===e.type?(Yt=e.screenX-$t.screenX,Jt=e.screenY-$t.screenY):Jt=Yt=0,$t=e),Yt)},movementY:function(e){return"movementY"in e?e.movementY:Jt}}),rn=Qt(nn),sn=Qt(h({},nn,{dataTransfer:0})),on=Qt(h({},en,{relatedTarget:0})),an=Qt(h({},Xt,{animationName:0,elapsedTime:0,pseudoElement:0})),ln=Qt(h({},Xt,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),cn=Qt(h({},Xt,{data:0})),un={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=hn[e])&&!!t[e]}function pn(){return fn}var mn=Qt(h({},en,{key:function(e){if(e.key){var t=un[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=qt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?dn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:pn,charCode:function(e){return"keypress"===e.type?qt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?qt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),gn=Qt(h({},nn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),vn=Qt(h({},en,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:pn})),yn=Qt(h({},Xt,{propertyName:0,elapsedTime:0,pseudoElement:0})),bn=Qt(h({},nn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),wn=Qt(h({},Xt,{newState:0,oldState:0})),xn=[9,13,27,32],kn=Ft&&"CompositionEvent"in window,Sn=null;Ft&&"documentMode"in document&&(Sn=document.documentMode);var En=Ft&&"TextEvent"in window&&!Sn,Cn=Ft&&(!kn||Sn&&8<Sn&&11>=Sn),Nn=String.fromCharCode(32),In=!1;function _n(e,t){switch(e){case"keyup":return-1!==xn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Tn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var An=!1;var Dn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Pn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Dn[e.type]:"textarea"===t}function Rn(e,t,n,r){Pt?Rt?Rt.push(r):Rt=[r]:Pt=r,0<(t=qu(t,"onChange")).length&&(n=new Zt("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Ln=null,jn=null;function On(e){Mu(e,0)}function Mn(e){if(ht(We(e)))return e}function Fn(e,t){if("change"===e)return t}var Un=!1;if(Ft){var Bn;if(Ft){var Vn="oninput"in document;if(!Vn){var zn=document.createElement("div");zn.setAttribute("oninput","return;"),Vn="function"===typeof zn.oninput}Bn=Vn}else Bn=!1;Un=Bn&&(!document.documentMode||9<document.documentMode)}function Wn(){Ln&&(Ln.detachEvent("onpropertychange",Hn),jn=Ln=null)}function Hn(e){if("value"===e.propertyName&&Mn(jn)){var t=[];Rn(t,jn,e,Dt(e)),Ot(On,t)}}function qn(e,t,n){"focusin"===e?(Wn(),jn=n,(Ln=t).attachEvent("onpropertychange",Hn)):"focusout"===e&&Wn()}function Gn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Mn(jn)}function Kn(e,t){if("click"===e)return Mn(t)}function Qn(e,t){if("input"===e||"change"===e)return Mn(t)}var Yn="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function Jn(e,t){if(Yn(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!J.call(t,i)||!Yn(e[i],t[i]))return!1}return!0}function $n(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Xn(e,t){var n,r=$n(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=$n(r)}}function Zn(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?Zn(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function er(e){for(var t=ft((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=ft((e=t.contentWindow).document)}return t}function tr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var nr=Ft&&"documentMode"in document&&11>=document.documentMode,rr=null,ir=null,sr=null,or=!1;function ar(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;or||null==rr||rr!==ft(r)||("selectionStart"in(r=rr)&&tr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},sr&&Jn(sr,r)||(sr=r,0<(r=qu(ir,"onSelect")).length&&(t=new Zt("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=rr)))}function lr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var cr={animationend:lr("Animation","AnimationEnd"),animationiteration:lr("Animation","AnimationIteration"),animationstart:lr("Animation","AnimationStart"),transitionrun:lr("Transition","TransitionRun"),transitionstart:lr("Transition","TransitionStart"),transitioncancel:lr("Transition","TransitionCancel"),transitionend:lr("Transition","TransitionEnd")},ur={},dr={};function hr(e){if(ur[e])return ur[e];if(!cr[e])return e;var t,n=cr[e];for(t in n)if(n.hasOwnProperty(t)&&t in dr)return ur[e]=n[t];return e}Ft&&(dr=document.createElement("div").style,"AnimationEvent"in window||(delete cr.animationend.animation,delete cr.animationiteration.animation,delete cr.animationstart.animation),"TransitionEvent"in window||delete cr.transitionend.transition);var fr=hr("animationend"),pr=hr("animationiteration"),mr=hr("animationstart"),gr=hr("transitionrun"),vr=hr("transitionstart"),yr=hr("transitioncancel"),br=hr("transitionend"),wr=new Map,xr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function kr(e,t){wr.set(e,t),Qe(t,[e])}xr.push("scrollEnd");var Sr=new WeakMap;function Er(e,t){if("object"===typeof e&&null!==e){var n=Sr.get(e);return void 0!==n?n:(t={value:e,source:t,stack:lt(t)},Sr.set(e,t),t)}return{value:e,source:t,stack:lt(t)}}var Cr=[],Nr=0,Ir=0;function _r(){for(var e=Nr,t=Ir=Nr=0;t<e;){var n=Cr[t];Cr[t++]=null;var r=Cr[t];Cr[t++]=null;var i=Cr[t];Cr[t++]=null;var s=Cr[t];if(Cr[t++]=null,null!==r&&null!==i){var o=r.pending;null===o?i.next=i:(i.next=o.next,o.next=i),r.pending=i}0!==s&&Pr(n,i,s)}}function Tr(e,t,n,r){Cr[Nr++]=e,Cr[Nr++]=t,Cr[Nr++]=n,Cr[Nr++]=r,Ir|=r,e.lanes|=r,null!==(e=e.alternate)&&(e.lanes|=r)}function Ar(e,t,n,r){return Tr(e,t,n,r),Rr(e)}function Dr(e,t){return Tr(e,null,null,t),Rr(e)}function Pr(e,t,n){e.lanes|=n;var r=e.alternate;null!==r&&(r.lanes|=n);for(var i=!1,s=e.return;null!==s;)s.childLanes|=n,null!==(r=s.alternate)&&(r.childLanes|=n),22===s.tag&&(null===(e=s.stateNode)||1&e._visibility||(i=!0)),e=s,s=s.return;return 3===e.tag?(s=e.stateNode,i&&null!==t&&(i=31-fe(n),null===(r=(e=s.hiddenUpdates)[i])?e[i]=[t]:r.push(t),t.lane=536870912|n),s):null}function Rr(e){if(50<Rc)throw Rc=0,Lc=null,Error(o(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var Lr={};function jr(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Or(e,t,n,r){return new jr(e,t,n,r)}function Mr(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Fr(e,t){var n=e.alternate;return null===n?((n=Or(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=65011712&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Ur(e,t){e.flags&=65011714;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Br(e,t,n,r,i,s){var a=0;if(r=e,"function"===typeof e)Mr(e)&&(a=1);else if("string"===typeof e)a=function(e,t,n){if(1===n||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!==typeof t.precedence||"string"!==typeof t.href||""===t.href)break;return!0;case"link":if("string"!==typeof t.rel||"string"!==typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"===typeof t.precedence&&null==e);case"script":if(t.async&&"function"!==typeof t.async&&"symbol"!==typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"===typeof t.src)return!0}return!1}(e,n,z.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case I:return(e=Or(31,n,t,i)).elementType=I,e.lanes=s,e;case g:return Vr(n.children,i,s,t);case v:a=8,i|=24;break;case y:return(e=Or(12,n,t,2|i)).elementType=y,e.lanes=s,e;case S:return(e=Or(13,n,t,i)).elementType=S,e.lanes=s,e;case E:return(e=Or(19,n,t,i)).elementType=E,e.lanes=s,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case b:case x:a=10;break e;case w:a=9;break e;case k:a=11;break e;case C:a=14;break e;case N:a=16,r=null;break e}a=29,n=Error(o(130,null===e?"null":typeof e,"")),r=null}return(t=Or(a,n,t,i)).elementType=e,t.type=r,t.lanes=s,t}function Vr(e,t,n,r){return(e=Or(7,e,r,t)).lanes=n,e}function zr(e,t,n){return(e=Or(6,e,null,t)).lanes=n,e}function Wr(e,t,n){return(t=Or(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Hr=[],qr=0,Gr=null,Kr=0,Qr=[],Yr=0,Jr=null,$r=1,Xr="";function Zr(e,t){Hr[qr++]=Kr,Hr[qr++]=Gr,Gr=e,Kr=t}function ei(e,t,n){Qr[Yr++]=$r,Qr[Yr++]=Xr,Qr[Yr++]=Jr,Jr=e;var r=$r;e=Xr;var i=32-fe(r)-1;r&=~(1<<i),n+=1;var s=32-fe(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,$r=1<<32-fe(t)+i|n<<i|r,Xr=s+e}else $r=1<<s|n<<i|r,Xr=e}function ti(e){null!==e.return&&(Zr(e,1),ei(e,1,0))}function ni(e){for(;e===Gr;)Gr=Hr[--qr],Hr[qr]=null,Kr=Hr[--qr],Hr[qr]=null;for(;e===Jr;)Jr=Qr[--Yr],Qr[Yr]=null,Xr=Qr[--Yr],Qr[Yr]=null,$r=Qr[--Yr],Qr[Yr]=null}var ri=null,ii=null,si=!1,oi=null,ai=!1,li=Error(o(519));function ci(e){throw mi(Er(Error(o(418,"")),e)),li}function ui(e){var t=e.stateNode,n=e.type,r=e.memoizedProps;switch(t[Pe]=e,t[Re]=r,n){case"dialog":Fu("cancel",t),Fu("close",t);break;case"iframe":case"object":case"embed":Fu("load",t);break;case"video":case"audio":for(n=0;n<ju.length;n++)Fu(ju[n],t);break;case"source":Fu("error",t);break;case"img":case"image":case"link":Fu("error",t),Fu("load",t);break;case"details":Fu("toggle",t);break;case"input":Fu("invalid",t),vt(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0),dt(t);break;case"select":Fu("invalid",t);break;case"textarea":Fu("invalid",t),xt(t,r.value,r.defaultValue,r.children),dt(t)}"string"!==typeof(n=r.children)&&"number"!==typeof n&&"bigint"!==typeof n||t.textContent===""+n||!0===r.suppressHydrationWarning||$u(t.textContent,n)?(null!=r.popover&&(Fu("beforetoggle",t),Fu("toggle",t)),null!=r.onScroll&&Fu("scroll",t),null!=r.onScrollEnd&&Fu("scrollend",t),null!=r.onClick&&(t.onclick=Xu),t=!0):t=!1,t||ci(e)}function di(e){for(ri=e.return;ri;)switch(ri.tag){case 5:case 13:return void(ai=!1);case 27:case 3:return void(ai=!0);default:ri=ri.return}}function hi(e){if(e!==ri)return!1;if(!si)return di(e),si=!0,!1;var t,n=e.tag;if((t=3!==n&&27!==n)&&((t=5===n)&&(t=!("form"!==(t=e.type)&&"button"!==t)||ad(e.type,e.memoizedProps)),t=!t),t&&ii&&ci(e),di(e),13===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,n=0;e;){if(8===e.nodeType)if("/$"===(t=e.data)){if(0===n){ii=yd(e.nextSibling);break e}n--}else"$"!==t&&"$!"!==t&&"$?"!==t||n++;e=e.nextSibling}ii=null}}else 27===n?(n=ii,pd(e.type)?(e=bd,bd=null,ii=e):ii=n):ii=ri?yd(e.stateNode.nextSibling):null;return!0}function fi(){ii=ri=null,si=!1}function pi(){var e=oi;return null!==e&&(null===wc?wc=e:wc.push.apply(wc,e),oi=null),e}function mi(e){null===oi?oi=[e]:oi.push(e)}var gi=U(null),vi=null,yi=null;function bi(e,t,n){V(gi,t._currentValue),t._currentValue=n}function wi(e){e._currentValue=gi.current,B(gi)}function xi(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function ki(e,t,n,r){var i=e.child;for(null!==i&&(i.return=e);null!==i;){var s=i.dependencies;if(null!==s){var a=i.child;s=s.firstContext;e:for(;null!==s;){var l=s;s=i;for(var c=0;c<t.length;c++)if(l.context===t[c]){s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),xi(s.return,n,e),r||(a=null);break e}s=l.next}}else if(18===i.tag){if(null===(a=i.return))throw Error(o(341));a.lanes|=n,null!==(s=a.alternate)&&(s.lanes|=n),xi(a,n,e),a=null}else a=i.child;if(null!==a)a.return=i;else for(a=i;null!==a;){if(a===e){a=null;break}if(null!==(i=a.sibling)){i.return=a.return,a=i;break}a=a.return}i=a}}function Si(e,t,n,r){e=null;for(var i=t,s=!1;null!==i;){if(!s)if(0!==(524288&i.flags))s=!0;else if(0!==(262144&i.flags))break;if(10===i.tag){var a=i.alternate;if(null===a)throw Error(o(387));if(null!==(a=a.memoizedProps)){var l=i.type;Yn(i.pendingProps.value,a.value)||(null!==e?e.push(l):e=[l])}}else if(i===q.current){if(null===(a=i.alternate))throw Error(o(387));a.memoizedState.memoizedState!==i.memoizedState.memoizedState&&(null!==e?e.push(Yd):e=[Yd])}i=i.return}null!==e&&ki(t,e,n,r),t.flags|=262144}function Ei(e){for(e=e.firstContext;null!==e;){if(!Yn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ci(e){vi=e,yi=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function Ni(e){return _i(vi,e)}function Ii(e,t){return null===vi&&Ci(e),_i(e,t)}function _i(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},null===yi){if(null===e)throw Error(o(308));yi=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else yi=yi.next=t;return n}var Ti="undefined"!==typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},Ai=r.unstable_scheduleCallback,Di=r.unstable_NormalPriority,Pi={$$typeof:x,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ri(){return{controller:new Ti,data:new Map,refCount:0}}function Li(e){e.refCount--,0===e.refCount&&Ai(Di,function(){e.controller.abort()})}var ji=null,Oi=0,Mi=0,Fi=null;function Ui(){if(0===--Oi&&null!==ji){null!==Fi&&(Fi.status="fulfilled");var e=ji;ji=null,Mi=0,Fi=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var Bi=L.S;L.S=function(e,t){"object"===typeof t&&null!==t&&"function"===typeof t.then&&function(e,t){if(null===ji){var n=ji=[];Oi=0,Mi=Au(),Fi={status:"pending",value:void 0,then:function(e){n.push(e)}}}Oi++,t.then(Ui,Ui)}(0,t),null!==Bi&&Bi(e,t)};var Vi=U(null);function zi(){var e=Vi.current;return null!==e?e:ic.pooledCache}function Wi(e,t){V(Vi,null===t?Vi.current:t.pool)}function Hi(){var e=zi();return null===e?null:{parent:Pi._currentValue,pool:e}}var qi=Error(o(460)),Gi=Error(o(474)),Ki=Error(o(542)),Qi={then:function(){}};function Yi(e){return"fulfilled"===(e=e.status)||"rejected"===e}function Ji(){}function $i(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then(Ji,Ji),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw es(e=t.reason),e;default:if("string"===typeof t.status)t.then(Ji,Ji);else{if(null!==(e=ic)&&100<e.shellSuspendCounter)throw Error(o(482));(e=t).status="pending",e.then(function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}},function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw es(e=t.reason),e}throw Xi=t,qi}}var Xi=null;function Zi(){if(null===Xi)throw Error(o(459));var e=Xi;return Xi=null,e}function es(e){if(e===qi||e===Ki)throw Error(o(483))}var ts=!1;function ns(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function rs(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function is(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ss(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&rc)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,t=Rr(e),Pr(e,null,n),t}return Tr(e,r,t,n),Rr(e)}function os(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194048&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Ie(e,n)}}function as(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var o={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===s?i=s=o:s=s.next=o,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,callbacks:r.callbacks},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var ls=!1;function cs(){if(ls){if(null!==Fi)throw Fi}}function us(e,t,n,r){ls=!1;var i=e.updateQueue;ts=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var l=a,c=l.next;l.next=null,null===o?s=c:o.next=c,o=l;var u=e.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==o&&(null===a?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(null!==s){var d=i.baseState;for(o=0,u=c=l=null,a=s;;){var f=-536870913&a.lane,p=f!==a.lane;if(p?(oc&f)===f:(r&f)===f){0!==f&&f===Mi&&(ls=!0),null!==u&&(u=u.next={lane:0,tag:a.tag,payload:a.payload,callback:null,next:null});e:{var m=e,g=a;f=t;var v=n;switch(g.tag){case 1:if("function"===typeof(m=g.payload)){d=m.call(v,d,f);break e}d=m;break e;case 3:m.flags=-65537&m.flags|128;case 0:if(null===(f="function"===typeof(m=g.payload)?m.call(v,d,f):m)||void 0===f)break e;d=h({},d,f);break e;case 2:ts=!0}}null!==(f=a.callback)&&(e.flags|=64,p&&(e.flags|=8192),null===(p=i.callbacks)?i.callbacks=[f]:p.push(f))}else p={lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(c=u=p,l=d):u=u.next=p,o|=f;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(p=a).next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}null===u&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null===s&&(i.shared.lanes=0),pc|=o,e.lanes=o,e.memoizedState=d}}function ds(e,t){if("function"!==typeof e)throw Error(o(191,e));e.call(t)}function hs(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)ds(n[e],t)}var fs=U(null),ps=U(0);function ms(e,t){V(ps,e=hc),V(fs,t),hc=e|t.baseLanes}function gs(){V(ps,hc),V(fs,fs.current)}function vs(){hc=ps.current,B(fs),B(ps)}var ys=0,bs=null,ws=null,xs=null,ks=!1,Ss=!1,Es=!1,Cs=0,Ns=0,Is=null,_s=0;function Ts(){throw Error(o(321))}function As(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Yn(e[n],t[n]))return!1;return!0}function Ds(e,t,n,r,i,s){return ys=s,bs=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,L.H=null===e||null===e.memoizedState?Ko:Qo,Es=!1,s=n(r,i),Es=!1,Ss&&(s=Rs(t,n,r,i)),Ps(e),s}function Ps(e){L.H=Go;var t=null!==ws&&null!==ws.next;if(ys=0,xs=ws=bs=null,ks=!1,Ns=0,Is=null,t)throw Error(o(300));null===e||_a||null!==(e=e.dependencies)&&Ei(e)&&(_a=!0)}function Rs(e,t,n,r){bs=e;var i=0;do{if(Ss&&(Is=null),Ns=0,Ss=!1,25<=i)throw Error(o(301));if(i+=1,xs=ws=null,null!=e.updateQueue){var s=e.updateQueue;s.lastEffect=null,s.events=null,s.stores=null,null!=s.memoCache&&(s.memoCache.index=0)}L.H=Yo,s=t(n,r)}while(Ss);return s}function Ls(){var e=L.H,t=e.useState()[0];return t="function"===typeof t.then?Bs(t):t,e=e.useState()[0],(null!==ws?ws.memoizedState:null)!==e&&(bs.flags|=1024),t}function js(){var e=0!==Cs;return Cs=0,e}function Os(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function Ms(e){if(ks){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}ks=!1}ys=0,xs=ws=bs=null,Ss=!1,Ns=Cs=0,Is=null}function Fs(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===xs?bs.memoizedState=xs=e:xs=xs.next=e,xs}function Us(){if(null===ws){var e=bs.alternate;e=null!==e?e.memoizedState:null}else e=ws.next;var t=null===xs?bs.memoizedState:xs.next;if(null!==t)xs=t,ws=e;else{if(null===e){if(null===bs.alternate)throw Error(o(467));throw Error(o(310))}e={memoizedState:(ws=e).memoizedState,baseState:ws.baseState,baseQueue:ws.baseQueue,queue:ws.queue,next:null},null===xs?bs.memoizedState=xs=e:xs=xs.next=e}return xs}function Bs(e){var t=Ns;return Ns+=1,null===Is&&(Is=[]),e=$i(Is,e,t),t=bs,null===(null===xs?t.memoizedState:xs.next)&&(t=t.alternate,L.H=null===t||null===t.memoizedState?Ko:Qo),e}function zs(e){if(null!==e&&"object"===typeof e){if("function"===typeof e.then)return Bs(e);if(e.$$typeof===x)return Ni(e)}throw Error(o(438,String(e)))}function Ws(e){var t=null,n=bs.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var r=bs.alternate;null!==r&&(null!==(r=r.updateQueue)&&(null!=(r=r.memoCache)&&(t={data:r.data.map(function(e){return e.slice()}),index:0})))}if(null==t&&(t={data:[],index:0}),null===n&&(n={lastEffect:null,events:null,stores:null,memoCache:null},bs.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=_;return t.index++,n}function Hs(e,t){return"function"===typeof t?t(e):t}function qs(e){return Gs(Us(),ws,e)}function Gs(e,t,n){var r=e.queue;if(null===r)throw Error(o(311));r.lastRenderedReducer=n;var i=e.baseQueue,s=r.pending;if(null!==s){if(null!==i){var a=i.next;i.next=s.next,s.next=a}t.baseQueue=i=s,r.pending=null}if(s=e.baseState,null===i)e.memoizedState=s;else{var l=a=null,c=null,u=t=i.next,d=!1;do{var h=-536870913&u.lane;if(h!==u.lane?(oc&h)===h:(ys&h)===h){var f=u.revertLane;if(0===f)null!==c&&(c=c.next={lane:0,revertLane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),h===Mi&&(d=!0);else{if((ys&f)===f){u=u.next,f===Mi&&(d=!0);continue}h={lane:0,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=h,a=s):c=c.next=h,bs.lanes|=f,pc|=f}h=u.action,Es&&n(s,h),s=u.hasEagerState?u.eagerState:n(s,h)}else f={lane:h,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=f,a=s):c=c.next=f,bs.lanes|=h,pc|=h;u=u.next}while(null!==u&&u!==t);if(null===c?a=s:c.next=l,!Yn(s,e.memoizedState)&&(_a=!0,d&&null!==(n=Fi)))throw n;e.memoizedState=s,e.baseState=a,e.baseQueue=c,r.lastRenderedState=s}return null===i&&(r.lanes=0),[e.memoizedState,r.dispatch]}function Ks(e){var t=Us(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{s=e(s,a.action),a=a.next}while(a!==i);Yn(s,t.memoizedState)||(_a=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function Qs(e,t,n){var r=bs,i=Us(),s=si;if(s){if(void 0===n)throw Error(o(407));n=n()}else n=t();var a=!Yn((ws||i).memoizedState,n);if(a&&(i.memoizedState=n,_a=!0),i=i.queue,yo(2048,8,$s.bind(null,r,i,e),[e]),i.getSnapshot!==t||a||null!==xs&&1&xs.memoizedState.tag){if(r.flags|=2048,mo(9,{destroy:void 0,resource:void 0},Js.bind(null,r,i,n,t),null),null===ic)throw Error(o(349));s||0!==(124&ys)||Ys(r,t,n)}return n}function Ys(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=bs.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},bs.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Js(e,t,n,r){t.value=n,t.getSnapshot=r,Xs(t)&&Zs(e)}function $s(e,t,n){return n(function(){Xs(t)&&Zs(e)})}function Xs(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Yn(e,n)}catch(r){return!0}}function Zs(e){var t=Dr(e,2);null!==t&&Mc(t,e,2)}function eo(e){var t=Fs();if("function"===typeof e){var n=e;if(e=n(),Es){he(!0);try{n()}finally{he(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hs,lastRenderedState:e},t}function to(e,t,n,r){return e.baseState=n,Gs(e,ws,"function"===typeof r?r:Hs)}function no(e,t,n,r,i){if(Wo(e))throw Error(o(485));if(null!==(e=t.action)){var s={payload:i,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){s.listeners.push(e)}};null!==L.T?n(!0):s.isTransition=!1,r(s),null===(n=t.pending)?(s.next=t.pending=s,ro(t,s)):(s.next=n.next,t.pending=n.next=s)}}function ro(e,t){var n=t.action,r=t.payload,i=e.state;if(t.isTransition){var s=L.T,o={};L.T=o;try{var a=n(i,r),l=L.S;null!==l&&l(o,a),io(e,t,a)}catch(c){oo(e,t,c)}finally{L.T=s}}else try{io(e,t,s=n(i,r))}catch(u){oo(e,t,u)}}function io(e,t,n){null!==n&&"object"===typeof n&&"function"===typeof n.then?n.then(function(n){so(e,t,n)},function(n){return oo(e,t,n)}):so(e,t,n)}function so(e,t,n){t.status="fulfilled",t.value=n,ao(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,ro(e,n)))}function oo(e,t,n){var r=e.pending;if(e.pending=null,null!==r){r=r.next;do{t.status="rejected",t.reason=n,ao(t),t=t.next}while(t!==r)}e.action=null}function ao(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function lo(e,t){return t}function co(e,t){if(si){var n=ic.formState;if(null!==n){e:{var r=bs;if(si){if(ii){t:{for(var i=ii,s=ai;8!==i.nodeType;){if(!s){i=null;break t}if(null===(i=yd(i.nextSibling))){i=null;break t}}i="F!"===(s=i.data)||"F"===s?i:null}if(i){ii=yd(i.nextSibling),r="F!"===i.data;break e}}ci(r)}r=!1}r&&(t=n[0])}}return(n=Fs()).memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:lo,lastRenderedState:t},n.queue=r,n=Bo.bind(null,bs,r),r.dispatch=n,r=eo(!1),s=zo.bind(null,bs,!1,r.queue),i={state:t,dispatch:null,action:e,pending:null},(r=Fs()).queue=i,n=no.bind(null,bs,i,s,n),i.dispatch=n,r.memoizedState=e,[t,n,!1]}function uo(e){return ho(Us(),ws,e)}function ho(e,t,n){if(t=Gs(e,t,lo)[0],e=qs(Hs)[0],"object"===typeof t&&null!==t&&"function"===typeof t.then)try{var r=Bs(t)}catch(Vs){if(Vs===qi)throw Ki;throw Vs}else r=t;var i=(t=Us()).queue,s=i.dispatch;return n!==t.memoizedState&&(bs.flags|=2048,mo(9,{destroy:void 0,resource:void 0},fo.bind(null,i,n),null)),[r,s,e]}function fo(e,t){e.action=t}function po(e){var t=Us(),n=ws;if(null!==n)return ho(t,n,e);Us(),t=t.memoizedState;var r=(n=Us()).queue.dispatch;return n.memoizedState=e,[t,r,!1]}function mo(e,t,n,r){return e={tag:e,create:n,deps:r,inst:t,next:null},null===(t=bs.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},bs.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function go(){return Us().memoizedState}function vo(e,t,n,r){var i=Fs();r=void 0===r?null:r,bs.flags|=e,i.memoizedState=mo(1|t,{destroy:void 0,resource:void 0},n,r)}function yo(e,t,n,r){var i=Us();r=void 0===r?null:r;var s=i.memoizedState.inst;null!==ws&&null!==r&&As(r,ws.memoizedState.deps)?i.memoizedState=mo(t,s,n,r):(bs.flags|=e,i.memoizedState=mo(1|t,s,n,r))}function bo(e,t){vo(8390656,8,e,t)}function wo(e,t){yo(2048,8,e,t)}function xo(e,t){return yo(4,2,e,t)}function ko(e,t){return yo(4,4,e,t)}function So(e,t){if("function"===typeof t){e=e();var n=t(e);return function(){"function"===typeof n?n():t(null)}}if(null!==t&&void 0!==t)return e=e(),t.current=e,function(){t.current=null}}function Eo(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,yo(4,4,So.bind(null,t,e),n)}function Co(){}function No(e,t){var n=Us();t=void 0===t?null:t;var r=n.memoizedState;return null!==t&&As(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Io(e,t){var n=Us();t=void 0===t?null:t;var r=n.memoizedState;if(null!==t&&As(t,r[1]))return r[0];if(r=e(),Es){he(!0);try{e()}finally{he(!1)}}return n.memoizedState=[r,t],r}function _o(e,t,n){return void 0===n||0!==(1073741824&ys)?e.memoizedState=t:(e.memoizedState=n,e=Oc(),bs.lanes|=e,pc|=e,n)}function To(e,t,n,r){return Yn(n,t)?n:null!==fs.current?(e=_o(e,n,r),Yn(e,t)||(_a=!0),e):0===(42&ys)?(_a=!0,e.memoizedState=n):(e=Oc(),bs.lanes|=e,pc|=e,t)}function Ao(e,t,n,r,i){var s=j.p;j.p=0!==s&&8>s?s:8;var o=L.T,a={};L.T=a,zo(e,!1,t,n);try{var l=i(),c=L.S;if(null!==c&&c(a,l),null!==l&&"object"===typeof l&&"function"===typeof l.then){var u=function(e,t){var n=[],r={status:"pending",value:null,reason:null,then:function(e){n.push(e)}};return e.then(function(){r.status="fulfilled",r.value=t;for(var e=0;e<n.length;e++)(0,n[e])(t)},function(e){for(r.status="rejected",r.reason=e,e=0;e<n.length;e++)(0,n[e])(void 0)}),r}(l,r);Vo(e,t,u,jc())}else Vo(e,t,r,jc())}catch(d){Vo(e,t,{then:function(){},status:"rejected",reason:d},jc())}finally{j.p=s,L.T=o}}function Do(){}function Po(e,t,n,r){if(5!==e.tag)throw Error(o(476));var i=Ro(e).queue;Ao(e,i,t,O,null===n?Do:function(){return Lo(e),n(r)})}function Ro(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:O,baseState:O,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hs,lastRenderedState:O},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hs,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function Lo(e){Vo(e,Ro(e).next.queue,{},jc())}function jo(){return Ni(Yd)}function Oo(){return Us().memoizedState}function Mo(){return Us().memoizedState}function Fo(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=jc(),r=ss(t,e=is(n),n);return null!==r&&(Mc(r,t,n),os(r,t,n)),t={cache:Ri()},void(e.payload=t)}t=t.return}}function Uo(e,t,n){var r=jc();n={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},Wo(e)?Ho(t,n):null!==(n=Ar(e,t,n,r))&&(Mc(n,e,r),qo(n,t,r))}function Bo(e,t,n){Vo(e,t,n,jc())}function Vo(e,t,n,r){var i={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(Wo(e))Ho(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Yn(a,o))return Tr(e,t,i,0),null===ic&&_r(),!1}catch(l){}if(null!==(n=Ar(e,t,i,r)))return Mc(n,e,r),qo(n,t,r),!0}return!1}function zo(e,t,n,r){if(r={lane:2,revertLane:Au(),action:r,hasEagerState:!1,eagerState:null,next:null},Wo(e)){if(t)throw Error(o(479))}else null!==(t=Ar(e,n,r,2))&&Mc(t,e,2)}function Wo(e){var t=e.alternate;return e===bs||null!==t&&t===bs}function Ho(e,t){Ss=ks=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function qo(e,t,n){if(0!==(4194048&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Ie(e,n)}}var Go={readContext:Ni,use:zs,useCallback:Ts,useContext:Ts,useEffect:Ts,useImperativeHandle:Ts,useLayoutEffect:Ts,useInsertionEffect:Ts,useMemo:Ts,useReducer:Ts,useRef:Ts,useState:Ts,useDebugValue:Ts,useDeferredValue:Ts,useTransition:Ts,useSyncExternalStore:Ts,useId:Ts,useHostTransitionStatus:Ts,useFormState:Ts,useActionState:Ts,useOptimistic:Ts,useMemoCache:Ts,useCacheRefresh:Ts},Ko={readContext:Ni,use:zs,useCallback:function(e,t){return Fs().memoizedState=[e,void 0===t?null:t],e},useContext:Ni,useEffect:bo,useImperativeHandle:function(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,vo(4194308,4,So.bind(null,t,e),n)},useLayoutEffect:function(e,t){return vo(4194308,4,e,t)},useInsertionEffect:function(e,t){vo(4,2,e,t)},useMemo:function(e,t){var n=Fs();t=void 0===t?null:t;var r=e();if(Es){he(!0);try{e()}finally{he(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=Fs();if(void 0!==n){var i=n(t);if(Es){he(!0);try{n(t)}finally{he(!1)}}}else i=t;return r.memoizedState=r.baseState=i,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:i},r.queue=e,e=e.dispatch=Uo.bind(null,bs,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Fs().memoizedState=e},useState:function(e){var t=(e=eo(e)).queue,n=Bo.bind(null,bs,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Co,useDeferredValue:function(e,t){return _o(Fs(),e,t)},useTransition:function(){var e=eo(!1);return e=Ao.bind(null,bs,e.queue,!0,!1),Fs().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var r=bs,i=Fs();if(si){if(void 0===n)throw Error(o(407));n=n()}else{if(n=t(),null===ic)throw Error(o(349));0!==(124&oc)||Ys(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,bo($s.bind(null,r,s,e),[e]),r.flags|=2048,mo(9,{destroy:void 0,resource:void 0},Js.bind(null,r,s,n,t),null),n},useId:function(){var e=Fs(),t=ic.identifierPrefix;if(si){var n=Xr;t="\xab"+t+"R"+(n=($r&~(1<<32-fe($r)-1)).toString(32)+n),0<(n=Cs++)&&(t+="H"+n.toString(32)),t+="\xbb"}else t="\xab"+t+"r"+(n=_s++).toString(32)+"\xbb";return e.memoizedState=t},useHostTransitionStatus:jo,useFormState:co,useActionState:co,useOptimistic:function(e){var t=Fs();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=zo.bind(null,bs,!0,n),n.dispatch=t,[e,t]},useMemoCache:Ws,useCacheRefresh:function(){return Fs().memoizedState=Fo.bind(null,bs)}},Qo={readContext:Ni,use:zs,useCallback:No,useContext:Ni,useEffect:wo,useImperativeHandle:Eo,useInsertionEffect:xo,useLayoutEffect:ko,useMemo:Io,useReducer:qs,useRef:go,useState:function(){return qs(Hs)},useDebugValue:Co,useDeferredValue:function(e,t){return To(Us(),ws.memoizedState,e,t)},useTransition:function(){var e=qs(Hs)[0],t=Us().memoizedState;return["boolean"===typeof e?e:Bs(e),t]},useSyncExternalStore:Qs,useId:Oo,useHostTransitionStatus:jo,useFormState:uo,useActionState:uo,useOptimistic:function(e,t){return to(Us(),0,e,t)},useMemoCache:Ws,useCacheRefresh:Mo},Yo={readContext:Ni,use:zs,useCallback:No,useContext:Ni,useEffect:wo,useImperativeHandle:Eo,useInsertionEffect:xo,useLayoutEffect:ko,useMemo:Io,useReducer:Ks,useRef:go,useState:function(){return Ks(Hs)},useDebugValue:Co,useDeferredValue:function(e,t){var n=Us();return null===ws?_o(n,e,t):To(n,ws.memoizedState,e,t)},useTransition:function(){var e=Ks(Hs)[0],t=Us().memoizedState;return["boolean"===typeof e?e:Bs(e),t]},useSyncExternalStore:Qs,useId:Oo,useHostTransitionStatus:jo,useFormState:po,useActionState:po,useOptimistic:function(e,t){var n=Us();return null!==ws?to(n,0,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:Ws,useCacheRefresh:Mo},Jo=null,$o=0;function Xo(e){var t=$o;return $o+=1,null===Jo&&(Jo=[]),$i(Jo,e,t)}function Zo(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function ea(e,t){if(t.$$typeof===f)throw Error(o(525));throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ta(e){return(0,e._init)(e._payload)}function na(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function i(e,t){return(e=Fr(e,t)).index=0,e.sibling=null,e}function s(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=67108866,n):r:(t.flags|=67108866,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=zr(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var s=n.type;return s===g?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===N&&ta(s)===t.type)?(Zo(t=i(t,n.props),n),t.return=e,t):(Zo(t=Br(n.type,n.key,n.props,null,e.mode,r),n),t.return=e,t)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Wr(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,r,s){return null===t||7!==t.tag?((t=Vr(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t||"bigint"===typeof t)return(t=zr(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case p:return Zo(n=Br(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case m:return(t=Wr(t,e.mode,n)).return=e,t;case N:return h(e,t=(0,t._init)(t._payload),n)}if(R(t)||A(t))return(t=Vr(t,e.mode,n,null)).return=e,t;if("function"===typeof t.then)return h(e,Xo(t),n);if(t.$$typeof===x)return h(e,Ii(e,t),n);ea(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n||"bigint"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case p:return n.key===i?c(e,t,n,r):null;case m:return n.key===i?u(e,t,n,r):null;case N:return f(e,t,n=(i=n._init)(n._payload),r)}if(R(n)||A(n))return null!==i?null:d(e,t,n,r,null);if("function"===typeof n.then)return f(e,t,Xo(n),r);if(n.$$typeof===x)return f(e,t,Ii(e,n),r);ea(e,n)}return null}function v(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r||"bigint"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case p:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case m:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case N:return v(e,t,n,r=(0,r._init)(r._payload),i)}if(R(r)||A(r))return d(t,e=e.get(n)||null,r,i,null);if("function"===typeof r.then)return v(e,t,n,Xo(r),i);if(r.$$typeof===x)return v(e,t,n,Ii(t,r),i);ea(t,r)}return null}function y(l,c,u,d){if("object"===typeof u&&null!==u&&u.type===g&&null===u.key&&(u=u.props.children),"object"===typeof u&&null!==u){switch(u.$$typeof){case p:e:{for(var b=u.key;null!==c;){if(c.key===b){if((b=u.type)===g){if(7===c.tag){n(l,c.sibling),(d=i(c,u.props.children)).return=l,l=d;break e}}else if(c.elementType===b||"object"===typeof b&&null!==b&&b.$$typeof===N&&ta(b)===c.type){n(l,c.sibling),Zo(d=i(c,u.props),u),d.return=l,l=d;break e}n(l,c);break}t(l,c),c=c.sibling}u.type===g?((d=Vr(u.props.children,l.mode,d,u.key)).return=l,l=d):(Zo(d=Br(u.type,u.key,u.props,null,l.mode,d),u),d.return=l,l=d)}return a(l);case m:e:{for(b=u.key;null!==c;){if(c.key===b){if(4===c.tag&&c.stateNode.containerInfo===u.containerInfo&&c.stateNode.implementation===u.implementation){n(l,c.sibling),(d=i(c,u.children||[])).return=l,l=d;break e}n(l,c);break}t(l,c),c=c.sibling}(d=Wr(u,l.mode,d)).return=l,l=d}return a(l);case N:return y(l,c,u=(b=u._init)(u._payload),d)}if(R(u))return function(i,o,a,l){for(var c=null,u=null,d=o,p=o=0,m=null;null!==d&&p<a.length;p++){d.index>p?(m=d,d=null):m=d.sibling;var g=f(i,d,a[p],l);if(null===g){null===d&&(d=m);break}e&&d&&null===g.alternate&&t(i,d),o=s(g,o,p),null===u?c=g:u.sibling=g,u=g,d=m}if(p===a.length)return n(i,d),si&&Zr(i,p),c;if(null===d){for(;p<a.length;p++)null!==(d=h(i,a[p],l))&&(o=s(d,o,p),null===u?c=d:u.sibling=d,u=d);return si&&Zr(i,p),c}for(d=r(d);p<a.length;p++)null!==(m=v(d,i,p,a[p],l))&&(e&&null!==m.alternate&&d.delete(null===m.key?p:m.key),o=s(m,o,p),null===u?c=m:u.sibling=m,u=m);return e&&d.forEach(function(e){return t(i,e)}),si&&Zr(i,p),c}(l,c,u,d);if(A(u)){if("function"!==typeof(b=A(u)))throw Error(o(150));return function(i,a,l,c){if(null==l)throw Error(o(151));for(var u=null,d=null,p=a,m=a=0,g=null,y=l.next();null!==p&&!y.done;m++,y=l.next()){p.index>m?(g=p,p=null):g=p.sibling;var b=f(i,p,y.value,c);if(null===b){null===p&&(p=g);break}e&&p&&null===b.alternate&&t(i,p),a=s(b,a,m),null===d?u=b:d.sibling=b,d=b,p=g}if(y.done)return n(i,p),si&&Zr(i,m),u;if(null===p){for(;!y.done;m++,y=l.next())null!==(y=h(i,y.value,c))&&(a=s(y,a,m),null===d?u=y:d.sibling=y,d=y);return si&&Zr(i,m),u}for(p=r(p);!y.done;m++,y=l.next())null!==(y=v(p,i,m,y.value,c))&&(e&&null!==y.alternate&&p.delete(null===y.key?m:y.key),a=s(y,a,m),null===d?u=y:d.sibling=y,d=y);return e&&p.forEach(function(e){return t(i,e)}),si&&Zr(i,m),u}(l,c,u=b.call(u),d)}if("function"===typeof u.then)return y(l,c,Xo(u),d);if(u.$$typeof===x)return y(l,c,Ii(l,u),d);ea(l,u)}return"string"===typeof u&&""!==u||"number"===typeof u||"bigint"===typeof u?(u=""+u,null!==c&&6===c.tag?(n(l,c.sibling),(d=i(c,u)).return=l,l=d):(n(l,c),(d=zr(u,l.mode,d)).return=l,l=d),a(l)):n(l,c)}return function(e,t,n,r){try{$o=0;var i=y(e,t,n,r);return Jo=null,i}catch(Vs){if(Vs===qi||Vs===Ki)throw Vs;var s=Or(29,Vs,null,e.mode);return s.lanes=r,s.return=e,s}}}var ra=na(!0),ia=na(!1),sa=U(null),oa=null;function aa(e){var t=e.alternate;V(da,1&da.current),V(sa,e),null===oa&&(null===t||null!==fs.current||null!==t.memoizedState)&&(oa=e)}function la(e){if(22===e.tag){if(V(da,da.current),V(sa,e),null===oa){var t=e.alternate;null!==t&&null!==t.memoizedState&&(oa=e)}}else ca()}function ca(){V(da,da.current),V(sa,sa.current)}function ua(e){B(sa),oa===e&&(oa=null),B(da)}var da=U(0);function ha(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||vd(n)))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function fa(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:h({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var pa={enqueueSetState:function(e,t,n){e=e._reactInternals;var r=jc(),i=is(r);i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=ss(e,i,r))&&(Mc(t,e,r),os(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=jc(),i=is(r);i.tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=ss(e,i,r))&&(Mc(t,e,r),os(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=jc(),r=is(n);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=ss(e,r,n))&&(Mc(t,e,n),os(t,e,n))}};function ma(e,t,n,r,i,s,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,o):!t.prototype||!t.prototype.isPureReactComponent||(!Jn(n,r)||!Jn(i,s))}function ga(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&pa.enqueueReplaceState(t,t.state,null)}function va(e,t){var n=t;if("ref"in t)for(var r in n={},t)"ref"!==r&&(n[r]=t[r]);if(e=e.defaultProps)for(var i in n===t&&(n=h({},n)),e)void 0===n[i]&&(n[i]=e[i]);return n}var ya="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function ba(e){ya(e)}function wa(e){console.error(e)}function xa(e){ya(e)}function ka(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(n){setTimeout(function(){throw n})}}function Sa(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function Ea(e,t,n){return(n=is(n)).tag=3,n.payload={element:null},n.callback=function(){ka(e,t)},n}function Ca(e){return(e=is(e)).tag=3,e}function Na(e,t,n,r){var i=n.type.getDerivedStateFromError;if("function"===typeof i){var s=r.value;e.payload=function(){return i(s)},e.callback=function(){Sa(t,n,r)}}var o=n.stateNode;null!==o&&"function"===typeof o.componentDidCatch&&(e.callback=function(){Sa(t,n,r),"function"!==typeof i&&(null===Cc?Cc=new Set([this]):Cc.add(this));var e=r.stack;this.componentDidCatch(r.value,{componentStack:null!==e?e:""})})}var Ia=Error(o(461)),_a=!1;function Ta(e,t,n,r){t.child=null===e?ia(t,null,n,r):ra(t,e.child,n,r)}function Aa(e,t,n,r,i){n=n.render;var s=t.ref;if("ref"in r){var o={};for(var a in r)"ref"!==a&&(o[a]=r[a])}else o=r;return Ci(t),r=Ds(e,t,n,o,s,i),a=js(),null===e||_a?(si&&a&&ti(t),t.flags|=1,Ta(e,t,r,i),t.child):(Os(e,t,i),Ja(e,t,i))}function Da(e,t,n,r,i){if(null===e){var s=n.type;return"function"!==typeof s||Mr(s)||void 0!==s.defaultProps||null!==n.compare?((e=Br(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Pa(e,t,s,r,i))}if(s=e.child,!$a(e,i)){var o=s.memoizedProps;if((n=null!==(n=n.compare)?n:Jn)(o,r)&&e.ref===t.ref)return Ja(e,t,i)}return t.flags|=1,(e=Fr(s,r)).ref=t.ref,e.return=t,t.child=e}function Pa(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(Jn(s,r)&&e.ref===t.ref){if(_a=!1,t.pendingProps=r=s,!$a(e,i))return t.lanes=e.lanes,Ja(e,t,i);0!==(131072&e.flags)&&(_a=!0)}}return Oa(e,t,n,r,i)}function Ra(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode){if(0!==(128&t.flags)){if(r=null!==s?s.baseLanes|n:n,null!==e){for(i=t.child=e.child,s=0;null!==i;)s=s|i.lanes|i.childLanes,i=i.sibling;t.childLanes=s&~r}else t.childLanes=0,t.child=null;return La(e,t,r,n)}if(0===(536870912&n))return t.lanes=t.childLanes=536870912,La(e,t,null!==s?s.baseLanes|n:n,n);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&Wi(0,null!==s?s.cachePool:null),null!==s?ms(t,s):gs(),la(t)}else null!==s?(Wi(0,s.cachePool),ms(t,s),ca(),t.memoizedState=null):(null!==e&&Wi(0,null),gs(),ca());return Ta(e,t,i,n),t.child}function La(e,t,n,r){var i=zi();return i=null===i?null:{parent:Pi._currentValue,pool:i},t.memoizedState={baseLanes:n,cachePool:i},null!==e&&Wi(0,null),gs(),la(t),null!==e&&Si(e,t,r,!0),null}function ja(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!==typeof n&&"object"!==typeof n)throw Error(o(284));null!==e&&e.ref===n||(t.flags|=4194816)}}function Oa(e,t,n,r,i){return Ci(t),n=Ds(e,t,n,r,void 0,i),r=js(),null===e||_a?(si&&r&&ti(t),t.flags|=1,Ta(e,t,n,i),t.child):(Os(e,t,i),Ja(e,t,i))}function Ma(e,t,n,r,i,s){return Ci(t),t.updateQueue=null,n=Rs(t,r,n,i),Ps(e),r=js(),null===e||_a?(si&&r&&ti(t),t.flags|=1,Ta(e,t,n,s),t.child):(Os(e,t,s),Ja(e,t,s))}function Fa(e,t,n,r,i){if(Ci(t),null===t.stateNode){var s=Lr,o=n.contextType;"object"===typeof o&&null!==o&&(s=Ni(o)),s=new n(r,s),t.memoizedState=null!==s.state&&void 0!==s.state?s.state:null,s.updater=pa,t.stateNode=s,s._reactInternals=t,(s=t.stateNode).props=r,s.state=t.memoizedState,s.refs={},ns(t),o=n.contextType,s.context="object"===typeof o&&null!==o?Ni(o):Lr,s.state=t.memoizedState,"function"===typeof(o=n.getDerivedStateFromProps)&&(fa(t,n,o,r),s.state=t.memoizedState),"function"===typeof n.getDerivedStateFromProps||"function"===typeof s.getSnapshotBeforeUpdate||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||(o=s.state,"function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount(),o!==s.state&&pa.enqueueReplaceState(s,s.state,null),us(t,r,s,i),cs(),s.state=t.memoizedState),"function"===typeof s.componentDidMount&&(t.flags|=4194308),r=!0}else if(null===e){s=t.stateNode;var a=t.memoizedProps,l=va(n,a);s.props=l;var c=s.context,u=n.contextType;o=Lr,"object"===typeof u&&null!==u&&(o=Ni(u));var d=n.getDerivedStateFromProps;u="function"===typeof d||"function"===typeof s.getSnapshotBeforeUpdate,a=t.pendingProps!==a,u||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a||c!==o)&&ga(t,s,r,o),ts=!1;var h=t.memoizedState;s.state=h,us(t,r,s,i),cs(),c=t.memoizedState,a||h!==c||ts?("function"===typeof d&&(fa(t,n,d,r),c=t.memoizedState),(l=ts||ma(t,n,l,r,h,c,o))?(u||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(t.flags|=4194308)):("function"===typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),s.props=r,s.state=c,s.context=o,r=l):("function"===typeof s.componentDidMount&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,rs(e,t),u=va(n,o=t.memoizedProps),s.props=u,d=t.pendingProps,h=s.context,c=n.contextType,l=Lr,"object"===typeof c&&null!==c&&(l=Ni(c)),(c="function"===typeof(a=n.getDerivedStateFromProps)||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(o!==d||h!==l)&&ga(t,s,r,l),ts=!1,h=t.memoizedState,s.state=h,us(t,r,s,i),cs();var f=t.memoizedState;o!==d||h!==f||ts||null!==e&&null!==e.dependencies&&Ei(e.dependencies)?("function"===typeof a&&(fa(t,n,a,r),f=t.memoizedState),(u=ts||ma(t,n,u,r,h,f,l)||null!==e&&null!==e.dependencies&&Ei(e.dependencies))?(c||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(r,f,l),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,f,l)),"function"===typeof s.componentDidUpdate&&(t.flags|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof s.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),s.props=r,s.state=f,s.context=l,r=u):("function"!==typeof s.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return s=r,ja(e,t),r=0!==(128&t.flags),s||r?(s=t.stateNode,n=r&&"function"!==typeof n.getDerivedStateFromError?null:s.render(),t.flags|=1,null!==e&&r?(t.child=ra(t,e.child,null,i),t.child=ra(t,null,n,i)):Ta(e,t,n,i),t.memoizedState=s.state,e=t.child):e=Ja(e,t,i),e}function Ua(e,t,n,r){return fi(),t.flags|=256,Ta(e,t,n,r),t.child}var Ba={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Va(e){return{baseLanes:e,cachePool:Hi()}}function za(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=vc),e}function Wa(e,t,n){var r,i=t.pendingProps,s=!1,a=0!==(128&t.flags);if((r=a)||(r=(null===e||null!==e.memoizedState)&&0!==(2&da.current)),r&&(s=!0,t.flags&=-129),r=0!==(32&t.flags),t.flags&=-33,null===e){if(si){if(s?aa(t):ca(),si){var l,c=ii;if(l=c){e:{for(l=c,c=ai;8!==l.nodeType;){if(!c){c=null;break e}if(null===(l=yd(l.nextSibling))){c=null;break e}}c=l}null!==c?(t.memoizedState={dehydrated:c,treeContext:null!==Jr?{id:$r,overflow:Xr}:null,retryLane:536870912,hydrationErrors:null},(l=Or(18,null,null,0)).stateNode=c,l.return=t,t.child=l,ri=t,ii=null,l=!0):l=!1}l||ci(t)}if(null!==(c=t.memoizedState)&&null!==(c=c.dehydrated))return vd(c)?t.lanes=32:t.lanes=536870912,null;ua(t)}return c=i.children,i=i.fallback,s?(ca(),c=qa({mode:"hidden",children:c},s=t.mode),i=Vr(i,s,n,null),c.return=t,i.return=t,c.sibling=i,t.child=c,(s=t.child).memoizedState=Va(n),s.childLanes=za(e,r,n),t.memoizedState=Ba,i):(aa(t),Ha(t,c))}if(null!==(l=e.memoizedState)&&null!==(c=l.dehydrated)){if(a)256&t.flags?(aa(t),t.flags&=-257,t=Ga(e,t,n)):null!==t.memoizedState?(ca(),t.child=e.child,t.flags|=128,t=null):(ca(),s=i.fallback,c=t.mode,i=qa({mode:"visible",children:i.children},c),(s=Vr(s,c,n,null)).flags|=2,i.return=t,s.return=t,i.sibling=s,t.child=i,ra(t,e.child,null,n),(i=t.child).memoizedState=Va(n),i.childLanes=za(e,r,n),t.memoizedState=Ba,t=s);else if(aa(t),vd(c)){if(r=c.nextSibling&&c.nextSibling.dataset)var u=r.dgst;r=u,(i=Error(o(419))).stack="",i.digest=r,mi({value:i,source:null,stack:null}),t=Ga(e,t,n)}else if(_a||Si(e,t,n,!1),r=0!==(n&e.childLanes),_a||r){if(null!==(r=ic)&&(0!==(i=0!==((i=0!==(42&(i=n&-n))?1:_e(i))&(r.suspendedLanes|n))?0:i)&&i!==l.retryLane))throw l.retryLane=i,Dr(e,i),Mc(r,e,i),Ia;"$?"===c.data||Qc(),t=Ga(e,t,n)}else"$?"===c.data?(t.flags|=192,t.child=e.child,t=null):(e=l.treeContext,ii=yd(c.nextSibling),ri=t,si=!0,oi=null,ai=!1,null!==e&&(Qr[Yr++]=$r,Qr[Yr++]=Xr,Qr[Yr++]=Jr,$r=e.id,Xr=e.overflow,Jr=t),(t=Ha(t,i.children)).flags|=4096);return t}return s?(ca(),s=i.fallback,c=t.mode,u=(l=e.child).sibling,(i=Fr(l,{mode:"hidden",children:i.children})).subtreeFlags=65011712&l.subtreeFlags,null!==u?s=Fr(u,s):(s=Vr(s,c,n,null)).flags|=2,s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,null===(c=e.child.memoizedState)?c=Va(n):(null!==(l=c.cachePool)?(u=Pi._currentValue,l=l.parent!==u?{parent:u,pool:u}:l):l=Hi(),c={baseLanes:c.baseLanes|n,cachePool:l}),s.memoizedState=c,s.childLanes=za(e,r,n),t.memoizedState=Ba,i):(aa(t),e=(n=e.child).sibling,(n=Fr(n,{mode:"visible",children:i.children})).return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n)}function Ha(e,t){return(t=qa({mode:"visible",children:t},e.mode)).return=e,e.child=t}function qa(e,t){return(e=Or(22,e,null,t)).lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Ga(e,t,n){return ra(t,e.child,null,n),(e=Ha(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Ka(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),xi(e.return,t,n)}function Qa(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Ya(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(Ta(e,t,r.children,n),0!==(2&(r=da.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ka(e,n,t);else if(19===e.tag)Ka(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}switch(V(da,r),i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===ha(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Qa(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===ha(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Qa(t,!0,n,null,s);break;case"together":Qa(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ja(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),pc|=t.lanes,0===(n&t.childLanes)){if(null===e)return null;if(Si(e,t,n,!1),0===(n&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Fr(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Fr(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function $a(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!Ei(e))}function Xa(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps)_a=!0;else{if(!$a(e,n)&&0===(128&t.flags))return _a=!1,function(e,t,n){switch(t.tag){case 3:G(t,t.stateNode.containerInfo),bi(0,Pi,e.memoizedState.cache),fi();break;case 27:case 5:Q(t);break;case 4:G(t,t.stateNode.containerInfo);break;case 10:bi(0,t.type,t.memoizedProps.value);break;case 13:var r=t.memoizedState;if(null!==r)return null!==r.dehydrated?(aa(t),t.flags|=128,null):0!==(n&t.child.childLanes)?Wa(e,t,n):(aa(t),null!==(e=Ja(e,t,n))?e.sibling:null);aa(t);break;case 19:var i=0!==(128&e.flags);if((r=0!==(n&t.childLanes))||(Si(e,t,n,!1),r=0!==(n&t.childLanes)),i){if(r)return Ya(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),V(da,da.current),r)break;return null;case 22:case 23:return t.lanes=0,Ra(e,t,n);case 24:bi(0,Pi,e.memoizedState.cache)}return Ja(e,t,n)}(e,t,n);_a=0!==(131072&e.flags)}else _a=!1,si&&0!==(1048576&t.flags)&&ei(t,Kr,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var r=t.elementType,i=r._init;if(r=i(r._payload),t.type=r,"function"!==typeof r){if(void 0!==r&&null!==r){if((i=r.$$typeof)===k){t.tag=11,t=Aa(null,t,r,e,n);break e}if(i===C){t.tag=14,t=Da(null,t,r,e,n);break e}}throw t=P(r)||r,Error(o(306,t,""))}Mr(r)?(e=va(r,e),t.tag=1,t=Fa(null,t,r,e,n)):(t.tag=0,t=Oa(null,t,r,e,n))}return t;case 0:return Oa(e,t,t.type,t.pendingProps,n);case 1:return Fa(e,t,r=t.type,i=va(r,t.pendingProps),n);case 3:e:{if(G(t,t.stateNode.containerInfo),null===e)throw Error(o(387));r=t.pendingProps;var s=t.memoizedState;i=s.element,rs(e,t),us(t,r,null,n);var a=t.memoizedState;if(r=a.cache,bi(0,Pi,r),r!==s.cache&&ki(t,[Pi],n,!0),cs(),r=a.element,s.isDehydrated){if(s={element:r,isDehydrated:!1,cache:a.cache},t.updateQueue.baseState=s,t.memoizedState=s,256&t.flags){t=Ua(e,t,r,n);break e}if(r!==i){mi(i=Er(Error(o(424)),t)),t=Ua(e,t,r,n);break e}if(9===(e=t.stateNode.containerInfo).nodeType)e=e.body;else e="HTML"===e.nodeName?e.ownerDocument.body:e;for(ii=yd(e.firstChild),ri=t,si=!0,oi=null,ai=!0,n=ia(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fi(),r===i){t=Ja(e,t,n);break e}Ta(e,t,r,n)}t=t.child}return t;case 26:return ja(e,t),null===e?(n=Td(t.type,null,t.pendingProps,null))?t.memoizedState=n:si||(n=t.type,e=t.pendingProps,(r=id(H.current).createElement(n))[Pe]=t,r[Re]=e,td(r,n,e),qe(r),t.stateNode=r):t.memoizedState=Td(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Q(t),null===e&&si&&(r=t.stateNode=xd(t.type,t.pendingProps,H.current),ri=t,ai=!0,i=ii,pd(t.type)?(bd=i,ii=yd(r.firstChild)):ii=i),Ta(e,t,t.pendingProps.children,n),ja(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&si&&((i=r=ii)&&(null!==(r=function(e,t,n,r){for(;1===e.nodeType;){var i=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(r){if(!e[Ue])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(s=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(s!==i.rel||e.getAttribute("href")!==(null==i.href||""===i.href?null:i.href)||e.getAttribute("crossorigin")!==(null==i.crossOrigin?null:i.crossOrigin)||e.getAttribute("title")!==(null==i.title?null:i.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((s=e.getAttribute("src"))!==(null==i.src?null:i.src)||e.getAttribute("type")!==(null==i.type?null:i.type)||e.getAttribute("crossorigin")!==(null==i.crossOrigin?null:i.crossOrigin))&&s&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var s=null==i.name?null:""+i.name;if("hidden"===i.type&&e.getAttribute("name")===s)return e}if(null===(e=yd(e.nextSibling)))break}return null}(r,t.type,t.pendingProps,ai))?(t.stateNode=r,ri=t,ii=yd(r.firstChild),ai=!1,i=!0):i=!1),i||ci(t)),Q(t),i=t.type,s=t.pendingProps,a=null!==e?e.memoizedProps:null,r=s.children,ad(i,s)?r=null:null!==a&&ad(i,a)&&(t.flags|=32),null!==t.memoizedState&&(i=Ds(e,t,Ls,null,null,n),Yd._currentValue=i),ja(e,t),Ta(e,t,r,n),t.child;case 6:return null===e&&si&&((e=n=ii)&&(null!==(n=function(e,t,n){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!n)return null;if(null===(e=yd(e.nextSibling)))return null}return e}(n,t.pendingProps,ai))?(t.stateNode=n,ri=t,ii=null,e=!0):e=!1),e||ci(t)),null;case 13:return Wa(e,t,n);case 4:return G(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=ra(t,null,r,n):Ta(e,t,r,n),t.child;case 11:return Aa(e,t,t.type,t.pendingProps,n);case 7:return Ta(e,t,t.pendingProps,n),t.child;case 8:case 12:return Ta(e,t,t.pendingProps.children,n),t.child;case 10:return r=t.pendingProps,bi(0,t.type,r.value),Ta(e,t,r.children,n),t.child;case 9:return i=t.type._context,r=t.pendingProps.children,Ci(t),r=r(i=Ni(i)),t.flags|=1,Ta(e,t,r,n),t.child;case 14:return Da(e,t,t.type,t.pendingProps,n);case 15:return Pa(e,t,t.type,t.pendingProps,n);case 19:return Ya(e,t,n);case 31:return r=t.pendingProps,n=t.mode,r={mode:r.mode,children:r.children},null===e?((n=qa(r,n)).ref=t.ref,t.child=n,n.return=t,t=n):((n=Fr(e.child,r)).ref=t.ref,t.child=n,n.return=t,t=n),t;case 22:return Ra(e,t,n);case 24:return Ci(t),r=Ni(Pi),null===e?(null===(i=zi())&&(i=ic,s=Ri(),i.pooledCache=s,s.refCount++,null!==s&&(i.pooledCacheLanes|=n),i=s),t.memoizedState={parent:r,cache:i},ns(t),bi(0,Pi,i)):(0!==(e.lanes&n)&&(rs(e,t),us(t,null,null,n),cs()),i=e.memoizedState,s=t.memoizedState,i.parent!==r?(i={parent:r,cache:r},t.memoizedState=i,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=i),bi(0,Pi,r)):(r=s.cache,bi(0,Pi,r),r!==i.cache&&ki(t,[Pi],n,!0))),Ta(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(o(156,t.tag))}function Za(e){e.flags|=4}function el(e,t){if("stylesheet"!==t.type||0!==(4&t.state.loading))e.flags&=-16777217;else if(e.flags|=16777216,!zd(t)){if(null!==(t=sa.current)&&((4194048&oc)===oc?null!==oa:(62914560&oc)!==oc&&0===(536870912&oc)||t!==oa))throw Xi=Qi,Gi;e.flags|=8192}}function tl(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?Se():536870912,e.lanes|=t,yc|=t)}function nl(e,t){if(!si)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function rl(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=65011712&i.subtreeFlags,r|=65011712&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function il(e,t,n){var r=t.pendingProps;switch(ni(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return rl(t),null;case 3:return n=t.stateNode,r=null,null!==e&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),wi(Pi),K(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(hi(t)?Za(t):null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,pi())),rl(t),null;case 26:return n=t.memoizedState,null===e?(Za(t),null!==n?(rl(t),el(t,n)):(rl(t),t.flags&=-16777217)):n?n!==e.memoizedState?(Za(t),rl(t),el(t,n)):(rl(t),t.flags&=-16777217):(e.memoizedProps!==r&&Za(t),rl(t),t.flags&=-16777217),null;case 27:Y(t),n=H.current;var i=t.type;if(null!==e&&null!=t.stateNode)e.memoizedProps!==r&&Za(t);else{if(!r){if(null===t.stateNode)throw Error(o(166));return rl(t),null}e=z.current,hi(t)?ui(t):(e=xd(i,r,n),t.stateNode=e,Za(t))}return rl(t),null;case 5:if(Y(t),n=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==r&&Za(t);else{if(!r){if(null===t.stateNode)throw Error(o(166));return rl(t),null}if(e=z.current,hi(t))ui(t);else{switch(i=id(H.current),e){case 1:e=i.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=i.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=i.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=i.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":(e=i.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e="string"===typeof r.is?i.createElement("select",{is:r.is}):i.createElement("select"),r.multiple?e.multiple=!0:r.size&&(e.size=r.size);break;default:e="string"===typeof r.is?i.createElement(n,{is:r.is}):i.createElement(n)}}e[Pe]=t,e[Re]=r;e:for(i=t.child;null!==i;){if(5===i.tag||6===i.tag)e.appendChild(i.stateNode);else if(4!==i.tag&&27!==i.tag&&null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;null===i.sibling;){if(null===i.return||i.return===t)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}t.stateNode=e;e:switch(td(e,n,r),n){case"button":case"input":case"select":case"textarea":e=!!r.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&Za(t)}}return rl(t),t.flags&=-16777217,null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==r&&Za(t);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));if(e=H.current,hi(t)){if(e=t.stateNode,n=t.memoizedProps,r=null,null!==(i=ri))switch(i.tag){case 27:case 5:r=i.memoizedProps}e[Pe]=t,(e=!!(e.nodeValue===n||null!==r&&!0===r.suppressHydrationWarning||$u(e.nodeValue,n)))||ci(t)}else(e=id(e).createTextNode(r))[Pe]=t,t.stateNode=e}return rl(t),null;case 13:if(r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(i=hi(t),null!==r&&null!==r.dehydrated){if(null===e){if(!i)throw Error(o(318));if(!(i=null!==(i=t.memoizedState)?i.dehydrated:null))throw Error(o(317));i[Pe]=t}else fi(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;rl(t),i=!1}else i=pi(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=i),i=!0;if(!i)return 256&t.flags?(ua(t),t):(ua(t),null)}if(ua(t),0!==(128&t.flags))return t.lanes=n,t;if(n=null!==r,e=null!==e&&null!==e.memoizedState,n){i=null,null!==(r=t.child).alternate&&null!==r.alternate.memoizedState&&null!==r.alternate.memoizedState.cachePool&&(i=r.alternate.memoizedState.cachePool.pool);var s=null;null!==r.memoizedState&&null!==r.memoizedState.cachePool&&(s=r.memoizedState.cachePool.pool),s!==i&&(r.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),tl(t,t.updateQueue),rl(t),null;case 4:return K(),null===e&&Vu(t.stateNode.containerInfo),rl(t),null;case 10:return wi(t.type),rl(t),null;case 19:if(B(da),null===(i=t.memoizedState))return rl(t),null;if(r=0!==(128&t.flags),null===(s=i.rendering))if(r)nl(i,!1);else{if(0!==fc||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=ha(e))){for(t.flags|=128,nl(i,!1),e=s.updateQueue,t.updateQueue=e,tl(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)Ur(n,e),n=n.sibling;return V(da,1&da.current|2),t.child}e=e.sibling}null!==i.tail&&te()>Sc&&(t.flags|=128,r=!0,nl(i,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ha(s))){if(t.flags|=128,r=!0,e=e.updateQueue,t.updateQueue=e,tl(t,e),nl(i,!0),null===i.tail&&"hidden"===i.tailMode&&!s.alternate&&!si)return rl(t),null}else 2*te()-i.renderingStartTime>Sc&&536870912!==n&&(t.flags|=128,r=!0,nl(i,!1),t.lanes=4194304);i.isBackwards?(s.sibling=t.child,t.child=s):(null!==(e=i.last)?e.sibling=s:t.child=s,i.last=s)}return null!==i.tail?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=te(),t.sibling=null,e=da.current,V(da,r?1&e|2:1&e),t):(rl(t),null);case 22:case 23:return ua(t),vs(),r=null!==t.memoizedState,null!==e?null!==e.memoizedState!==r&&(t.flags|=8192):r&&(t.flags|=8192),r?0!==(536870912&n)&&0===(128&t.flags)&&(rl(t),6&t.subtreeFlags&&(t.flags|=8192)):rl(t),null!==(n=t.updateQueue)&&tl(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),r=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(r=t.memoizedState.cachePool.pool),r!==n&&(t.flags|=2048),null!==e&&B(Vi),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),wi(Pi),rl(t),null;case 25:case 30:return null}throw Error(o(156,t.tag))}function sl(e,t){switch(ni(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return wi(Pi),K(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return Y(t),null;case 13:if(ua(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));fi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return B(da),null;case 4:return K(),null;case 10:return wi(t.type),null;case 22:case 23:return ua(t),vs(),null!==e&&B(Vi),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return wi(Pi),null;default:return null}}function ol(e,t){switch(ni(t),t.tag){case 3:wi(Pi),K();break;case 26:case 27:case 5:Y(t);break;case 4:K();break;case 13:ua(t);break;case 19:B(da);break;case 10:wi(t.type);break;case 22:case 23:ua(t),vs(),null!==e&&B(Vi);break;case 24:wi(Pi)}}function al(e,t){try{var n=t.updateQueue,r=null!==n?n.lastEffect:null;if(null!==r){var i=r.next;n=i;do{if((n.tag&e)===e){r=void 0;var s=n.create,o=n.inst;r=s(),o.destroy=r}n=n.next}while(n!==i)}}catch(a){du(t,t.return,a)}}function ll(e,t,n){try{var r=t.updateQueue,i=null!==r?r.lastEffect:null;if(null!==i){var s=i.next;r=s;do{if((r.tag&e)===e){var o=r.inst,a=o.destroy;if(void 0!==a){o.destroy=void 0,i=t;var l=n,c=a;try{c()}catch(u){du(i,l,u)}}}r=r.next}while(r!==s)}}catch(u){du(t,t.return,u)}}function cl(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{hs(t,n)}catch(r){du(e,e.return,r)}}}function ul(e,t,n){n.props=va(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(r){du(e,t,r)}}function dl(e,t){try{var n=e.ref;if(null!==n){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;default:r=e.stateNode}"function"===typeof n?e.refCleanup=n(r):n.current=r}}catch(i){du(e,t,i)}}function hl(e,t){var n=e.ref,r=e.refCleanup;if(null!==n)if("function"===typeof r)try{r()}catch(i){du(e,t,i)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"===typeof n)try{n(null)}catch(s){du(e,t,s)}else n.current=null}function fl(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&r.focus();break e;case"img":n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(i){du(e,e.return,i)}}function pl(e,t,n){try{var r=e.stateNode;!function(e,t,n,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var i=null,s=null,a=null,l=null,c=null,u=null,d=null;for(p in n){var h=n[p];if(n.hasOwnProperty(p)&&null!=h)switch(p){case"checked":case"value":break;case"defaultValue":c=h;default:r.hasOwnProperty(p)||Zu(e,t,p,null,r,h)}}for(var f in r){var p=r[f];if(h=n[f],r.hasOwnProperty(f)&&(null!=p||null!=h))switch(f){case"type":s=p;break;case"name":i=p;break;case"checked":u=p;break;case"defaultChecked":d=p;break;case"value":a=p;break;case"defaultValue":l=p;break;case"children":case"dangerouslySetInnerHTML":if(null!=p)throw Error(o(137,t));break;default:p!==h&&Zu(e,t,f,p,r,h)}}return void gt(e,a,l,c,u,d,s,i);case"select":for(s in p=a=l=f=null,n)if(c=n[s],n.hasOwnProperty(s)&&null!=c)switch(s){case"value":break;case"multiple":p=c;default:r.hasOwnProperty(s)||Zu(e,t,s,null,r,c)}for(i in r)if(s=r[i],c=n[i],r.hasOwnProperty(i)&&(null!=s||null!=c))switch(i){case"value":f=s;break;case"defaultValue":l=s;break;case"multiple":a=s;default:s!==c&&Zu(e,t,i,s,r,c)}return t=l,n=a,r=p,void(null!=f?bt(e,!!n,f,!1):!!r!==!!n&&(null!=t?bt(e,!!n,t,!0):bt(e,!!n,n?[]:"",!1)));case"textarea":for(l in p=f=null,n)if(i=n[l],n.hasOwnProperty(l)&&null!=i&&!r.hasOwnProperty(l))switch(l){case"value":case"children":break;default:Zu(e,t,l,null,r,i)}for(a in r)if(i=r[a],s=n[a],r.hasOwnProperty(a)&&(null!=i||null!=s))switch(a){case"value":f=i;break;case"defaultValue":p=i;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=i)throw Error(o(91));break;default:i!==s&&Zu(e,t,a,i,r,s)}return void wt(e,f,p);case"option":for(var m in n)if(f=n[m],n.hasOwnProperty(m)&&null!=f&&!r.hasOwnProperty(m))if("selected"===m)e.selected=!1;else Zu(e,t,m,null,r,f);for(c in r)if(f=r[c],p=n[c],r.hasOwnProperty(c)&&f!==p&&(null!=f||null!=p))if("selected"===c)e.selected=f&&"function"!==typeof f&&"symbol"!==typeof f;else Zu(e,t,c,f,r,p);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var g in n)f=n[g],n.hasOwnProperty(g)&&null!=f&&!r.hasOwnProperty(g)&&Zu(e,t,g,null,r,f);for(u in r)if(f=r[u],p=n[u],r.hasOwnProperty(u)&&f!==p&&(null!=f||null!=p))switch(u){case"children":case"dangerouslySetInnerHTML":if(null!=f)throw Error(o(137,t));break;default:Zu(e,t,u,f,r,p)}return;default:if(Nt(t)){for(var v in n)f=n[v],n.hasOwnProperty(v)&&void 0!==f&&!r.hasOwnProperty(v)&&ed(e,t,v,void 0,r,f);for(d in r)f=r[d],p=n[d],!r.hasOwnProperty(d)||f===p||void 0===f&&void 0===p||ed(e,t,d,f,r,p);return}}for(var y in n)f=n[y],n.hasOwnProperty(y)&&null!=f&&!r.hasOwnProperty(y)&&Zu(e,t,y,null,r,f);for(h in r)f=r[h],p=n[h],!r.hasOwnProperty(h)||f===p||null==f&&null==p||Zu(e,t,h,f,r,p)}(r,e.type,n,t),r[Re]=t}catch(i){du(e,e.return,i)}}function ml(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&pd(e.type)||4===e.tag}function gl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ml(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&pd(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function vl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?(9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).insertBefore(e,t):((t=9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Xu));else if(4!==r&&(27===r&&pd(e.type)&&(n=e.stateNode,t=null),null!==(e=e.child)))for(vl(e,t,n),e=e.sibling;null!==e;)vl(e,t,n),e=e.sibling}function yl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&(27===r&&pd(e.type)&&(n=e.stateNode),null!==(e=e.child)))for(yl(e,t,n),e=e.sibling;null!==e;)yl(e,t,n),e=e.sibling}function bl(e){var t=e.stateNode,n=e.memoizedProps;try{for(var r=e.type,i=t.attributes;i.length;)t.removeAttributeNode(i[0]);td(t,r,n),t[Pe]=e,t[Re]=n}catch(s){du(e,e.return,s)}}var wl=!1,xl=!1,kl=!1,Sl="function"===typeof WeakSet?WeakSet:Set,El=null;function Cl(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:Fl(e,n),4&r&&al(5,n);break;case 1:if(Fl(e,n),4&r)if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(o){du(n,n.return,o)}else{var i=va(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(i,t,e.__reactInternalSnapshotBeforeUpdate)}catch(a){du(n,n.return,a)}}64&r&&cl(n),512&r&&dl(n,n.return);break;case 3:if(Fl(e,n),64&r&&null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 27:case 5:case 1:t=n.child.stateNode}try{hs(e,t)}catch(o){du(n,n.return,o)}}break;case 27:null===t&&4&r&&bl(n);case 26:case 5:Fl(e,n),null===t&&4&r&&fl(n),512&r&&dl(n,n.return);break;case 12:Fl(e,n);break;case 13:Fl(e,n),4&r&&Dl(e,n),64&r&&(null!==(e=n.memoizedState)&&(null!==(e=e.dehydrated)&&function(e,t){var n=e.ownerDocument;if("$?"!==e.data||"complete"===n.readyState)t();else{var r=function(){t(),n.removeEventListener("DOMContentLoaded",r)};n.addEventListener("DOMContentLoaded",r),e._reactRetry=r}}(e,n=mu.bind(null,n))));break;case 22:if(!(r=null!==n.memoizedState||wl)){t=null!==t&&null!==t.memoizedState||xl,i=wl;var s=xl;wl=r,(xl=t)&&!s?Bl(e,n,0!==(8772&n.subtreeFlags)):Fl(e,n),wl=i,xl=s}break;case 30:break;default:Fl(e,n)}}function Nl(e){var t=e.alternate;null!==t&&(e.alternate=null,Nl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&Be(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Il=null,_l=!1;function Tl(e,t,n){for(n=n.child;null!==n;)Al(e,t,n),n=n.sibling}function Al(e,t,n){if(de&&"function"===typeof de.onCommitFiberUnmount)try{de.onCommitFiberUnmount(ue,n)}catch(s){}switch(n.tag){case 26:xl||hl(n,t),Tl(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode).parentNode.removeChild(n);break;case 27:xl||hl(n,t);var r=Il,i=_l;pd(n.type)&&(Il=n.stateNode,_l=!1),Tl(e,t,n),kd(n.stateNode),Il=r,_l=i;break;case 5:xl||hl(n,t);case 6:if(r=Il,i=_l,Il=null,Tl(e,t,n),_l=i,null!==(Il=r))if(_l)try{(9===Il.nodeType?Il.body:"HTML"===Il.nodeName?Il.ownerDocument.body:Il).removeChild(n.stateNode)}catch(o){du(n,t,o)}else try{Il.removeChild(n.stateNode)}catch(o){du(n,t,o)}break;case 18:null!==Il&&(_l?(md(9===(e=Il).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,n.stateNode),_h(e)):md(Il,n.stateNode));break;case 4:r=Il,i=_l,Il=n.stateNode.containerInfo,_l=!0,Tl(e,t,n),Il=r,_l=i;break;case 0:case 11:case 14:case 15:xl||ll(2,n,t),xl||ll(4,n,t),Tl(e,t,n);break;case 1:xl||(hl(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount&&ul(n,t,r)),Tl(e,t,n);break;case 21:Tl(e,t,n);break;case 22:xl=(r=xl)||null!==n.memoizedState,Tl(e,t,n),xl=r;break;default:Tl(e,t,n)}}function Dl(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{_h(e)}catch(n){du(t,t.return,n)}}function Pl(e,t){var n=function(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new Sl),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new Sl),t;default:throw Error(o(435,e.tag))}}(e);t.forEach(function(t){var r=gu.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}function Rl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r],s=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 27:if(pd(l.type)){Il=l.stateNode,_l=!1;break e}break;case 5:Il=l.stateNode,_l=!1;break e;case 3:case 4:Il=l.stateNode.containerInfo,_l=!0;break e}l=l.return}if(null===Il)throw Error(o(160));Al(s,a,i),Il=null,_l=!1,null!==(s=i.alternate)&&(s.return=null),i.return=null}if(13878&t.subtreeFlags)for(t=t.child;null!==t;)jl(t,e),t=t.sibling}var Ll=null;function jl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Rl(t,e),Ol(e),4&r&&(ll(3,e,e.return),al(3,e),ll(5,e,e.return));break;case 1:Rl(t,e),Ol(e),512&r&&(xl||null===n||hl(n,n.return)),64&r&&wl&&(null!==(e=e.updateQueue)&&(null!==(r=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?r:n.concat(r))));break;case 26:var i=Ll;if(Rl(t,e),Ol(e),512&r&&(xl||null===n||hl(n,n.return)),4&r){var s=null!==n?n.memoizedState:null;if(r=e.memoizedState,null===n)if(null===r)if(null===e.stateNode){e:{r=e.type,n=e.memoizedProps,i=i.ownerDocument||i;t:switch(r){case"title":(!(s=i.getElementsByTagName("title")[0])||s[Ue]||s[Pe]||"http://www.w3.org/2000/svg"===s.namespaceURI||s.hasAttribute("itemprop"))&&(s=i.createElement(r),i.head.insertBefore(s,i.querySelector("head > title"))),td(s,r,n),s[Pe]=e,qe(s),r=s;break e;case"link":var a=Bd("link","href",i).get(r+(n.href||""));if(a)for(var l=0;l<a.length;l++)if((s=a[l]).getAttribute("href")===(null==n.href||""===n.href?null:n.href)&&s.getAttribute("rel")===(null==n.rel?null:n.rel)&&s.getAttribute("title")===(null==n.title?null:n.title)&&s.getAttribute("crossorigin")===(null==n.crossOrigin?null:n.crossOrigin)){a.splice(l,1);break t}td(s=i.createElement(r),r,n),i.head.appendChild(s);break;case"meta":if(a=Bd("meta","content",i).get(r+(n.content||"")))for(l=0;l<a.length;l++)if((s=a[l]).getAttribute("content")===(null==n.content?null:""+n.content)&&s.getAttribute("name")===(null==n.name?null:n.name)&&s.getAttribute("property")===(null==n.property?null:n.property)&&s.getAttribute("http-equiv")===(null==n.httpEquiv?null:n.httpEquiv)&&s.getAttribute("charset")===(null==n.charSet?null:n.charSet)){a.splice(l,1);break t}td(s=i.createElement(r),r,n),i.head.appendChild(s);break;default:throw Error(o(468,r))}s[Pe]=e,qe(s),r=s}e.stateNode=r}else Vd(i,e.type,e.stateNode);else e.stateNode=jd(i,r,e.memoizedProps);else s!==r?(null===s?null!==n.stateNode&&(n=n.stateNode).parentNode.removeChild(n):s.count--,null===r?Vd(i,e.type,e.stateNode):jd(i,r,e.memoizedProps)):null===r&&null!==e.stateNode&&pl(e,e.memoizedProps,n.memoizedProps)}break;case 27:Rl(t,e),Ol(e),512&r&&(xl||null===n||hl(n,n.return)),null!==n&&4&r&&pl(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Rl(t,e),Ol(e),512&r&&(xl||null===n||hl(n,n.return)),32&e.flags){i=e.stateNode;try{kt(i,"")}catch(p){du(e,e.return,p)}}4&r&&null!=e.stateNode&&pl(e,i=e.memoizedProps,null!==n?n.memoizedProps:i),1024&r&&(kl=!0);break;case 6:if(Rl(t,e),Ol(e),4&r){if(null===e.stateNode)throw Error(o(162));r=e.memoizedProps,n=e.stateNode;try{n.nodeValue=r}catch(p){du(e,e.return,p)}}break;case 3:if(Ud=null,i=Ll,Ll=Cd(t.containerInfo),Rl(t,e),Ll=i,Ol(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{_h(t.containerInfo)}catch(p){du(e,e.return,p)}kl&&(kl=!1,Ml(e));break;case 4:r=Ll,Ll=Cd(e.stateNode.containerInfo),Rl(t,e),Ol(e),Ll=r;break;case 12:default:Rl(t,e),Ol(e);break;case 13:Rl(t,e),Ol(e),8192&e.child.flags&&null!==e.memoizedState!==(null!==n&&null!==n.memoizedState)&&(kc=te()),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,Pl(e,r)));break;case 22:i=null!==e.memoizedState;var c=null!==n&&null!==n.memoizedState,u=wl,d=xl;if(wl=u||i,xl=d||c,Rl(t,e),xl=d,wl=u,Ol(e),8192&r)e:for(t=e.stateNode,t._visibility=i?-2&t._visibility:1|t._visibility,i&&(null===n||c||wl||xl||Ul(e)),n=null,t=e;;){if(5===t.tag||26===t.tag){if(null===n){c=n=t;try{if(s=c.stateNode,i)"function"===typeof(a=s.style).setProperty?a.setProperty("display","none","important"):a.display="none";else{l=c.stateNode;var h=c.memoizedProps.style,f=void 0!==h&&null!==h&&h.hasOwnProperty("display")?h.display:null;l.style.display=null==f||"boolean"===typeof f?"":(""+f).trim()}}catch(p){du(c,c.return,p)}}}else if(6===t.tag){if(null===n){c=t;try{c.stateNode.nodeValue=i?"":c.memoizedProps}catch(p){du(c,c.return,p)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}4&r&&(null!==(r=e.updateQueue)&&(null!==(n=r.retryQueue)&&(r.retryQueue=null,Pl(e,n))));break;case 19:Rl(t,e),Ol(e),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,Pl(e,r)));case 30:case 21:}}function Ol(e){var t=e.flags;if(2&t){try{for(var n,r=e.return;null!==r;){if(ml(r)){n=r;break}r=r.return}if(null==n)throw Error(o(160));switch(n.tag){case 27:var i=n.stateNode;yl(e,gl(e),i);break;case 5:var s=n.stateNode;32&n.flags&&(kt(s,""),n.flags&=-33),yl(e,gl(e),s);break;case 3:case 4:var a=n.stateNode.containerInfo;vl(e,gl(e),a);break;default:throw Error(o(161))}}catch(l){du(e,e.return,l)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Ml(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;Ml(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function Fl(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)Cl(e,t.alternate,t),t=t.sibling}function Ul(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:ll(4,t,t.return),Ul(t);break;case 1:hl(t,t.return);var n=t.stateNode;"function"===typeof n.componentWillUnmount&&ul(t,t.return,n),Ul(t);break;case 27:kd(t.stateNode);case 26:case 5:hl(t,t.return),Ul(t);break;case 22:null===t.memoizedState&&Ul(t);break;default:Ul(t)}e=e.sibling}}function Bl(e,t,n){for(n=n&&0!==(8772&t.subtreeFlags),t=t.child;null!==t;){var r=t.alternate,i=e,s=t,o=s.flags;switch(s.tag){case 0:case 11:case 15:Bl(i,s,n),al(4,s);break;case 1:if(Bl(i,s,n),"function"===typeof(i=(r=s).stateNode).componentDidMount)try{i.componentDidMount()}catch(c){du(r,r.return,c)}if(null!==(i=(r=s).updateQueue)){var a=r.stateNode;try{var l=i.shared.hiddenCallbacks;if(null!==l)for(i.shared.hiddenCallbacks=null,i=0;i<l.length;i++)ds(l[i],a)}catch(c){du(r,r.return,c)}}n&&64&o&&cl(s),dl(s,s.return);break;case 27:bl(s);case 26:case 5:Bl(i,s,n),n&&null===r&&4&o&&fl(s),dl(s,s.return);break;case 12:Bl(i,s,n);break;case 13:Bl(i,s,n),n&&4&o&&Dl(i,s);break;case 22:null===s.memoizedState&&Bl(i,s,n),dl(s,s.return);break;case 30:break;default:Bl(i,s,n)}t=t.sibling}}function Vl(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&Li(n))}function zl(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Li(e))}function Wl(e,t,n,r){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)Hl(e,t,n,r),t=t.sibling}function Hl(e,t,n,r){var i=t.flags;switch(t.tag){case 0:case 11:case 15:Wl(e,t,n,r),2048&i&&al(9,t);break;case 1:case 13:default:Wl(e,t,n,r);break;case 3:Wl(e,t,n,r),2048&i&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Li(e)));break;case 12:if(2048&i){Wl(e,t,n,r),e=t.stateNode;try{var s=t.memoizedProps,o=s.id,a=s.onPostCommit;"function"===typeof a&&a(o,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(l){du(t,t.return,l)}}else Wl(e,t,n,r);break;case 23:break;case 22:s=t.stateNode,o=t.alternate,null!==t.memoizedState?2&s._visibility?Wl(e,t,n,r):Gl(e,t):2&s._visibility?Wl(e,t,n,r):(s._visibility|=2,ql(e,t,n,r,0!==(10256&t.subtreeFlags))),2048&i&&Vl(o,t);break;case 24:Wl(e,t,n,r),2048&i&&zl(t.alternate,t)}}function ql(e,t,n,r,i){for(i=i&&0!==(10256&t.subtreeFlags),t=t.child;null!==t;){var s=e,o=t,a=n,l=r,c=o.flags;switch(o.tag){case 0:case 11:case 15:ql(s,o,a,l,i),al(8,o);break;case 23:break;case 22:var u=o.stateNode;null!==o.memoizedState?2&u._visibility?ql(s,o,a,l,i):Gl(s,o):(u._visibility|=2,ql(s,o,a,l,i)),i&&2048&c&&Vl(o.alternate,o);break;case 24:ql(s,o,a,l,i),i&&2048&c&&zl(o.alternate,o);break;default:ql(s,o,a,l,i)}t=t.sibling}}function Gl(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=e,r=t,i=r.flags;switch(r.tag){case 22:Gl(n,r),2048&i&&Vl(r.alternate,r);break;case 24:Gl(n,r),2048&i&&zl(r.alternate,r);break;default:Gl(n,r)}t=t.sibling}}var Kl=8192;function Ql(e){if(e.subtreeFlags&Kl)for(e=e.child;null!==e;)Yl(e),e=e.sibling}function Yl(e){switch(e.tag){case 26:Ql(e),e.flags&Kl&&null!==e.memoizedState&&function(e,t,n){if(null===Wd)throw Error(o(475));var r=Wd;if("stylesheet"===t.type&&("string"!==typeof n.media||!1!==matchMedia(n.media).matches)&&0===(4&t.state.loading)){if(null===t.instance){var i=Ad(n.href),s=e.querySelector(Dd(i));if(s)return null!==(e=s._p)&&"object"===typeof e&&"function"===typeof e.then&&(r.count++,r=qd.bind(r),e.then(r,r)),t.state.loading|=4,t.instance=s,void qe(s);s=e.ownerDocument||e,n=Pd(n),(i=Sd.get(i))&&Md(n,i),qe(s=s.createElement("link"));var a=s;a._p=new Promise(function(e,t){a.onload=e,a.onerror=t}),td(s,"link",n),t.instance=s}null===r.stylesheets&&(r.stylesheets=new Map),r.stylesheets.set(t,e),(e=t.state.preload)&&0===(3&t.state.loading)&&(r.count++,t=qd.bind(r),e.addEventListener("load",t),e.addEventListener("error",t))}}(Ll,e.memoizedState,e.memoizedProps);break;case 5:default:Ql(e);break;case 3:case 4:var t=Ll;Ll=Cd(e.stateNode.containerInfo),Ql(e),Ll=t;break;case 22:null===e.memoizedState&&(null!==(t=e.alternate)&&null!==t.memoizedState?(t=Kl,Kl=16777216,Ql(e),Kl=t):Ql(e))}}function Jl(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function $l(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];El=r,ec(r,e)}Jl(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)Xl(e),e=e.sibling}function Xl(e){switch(e.tag){case 0:case 11:case 15:$l(e),2048&e.flags&&ll(9,e,e.return);break;case 3:case 12:default:$l(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,Zl(e)):$l(e)}}function Zl(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];El=r,ec(r,e)}Jl(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:ll(8,t,t.return),Zl(t);break;case 22:2&(n=t.stateNode)._visibility&&(n._visibility&=-3,Zl(t));break;default:Zl(t)}e=e.sibling}}function ec(e,t){for(;null!==El;){var n=El;switch(n.tag){case 0:case 11:case 15:ll(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var r=n.memoizedState.cachePool.pool;null!=r&&r.refCount++}break;case 24:Li(n.memoizedState.cache)}if(null!==(r=n.child))r.return=n,El=r;else e:for(n=e;null!==El;){var i=(r=El).sibling,s=r.return;if(Nl(r),r===n){El=null;break e}if(null!==i){i.return=s,El=i;break e}El=s}}}var tc={getCacheForType:function(e){var t=Ni(Pi),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n}},nc="function"===typeof WeakMap?WeakMap:Map,rc=0,ic=null,sc=null,oc=0,ac=0,lc=null,cc=!1,uc=!1,dc=!1,hc=0,fc=0,pc=0,mc=0,gc=0,vc=0,yc=0,bc=null,wc=null,xc=!1,kc=0,Sc=1/0,Ec=null,Cc=null,Nc=0,Ic=null,_c=null,Tc=0,Ac=0,Dc=null,Pc=null,Rc=0,Lc=null;function jc(){if(0!==(2&rc)&&0!==oc)return oc&-oc;if(null!==L.T){return 0!==Mi?Mi:Au()}return Ae()}function Oc(){0===vc&&(vc=0===(536870912&oc)||si?ke():536870912);var e=sa.current;return null!==e&&(e.flags|=32),vc}function Mc(e,t,n){(e!==ic||2!==ac&&9!==ac)&&null===e.cancelPendingCommit||(Hc(e,0),Vc(e,oc,vc,!1)),Ce(e,n),0!==(2&rc)&&e===ic||(e===ic&&(0===(2&rc)&&(mc|=n),4===fc&&Vc(e,oc,vc,!1)),Su(e))}function Fc(e,t,n){if(0!==(6&rc))throw Error(o(327));for(var r=!n&&0===(124&t)&&0===(t&e.expiredLanes)||we(e,t),i=r?function(e,t){var n=rc;rc|=2;var r=Gc(),i=Kc();ic!==e||oc!==t?(Ec=null,Sc=te()+500,Hc(e,t)):uc=we(e,t);e:for(;;)try{if(0!==ac&&null!==sc){t=sc;var s=lc;t:switch(ac){case 1:ac=0,lc=null,eu(e,t,s,1);break;case 2:case 9:if(Yi(s)){ac=0,lc=null,Zc(t);break}t=function(){2!==ac&&9!==ac||ic!==e||(ac=7),Su(e)},s.then(t,t);break e;case 3:ac=7;break e;case 4:ac=5;break e;case 7:Yi(s)?(ac=0,lc=null,Zc(t)):(ac=0,lc=null,eu(e,t,s,7));break;case 5:var a=null;switch(sc.tag){case 26:a=sc.memoizedState;case 5:case 27:var l=sc;if(!a||zd(a)){ac=0,lc=null;var c=l.sibling;if(null!==c)sc=c;else{var u=l.return;null!==u?(sc=u,tu(u)):sc=null}break t}}ac=0,lc=null,eu(e,t,s,5);break;case 6:ac=0,lc=null,eu(e,t,s,6);break;case 8:Wc(),fc=6;break e;default:throw Error(o(462))}}$c();break}catch(d){qc(e,d)}return yi=vi=null,L.H=r,L.A=i,rc=n,null!==sc?0:(ic=null,oc=0,_r(),fc)}(e,t):Yc(e,t,!0),s=r;;){if(0===i){uc&&!r&&Vc(e,t,0,!1);break}if(n=e.current.alternate,!s||Bc(n)){if(2===i){if(s=t,e.errorRecoveryDisabledLanes&s)var a=0;else a=0!==(a=-536870913&e.pendingLanes)?a:536870912&a?536870912:0;if(0!==a){t=a;e:{var l=e;i=bc;var c=l.current.memoizedState.isDehydrated;if(c&&(Hc(l,a).flags|=256),2!==(a=Yc(l,a,!1))){if(dc&&!c){l.errorRecoveryDisabledLanes|=s,mc|=s,i=4;break e}s=wc,wc=i,null!==s&&(null===wc?wc=s:wc.push.apply(wc,s))}i=a}if(s=!1,2!==i)continue}}if(1===i){Hc(e,0),Vc(e,t,0,!0);break}e:{switch(r=e,s=i){case 0:case 1:throw Error(o(345));case 4:if((4194048&t)!==t)break;case 6:Vc(r,t,vc,!cc);break e;case 2:wc=null;break;case 3:case 5:break;default:throw Error(o(329))}if((62914560&t)===t&&10<(i=kc+300-te())){if(Vc(r,t,vc,!cc),0!==be(r,0,!0))break e;r.timeoutHandle=cd(Uc.bind(null,r,n,wc,Ec,xc,t,vc,mc,yc,cc,s,2,-0,0),i)}else Uc(r,n,wc,Ec,xc,t,vc,mc,yc,cc,s,0,-0,0)}break}i=Yc(e,t,!1),s=!1}Su(e)}function Uc(e,t,n,r,i,s,a,l,c,u,d,h,f,p){if(e.timeoutHandle=-1,(8192&(h=t.subtreeFlags)||16785408===(16785408&h))&&(Wd={stylesheets:null,count:0,unsuspend:Hd},Yl(t),null!==(h=function(){if(null===Wd)throw Error(o(475));var e=Wd;return e.stylesheets&&0===e.count&&Kd(e,e.stylesheets),0<e.count?function(t){var n=setTimeout(function(){if(e.stylesheets&&Kd(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}())))return e.cancelPendingCommit=h(ru.bind(null,e,t,s,n,r,i,a,l,c,d,1,f,p)),void Vc(e,s,a,!u);ru(e,t,s,n,r,i,a,l,c)}function Bc(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&(null!==(n=t.updateQueue)&&null!==(n=n.stores)))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Yn(s(),i))return!1}catch(o){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Vc(e,t,n,r){t&=~gc,t&=~mc,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var i=t;0<i;){var s=31-fe(i),o=1<<s;r[s]=-1,i&=~o}0!==n&&Ne(e,n,t)}function zc(){return 0!==(6&rc)||(Eu(0,!1),!1)}function Wc(){if(null!==sc){if(0===ac)var e=sc.return;else yi=vi=null,Ms(e=sc),Jo=null,$o=0,e=sc;for(;null!==e;)ol(e.alternate,e),e=e.return;sc=null}}function Hc(e,t){var n=e.timeoutHandle;-1!==n&&(e.timeoutHandle=-1,ud(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),Wc(),ic=e,sc=n=Fr(e.current,null),oc=t,ac=0,lc=null,cc=!1,uc=we(e,t),dc=!1,yc=vc=gc=mc=pc=fc=0,wc=bc=null,xc=!1,0!==(8&t)&&(t|=32&t);var r=e.entangledLanes;if(0!==r)for(e=e.entanglements,r&=t;0<r;){var i=31-fe(r),s=1<<i;t|=e[i],r&=~s}return hc=t,_r(),n}function qc(e,t){bs=null,L.H=Go,t===qi||t===Ki?(t=Zi(),ac=3):t===Gi?(t=Zi(),ac=4):ac=t===Ia?8:null!==t&&"object"===typeof t&&"function"===typeof t.then?6:1,lc=t,null===sc&&(fc=1,ka(e,Er(t,e.current)))}function Gc(){var e=L.H;return L.H=Go,null===e?Go:e}function Kc(){var e=L.A;return L.A=tc,e}function Qc(){fc=4,cc||(4194048&oc)!==oc&&null!==sa.current||(uc=!0),0===(134217727&pc)&&0===(134217727&mc)||null===ic||Vc(ic,oc,vc,!1)}function Yc(e,t,n){var r=rc;rc|=2;var i=Gc(),s=Kc();ic===e&&oc===t||(Ec=null,Hc(e,t)),t=!1;var o=fc;e:for(;;)try{if(0!==ac&&null!==sc){var a=sc,l=lc;switch(ac){case 8:Wc(),o=6;break e;case 3:case 2:case 9:case 6:null===sa.current&&(t=!0);var c=ac;if(ac=0,lc=null,eu(e,a,l,c),n&&uc){o=0;break e}break;default:c=ac,ac=0,lc=null,eu(e,a,l,c)}}Jc(),o=fc;break}catch(u){qc(e,u)}return t&&e.shellSuspendCounter++,yi=vi=null,rc=r,L.H=i,L.A=s,null===sc&&(ic=null,oc=0,_r()),o}function Jc(){for(;null!==sc;)Xc(sc)}function $c(){for(;null!==sc&&!Z();)Xc(sc)}function Xc(e){var t=Xa(e.alternate,e,hc);e.memoizedProps=e.pendingProps,null===t?tu(e):sc=t}function Zc(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Ma(n,t,t.pendingProps,t.type,void 0,oc);break;case 11:t=Ma(n,t,t.pendingProps,t.type.render,t.ref,oc);break;case 5:Ms(t);default:ol(n,t),t=Xa(n,t=sc=Ur(t,hc),hc)}e.memoizedProps=e.pendingProps,null===t?tu(e):sc=t}function eu(e,t,n,r){yi=vi=null,Ms(t),Jo=null,$o=0;var i=t.return;try{if(function(e,t,n,r,i){if(n.flags|=32768,null!==r&&"object"===typeof r&&"function"===typeof r.then){if(null!==(t=n.alternate)&&Si(t,n,i,!0),null!==(n=sa.current)){switch(n.tag){case 13:return null===oa?Qc():null===n.alternate&&0===fc&&(fc=3),n.flags&=-257,n.flags|=65536,n.lanes=i,r===Qi?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([r]):t.add(r),hu(e,r,i)),!1;case 22:return n.flags|=65536,r===Qi?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([r]):n.add(r),hu(e,r,i)),!1}throw Error(o(435,n.tag))}return hu(e,r,i),Qc(),!1}if(si)return null!==(t=sa.current)?(0===(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=i,r!==li&&mi(Er(e=Error(o(422),{cause:r}),n))):(r!==li&&mi(Er(t=Error(o(423),{cause:r}),n)),(e=e.current.alternate).flags|=65536,i&=-i,e.lanes|=i,r=Er(r,n),as(e,i=Ea(e.stateNode,r,i)),4!==fc&&(fc=2)),!1;var s=Error(o(520),{cause:r});if(s=Er(s,n),null===bc?bc=[s]:bc.push(s),4!==fc&&(fc=2),null===t)return!0;r=Er(r,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=i&-i,n.lanes|=e,as(n,e=Ea(n.stateNode,r,e)),!1;case 1:if(t=n.type,s=n.stateNode,0===(128&n.flags)&&("function"===typeof t.getDerivedStateFromError||null!==s&&"function"===typeof s.componentDidCatch&&(null===Cc||!Cc.has(s))))return n.flags|=65536,i&=-i,n.lanes|=i,Na(i=Ca(i),e,n,r),as(n,i),!1}n=n.return}while(null!==n);return!1}(e,i,t,n,oc))return fc=1,ka(e,Er(n,e.current)),void(sc=null)}catch(s){if(null!==i)throw sc=i,s;return fc=1,ka(e,Er(n,e.current)),void(sc=null)}32768&t.flags?(si||1===r?e=!0:uc||0!==(536870912&oc)?e=!1:(cc=e=!0,(2===r||9===r||3===r||6===r)&&(null!==(r=sa.current)&&13===r.tag&&(r.flags|=16384))),nu(t,e)):tu(t)}function tu(e){var t=e;do{if(0!==(32768&t.flags))return void nu(t,cc);e=t.return;var n=il(t.alternate,t,hc);if(null!==n)return void(sc=n);if(null!==(t=t.sibling))return void(sc=t);sc=t=e}while(null!==t);0===fc&&(fc=5)}function nu(e,t){do{var n=sl(e.alternate,e);if(null!==n)return n.flags&=32767,void(sc=n);if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling))return void(sc=e);sc=e=n}while(null!==e);fc=6,sc=null}function ru(e,t,n,r,i,s,a,l,c){e.cancelPendingCommit=null;do{lu()}while(0!==Nc);if(0!==(6&rc))throw Error(o(327));if(null!==t){if(t===e.current)throw Error(o(177));if(s=t.lanes|t.childLanes,function(e,t,n,r,i,s){var o=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var a=e.entanglements,l=e.expirationTimes,c=e.hiddenUpdates;for(n=o&~n;0<n;){var u=31-fe(n),d=1<<u;a[u]=0,l[u]=-1;var h=c[u];if(null!==h)for(c[u]=null,u=0;u<h.length;u++){var f=h[u];null!==f&&(f.lane&=-536870913)}n&=~d}0!==r&&Ne(e,r,0),0!==s&&0===i&&0!==e.tag&&(e.suspendedLanes|=s&~(o&~t))}(e,n,s|=Ir,a,l,c),e===ic&&(sc=ic=null,oc=0),_c=t,Ic=e,Tc=n,Ac=s,Dc=i,Pc=r,0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?(e.callbackNode=null,e.callbackPriority=0,$(se,function(){return cu(),null})):(e.callbackNode=null,e.callbackPriority=0),r=0!==(13878&t.flags),0!==(13878&t.subtreeFlags)||r){r=L.T,L.T=null,i=j.p,j.p=2,a=rc,rc|=4;try{!function(e,t){if(e=e.containerInfo,nd=rh,tr(e=er(e))){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch(g){n=null;break e}var a=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(l=a+i),h!==s||0!==r&&3!==h.nodeType||(c=a+r),3===h.nodeType&&(a+=h.nodeValue.length),null!==(p=h.firstChild);)f=h,h=p;for(;;){if(h===e)break t;if(f===n&&++u===i&&(l=a),f===s&&++d===r&&(c=a),null!==(p=h.nextSibling))break;f=(h=f).parentNode}h=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(rd={focusedElem:e,selectionRange:n},rh=!1,El=t;null!==El;)if(e=(t=El).child,0!==(1024&t.subtreeFlags)&&null!==e)e.return=t,El=e;else for(;null!==El;){switch(s=(t=El).alternate,e=t.flags,t.tag){case 0:case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(0!==(1024&e)&&null!==s){e=void 0,n=t,i=s.memoizedProps,s=s.memoizedState,r=n.stateNode;try{var m=va(n.type,i,(n.elementType,n.type));e=r.getSnapshotBeforeUpdate(m,s),r.__reactInternalSnapshotBeforeUpdate=e}catch(v){du(n,n.return,v)}}break;case 3:if(0!==(1024&e))if(9===(n=(e=t.stateNode.containerInfo).nodeType))gd(e);else if(1===n)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":gd(e);break;default:e.textContent=""}break;default:if(0!==(1024&e))throw Error(o(163))}if(null!==(e=t.sibling)){e.return=t.return,El=e;break}El=t.return}}(e,t)}finally{rc=a,j.p=i,L.T=r}}Nc=1,iu(),su(),ou()}}function iu(){if(1===Nc){Nc=0;var e=Ic,t=_c,n=0!==(13878&t.flags);if(0!==(13878&t.subtreeFlags)||n){n=L.T,L.T=null;var r=j.p;j.p=2;var i=rc;rc|=4;try{jl(t,e);var s=rd,o=er(e.containerInfo),a=s.focusedElem,l=s.selectionRange;if(o!==a&&a&&a.ownerDocument&&Zn(a.ownerDocument.documentElement,a)){if(null!==l&&tr(a)){var c=l.start,u=l.end;if(void 0===u&&(u=c),"selectionStart"in a)a.selectionStart=c,a.selectionEnd=Math.min(u,a.value.length);else{var d=a.ownerDocument||document,h=d&&d.defaultView||window;if(h.getSelection){var f=h.getSelection(),p=a.textContent.length,m=Math.min(l.start,p),g=void 0===l.end?m:Math.min(l.end,p);!f.extend&&m>g&&(o=g,g=m,m=o);var v=Xn(a,m),y=Xn(a,g);if(v&&y&&(1!==f.rangeCount||f.anchorNode!==v.node||f.anchorOffset!==v.offset||f.focusNode!==y.node||f.focusOffset!==y.offset)){var b=d.createRange();b.setStart(v.node,v.offset),f.removeAllRanges(),m>g?(f.addRange(b),f.extend(y.node,y.offset)):(b.setEnd(y.node,y.offset),f.addRange(b))}}}}for(d=[],f=a;f=f.parentNode;)1===f.nodeType&&d.push({element:f,left:f.scrollLeft,top:f.scrollTop});for("function"===typeof a.focus&&a.focus(),a=0;a<d.length;a++){var w=d[a];w.element.scrollLeft=w.left,w.element.scrollTop=w.top}}rh=!!nd,rd=nd=null}finally{rc=i,j.p=r,L.T=n}}e.current=t,Nc=2}}function su(){if(2===Nc){Nc=0;var e=Ic,t=_c,n=0!==(8772&t.flags);if(0!==(8772&t.subtreeFlags)||n){n=L.T,L.T=null;var r=j.p;j.p=2;var i=rc;rc|=4;try{Cl(e,t.alternate,t)}finally{rc=i,j.p=r,L.T=n}}Nc=3}}function ou(){if(4===Nc||3===Nc){Nc=0,ee();var e=Ic,t=_c,n=Tc,r=Pc;0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?Nc=5:(Nc=0,_c=Ic=null,au(e,e.pendingLanes));var i=e.pendingLanes;if(0===i&&(Cc=null),Te(n),t=t.stateNode,de&&"function"===typeof de.onCommitFiberRoot)try{de.onCommitFiberRoot(ue,t,void 0,128===(128&t.current.flags))}catch(l){}if(null!==r){t=L.T,i=j.p,j.p=2,L.T=null;try{for(var s=e.onRecoverableError,o=0;o<r.length;o++){var a=r[o];s(a.value,{componentStack:a.stack})}}finally{L.T=t,j.p=i}}0!==(3&Tc)&&lu(),Su(e),i=e.pendingLanes,0!==(4194090&n)&&0!==(42&i)?e===Lc?Rc++:(Rc=0,Lc=e):Rc=0,Eu(0,!1)}}function au(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,Li(t)))}function lu(e){return iu(),su(),ou(),cu()}function cu(){if(5!==Nc)return!1;var e=Ic,t=Ac;Ac=0;var n=Te(Tc),r=L.T,i=j.p;try{j.p=32>n?32:n,L.T=null,n=Dc,Dc=null;var s=Ic,a=Tc;if(Nc=0,_c=Ic=null,Tc=0,0!==(6&rc))throw Error(o(331));var l=rc;if(rc|=4,Xl(s.current),Hl(s,s.current,a,n),rc=l,Eu(0,!1),de&&"function"===typeof de.onPostCommitFiberRoot)try{de.onPostCommitFiberRoot(ue,s)}catch(c){}return!0}finally{j.p=i,L.T=r,au(e,t)}}function uu(e,t,n){t=Er(n,t),null!==(e=ss(e,t=Ea(e.stateNode,t,2),2))&&(Ce(e,2),Su(e))}function du(e,t,n){if(3===e.tag)uu(e,e,n);else for(;null!==t;){if(3===t.tag){uu(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Cc||!Cc.has(r))){e=Er(n,e),null!==(r=ss(t,n=Ca(2),2))&&(Na(n,r,t,e),Ce(r,2),Su(r));break}}t=t.return}}function hu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new nc;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(dc=!0,i.add(n),e=fu.bind(null,e,t,n),t.then(e,e))}function fu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,ic===e&&(oc&n)===n&&(4===fc||3===fc&&(62914560&oc)===oc&&300>te()-kc?0===(2&rc)&&Hc(e,0):gc|=n,yc===oc&&(yc=0)),Su(e)}function pu(e,t){0===t&&(t=Se()),null!==(e=Dr(e,t))&&(Ce(e,t),Su(e))}function mu(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),pu(e,n)}function gu(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(o(314))}null!==r&&r.delete(t),pu(e,n)}var vu=null,yu=null,bu=!1,wu=!1,xu=!1,ku=0;function Su(e){e!==yu&&null===e.next&&(null===yu?vu=yu=e:yu=yu.next=e),wu=!0,bu||(bu=!0,hd(function(){0!==(6&rc)?$(re,Cu):Nu()}))}function Eu(e,t){if(!xu&&wu){xu=!0;do{for(var n=!1,r=vu;null!==r;){if(!t)if(0!==e){var i=r.pendingLanes;if(0===i)var s=0;else{var o=r.suspendedLanes,a=r.pingedLanes;s=(1<<31-fe(42|e)+1)-1,s=201326741&(s&=i&~(o&~a))?201326741&s|1:s?2|s:0}0!==s&&(n=!0,Tu(r,s))}else s=oc,0===(3&(s=be(r,r===ic?s:0,null!==r.cancelPendingCommit||-1!==r.timeoutHandle)))||we(r,s)||(n=!0,Tu(r,s));r=r.next}}while(n);xu=!1}}function Cu(){Nu()}function Nu(){wu=bu=!1;var e=0;0!==ku&&(function(){var e=window.event;if(e&&"popstate"===e.type)return e!==ld&&(ld=e,!0);return ld=null,!1}()&&(e=ku),ku=0);for(var t=te(),n=null,r=vu;null!==r;){var i=r.next,s=Iu(r,t);0===s?(r.next=null,null===n?vu=i:n.next=i,null===i&&(yu=n)):(n=r,(0!==e||0!==(3&s))&&(wu=!0)),r=i}Eu(e,!1)}function Iu(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=-62914561&e.pendingLanes;0<s;){var o=31-fe(s),a=1<<o,l=i[o];-1===l?0!==(a&n)&&0===(a&r)||(i[o]=xe(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}if(n=oc,n=be(e,e===(t=ic)?n:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),r=e.callbackNode,0===n||e===t&&(2===ac||9===ac)||null!==e.cancelPendingCommit)return null!==r&&null!==r&&X(r),e.callbackNode=null,e.callbackPriority=0;if(0===(3&n)||we(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==r&&X(r),Te(n)){case 2:case 8:n=ie;break;case 32:default:n=se;break;case 268435456:n=ae}return r=_u.bind(null,e),n=$(n,r),e.callbackPriority=t,e.callbackNode=n,t}return null!==r&&null!==r&&X(r),e.callbackPriority=2,e.callbackNode=null,2}function _u(e,t){if(0!==Nc&&5!==Nc)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(lu()&&e.callbackNode!==n)return null;var r=oc;return 0===(r=be(e,e===ic?r:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:(Fc(e,r,t),Iu(e,te()),null!=e.callbackNode&&e.callbackNode===n?_u.bind(null,e):null)}function Tu(e,t){if(lu())return null;Fc(e,t,!0)}function Au(){return 0===ku&&(ku=ke()),ku}function Du(e){return null==e||"symbol"===typeof e||"boolean"===typeof e?null:"function"===typeof e?e:Tt(""+e)}function Pu(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}for(var Ru=0;Ru<xr.length;Ru++){var Lu=xr[Ru];kr(Lu.toLowerCase(),"on"+(Lu[0].toUpperCase()+Lu.slice(1)))}kr(fr,"onAnimationEnd"),kr(pr,"onAnimationIteration"),kr(mr,"onAnimationStart"),kr("dblclick","onDoubleClick"),kr("focusin","onFocus"),kr("focusout","onBlur"),kr(gr,"onTransitionRun"),kr(vr,"onTransitionStart"),kr(yr,"onTransitionCancel"),kr(br,"onTransitionEnd"),Ye("onMouseEnter",["mouseout","mouseover"]),Ye("onMouseLeave",["mouseout","mouseover"]),Ye("onPointerEnter",["pointerout","pointerover"]),Ye("onPointerLeave",["pointerout","pointerover"]),Qe("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Qe("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Qe("onBeforeInput",["compositionend","keypress","textInput","paste"]),Qe("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Qe("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Qe("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ju="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ou=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ju));function Mu(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;s=a,i.currentTarget=c;try{s(i)}catch(u){ya(u)}i.currentTarget=null,s=l}else for(o=0;o<r.length;o++){if(l=(a=r[o]).instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;s=a,i.currentTarget=c;try{s(i)}catch(u){ya(u)}i.currentTarget=null,s=l}}}}function Fu(e,t){var n=t[je];void 0===n&&(n=t[je]=new Set);var r=e+"__bubble";n.has(r)||(zu(t,e,2,!1),n.add(r))}function Uu(e,t,n){var r=0;t&&(r|=4),zu(n,e,r,t)}var Bu="_reactListening"+Math.random().toString(36).slice(2);function Vu(e){if(!e[Bu]){e[Bu]=!0,Ge.forEach(function(t){"selectionchange"!==t&&(Ou.has(t)||Uu(t,!1,e),Uu(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Bu]||(t[Bu]=!0,Uu("selectionchange",!1,t))}}function zu(e,t,n,r){switch(uh(t)){case 2:var i=ih;break;case 8:i=sh;break;default:i=oh}n=i.bind(null,t,n,e),i=void 0,!Ut||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Wu(e,t,n,r,i){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var a=r.stateNode.containerInfo;if(a===i)break;if(4===o)for(o=r.return;null!==o;){var c=o.tag;if((3===c||4===c)&&o.stateNode.containerInfo===i)return;o=o.return}for(;null!==a;){if(null===(o=Ve(a)))return;if(5===(c=o.tag)||6===c||26===c||27===c){r=s=o;continue e}a=a.parentNode}}r=r.return}Ot(function(){var r=s,i=Dt(n),o=[];e:{var a=wr.get(e);if(void 0!==a){var c=Zt,u=e;switch(e){case"keypress":if(0===qt(n))break e;case"keydown":case"keyup":c=mn;break;case"focusin":u="focus",c=on;break;case"focusout":u="blur",c=on;break;case"beforeblur":case"afterblur":c=on;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=rn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=sn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=vn;break;case fr:case pr:case mr:c=an;break;case br:c=yn;break;case"scroll":case"scrollend":c=tn;break;case"wheel":c=bn;break;case"copy":case"cut":case"paste":c=ln;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=gn;break;case"toggle":case"beforetoggle":c=wn}var d=0!==(4&t),h=!d&&("scroll"===e||"scrollend"===e),f=d?null!==a?a+"Capture":null:a;d=[];for(var p,m=r;null!==m;){var g=m;if(p=g.stateNode,5!==(g=g.tag)&&26!==g&&27!==g||null===p||null===f||null!=(g=Mt(m,f))&&d.push(Hu(m,g,p)),h)break;m=m.return}0<d.length&&(a=new c(a,u,null,n,i),o.push({event:a,listeners:d}))}}if(0===(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===At||!(u=n.relatedTarget||n.fromElement)||!Ve(u)&&!u[Le])&&(c||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,c?(c=r,null!==(u=(u=n.relatedTarget||n.toElement)?Ve(u):null)&&(h=l(u),d=u.tag,u!==h||5!==d&&27!==d&&6!==d)&&(u=null)):(c=null,u=r),c!==u)){if(d=rn,g="onMouseLeave",f="onMouseEnter",m="mouse","pointerout"!==e&&"pointerover"!==e||(d=gn,g="onPointerLeave",f="onPointerEnter",m="pointer"),h=null==c?a:We(c),p=null==u?a:We(u),(a=new d(g,m+"leave",c,n,i)).target=h,a.relatedTarget=p,g=null,Ve(i)===r&&((d=new d(f,m+"enter",u,n,i)).target=p,d.relatedTarget=h,g=d),h=g,c&&u)e:{for(f=u,m=0,p=d=c;p;p=Gu(p))m++;for(p=0,g=f;g;g=Gu(g))p++;for(;0<m-p;)d=Gu(d),m--;for(;0<p-m;)f=Gu(f),p--;for(;m--;){if(d===f||null!==f&&d===f.alternate)break e;d=Gu(d),f=Gu(f)}d=null}else d=null;null!==c&&Ku(o,a,c,d,!1),null!==u&&null!==h&&Ku(o,h,u,d,!0)}if("select"===(c=(a=r?We(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===c&&"file"===a.type)var v=Fn;else if(Pn(a))if(Un)v=Qn;else{v=Gn;var y=qn}else!(c=a.nodeName)||"input"!==c.toLowerCase()||"checkbox"!==a.type&&"radio"!==a.type?r&&Nt(r.elementType)&&(v=Fn):v=Kn;switch(v&&(v=v(e,r))?Rn(o,v,n,i):(y&&y(e,a,r),"focusout"===e&&r&&"number"===a.type&&null!=r.memoizedProps.value&&yt(a,"number",a.value)),y=r?We(r):window,e){case"focusin":(Pn(y)||"true"===y.contentEditable)&&(rr=y,ir=r,sr=null);break;case"focusout":sr=ir=rr=null;break;case"mousedown":or=!0;break;case"contextmenu":case"mouseup":case"dragend":or=!1,ar(o,n,i);break;case"selectionchange":if(nr)break;case"keydown":case"keyup":ar(o,n,i)}var b;if(kn)e:{switch(e){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else An?_n(e,n)&&(w="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(w="onCompositionStart");w&&(Cn&&"ko"!==n.locale&&(An||"onCompositionStart"!==w?"onCompositionEnd"===w&&An&&(b=Ht()):(zt="value"in(Vt=i)?Vt.value:Vt.textContent,An=!0)),0<(y=qu(r,w)).length&&(w=new cn(w,e,null,n,i),o.push({event:w,listeners:y}),b?w.data=b:null!==(b=Tn(n))&&(w.data=b))),(b=En?function(e,t){switch(e){case"compositionend":return Tn(t);case"keypress":return 32!==t.which?null:(In=!0,Nn);case"textInput":return(e=t.data)===Nn&&In?null:e;default:return null}}(e,n):function(e,t){if(An)return"compositionend"===e||!kn&&_n(e,t)?(e=Ht(),Wt=zt=Vt=null,An=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Cn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(w=qu(r,"onBeforeInput")).length&&(y=new cn("onBeforeInput","beforeinput",null,n,i),o.push({event:y,listeners:w}),y.data=b)),function(e,t,n,r,i){if("submit"===t&&n&&n.stateNode===i){var s=Du((i[Re]||null).action),o=r.submitter;o&&null!==(t=(t=o[Re]||null)?Du(t.formAction):o.getAttribute("formAction"))&&(s=t,o=null);var a=new Zt("action","action",null,r,i);e.push({event:a,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(0!==ku){var e=o?Pu(i,o):new FormData(i);Po(n,{pending:!0,data:e,method:i.method,action:s},null,e)}}else"function"===typeof s&&(a.preventDefault(),e=o?Pu(i,o):new FormData(i),Po(n,{pending:!0,data:e,method:i.method,action:s},s,e))},currentTarget:i}]})}}(o,e,r,n,i)}Mu(o,t)})}function Hu(e,t,n){return{instance:e,listener:t,currentTarget:n}}function qu(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;if(5!==(i=i.tag)&&26!==i&&27!==i||null===s||(null!=(i=Mt(e,n))&&r.unshift(Hu(e,i,s)),null!=(i=Mt(e,t))&&r.push(Hu(e,i,s))),3===e.tag)return r;e=e.return}return[]}function Gu(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function Ku(e,t,n,r,i){for(var s=t._reactName,o=[];null!==n&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(a=a.tag,null!==l&&l===r)break;5!==a&&26!==a&&27!==a||null===c||(l=c,i?null!=(c=Mt(n,s))&&o.unshift(Hu(n,c,l)):i||null!=(c=Mt(n,s))&&o.push(Hu(n,c,l))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Qu=/\r\n?/g,Yu=/\u0000|\uFFFD/g;function Ju(e){return("string"===typeof e?e:""+e).replace(Qu,"\n").replace(Yu,"")}function $u(e,t){return t=Ju(t),Ju(e)===t}function Xu(){}function Zu(e,t,n,r,i,s){switch(n){case"children":"string"===typeof r?"body"===t||"textarea"===t&&""===r||kt(e,r):("number"===typeof r||"bigint"===typeof r)&&"body"!==t&&kt(e,""+r);break;case"className":nt(e,"class",r);break;case"tabIndex":nt(e,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":nt(e,n,r);break;case"style":Ct(e,r,s);break;case"data":if("object"!==t){nt(e,"data",r);break}case"src":case"href":if(""===r&&("a"!==t||"href"!==n)){e.removeAttribute(n);break}if(null==r||"function"===typeof r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=Tt(""+r),e.setAttribute(n,r);break;case"action":case"formAction":if("function"===typeof r){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"===typeof s&&("formAction"===n?("input"!==t&&Zu(e,t,"name",i.name,i,null),Zu(e,t,"formEncType",i.formEncType,i,null),Zu(e,t,"formMethod",i.formMethod,i,null),Zu(e,t,"formTarget",i.formTarget,i,null)):(Zu(e,t,"encType",i.encType,i,null),Zu(e,t,"method",i.method,i,null),Zu(e,t,"target",i.target,i,null))),null==r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=Tt(""+r),e.setAttribute(n,r);break;case"onClick":null!=r&&(e.onclick=Xu);break;case"onScroll":null!=r&&Fu("scroll",e);break;case"onScrollEnd":null!=r&&Fu("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(o(61));if(null!=(n=r.__html)){if(null!=i.children)throw Error(o(60));e.innerHTML=n}}break;case"multiple":e.multiple=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"muted":e.muted=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==r||"function"===typeof r||"boolean"===typeof r||"symbol"===typeof r){e.removeAttribute("xlink:href");break}n=Tt(""+r),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""+r):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":!0===r?e.setAttribute(n,""):!1!==r&&null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,r):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":null!=r&&"function"!==typeof r&&"symbol"!==typeof r&&!isNaN(r)&&1<=r?e.setAttribute(n,r):e.removeAttribute(n);break;case"rowSpan":case"start":null==r||"function"===typeof r||"symbol"===typeof r||isNaN(r)?e.removeAttribute(n):e.setAttribute(n,r);break;case"popover":Fu("beforetoggle",e),Fu("toggle",e),tt(e,"popover",r);break;case"xlinkActuate":rt(e,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":rt(e,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":rt(e,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":rt(e,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":rt(e,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":rt(e,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":rt(e,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":rt(e,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":rt(e,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":tt(e,"is",r);break;case"innerText":case"textContent":break;default:(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&tt(e,n=It.get(n)||n,r)}}function ed(e,t,n,r,i,s){switch(n){case"style":Ct(e,r,s);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(o(61));if(null!=(n=r.__html)){if(null!=i.children)throw Error(o(60));e.innerHTML=n}}break;case"children":"string"===typeof r?kt(e,r):("number"===typeof r||"bigint"===typeof r)&&kt(e,""+r);break;case"onScroll":null!=r&&Fu("scroll",e);break;case"onScrollEnd":null!=r&&Fu("scrollend",e);break;case"onClick":null!=r&&(e.onclick=Xu);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:Ke.hasOwnProperty(n)||("o"!==n[0]||"n"!==n[1]||(i=n.endsWith("Capture"),t=n.slice(2,i?n.length-7:void 0),"function"===typeof(s=null!=(s=e[Re]||null)?s[n]:null)&&e.removeEventListener(t,s,i),"function"!==typeof r)?n in e?e[n]=r:!0===r?e.setAttribute(n,""):tt(e,n,r):("function"!==typeof s&&null!==s&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,r,i)))}}function td(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Fu("error",e),Fu("load",e);var r,i=!1,s=!1;for(r in n)if(n.hasOwnProperty(r)){var a=n[r];if(null!=a)switch(r){case"src":i=!0;break;case"srcSet":s=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:Zu(e,t,r,a,n,null)}}return s&&Zu(e,t,"srcSet",n.srcSet,n,null),void(i&&Zu(e,t,"src",n.src,n,null));case"input":Fu("invalid",e);var l=r=a=s=null,c=null,u=null;for(i in n)if(n.hasOwnProperty(i)){var d=n[i];if(null!=d)switch(i){case"name":s=d;break;case"type":a=d;break;case"checked":c=d;break;case"defaultChecked":u=d;break;case"value":r=d;break;case"defaultValue":l=d;break;case"children":case"dangerouslySetInnerHTML":if(null!=d)throw Error(o(137,t));break;default:Zu(e,t,i,d,n,null)}}return vt(e,r,l,c,u,a,s,!1),void dt(e);case"select":for(s in Fu("invalid",e),i=a=r=null,n)if(n.hasOwnProperty(s)&&null!=(l=n[s]))switch(s){case"value":r=l;break;case"defaultValue":a=l;break;case"multiple":i=l;default:Zu(e,t,s,l,n,null)}return t=r,n=a,e.multiple=!!i,void(null!=t?bt(e,!!i,t,!1):null!=n&&bt(e,!!i,n,!0));case"textarea":for(a in Fu("invalid",e),r=s=i=null,n)if(n.hasOwnProperty(a)&&null!=(l=n[a]))switch(a){case"value":i=l;break;case"defaultValue":s=l;break;case"children":r=l;break;case"dangerouslySetInnerHTML":if(null!=l)throw Error(o(91));break;default:Zu(e,t,a,l,n,null)}return xt(e,i,s,r),void dt(e);case"option":for(c in n)if(n.hasOwnProperty(c)&&null!=(i=n[c]))if("selected"===c)e.selected=i&&"function"!==typeof i&&"symbol"!==typeof i;else Zu(e,t,c,i,n,null);return;case"dialog":Fu("beforetoggle",e),Fu("toggle",e),Fu("cancel",e),Fu("close",e);break;case"iframe":case"object":Fu("load",e);break;case"video":case"audio":for(i=0;i<ju.length;i++)Fu(ju[i],e);break;case"image":Fu("error",e),Fu("load",e);break;case"details":Fu("toggle",e);break;case"embed":case"source":case"link":Fu("error",e),Fu("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(u in n)if(n.hasOwnProperty(u)&&null!=(i=n[u]))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:Zu(e,t,u,i,n,null)}return;default:if(Nt(t)){for(d in n)n.hasOwnProperty(d)&&(void 0!==(i=n[d])&&ed(e,t,d,i,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(null!=(i=n[l])&&Zu(e,t,l,i,n,null))}var nd=null,rd=null;function id(e){return 9===e.nodeType?e:e.ownerDocument}function sd(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function od(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function ad(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"bigint"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ld=null;var cd="function"===typeof setTimeout?setTimeout:void 0,ud="function"===typeof clearTimeout?clearTimeout:void 0,dd="function"===typeof Promise?Promise:void 0,hd="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof dd?function(e){return dd.resolve(null).then(e).catch(fd)}:cd;function fd(e){setTimeout(function(){throw e})}function pd(e){return"head"===e}function md(e,t){var n=t,r=0,i=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&8===s.nodeType)if("/$"===(n=s.data)){if(0<r&&8>r){n=r;var o=e.ownerDocument;if(1&n&&kd(o.documentElement),2&n&&kd(o.body),4&n)for(kd(n=o.head),o=n.firstChild;o;){var a=o.nextSibling,l=o.nodeName;o[Ue]||"SCRIPT"===l||"STYLE"===l||"LINK"===l&&"stylesheet"===o.rel.toLowerCase()||n.removeChild(o),o=a}}if(0===i)return e.removeChild(s),void _h(t);i--}else"$"===n||"$?"===n||"$!"===n?i++:r=n.charCodeAt(0)-48;else r=0;n=s}while(n);_h(t)}function gd(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":gd(n),Be(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===n.rel.toLowerCase())continue}e.removeChild(n)}}function vd(e){return"$!"===e.data||"$?"===e.data&&"complete"===e.ownerDocument.readyState}function yd(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"F!"===t||"F"===t)break;if("/$"===t)return null}}return e}var bd=null;function wd(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}function xd(e,t,n){switch(t=id(n),e){case"html":if(!(e=t.documentElement))throw Error(o(452));return e;case"head":if(!(e=t.head))throw Error(o(453));return e;case"body":if(!(e=t.body))throw Error(o(454));return e;default:throw Error(o(451))}}function kd(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Be(e)}var Sd=new Map,Ed=new Set;function Cd(e){return"function"===typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var Nd=j.d;j.d={f:function(){var e=Nd.f(),t=zc();return e||t},r:function(e){var t=ze(e);null!==t&&5===t.tag&&"form"===t.type?Lo(t):Nd.r(e)},D:function(e){Nd.D(e),_d("dns-prefetch",e,null)},C:function(e,t){Nd.C(e,t),_d("preconnect",e,t)},L:function(e,t,n){Nd.L(e,t,n);var r=Id;if(r&&e&&t){var i='link[rel="preload"][as="'+mt(t)+'"]';"image"===t&&n&&n.imageSrcSet?(i+='[imagesrcset="'+mt(n.imageSrcSet)+'"]',"string"===typeof n.imageSizes&&(i+='[imagesizes="'+mt(n.imageSizes)+'"]')):i+='[href="'+mt(e)+'"]';var s=i;switch(t){case"style":s=Ad(e);break;case"script":s=Rd(e)}Sd.has(s)||(e=h({rel:"preload",href:"image"===t&&n&&n.imageSrcSet?void 0:e,as:t},n),Sd.set(s,e),null!==r.querySelector(i)||"style"===t&&r.querySelector(Dd(s))||"script"===t&&r.querySelector(Ld(s))||(td(t=r.createElement("link"),"link",e),qe(t),r.head.appendChild(t)))}},m:function(e,t){Nd.m(e,t);var n=Id;if(n&&e){var r=t&&"string"===typeof t.as?t.as:"script",i='link[rel="modulepreload"][as="'+mt(r)+'"][href="'+mt(e)+'"]',s=i;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":s=Rd(e)}if(!Sd.has(s)&&(e=h({rel:"modulepreload",href:e},t),Sd.set(s,e),null===n.querySelector(i))){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Ld(s)))return}td(r=n.createElement("link"),"link",e),qe(r),n.head.appendChild(r)}}},X:function(e,t){Nd.X(e,t);var n=Id;if(n&&e){var r=He(n).hoistableScripts,i=Rd(e),s=r.get(i);s||((s=n.querySelector(Ld(i)))||(e=h({src:e,async:!0},t),(t=Sd.get(i))&&Fd(e,t),qe(s=n.createElement("script")),td(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},r.set(i,s))}},S:function(e,t,n){Nd.S(e,t,n);var r=Id;if(r&&e){var i=He(r).hoistableStyles,s=Ad(e);t=t||"default";var o=i.get(s);if(!o){var a={loading:0,preload:null};if(o=r.querySelector(Dd(s)))a.loading=5;else{e=h({rel:"stylesheet",href:e,"data-precedence":t},n),(n=Sd.get(s))&&Md(e,n);var l=o=r.createElement("link");qe(l),td(l,"link",e),l._p=new Promise(function(e,t){l.onload=e,l.onerror=t}),l.addEventListener("load",function(){a.loading|=1}),l.addEventListener("error",function(){a.loading|=2}),a.loading|=4,Od(o,t,r)}o={type:"stylesheet",instance:o,count:1,state:a},i.set(s,o)}}},M:function(e,t){Nd.M(e,t);var n=Id;if(n&&e){var r=He(n).hoistableScripts,i=Rd(e),s=r.get(i);s||((s=n.querySelector(Ld(i)))||(e=h({src:e,async:!0,type:"module"},t),(t=Sd.get(i))&&Fd(e,t),qe(s=n.createElement("script")),td(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},r.set(i,s))}}};var Id="undefined"===typeof document?null:document;function _d(e,t,n){var r=Id;if(r&&"string"===typeof t&&t){var i=mt(t);i='link[rel="'+e+'"][href="'+i+'"]',"string"===typeof n&&(i+='[crossorigin="'+n+'"]'),Ed.has(i)||(Ed.add(i),e={rel:e,crossOrigin:n,href:t},null===r.querySelector(i)&&(td(t=r.createElement("link"),"link",e),qe(t),r.head.appendChild(t)))}}function Td(e,t,n,r){var i,s,a,l,c=(c=H.current)?Cd(c):null;if(!c)throw Error(o(446));switch(e){case"meta":case"title":return null;case"style":return"string"===typeof n.precedence&&"string"===typeof n.href?(t=Ad(n.href),(r=(n=He(c).hoistableStyles).get(t))||(r={type:"style",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===n.rel&&"string"===typeof n.href&&"string"===typeof n.precedence){e=Ad(n.href);var u=He(c).hoistableStyles,d=u.get(e);if(d||(c=c.ownerDocument||c,d={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(e,d),(u=c.querySelector(Dd(e)))&&!u._p&&(d.instance=u,d.state.loading=5),Sd.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Sd.set(e,n),u||(i=c,s=e,a=n,l=d.state,i.querySelector('link[rel="preload"][as="style"]['+s+"]")?l.loading=1:(s=i.createElement("link"),l.preload=s,s.addEventListener("load",function(){return l.loading|=1}),s.addEventListener("error",function(){return l.loading|=2}),td(s,"link",a),qe(s),i.head.appendChild(s))))),t&&null===r)throw Error(o(528,""));return d}if(t&&null!==r)throw Error(o(529,""));return null;case"script":return t=n.async,"string"===typeof(n=n.src)&&t&&"function"!==typeof t&&"symbol"!==typeof t?(t=Rd(n),(r=(n=He(c).hoistableScripts).get(t))||(r={type:"script",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,e))}}function Ad(e){return'href="'+mt(e)+'"'}function Dd(e){return'link[rel="stylesheet"]['+e+"]"}function Pd(e){return h({},e,{"data-precedence":e.precedence,precedence:null})}function Rd(e){return'[src="'+mt(e)+'"]'}function Ld(e){return"script[async]"+e}function jd(e,t,n){if(t.count++,null===t.instance)switch(t.type){case"style":var r=e.querySelector('style[data-href~="'+mt(n.href)+'"]');if(r)return t.instance=r,qe(r),r;var i=h({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return qe(r=(e.ownerDocument||e).createElement("style")),td(r,"style",i),Od(r,n.precedence,e),t.instance=r;case"stylesheet":i=Ad(n.href);var s=e.querySelector(Dd(i));if(s)return t.state.loading|=4,t.instance=s,qe(s),s;r=Pd(n),(i=Sd.get(i))&&Md(r,i),qe(s=(e.ownerDocument||e).createElement("link"));var a=s;return a._p=new Promise(function(e,t){a.onload=e,a.onerror=t}),td(s,"link",r),t.state.loading|=4,Od(s,n.precedence,e),t.instance=s;case"script":return s=Rd(n.src),(i=e.querySelector(Ld(s)))?(t.instance=i,qe(i),i):(r=n,(i=Sd.get(s))&&Fd(r=h({},n),i),qe(i=(e=e.ownerDocument||e).createElement("script")),td(i,"link",r),e.head.appendChild(i),t.instance=i);case"void":return null;default:throw Error(o(443,t.type))}else"stylesheet"===t.type&&0===(4&t.state.loading)&&(r=t.instance,t.state.loading|=4,Od(r,n.precedence,e));return t.instance}function Od(e,t,n){for(var r=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),i=r.length?r[r.length-1]:null,s=i,o=0;o<r.length;o++){var a=r[o];if(a.dataset.precedence===t)s=a;else if(s!==i)break}s?s.parentNode.insertBefore(e,s.nextSibling):(t=9===n.nodeType?n.head:n).insertBefore(e,t.firstChild)}function Md(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function Fd(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var Ud=null;function Bd(e,t,n){if(null===Ud){var r=new Map,i=Ud=new Map;i.set(n,r)}else(r=(i=Ud).get(n))||(r=new Map,i.set(n,r));if(r.has(e))return r;for(r.set(e,null),n=n.getElementsByTagName(e),i=0;i<n.length;i++){var s=n[i];if(!(s[Ue]||s[Pe]||"link"===e&&"stylesheet"===s.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==s.namespaceURI){var o=s.getAttribute(t)||"";o=e+o;var a=r.get(o);a?a.push(s):r.set(o,[s])}}return r}function Vd(e,t,n){(e=e.ownerDocument||e).head.insertBefore(n,"title"===t?e.querySelector("head > title"):null)}function zd(e){return"stylesheet"!==e.type||0!==(3&e.state.loading)}var Wd=null;function Hd(){}function qd(){if(this.count--,0===this.count)if(this.stylesheets)Kd(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var Gd=null;function Kd(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,Gd=new Map,t.forEach(Qd,e),Gd=null,qd.call(e))}function Qd(e,t){if(!(4&t.state.loading)){var n=Gd.get(e);if(n)var r=n.get(null);else{n=new Map,Gd.set(e,n);for(var i=e.querySelectorAll("link[data-precedence],style[data-precedence]"),s=0;s<i.length;s++){var o=i[s];"LINK"!==o.nodeName&&"not all"===o.getAttribute("media")||(n.set(o.dataset.precedence,o),r=o)}r&&n.set(null,r)}o=(i=t.instance).getAttribute("data-precedence"),(s=n.get(o)||r)===r&&n.set(null,i),n.set(o,i),this.count++,r=qd.bind(this),i.addEventListener("load",r),i.addEventListener("error",r),s?s.parentNode.insertBefore(i,s.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(i,e.firstChild),t.state.loading|=4}}var Yd={$$typeof:x,Provider:null,Consumer:null,_currentValue:O,_currentValue2:O,_threadCount:0};function Jd(e,t,n,r,i,s,o,a){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ee(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ee(0),this.hiddenUpdates=Ee(null),this.identifierPrefix=r,this.onUncaughtError=i,this.onCaughtError=s,this.onRecoverableError=o,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=a,this.incompleteTransitions=new Map}function $d(e,t,n,r,i,s,o,a,l,c,u,d){return e=new Jd(e,t,n,o,a,l,c,d),t=1,!0===s&&(t|=24),s=Or(3,null,null,t),e.current=s,s.stateNode=e,(t=Ri()).refCount++,e.pooledCache=t,t.refCount++,s.memoizedState={element:r,isDehydrated:n,cache:t},ns(s),e}function Xd(e){return e?e=Lr:Lr}function Zd(e,t,n,r,i,s){i=Xd(i),null===r.context?r.context=i:r.pendingContext=i,(r=is(t)).payload={element:n},null!==(s=void 0===s?null:s)&&(r.callback=s),null!==(n=ss(e,r,t))&&(Mc(n,0,t),os(n,e,t))}function eh(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function th(e,t){eh(e,t),(e=e.alternate)&&eh(e,t)}function nh(e){if(13===e.tag){var t=Dr(e,67108864);null!==t&&Mc(t,0,67108864),th(e,67108864)}}var rh=!0;function ih(e,t,n,r){var i=L.T;L.T=null;var s=j.p;try{j.p=2,oh(e,t,n,r)}finally{j.p=s,L.T=i}}function sh(e,t,n,r){var i=L.T;L.T=null;var s=j.p;try{j.p=8,oh(e,t,n,r)}finally{j.p=s,L.T=i}}function oh(e,t,n,r){if(rh){var i=ah(r);if(null===i)Wu(e,t,r,lh,n),bh(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return hh=wh(hh,e,t,n,r,i),!0;case"dragenter":return fh=wh(fh,e,t,n,r,i),!0;case"mouseover":return ph=wh(ph,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return mh.set(s,wh(mh.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,gh.set(s,wh(gh.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(bh(e,r),4&t&&-1<yh.indexOf(e)){for(;null!==i;){var s=ze(i);if(null!==s)switch(s.tag){case 3:if((s=s.stateNode).current.memoizedState.isDehydrated){var o=ye(s.pendingLanes);if(0!==o){var a=s;for(a.pendingLanes|=2,a.entangledLanes|=2;o;){var l=1<<31-fe(o);a.entanglements[1]|=l,o&=~l}Su(s),0===(6&rc)&&(Sc=te()+500,Eu(0,!1))}}break;case 13:null!==(a=Dr(s,2))&&Mc(a,0,2),zc(),th(s,2)}if(null===(s=ah(r))&&Wu(e,t,r,lh,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else Wu(e,t,r,null,n)}}function ah(e){return ch(e=Dt(e))}var lh=null;function ch(e){if(lh=null,null!==(e=Ve(e))){var t=l(e);if(null===t)e=null;else{var n=t.tag;if(13===n){if(null!==(e=c(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return lh=e,null}function uh(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ne()){case re:return 2;case ie:return 8;case se:case oe:return 32;case ae:return 268435456;default:return 32}default:return 32}}var dh=!1,hh=null,fh=null,ph=null,mh=new Map,gh=new Map,vh=[],yh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function bh(e,t){switch(e){case"focusin":case"focusout":hh=null;break;case"dragenter":case"dragleave":fh=null;break;case"mouseover":case"mouseout":ph=null;break;case"pointerover":case"pointerout":mh.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":gh.delete(t.pointerId)}}function wh(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=ze(t))&&nh(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function xh(e){var t=Ve(e.target);if(null!==t){var n=l(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=c(n)))return e.blockedOn=t,void function(e,t){var n=j.p;try{return j.p=e,t()}finally{j.p=n}}(e.priority,function(){if(13===n.tag){var e=jc();e=_e(e);var t=Dr(n,e);null!==t&&Mc(t,0,e),th(n,e)}})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function kh(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=ah(e.nativeEvent);if(null!==n)return null!==(t=ze(n))&&nh(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);At=r,n.target.dispatchEvent(r),At=null,t.shift()}return!0}function Sh(e,t,n){kh(e)&&n.delete(t)}function Eh(){dh=!1,null!==hh&&kh(hh)&&(hh=null),null!==fh&&kh(fh)&&(fh=null),null!==ph&&kh(ph)&&(ph=null),mh.forEach(Sh),gh.forEach(Sh)}function Ch(e,t){e.blockedOn===t&&(e.blockedOn=null,dh||(dh=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Eh)))}var Nh=null;function Ih(e){Nh!==e&&(Nh=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Nh===e&&(Nh=null);for(var t=0;t<e.length;t+=3){var n=e[t],r=e[t+1],i=e[t+2];if("function"!==typeof r){if(null===ch(r||n))continue;break}var s=ze(n);null!==s&&(e.splice(t,3),t-=3,Po(s,{pending:!0,data:i,method:n.method,action:r},r,i))}}))}function _h(e){function t(t){return Ch(t,e)}null!==hh&&Ch(hh,e),null!==fh&&Ch(fh,e),null!==ph&&Ch(ph,e),mh.forEach(t),gh.forEach(t);for(var n=0;n<vh.length;n++){var r=vh[n];r.blockedOn===e&&(r.blockedOn=null)}for(;0<vh.length&&null===(n=vh[0]).blockedOn;)xh(n),null===n.blockedOn&&vh.shift();if(null!=(n=(e.ownerDocument||e).$$reactFormReplay))for(r=0;r<n.length;r+=3){var i=n[r],s=n[r+1],o=i[Re]||null;if("function"===typeof s)o||Ih(n);else if(o){var a=null;if(s&&s.hasAttribute("formAction")){if(i=s,o=s[Re]||null)a=o.formAction;else if(null!==ch(i))continue}else a=o.action;"function"===typeof a?n[r+1]=a:(n.splice(r,3),r-=3),Ih(n)}}}function Th(e){this._internalRoot=e}function Ah(e){this._internalRoot=e}Ah.prototype.render=Th.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));Zd(t.current,jc(),e,t,null,null)},Ah.prototype.unmount=Th.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;Zd(e.current,2,null,e,null,null),zc(),t[Le]=null}},Ah.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ae();e={blockedOn:null,target:e,priority:t};for(var n=0;n<vh.length&&0!==t&&t<vh[n].priority;n++);vh.splice(n,0,e),0===n&&xh(e)}};var Dh=i.version;if("19.1.1"!==Dh)throw Error(o(527,Dh,"19.1.1"));j.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=l(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var s=i.alternate;if(null===s){if(null!==(r=i.return)){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return u(i),e;if(s===r)return u(i),t;s=s.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,c=i.child;c;){if(c===n){a=!0,n=i,r=s;break}if(c===r){a=!0,r=i,n=s;break}c=c.sibling}if(!a){for(c=s.child;c;){if(c===n){a=!0,n=s,r=i;break}if(c===r){a=!0,r=s,n=i;break}c=c.sibling}if(!a)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(t),e=null===(e=null!==e?d(e):null)?null:e.stateNode};var Ph={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:L,reconcilerVersion:"19.1.1"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Rh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Rh.isDisabled&&Rh.supportsFiber)try{ue=Rh.inject(Ph),de=Rh}catch(jh){}}t.createRoot=function(e,t){if(!a(e))throw Error(o(299));var n=!1,r="",i=ba,s=wa,l=xa;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onUncaughtError&&(i=t.onUncaughtError),void 0!==t.onCaughtError&&(s=t.onCaughtError),void 0!==t.onRecoverableError&&(l=t.onRecoverableError),void 0!==t.unstable_transitionCallbacks&&t.unstable_transitionCallbacks),t=$d(e,1,!1,null,0,n,r,i,s,l,0,null),e[Le]=t.current,Vu(e),new Th(t)},t.hydrateRoot=function(e,t,n){if(!a(e))throw Error(o(299));var r=!1,i="",s=ba,l=wa,c=xa,u=null;return null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(i=n.identifierPrefix),void 0!==n.onUncaughtError&&(s=n.onUncaughtError),void 0!==n.onCaughtError&&(l=n.onCaughtError),void 0!==n.onRecoverableError&&(c=n.onRecoverableError),void 0!==n.unstable_transitionCallbacks&&n.unstable_transitionCallbacks,void 0!==n.formState&&(u=n.formState)),(t=$d(e,1,!0,t,0,r,i,s,l,c,0,u)).context=Xd(null),n=t.current,(i=is(r=_e(r=jc()))).callback=null,ss(n,i,r),n=r,t.current.lanes=n,Ce(t,n),Su(t),e[Le]=t.current,Vu(e),new Ah(t)},t.version="19.1.1"},43:(e,t,n)=>{e.exports=n(288)},82:(e,t)=>{var n=60103,r=60106,i=60107,s=60108,o=60114,a=60109,l=60110,c=60112,u=60113,d=60120,h=60115,f=60116,p=60121,m=60122,g=60117,v=60129,y=60131;if("function"===typeof Symbol&&Symbol.for){var b=Symbol.for;n=b("react.element"),r=b("react.portal"),i=b("react.fragment"),s=b("react.strict_mode"),o=b("react.profiler"),a=b("react.provider"),l=b("react.context"),c=b("react.forward_ref"),u=b("react.suspense"),d=b("react.suspense_list"),h=b("react.memo"),f=b("react.lazy"),p=b("react.block"),m=b("react.server.block"),g=b("react.fundamental"),v=b("react.debug_trace_mode"),y=b("react.legacy_hidden")}function w(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case i:case o:case s:case u:case d:return e;default:switch(e=e&&e.$$typeof){case l:case c:case f:case h:case a:return e;default:return t}}case r:return t}}}t.isContextConsumer=function(e){return w(e)===l}},86:(e,t,n)=>{e.exports=n(82)},219:(e,t,n)=>{var r=n(763),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},s={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},a={};function l(e){return r.isMemo(e)?o:a[e.$$typeof]||i}a[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},a[r.Memo]=o;var c=Object.defineProperty,u=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,f=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(p){var i=f(n);i&&i!==p&&e(t,i,r)}var o=u(n);d&&(o=o.concat(d(n)));for(var a=l(t),m=l(n),g=0;g<o.length;++g){var v=o[g];if(!s[v]&&(!r||!r[v])&&(!m||!m[v])&&(!a||!a[v])){var y=h(n,v);try{c(t,v,y)}catch(b){}}}}return t}},288:(e,t)=>{var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function y(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var w=b.prototype=new y;w.constructor=b,m(w,v.prototype),w.isPureReactComponent=!0;var x=Array.isArray,k={H:null,A:null,T:null,S:null,V:null},S=Object.prototype.hasOwnProperty;function E(e,t,r,i,s,o){return r=o.ref,{$$typeof:n,type:e,key:t,ref:void 0!==r?r:null,props:o}}function C(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var N=/\/+/g;function I(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function _(){}function T(e,t,i,s,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l,c,u=!1;if(null===e)u=!0;else switch(a){case"bigint":case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case r:u=!0;break;case h:return T((u=e._init)(e._payload),t,i,s,o)}}if(u)return o=o(e),u=""===s?"."+I(e,0):s,x(o)?(i="",null!=u&&(i=u.replace(N,"$&/")+"/"),T(o,t,i,"",function(e){return e})):null!=o&&(C(o)&&(l=o,c=i+(null==o.key||e&&e.key===o.key?"":(""+o.key).replace(N,"$&/")+"/")+u,o=E(l.type,c,void 0,0,0,l.props)),t.push(o)),1;u=0;var d,p=""===s?".":s+":";if(x(e))for(var m=0;m<e.length;m++)u+=T(s=e[m],t,i,a=p+I(s,m),o);else if("function"===typeof(m=null===(d=e)||"object"!==typeof d?null:"function"===typeof(d=f&&d[f]||d["@@iterator"])?d:null))for(e=m.call(e),m=0;!(s=e.next()).done;)u+=T(s=s.value,t,i,a=p+I(s,m++),o);else if("object"===a){if("function"===typeof e.then)return T(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"===typeof e.status?e.then(_,_):(e.status="pending",e.then(function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)},function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(e),t,i,s,o);throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return u}function A(e,t,n){if(null==e)return e;var r=[],i=0;return T(e,r,"","",function(e){return t.call(n,e,i++)}),r}function D(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var P="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function R(){}t.Children={map:A,forEach:function(e,t,n){A(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return A(e,function(){t++}),t},toArray:function(e){return A(e,function(e){return e})||[]},only:function(e){if(!C(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=i,t.Profiler=o,t.PureComponent=b,t.StrictMode=s,t.Suspense=u,t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=k,t.__COMPILER_RUNTIME={__proto__:null,c:function(e){return k.H.useMemoCache(e)}},t.cache=function(e){return function(){return e.apply(null,arguments)}},t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("The argument must be a React element, but you passed "+e+".");var r=m({},e.props),i=e.key;if(null!=t)for(s in void 0!==t.ref&&void 0,void 0!==t.key&&(i=""+t.key),t)!S.call(t,s)||"key"===s||"__self"===s||"__source"===s||"ref"===s&&void 0===t.ref||(r[s]=t[s]);var s=arguments.length-2;if(1===s)r.children=n;else if(1<s){for(var o=Array(s),a=0;a<s;a++)o[a]=arguments[a+2];r.children=o}return E(e.type,i,void 0,0,0,r)},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:a,_context:e},e},t.createElement=function(e,t,n){var r,i={},s=null;if(null!=t)for(r in void 0!==t.key&&(s=""+t.key),t)S.call(t,r)&&"key"!==r&&"__self"!==r&&"__source"!==r&&(i[r]=t[r]);var o=arguments.length-2;if(1===o)i.children=n;else if(1<o){for(var a=Array(o),l=0;l<o;l++)a[l]=arguments[l+2];i.children=a}if(e&&e.defaultProps)for(r in o=e.defaultProps)void 0===i[r]&&(i[r]=o[r]);return E(e,s,void 0,0,0,i)},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=C,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:D}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=k.T,n={};k.T=n;try{var r=e(),i=k.S;null!==i&&i(n,r),"object"===typeof r&&null!==r&&"function"===typeof r.then&&r.then(R,P)}catch(s){P(s)}finally{k.T=t}},t.unstable_useCacheRefresh=function(){return k.H.useCacheRefresh()},t.use=function(e){return k.H.use(e)},t.useActionState=function(e,t,n){return k.H.useActionState(e,t,n)},t.useCallback=function(e,t){return k.H.useCallback(e,t)},t.useContext=function(e){return k.H.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e,t){return k.H.useDeferredValue(e,t)},t.useEffect=function(e,t,n){var r=k.H;if("function"===typeof n)throw Error("useEffect CRUD overload is not enabled in this build of React.");return r.useEffect(e,t)},t.useId=function(){return k.H.useId()},t.useImperativeHandle=function(e,t,n){return k.H.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return k.H.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return k.H.useLayoutEffect(e,t)},t.useMemo=function(e,t){return k.H.useMemo(e,t)},t.useOptimistic=function(e,t){return k.H.useOptimistic(e,t)},t.useReducer=function(e,t,n){return k.H.useReducer(e,t,n)},t.useRef=function(e){return k.H.useRef(e)},t.useState=function(e){return k.H.useState(e)},t.useSyncExternalStore=function(e,t,n){return k.H.useSyncExternalStore(e,t,n)},t.useTransition=function(){return k.H.useTransition()},t.version="19.1.1"},391:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4)},579:(e,t,n)=>{e.exports=n(799)},672:(e,t,n)=>{var r=n(43);function i(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(){}var o={d:{f:s,r:function(){throw Error(i(522))},D:s,C:s,L:s,m:s,X:s,S:s,M:s},p:0,findDOMNode:null},a=Symbol.for("react.portal");var l=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(e,t){return"font"===e?"":"string"===typeof t?"use-credentials"===t?t:"":void 0}t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)throw Error(i(299));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:a,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.flushSync=function(e){var t=l.T,n=o.p;try{if(l.T=null,o.p=2,e)return e()}finally{l.T=t,o.p=n,o.d.f()}},t.preconnect=function(e,t){"string"===typeof e&&(t?t="string"===typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:t=null,o.d.C(e,t))},t.prefetchDNS=function(e){"string"===typeof e&&o.d.D(e)},t.preinit=function(e,t){if("string"===typeof e&&t&&"string"===typeof t.as){var n=t.as,r=c(n,t.crossOrigin),i="string"===typeof t.integrity?t.integrity:void 0,s="string"===typeof t.fetchPriority?t.fetchPriority:void 0;"style"===n?o.d.S(e,"string"===typeof t.precedence?t.precedence:void 0,{crossOrigin:r,integrity:i,fetchPriority:s}):"script"===n&&o.d.X(e,{crossOrigin:r,integrity:i,fetchPriority:s,nonce:"string"===typeof t.nonce?t.nonce:void 0})}},t.preinitModule=function(e,t){if("string"===typeof e)if("object"===typeof t&&null!==t){if(null==t.as||"script"===t.as){var n=c(t.as,t.crossOrigin);o.d.M(e,{crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0})}}else null==t&&o.d.M(e)},t.preload=function(e,t){if("string"===typeof e&&"object"===typeof t&&null!==t&&"string"===typeof t.as){var n=t.as,r=c(n,t.crossOrigin);o.d.L(e,n,{crossOrigin:r,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0,type:"string"===typeof t.type?t.type:void 0,fetchPriority:"string"===typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"===typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"===typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"===typeof t.imageSizes?t.imageSizes:void 0,media:"string"===typeof t.media?t.media:void 0})}},t.preloadModule=function(e,t){if("string"===typeof e)if(t){var n=c(t.as,t.crossOrigin);o.d.m(e,{as:"string"===typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0})}else o.d.m(e)},t.requestFormReset=function(e){o.d.r(e)},t.unstable_batchedUpdates=function(e,t){return e(t)},t.useFormState=function(e,t,n){return l.H.useFormState(e,t,n)},t.useFormStatus=function(){return l.H.useHostTransitionStatus()},t.version="19.1.1"},763:(e,t,n)=>{e.exports=n(983)},799:(e,t)=>{var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function i(e,t,r){var i=null;if(void 0!==r&&(i=""+r),void 0!==t.key&&(i=""+t.key),"key"in t)for(var s in r={},t)"key"!==s&&(r[s]=t[s]);else r=t;return t=r.ref,{$$typeof:n,type:e,key:i,ref:void 0!==t?t:null,props:r}}t.Fragment=r,t.jsx=i,t.jsxs=i},853:(e,t,n)=>{e.exports=n(896)},896:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var a=2*(r+1)-1,l=e[a],c=a+1,u=e[c];if(0>s(l,n))c<i&&0>s(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[a]=n,r=a);else{if(!(c<i&&0>s(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(t.unstable_now=void 0,"object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],d=1,h=null,f=3,p=!1,m=!1,g=!1,v=!1,y="function"===typeof setTimeout?setTimeout:null,b="function"===typeof clearTimeout?clearTimeout:null,w="undefined"!==typeof setImmediate?setImmediate:null;function x(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function k(e){if(g=!1,x(e),!m)if(null!==r(c))m=!0,E||(E=!0,S());else{var t=r(u);null!==t&&P(k,t.startTime-e)}}var S,E=!1,C=-1,N=5,I=-1;function _(){return!!v||!(t.unstable_now()-I<N)}function T(){if(v=!1,E){var e=t.unstable_now();I=e;var n=!0;try{e:{m=!1,g&&(g=!1,b(C),C=-1),p=!0;var s=f;try{t:{for(x(e),h=r(c);null!==h&&!(h.expirationTime>e&&_());){var o=h.callback;if("function"===typeof o){h.callback=null,f=h.priorityLevel;var a=o(h.expirationTime<=e);if(e=t.unstable_now(),"function"===typeof a){h.callback=a,x(e),n=!0;break t}h===r(c)&&i(c),x(e)}else i(c);h=r(c)}if(null!==h)n=!0;else{var l=r(u);null!==l&&P(k,l.startTime-e),n=!1}}break e}finally{h=null,f=s,p=!1}n=void 0}}finally{n?S():E=!1}}}if("function"===typeof w)S=function(){w(T)};else if("undefined"!==typeof MessageChannel){var A=new MessageChannel,D=A.port2;A.port1.onmessage=T,S=function(){D.postMessage(null)}}else S=function(){y(T,0)};function P(e,n){C=y(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_requestPaint=function(){v=!0},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,s){var o=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?o+s:o:s=o,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:d++,callback:i,priorityLevel:e,startTime:s,expirationTime:a=s+a,sortIndex:-1},s>o?(e.sortIndex=s,n(u,e),null===r(c)&&e===r(u)&&(g?(b(C),C=-1):g=!0,P(k,s-o))):(e.sortIndex=a,n(c,e),m||p||(m=!0,E||(E=!0,S()))),e},t.unstable_shouldYield=_,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},950:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(672)},983:(e,t)=>{var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,s=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,a=n?Symbol.for("react.profiler"):60114,l=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,u=n?Symbol.for("react.async_mode"):60111,d=n?Symbol.for("react.concurrent_mode"):60111,h=n?Symbol.for("react.forward_ref"):60112,f=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,m=n?Symbol.for("react.memo"):60115,g=n?Symbol.for("react.lazy"):60116,v=n?Symbol.for("react.block"):60121,y=n?Symbol.for("react.fundamental"):60117,b=n?Symbol.for("react.responder"):60118,w=n?Symbol.for("react.scope"):60119;function x(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case u:case d:case s:case a:case o:case f:return e;default:switch(e=e&&e.$$typeof){case c:case h:case g:case m:case l:return e;default:return t}}case i:return t}}}function k(e){return x(e)===d}t.AsyncMode=u,t.ConcurrentMode=d,t.ContextConsumer=c,t.ContextProvider=l,t.Element=r,t.ForwardRef=h,t.Fragment=s,t.Lazy=g,t.Memo=m,t.Portal=i,t.Profiler=a,t.StrictMode=o,t.Suspense=f,t.isAsyncMode=function(e){return k(e)||x(e)===u},t.isConcurrentMode=k,t.isContextConsumer=function(e){return x(e)===c},t.isContextProvider=function(e){return x(e)===l},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return x(e)===h},t.isFragment=function(e){return x(e)===s},t.isLazy=function(e){return x(e)===g},t.isMemo=function(e){return x(e)===m},t.isPortal=function(e){return x(e)===i},t.isProfiler=function(e){return x(e)===a},t.isStrictMode=function(e){return x(e)===o},t.isSuspense=function(e){return x(e)===f},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===s||e===d||e===a||e===o||e===f||e===p||"object"===typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===m||e.$$typeof===l||e.$$typeof===c||e.$$typeof===h||e.$$typeof===y||e.$$typeof===b||e.$$typeof===w||e.$$typeof===v)},t.typeOf=x}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.p="/";var r=n(43),i=n(391);function s(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}function o(e,t){if(null==e)return{};var n,r,i=s(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function l(e){var t=function(e,t){if("object"!=a(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==a(t)?t:t+""}function c(e,t,n){return(t=l(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach(function(t){c(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}const h=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},f={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,o=s?e[i+1]:0,a=i+2<e.length,l=a?e[i+2]:0,c=t>>2,u=(3&t)<<4|o>>4;let d=(15&o)<<2|l>>6,h=63&l;a||(h=64,s||(d=64)),r.push(n[c],n[u],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(h(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const o=i<e.length?n[e.charAt(i)]:64;++i;const a=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==o||null==a)throw new p;const l=t<<2|s>>4;if(r.push(l),64!==o){const e=s<<4&240|o>>2;if(r.push(e),64!==a){const e=o<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class p extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const m=function(e){return function(e){const t=h(e);return f.encodeByteArray(t,!0)}(e).replace(/\./g,"")},g=function(e){try{return f.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function v(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}const y=()=>{try{return v().__FIREBASE_DEFAULTS__||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyDQcOtn1iNoYtEezwMIpauCnZ3pdM2fyW0",REACT_APP_FIREBASE_AUTH_DOMAIN:"tenminutesfromhell.firebaseapp.com",REACT_APP_FIREBASE_PROJECT_ID:"tenminutesfromhell",REACT_APP_FIREBASE_STORAGE_BUCKET:"tenminutesfromhell.firebasestorage.app",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"24426608546",REACT_APP_FIREBASE_APP_ID:"1:24426608546:web:a38f1e008d0968d8c2a4fb"}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&g(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},b=e=>{var t;return null===(t=y())||void 0===t||null===(t=t.emulatorHosts)||void 0===t?void 0:t[e]},w=()=>{var e;return null===(e=y())||void 0===e?void 0:e.config},x=e=>{var t;return null===(t=y())||void 0===t?void 0:t["_".concat(e)]};class k{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function S(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch(t){return!1}}async function E(e){return(await fetch(e,{credentials:"include"})).ok}const C={};let N=!1;function I(e,t){if("undefined"===typeof window||"undefined"===typeof document||!S(window.location.host)||C[e]===t||C[e]||N)return;function n(e){return"__firebase__banner__".concat(e)}C[e]=t;const r="__firebase__banner",i=function(){const e={prod:[],emulator:[]};for(const t of Object.keys(C))C[t]?e.emulator.push(t):e.prod.push(t);return e}().prod.length>0;function s(){const e=document.createElement("span");return e.style.cursor="pointer",e.style.marginLeft="16px",e.style.fontSize="24px",e.innerHTML=" &times;",e.onclick=()=>{N=!0,function(){const e=document.getElementById(r);e&&e.remove()}()},e}function o(){const e=function(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}(r),t=n("text"),o=document.getElementById(t)||document.createElement("span"),a=n("learnmore"),l=document.getElementById(a)||document.createElement("a"),c=n("preprendIcon"),u=document.getElementById(c)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(e.created){const t=e.element;!function(e){e.style.display="flex",e.style.background="#7faaf0",e.style.position="fixed",e.style.bottom="5px",e.style.left="5px",e.style.padding=".5em",e.style.borderRadius="5px",e.style.alignItems="center"}(t),function(e,t){e.setAttribute("id",t),e.innerText="Learn more",e.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",e.setAttribute("target","__blank"),e.style.paddingLeft="5px",e.style.textDecoration="underline"}(l,a);const n=s();!function(e,t){e.setAttribute("width","24"),e.setAttribute("id",t),e.setAttribute("height","24"),e.setAttribute("viewBox","0 0 24 24"),e.setAttribute("fill","none"),e.style.marginLeft="-6px"}(u,c),t.append(u,o,l,n),document.body.appendChild(t)}i?(o.innerText="Preview backend disconnected.",u.innerHTML='<g clip-path="url(#clip0_6013_33858)">\n<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6013_33858">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>'):(u.innerHTML='<g clip-path="url(#clip0_6083_34804)">\n<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6083_34804">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>',o.innerText="Preview backend running in this workspace."),o.setAttribute("id",t)}"loading"===document.readyState?window.addEventListener("DOMContentLoaded",o):o()}function _(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function T(){var e;const t=null===(e=y())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}function A(){return!T()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function D(){try{return"object"===typeof indexedDB}catch(e){return!1}}class P extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,P.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,R.prototype.create)}}class R{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(L,(e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")})}(r,t):"Error",s="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new P(n,s,t)}}const L=/\{\$([^}]+)}/g;function j(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(O(n)&&O(s)){if(!j(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function O(e){return null!==e&&"object"===typeof e}function M(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function F(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function U(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class B{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=V),void 0===r.error&&(r.error=V),void 0===r.complete&&(r.complete=V);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}}),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function V(){}function z(e){return e&&e._delegate?e._delegate:e}class W{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const H="[DEFAULT]";class q{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new k;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:H})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===H?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(s){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H;return this.component?this.component.multipleInstances?e:H:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class G{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new q(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const K=[];var Q;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Q||(Q={}));const Y={debug:Q.DEBUG,verbose:Q.VERBOSE,info:Q.INFO,warn:Q.WARN,error:Q.ERROR,silent:Q.SILENT},J=Q.INFO,$={[Q.DEBUG]:"log",[Q.VERBOSE]:"log",[Q.INFO]:"info",[Q.WARN]:"warn",[Q.ERROR]:"error"},X=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=$[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];console[r]("[".concat(n,"]  ").concat(e.name,":"),...s)};class Z{constructor(e){this.name=e,this._logLevel=J,this._logHandler=X,this._userLogHandler=null,K.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Q))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?Y[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Q.DEBUG,...t),this._logHandler(this,Q.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Q.VERBOSE,...t),this._logHandler(this,Q.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Q.INFO,...t),this._logHandler(this,Q.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Q.WARN,...t),this._logHandler(this,Q.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Q.ERROR,...t),this._logHandler(this,Q.ERROR,...t)}}let ee,te;const ne=new WeakMap,re=new WeakMap,ie=new WeakMap,se=new WeakMap,oe=new WeakMap;let ae={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return re.get(e);if("objectStoreNames"===t)return e.objectStoreNames||ie.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ue(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function le(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(te||(te=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(de(this),n),ue(ne.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return ue(e.apply(de(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=e.call(de(this),t,...r);return ie.set(s,t.sort?t.sort():[t]),ue(s)}}function ce(e){return"function"===typeof e?le(e):(e instanceof IDBTransaction&&function(e){if(re.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)});re.set(e,t)}(e),t=e,(ee||(ee=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,ae):e);var t}function ue(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(ue(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)});return t.then(t=>{t instanceof IDBCursor&&ne.set(t,e)}).catch(()=>{}),oe.set(t,e),t}(e);if(se.has(e))return se.get(e);const t=ce(e);return t!==e&&(se.set(e,t),oe.set(t,e)),t}const de=e=>oe.get(e);const he=["get","getKey","getAll","getAllKeys","count"],fe=["put","add","delete","clear"],pe=new Map;function me(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(pe.get(t))return pe.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=fe.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!he.includes(n))return;const s=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let s=t.store;for(var o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];return r&&(s=s.index(a.shift())),(await Promise.all([s[n](...a),i&&t.done]))[0]};return pe.set(t,s),s}ae=(e=>d(d({},e),{},{get:(t,n,r)=>me(t,n)||e.get(t,n,r),has:(t,n)=>!!me(t,n)||e.has(t,n)}))(ae);class ge{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null}).filter(e=>e).join(" ")}}const ve="@firebase/app",ye="0.14.8",be=new Z("@firebase/app"),we="@firebase/app-compat",xe="@firebase/analytics-compat",ke="@firebase/analytics",Se="@firebase/app-check-compat",Ee="@firebase/app-check",Ce="@firebase/auth",Ne="@firebase/auth-compat",Ie="@firebase/database",_e="@firebase/data-connect",Te="@firebase/database-compat",Ae="@firebase/functions",De="@firebase/functions-compat",Pe="@firebase/installations",Re="@firebase/installations-compat",Le="@firebase/messaging",je="@firebase/messaging-compat",Oe="@firebase/performance",Me="@firebase/performance-compat",Fe="@firebase/remote-config",Ue="@firebase/remote-config-compat",Be="@firebase/storage",Ve="@firebase/storage-compat",ze="@firebase/firestore",We="@firebase/ai",He="@firebase/firestore-compat",qe="firebase",Ge="[DEFAULT]",Ke={[ve]:"fire-core",[we]:"fire-core-compat",[ke]:"fire-analytics",[xe]:"fire-analytics-compat",[Ee]:"fire-app-check",[Se]:"fire-app-check-compat",[Ce]:"fire-auth",[Ne]:"fire-auth-compat",[Ie]:"fire-rtdb",[_e]:"fire-data-connect",[Te]:"fire-rtdb-compat",[Ae]:"fire-fn",[De]:"fire-fn-compat",[Pe]:"fire-iid",[Re]:"fire-iid-compat",[Le]:"fire-fcm",[je]:"fire-fcm-compat",[Oe]:"fire-perf",[Me]:"fire-perf-compat",[Fe]:"fire-rc",[Ue]:"fire-rc-compat",[Be]:"fire-gcs",[Ve]:"fire-gcs-compat",[ze]:"fire-fst",[He]:"fire-fst-compat",[We]:"fire-vertex","fire-js":"fire-js",[qe]:"fire-js-all"},Qe=new Map,Ye=new Map,Je=new Map;function $e(e,t){try{e.container.addComponent(t)}catch(n){be.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function Xe(e){const t=e.name;if(Je.has(t))return be.debug("There were multiple attempts to register component ".concat(t,".")),!1;Je.set(t,e);for(const n of Qe.values())$e(n,e);for(const n of Ye.values())$e(n,e);return!0}function Ze(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function et(e){return null!==e&&void 0!==e&&void 0!==e.settings}const tt=new R("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class nt{constructor(e,t,n){this._isDeleted=!1,this._options=d({},e),this._config=d({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new W("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw tt.create("app-deleted",{appName:this._name})}}const rt="12.9.0";function it(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=d({name:Ge,automaticDataCollectionEnabled:!0},t),i=r.name;if("string"!==typeof i||!i)throw tt.create("bad-app-name",{appName:String(i)});if(n||(n=w()),!n)throw tt.create("no-options");const s=Qe.get(i);if(s){if(j(n,s.options)&&j(r,s.config))return s;throw tt.create("duplicate-app",{appName:i})}const o=new G(i);for(const l of Je.values())o.addComponent(l);const a=new nt(n,r,o);return Qe.set(i,a),a}function st(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ge;const t=Qe.get(e);if(!t&&e===Ge&&w())return it();if(!t)throw tt.create("no-app",{appName:e});return t}function ot(e,t,n){var r;let i=null!==(r=Ke[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const e=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return s&&e.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),s&&o&&e.push("and"),o&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void be.warn(e.join(" "))}Xe(new W("".concat(i,"-version"),()=>({library:i,version:t}),"VERSION"))}const at="firebase-heartbeat-store";let lt=null;function ct(){return lt||(lt=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=indexedDB.open(e,t),a=ue(o);return r&&o.addEventListener("upgradeneeded",e=>{r(ue(o.result),e.oldVersion,e.newVersion,ue(o.transaction),e)}),n&&o.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),a.then(e=>{s&&e.addEventListener("close",()=>s()),i&&e.addEventListener("versionchange",e=>i(e.oldVersion,e.newVersion,e))}).catch(()=>{}),a}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(at)}catch(n){console.warn(n)}}}).catch(e=>{throw tt.create("idb-open",{originalErrorMessage:e.message})})),lt}async function ut(e,t){try{const n=(await ct()).transaction(at,"readwrite"),r=n.objectStore(at);await r.put(t,dt(e)),await n.done}catch(n){if(n instanceof P)be.warn(n.message);else{const e=tt.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});be.warn(e.message)}}}function dt(e){return"".concat(e.name,"!").concat(e.options.appId)}class ht{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new pt(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){try{var e;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=ft();var t;if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats))if(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(e=>e.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>30){const e=function(e){if(0===e.length)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){be.warn(n)}}async getHeartbeatsHeader(){try{var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=ft(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find(e=>e.agent===i.agent);if(e){if(e.dates.push(i.date),mt(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),mt(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=m(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(t){return be.warn(t),""}}}function ft(){return(new Date).toISOString().substring(0,10)}class pt{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!D()&&new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}}).then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await ct()).transaction(at),n=await t.objectStore(at).get(dt(e));return await t.done,n}catch(t){if(t instanceof P)be.warn(t.message);else{const e=tt.create("idb-get",{originalErrorMessage:null===t||void 0===t?void 0:t.message});be.warn(e.message)}}}(this.app);return null!==e&&void 0!==e&&e.heartbeats?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){var t;const n=await this.read();return ut(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){if(await this._canUseIndexedDBPromise){var t;const n=await this.read();return ut(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function mt(e){return m(JSON.stringify({version:2,heartbeats:e})).length}var gt;gt="",Xe(new W("platform-logger",e=>new ge(e),"PRIVATE")),Xe(new W("heartbeat",e=>new ht(e),"PRIVATE")),ot(ve,ye,gt),ot(ve,ye,"esm2020"),ot("fire-js","");const vt=["providerId"],yt=["uid","auth","stsTokenManager"],bt=["providerId","signInMethod"];function wt(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const xt=wt,kt=new R("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),St=new Z("@firebase/auth");function Et(e){if(St.logLevel<=Q.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];St.error("Auth (".concat(rt,"): ").concat(e),...n)}}function Ct(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw At(e,...n)}function Nt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return At(e,...n)}function It(e,t,n){const r=d(d({},xt()),{},{[t]:n});return new R("auth","Firebase",r).create(t,{appName:e.name})}function _t(e){return It(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Tt(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&Ct(e,"argument-error"),It(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function At(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return kt.create(e,...n)}function Dt(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw At(t,...r)}}function Pt(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Et(t),new Error(t)}function Rt(e,t){e||Pt(t)}function Lt(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function jt(){return"http:"===Ot()||"https:"===Ot()}function Ot(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function Mt(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(jt()||function(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}class Ft{constructor(e,t){this.shortDelay=e,this.longDelay=t,Rt(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(_())||"object"===typeof navigator&&"ReactNative"===navigator.product}get(){return Mt()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Ut(e,t){Rt(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class Bt{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void Pt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void Pt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void Pt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Vt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},zt=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Wt=new Ft(3e4,6e4);function Ht(e,t){return e.tenantId&&!t.tenantId?d(d({},t),{},{tenantId:e.tenantId}):t}async function qt(e,t,n,r){return Gt(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},async()=>{let i={},s={};r&&("GET"===t?s=r:i={body:JSON.stringify(r)});const o=M(d({key:e.config.apiKey},s)).slice(1),a=await e._getAdditionalHeaders();a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode);const l=d({method:t,headers:a},i);return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||(l.referrerPolicy="no-referrer"),e.emulatorConfig&&S(e.emulatorConfig.host)&&(l.credentials="include"),Bt.fetch()(await Qt(e,e.config.apiHost,n,o),l)})}async function Gt(e,t,n){e._canInitEmulator=!1;const r=d(d({},Vt),t);try{const t=new Jt(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw $t(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw $t(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw $t(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw $t(e,"user-disabled",s);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw It(e,a,o);Ct(e,a)}}catch(i){if(i instanceof P)throw i;Ct(e,"network-request-failed",{message:String(i)})}}async function Kt(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await qt(e,t,n,r,i);return"mfaPendingCredential"in s&&Ct(e,"multi-factor-auth-required",{_serverResponse:s}),s}async function Qt(e,t,n,r){const i="".concat(t).concat(n,"?").concat(r),s=e,o=s.config.emulator?Ut(e.config,i):"".concat(e.config.apiScheme,"://").concat(i);if(zt.includes(n)&&(await s._persistenceManagerAvailable,"COOKIE"===s._getPersistenceType())){return s._getPersistence()._getFinalTarget(o).toString()}return o}function Yt(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Jt{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(Nt(this.auth,"network-request-failed")),Wt.get())})}}function $t(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Nt(e,t,r);return i.customData._tokenResponse=n,i}function Xt(e){return void 0!==e&&void 0!==e.enterprise}class Zt{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Yt(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function en(e,t){return qt(e,"GET","/v2/recaptchaConfig",Ht(e,t))}async function tn(e,t){return qt(e,"POST","/v1/accounts:lookup",t)}function nn(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function rn(e){return 1e3*Number(e)}function sn(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return Et("JWT malformed, contained fewer than 3 sections"),null;try{const e=g(n);return e?JSON.parse(e):(Et("Failed to decode base64 JWT payload"),null)}catch(i){return Et("Caught error parsing JWT payload as JSON",null===i||void 0===i?void 0:i.toString()),null}}function on(e){const t=sn(e);return Dt(t,"internal-error"),Dt("undefined"!==typeof t.exp,"internal-error"),Dt("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function an(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(n){throw n instanceof P&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}class ln{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{var t;this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void((null===e||void 0===e?void 0:e.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class cn{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=nn(this.lastLoginAt),this.creationTime=nn(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function un(e){var t;const n=e.auth,r=await e.getIdToken(),i=await an(e,tn(n,{idToken:r}));Dt(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=null!==(t=s.providerUserInfo)&&void 0!==t&&t.length?dn(s.providerUserInfo):[],a=(l=e.providerData,c=o,[...l.filter(e=>!c.some(t=>t.providerId===e.providerId)),...c]);var l,c;const u=e.isAnonymous,d=!(e.email&&s.passwordHash)&&!(null!==a&&void 0!==a&&a.length),h=!!u&&d,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new cn(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(e,f)}function dn(e){return e.map(e=>{let{providerId:t}=e,n=o(e,vt);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}class hn{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Dt(e.idToken,"internal-error"),Dt("undefined"!==typeof e.idToken,"internal-error"),Dt("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):on(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Dt(0!==e.length,"internal-error");const t=on(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(Dt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await Gt(e,{},async()=>{const n=M({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,s=await Qt(e,r,"/v1/token","key=".concat(i)),o=await e._getAdditionalHeaders();o["Content-Type"]="application/x-www-form-urlencoded";const a={method:"POST",headers:o,body:n};return e.emulatorConfig&&S(e.emulatorConfig.host)&&(a.credentials="include"),Bt.fetch()(s,a)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new hn;return n&&(Dt("string"===typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(Dt("string"===typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(Dt("number"===typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new hn,this.toJSON())}_performRefresh(){return Pt("not implemented")}}function fn(e,t){Dt("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class pn{constructor(e){let{uid:t,auth:n,stsTokenManager:r}=e,i=o(e,yt);this.providerId="firebase",this.proactiveRefresh=new ln(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new cn(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await an(this,this.stsTokenManager.getToken(this.auth,e));return Dt(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=z(e),r=await n.getIdToken(t),i=sn(r);Dt(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"===typeof i.firebase?i.firebase:void 0,o=null===s||void 0===s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:nn(rn(i.auth_time)),issuedAtTime:nn(rn(i.iat)),expirationTime:nn(rn(i.exp)),signInProvider:o||null,signInSecondFactor:(null===s||void 0===s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=z(e);await un(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(Dt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>d({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new pn(d(d({},this),{},{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Dt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await un(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(et(this.auth.app))return Promise.reject(_t(this.auth));const e=await this.getIdToken();return await an(this,async function(e,t){return qt(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return d(d({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>d({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{},{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,o,a,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,f=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,p=null!==(s=t.photoURL)&&void 0!==s?s:void 0,m=null!==(o=t.tenantId)&&void 0!==o?o:void 0,g=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,v=null!==(l=t.createdAt)&&void 0!==l?l:void 0,y=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:b,emailVerified:w,isAnonymous:x,providerData:k,stsTokenManager:S}=t;Dt(b&&S,e,"internal-error");const E=hn.fromJSON(this.name,S);Dt("string"===typeof b,e,"internal-error"),fn(u,e.name),fn(h,e.name),Dt("boolean"===typeof w,e,"internal-error"),Dt("boolean"===typeof x,e,"internal-error"),fn(f,e.name),fn(p,e.name),fn(m,e.name),fn(g,e.name),fn(v,e.name),fn(y,e.name);const C=new pn({uid:b,auth:e,email:h,emailVerified:w,displayName:u,isAnonymous:x,photoURL:p,phoneNumber:f,tenantId:m,stsTokenManager:E,createdAt:v,lastLoginAt:y});return k&&Array.isArray(k)&&(C.providerData=k.map(e=>d({},e))),g&&(C._redirectEventId=g),C}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new hn;r.updateFromServerResponse(t);const i=new pn({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await un(i),i}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];Dt(void 0!==r.localId,"internal-error");const i=void 0!==r.providerUserInfo?dn(r.providerUserInfo):[],s=!(r.email&&r.passwordHash)&&!(null!==i&&void 0!==i&&i.length),o=new hn;o.updateFromIdToken(n);const a=new pn({uid:r.localId,auth:e,stsTokenManager:o,isAnonymous:s}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new cn(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null!==i&&void 0!==i&&i.length)};return Object.assign(a,l),a}}const mn=new Map;function gn(e){Rt(e instanceof Function,"Expected a class definition");let t=mn.get(e);return t?(Rt(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,mn.set(e,t),t)}class vn{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}vn.type="NONE";const yn=vn;function bn(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class wn{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=bn(this.userKey,r.apiKey,i),this.fullPersistenceKey=bn("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if("string"===typeof e){const t=await tn(this.auth,{idToken:e}).catch(()=>{});return t?pn._fromGetAccountInfoResponse(this.auth,t,e):null}return pn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new wn(gn(yn),e,n);const r=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let i=r[0]||gn(yn);const s=bn(n,e.config.apiKey,e.name);let o=null;for(const c of t)try{const t=await c._get(s);if(t){let n;if("string"===typeof t){const r=await tn(e,{idToken:t}).catch(()=>{});if(!r)break;n=await pn._fromGetAccountInfoResponse(e,r,t)}else n=pn._fromJSON(e,t);c!==i&&(o=n),i=c;break}}catch(l){}const a=r.filter(e=>e._shouldAllowMigration);return i._shouldAllowMigration&&a.length?(i=a[0],o&&await i._set(s,o.toJSON()),await Promise.all(t.map(async e=>{if(e!==i)try{await e._remove(s)}catch(t){}})),new wn(i,e,n)):new wn(i,e,n)}}function xn(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Cn(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(kn(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(In(t))return"Blackberry";if(_n(t))return"Webos";if(Sn(t))return"Safari";if((t.includes("chrome/")||En(t))&&!t.includes("edge/"))return"Chrome";if(Nn(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function kn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_();return/firefox\//i.test(e)}function Sn(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:_()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function En(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_();return/crios\//i.test(e)}function Cn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_();return/iemobile/i.test(e)}function Nn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_();return/android/i.test(e)}function In(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_();return/blackberry/i.test(e)}function _n(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_();return/webos/i.test(e)}function Tn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function An(){return function(){const e=_();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function Dn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_();return Tn(e)||Nn(e)||_n(e)||In(e)||/windows phone/i.test(e)||Cn(e)}function Pn(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=xn(_());break;case"Worker":t="".concat(xn(_()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(rt,"/").concat(r)}class Rn{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,r)=>{try{n(e(t))}catch(i){r(i)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const e of t)try{e()}catch(r){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===n||void 0===n?void 0:n.message})}}}class Ln{constructor(e){var t,n,r,i;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=s.minPasswordLength)&&void 0!==t?t:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(n=null===(r=e.allowedNonAlphanumericCharacters)||void 0===r?void 0:r.join(""))&&void 0!==n?n:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,s,o;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=null===(t=a.meetsMinPasswordLength)||void 0===t||t),a.isValid&&(a.isValid=null===(n=a.meetsMaxPasswordLength)||void 0===n||n),a.isValid&&(a.isValid=null===(r=a.containsLowercaseLetter)||void 0===r||r),a.isValid&&(a.isValid=null===(i=a.containsUppercaseLetter)||void 0===i||i),a.isValid&&(a.isValid=null===(s=a.containsNumericCharacter)||void 0===s||s),a.isValid&&(a.isValid=null===(o=a.containsNonAlphanumericCharacter)||void 0===o||o),a}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class jn{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Mn(this),this.idTokenSubscription=new Mn(this),this.beforeStateQueue=new Rn(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=kt,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(e=>this._resolvePersistenceManagerAvailable=e)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=gn(t)),this._initializationPromise=this.queue(async()=>{var n,r,i;if(!this._deleted&&(this.persistenceManager=await wn.create(this,e),null===(n=this._resolvePersistenceManagerAvailable)||void 0===n||n.call(this),!this._deleted)){if(null!==(r=this._popupRedirectResolver)&&void 0!==r&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(s){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(i=this.currentUser)||void 0===i?void 0:i.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await tn(this,{idToken:e}),n=await pn._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(et(this.app)){const e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let n=t,r=!1;if(e&&this.config.authDomain){var i,s;await this.getOrInitRedirectPersistenceManager();const t=null===(i=this.redirectUser)||void 0===i?void 0:i._redirectEventId,o=null===(s=n)||void 0===s?void 0:s._redirectEventId,a=await this.tryRedirectSignIn(e);t&&t!==o||null===a||void 0===a||!a.user||(n=a.user,r=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(n)}catch(o){n=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return Dt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(n){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await un(e)}catch(t){if((null===t||void 0===t?void 0:t.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(et(this.app))return Promise.reject(_t(this));const t=e?z(e):null;return t&&Dt(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&Dt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return et(this.app)?Promise.reject(_t(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return et(this.app)?Promise.reject(_t(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(gn(e))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return qt(e,"GET","/v2/passwordPolicy",Ht(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new Ln(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new R("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return qt(e,"POST","/v2/accounts:revokeToken",Ht(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&gn(e)||this._popupRedirectResolver;Dt(t,this,"argument-error"),this.redirectPersistenceManager=await wn.create(this,[gn(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(e=null===(t=this.currentUser)||void 0===t?void 0:t.uid)&&void 0!==e?e:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(Dt(o,this,"internal-error"),o.then(()=>{s||i(this.currentUser)}),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{s=!0,i()}}{const n=e.addObserver(t);return()=>{s=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Dt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Pn(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;if(et(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return null!==t&&void 0!==t&&t.error&&function(e){if(St.logLevel<=Q.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];St.warn("Auth (".concat(rt,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function On(e){return z(e)}class Mn{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new B(e,t);return n.subscribe.bind(n)}(e=>this.observer=e)}get next(){return Dt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Fn={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Un(e){return Fn.loadJS(e)}function Bn(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class Vn{constructor(){this.enterprise=new zn}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class zn{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const Wn="NO_RECAPTCHA";class Hn{constructor(e){this.type="recaptcha-enterprise",this.auth=On(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;Xt(i)?i.enterprise.ready(()=>{i.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n(Wn)})}):r(Error("No reCAPTCHA enterprise script loaded."))}if(this.auth.settings.appVerificationDisabledForTesting){return(new Vn).execute("siteKey",{action:"verify"})}return new Promise((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{en(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(r=>{if(void 0!==r.recaptchaKey){const n=new Zt(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))}).catch(e=>{n(e)})})})(this.auth).then(i=>{if(!t&&Xt(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=Fn.recaptchaEnterpriseScript;0!==t.length&&(t+=i),Un(t).then(()=>{n(i,e,r)}).catch(e=>{r(e)})}}).catch(e=>{r(e)})})}}async function qn(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const s=new Hn(e);let o;if(i)o=Wn;else try{o=await s.verify(n)}catch(l){o=await s.verify(n,!0)}const a=d({},t);if("mfaSmsEnrollment"===n||"mfaSmsSignIn"===n){if("phoneEnrollmentInfo"in a){const e=a.phoneEnrollmentInfo.phoneNumber,t=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:t,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const e=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Gn(e,t,n,r,i){if("EMAIL_PASSWORD_PROVIDER"===i){var s;if(null!==(s=e._getRecaptchaConfig())&&void 0!==s&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await qn(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch(async i=>{if(i.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const i=await qn(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)})}if("PHONE_PROVIDER"===i){var o;if(null!==(o=e._getRecaptchaConfig())&&void 0!==o&&o.isProviderEnabled("PHONE_PROVIDER")){const i=await qn(e,t,n);return r(e,i).catch(async i=>{var s;if("AUDIT"===(null===(s=e._getRecaptchaConfig())||void 0===s?void 0:s.getProviderEnforcementState("PHONE_PROVIDER"))&&(i.code==="auth/".concat("missing-recaptcha-token")||i.code==="auth/".concat("invalid-app-credential"))){console.log("Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ".concat(n," flow."));const i=await qn(e,t,n,!1,!0);return r(e,i)}return Promise.reject(i)})}{const i=await qn(e,t,n,!1,!0);return r(e,i)}}return Promise.reject(i+" provider is not supported.")}async function Kn(e){const t=On(e),n=await en(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new Zt(n);if(null==t.tenantId?t._agentRecaptchaConfig=r:t._tenantRecaptchaConfigs[t.tenantId]=r,r.isAnyProviderEnabled()){new Hn(t).verify()}}function Qn(e,t,n){const r=On(e);Dt(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!(null===n||void 0===n||!n.disableWarnings),s=Yn(t),{host:o,port:a}=function(e){const t=Yn(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:Jn(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:Jn(t)}}}(t),l=null===a?"":":".concat(a),c={url:"".concat(s,"//").concat(o).concat(l,"/")},u=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator)return Dt(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),void Dt(j(c,r.config.emulator)&&j(u,r.emulatorConfig),r,"emulator-config-failed");r.config.emulator=c,r.emulatorConfig=u,r.settings.appVerificationDisabledForTesting=!0,S(o)?(E("".concat(s,"//").concat(o).concat(l)),I("Auth",!0)):i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Yn(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Jn(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class $n{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Pt("not implemented")}_getIdTokenResponse(e){return Pt("not implemented")}_linkToIdToken(e,t){return Pt("not implemented")}_getReauthenticationResolver(e){return Pt("not implemented")}}async function Xn(e,t){return qt(e,"POST","/v1/accounts:signUp",t)}async function Zn(e,t){return Kt(e,"POST","/v1/accounts:signInWithPassword",Ht(e,t))}class er extends $n{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new er(e,t,"password")}static _fromEmailAndCode(e,t){return new er(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if(null!==t&&void 0!==t&&t.email&&null!==t&&void 0!==t&&t.password){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return Gn(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Zn,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return Kt(e,"POST","/v1/accounts:signInWithEmailLink",Ht(e,t))}(e,{email:this._email,oobCode:this._password});default:Ct(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return Gn(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Xn,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return Kt(e,"POST","/v1/accounts:signInWithEmailLink",Ht(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:Ct(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function tr(e,t){return Kt(e,"POST","/v1/accounts:signInWithIdp",Ht(e,t))}class nr extends $n{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new nr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Ct("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=o(t,bt);if(!n||!r)return null;const s=new nr(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return tr(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,tr(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,tr(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=M(t)}return e}}async function rr(e,t){return qt(e,"POST","/v1/accounts:sendVerificationCode",Ht(e,t))}const ir={USER_NOT_FOUND:"user-not-found"};class sr extends $n{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new sr({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new sr({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return Kt(e,"POST","/v1/accounts:signInWithPhoneNumber",Ht(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await Kt(e,"POST","/v1/accounts:signInWithPhoneNumber",Ht(e,t));if(n.temporaryProof)throw $t(e,"account-exists-with-different-credential",n);return n}(e,d({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return Kt(e,"POST","/v1/accounts:signInWithPhoneNumber",Ht(e,d(d({},t),{},{operation:"REAUTH"})),ir)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new sr({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class or{constructor(e){var t,n,r,i,s,o;const a=F(U(e)),l=null!==(t=a.apiKey)&&void 0!==t?t:null,c=null!==(n=a.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=a.mode)&&void 0!==r?r:null);Dt(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(i=a.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(s=a.lang)&&void 0!==s?s:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(e){const t=function(e){const t=F(U(e)).link,n=t?F(U(t)).deep_link_id:null,r=F(U(e)).deep_link_id;return(r?F(U(r)).link:null)||r||n||t||e}(e);try{return new or(t)}catch(n){return null}}}class ar{constructor(){this.providerId=ar.PROVIDER_ID}static credential(e,t){return er._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=or.parseLink(t);return Dt(n,"argument-error"),er._fromEmailAndCode(e,n.code,n.tenantId)}}ar.PROVIDER_ID="password",ar.EMAIL_PASSWORD_SIGN_IN_METHOD="password",ar.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class lr{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class cr extends lr{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class ur extends cr{constructor(){super("facebook.com")}static credential(e){return nr._fromParams({providerId:ur.PROVIDER_ID,signInMethod:ur.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ur.credentialFromTaggedObject(e)}static credentialFromError(e){return ur.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return ur.credential(t.oauthAccessToken)}catch(n){return null}}}ur.FACEBOOK_SIGN_IN_METHOD="facebook.com",ur.PROVIDER_ID="facebook.com";class dr extends cr{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return nr._fromParams({providerId:dr.PROVIDER_ID,signInMethod:dr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return dr.credentialFromTaggedObject(e)}static credentialFromError(e){return dr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return dr.credential(n,r)}catch(i){return null}}}dr.GOOGLE_SIGN_IN_METHOD="google.com",dr.PROVIDER_ID="google.com";class hr extends cr{constructor(){super("github.com")}static credential(e){return nr._fromParams({providerId:hr.PROVIDER_ID,signInMethod:hr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return hr.credentialFromTaggedObject(e)}static credentialFromError(e){return hr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return hr.credential(t.oauthAccessToken)}catch(n){return null}}}hr.GITHUB_SIGN_IN_METHOD="github.com",hr.PROVIDER_ID="github.com";class fr extends cr{constructor(){super("twitter.com")}static credential(e,t){return nr._fromParams({providerId:fr.PROVIDER_ID,signInMethod:fr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return fr.credentialFromTaggedObject(e)}static credentialFromError(e){return fr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return fr.credential(n,r)}catch(i){return null}}}async function pr(e,t){return Kt(e,"POST","/v1/accounts:signUp",Ht(e,t))}fr.TWITTER_SIGN_IN_METHOD="twitter.com",fr.PROVIDER_ID="twitter.com";class mr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await pn._fromIdTokenResponse(e,n,r),s=gr(n);return new mr({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=gr(n);return new mr({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function gr(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class vr extends P{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,vr.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new vr(e,t,n,r)}}function yr(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw vr._fromErrorAndOperation(e,n,t,r);throw n})}async function br(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await an(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return mr._forOperation(e,"link",r)}async function wr(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if(et(r.app))return Promise.reject(_t(r));const i="reauthenticate";try{const s=await an(e,yr(r,i,t,e),n);Dt(s.idToken,r,"internal-error");const o=sn(s.idToken);Dt(o,r,"internal-error");const{sub:a}=o;return Dt(e.uid===a,r,"user-mismatch"),mr._forOperation(e,i,s)}catch(s){throw(null===s||void 0===s?void 0:s.code)==="auth/".concat("user-not-found")&&Ct(r,"user-mismatch"),s}}async function xr(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(et(e.app))return Promise.reject(_t(e));const r="signIn",i=await yr(e,r,t),s=await mr._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}async function kr(e,t){return xr(On(e),t)}async function Sr(e){const t=On(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function Er(e,t){let{displayName:n,photoURL:r}=t;if(void 0===n&&void 0===r)return;const i=z(e),s={idToken:await i.getIdToken(),displayName:n,photoUrl:r,returnSecureToken:!0},o=await an(i,async function(e,t){return qt(e,"POST","/v1/accounts:update",t)}(i.auth,s));i.displayName=o.displayName||null,i.photoURL=o.photoUrl||null;const a=i.providerData.find(e=>{let{providerId:t}=e;return"password"===t});a&&(a.displayName=i.displayName,a.photoURL=i.photoURL),await i._updateTokensIfNecessary(o)}function Cr(e,t){return qt(e,"POST","/v2/accounts/mfaEnrollment:start",Ht(e,t))}new WeakMap;const Nr="__sak";class Ir{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Nr,"1"),this.storage.removeItem(Nr),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class _r extends Ir{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Dn(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);An()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}_r.type="LOCAL";const Tr=_r;function Ar(e){var t,n;const r=e.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),i=RegExp("".concat(r,"=([^;]+)"));return null!==(t=null===(n=document.cookie.match(i))||void 0===n?void 0:n[1])&&void 0!==t?t:null}function Dr(e){const t="http:"===window.location.protocol;return"".concat(t?"__dev_":"__HOST-","FIREBASE_").concat(e.split(":")[3])}class Pr{constructor(){this.type="COOKIE",this.listenerUnsubscribes=new Map}_getFinalTarget(e){if(void 0===typeof window)return e;const t=new URL("".concat(window.location.origin,"/__cookies__"));return t.searchParams.set("finalTarget",e),t}async _isAvailable(){var e;return!("boolean"===typeof isSecureContext&&!isSecureContext)&&("undefined"!==typeof navigator&&"undefined"!==typeof document&&(null===(e=navigator.cookieEnabled)||void 0===e||e))}async _set(e,t){}async _get(e){if(!this._isAvailable())return null;const t=Dr(e);if(window.cookieStore){const e=await window.cookieStore.get(t);return null===e||void 0===e?void 0:e.value}return Ar(t)}async _remove(e){if(!this._isAvailable())return;if(!await this._get(e))return;const t=Dr(e);document.cookie="".concat(t,"=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High"),await fetch("/__cookies__",{method:"DELETE"}).catch(()=>{})}_addListener(e,t){if(!this._isAvailable())return;const n=Dr(e);if(window.cookieStore){const e=e=>{const r=e.changed.find(e=>e.name===n);r&&t(r.value);e.deleted.find(e=>e.name===n)&&t(null)},r=()=>window.cookieStore.removeEventListener("change",e);return this.listenerUnsubscribes.set(t,r),window.cookieStore.addEventListener("change",e)}let r=Ar(n);const i=setInterval(()=>{const e=Ar(n);e!==r&&(t(e),r=e)},1e3);this.listenerUnsubscribes.set(t,()=>clearInterval(i))}_removeListener(e,t){const n=this.listenerUnsubscribes.get(t);n&&(n(),this.listenerUnsubscribes.delete(t))}}Pr.type="COOKIE";class Rr extends Ir{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Rr.type="SESSION";const Lr=Rr;class jr{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const n=new jr(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(null===s||void 0===s||!s.size)return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const o=Array.from(s).map(async e=>e(t.origin,i)),a=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Or(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}jr.receivers=[];class Mr{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise((o,a)=>{const l=Or("",20);r.port1.start();const c=setTimeout(()=>{a(new Error("unsupported_event"))},n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),i=setTimeout(()=>{a(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),o(t.data.response);break;default:clearTimeout(c),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}function Fr(){return window}function Ur(){return"undefined"!==typeof Fr().WorkerGlobalScope&&"function"===typeof Fr().importScripts}const Br="firebaseLocalStorageDb",Vr="firebaseLocalStorage",zr="fbase_key";class Wr{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Hr(e,t){return e.transaction([Vr],t?"readwrite":"readonly").objectStore(Vr)}function qr(){const e=indexedDB.open(Br,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(Vr,{keyPath:zr})}catch(r){n(r)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(Vr)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(Br);return new Wr(e).toPromise()}(),t(await qr()))})})}async function Gr(e,t,n){const r=Hr(e,!0).put({[zr]:t,value:n});return new Wr(r).toPromise()}function Kr(e,t){const n=Hr(e,!0).delete(t);return new Wr(n).toPromise()}class Qr{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await qr()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(n){if(t++>3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Ur()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=jr._getInstance(Ur()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){var e;if(null===(e=navigator)||void 0===e||!e.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch(t){return null}}(),!this.activeServiceWorker)return;this.sender=new Mr(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&null!==(e=n[0])&&void 0!==e&&e.fulfilled&&null!==(t=n[0])&&void 0!==t&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=navigator)||void 0===e||null===(e=e.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await qr();return await Gr(e,Nr,"1"),await Kr(e,Nr),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Gr(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const n=Hr(e,!1).get(t),r=await new Wr(n).toPromise();return void 0===r?null:r.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Kr(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=Hr(e,!1).getAll();return new Wr(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Qr.type="LOCAL";const Yr=Qr;function Jr(e,t){return qt(e,"POST","/v2/accounts/mfaSignIn:start",Ht(e,t))}Bn("rcb"),new Ft(3e4,6e4);const $r="recaptcha";async function Xr(e,t,n){if(!e._getRecaptchaConfig())try{await Kn(e)}catch(i){console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let i;if(i="string"===typeof t?{phoneNumber:t}:t,"session"in i){const t=i.session;if("phoneNumber"in i){Dt("enroll"===t.type,e,"internal-error");const r={idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"}},s=Gn(e,r,"mfaSmsEnrollment",async(e,t)=>{if(t.phoneEnrollmentInfo.captchaResponse===Wn){Dt((null===n||void 0===n?void 0:n.type)===$r,e,"argument-error");return Cr(e,await Zr(e,t,n))}return Cr(e,t)},"PHONE_PROVIDER"),o=await s.catch(e=>Promise.reject(e));return o.phoneSessionInfo.sessionInfo}{var r;Dt("signin"===t.type,e,"internal-error");const s=(null===(r=i.multiFactorHint)||void 0===r?void 0:r.uid)||i.multiFactorUid;Dt(s,e,"missing-multi-factor-info");const o={mfaPendingCredential:t.credential,mfaEnrollmentId:s,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}},a=Gn(e,o,"mfaSmsSignIn",async(e,t)=>{if(t.phoneSignInInfo.captchaResponse===Wn){Dt((null===n||void 0===n?void 0:n.type)===$r,e,"argument-error");return Jr(e,await Zr(e,t,n))}return Jr(e,t)},"PHONE_PROVIDER"),l=await a.catch(e=>Promise.reject(e));return l.phoneResponseInfo.sessionInfo}}{const t={phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"},r=Gn(e,t,"sendVerificationCode",async(e,t)=>{if(t.captchaResponse===Wn){Dt((null===n||void 0===n?void 0:n.type)===$r,e,"argument-error");return rr(e,await Zr(e,t,n))}return rr(e,t)},"PHONE_PROVIDER"),s=await r.catch(e=>Promise.reject(e));return s.sessionInfo}}finally{null===n||void 0===n||n._reset()}}async function Zr(e,t,n){Dt(n.type===$r,e,"argument-error");const r=await n.verify();Dt("string"===typeof r,e,"argument-error");const i=d({},t);if("phoneEnrollmentInfo"in i){const e=i.phoneEnrollmentInfo.phoneNumber,t=i.phoneEnrollmentInfo.captchaResponse,n=i.phoneEnrollmentInfo.clientType,s=i.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(i,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:r,captchaResponse:t,clientType:n,recaptchaVersion:s}}),i}if("phoneSignInInfo"in i){const e=i.phoneSignInInfo.captchaResponse,t=i.phoneSignInInfo.clientType,n=i.phoneSignInInfo.recaptchaVersion;return Object.assign(i,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:e,clientType:t,recaptchaVersion:n}}),i}return Object.assign(i,{recaptchaToken:r}),i}class ei{constructor(e){this.providerId=ei.PROVIDER_ID,this.auth=On(e)}verifyPhoneNumber(e,t){return Xr(this.auth,e,z(t))}static credential(e,t){return sr._fromVerification(e,t)}static credentialFromResult(e){const t=e;return ei.credentialFromTaggedObject(t)}static credentialFromError(e){return ei.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?sr._fromTokenResponse(n,r):null}}function ti(e,t){return t?gn(t):(Dt(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}ei.PROVIDER_ID="phone",ei.PHONE_SIGN_IN_METHOD="phone";class ni extends $n{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return tr(e,this._buildIdpRequest())}_linkToIdToken(e,t){return tr(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return tr(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function ri(e){return xr(e.auth,new ni(e),e.bypassAuthState)}function ii(e){const{auth:t,user:n}=e;return Dt(n,t,"internal-error"),wr(n,new ni(e),e.bypassAuthState)}async function si(e){const{auth:t,user:n}=e;return Dt(n,t,"internal-error"),br(n,new ni(e),e.bypassAuthState)}class oi{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:o}=e;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return ri;case"linkViaPopup":case"linkViaRedirect":return si;case"reauthViaPopup":case"reauthViaRedirect":return ii;default:Ct(this.auth,"internal-error")}}resolve(e){Rt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Rt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const ai=new Ft(2e3,1e4);class li extends oi{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,li.currentPopupAction&&li.currentPopupAction.cancel(),li.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Dt(e,this.auth,"internal-error"),e}async onExecution(){Rt(1===this.filter.length,"Popup operations only handle one event");const e=Or();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(Nt(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(Nt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,li.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t;null!==(t=this.authWindow)&&void 0!==t&&null!==(t=t.window)&&void 0!==t&&t.closed?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Nt(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,ai.get())};e()}}li.currentPopupAction=null;const ci=new Map;class ui extends oi{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=ci.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=fi(t),r=hi(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}ci.set(this.auth._key(),e)}return this.bypassAuthState||ci.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function di(e,t){ci.set(e._key(),t)}function hi(e){return gn(e._redirectPersistence)}function fi(e){return bn("pendingRedirect",e.config.apiKey,e.name)}async function pi(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(et(e.app))return Promise.reject(_t(e));const r=On(e),i=ti(r,t),s=new ui(r,i,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}class mi{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return vi(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!vi(e)){var n;const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Nt(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(gi(e))}saveEventToCache(e){this.cachedEventUids.add(gi(e)),this.lastProcessedEventTime=Date.now()}}function gi(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function vi(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}const yi=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,bi=/^https?/;async function wi(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return qt(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(xi(r))return}catch(n){}Ct(e,"unauthorized-domain")}function xi(e){const t=Lt(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!bi.test(n))return!1;if(yi.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const ki=new Ft(3e4,6e4);function Si(){const e=Fr().___jsl;if(null!==e&&void 0!==e&&e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function Ei(e){return new Promise((t,n)=>{var r,i;function s(){Si(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Si(),n(Nt(e,"network-request-failed"))},timeout:ki.get()})}if(null!==(r=Fr().gapi)&&void 0!==r&&null!==(r=r.iframes)&&void 0!==r&&r.Iframe)t(gapi.iframes.getContext());else{if(null===(i=Fr().gapi)||void 0===i||!i.load){const t=Bn("iframefcb");return Fr()[t]=()=>{gapi.load?s():n(Nt(e,"network-request-failed"))},Un("".concat(Fn.gapiScript,"?onload=").concat(t)).catch(e=>n(e))}s()}}).catch(e=>{throw Ci=null,e})}let Ci=null;const Ni=new Ft(5e3,15e3),Ii={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},_i=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ti(e){const t=e.config;Dt(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Ut(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:rt},i=_i.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),"".concat(n,"?").concat(M(r).slice(1))}async function Ai(e){const t=await function(e){return Ci=Ci||Ei(e),Ci}(e),n=Fr().gapi;return Dt(n,e,"internal-error"),t.open({where:document.body,url:Ti(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ii,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=Nt(e,"network-request-failed"),s=Fr().setTimeout(()=>{r(i)},Ni.get());function o(){Fr().clearTimeout(s),n(t)}t.ping(o).then(o,()=>{r(i)})}))}const Di={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Pi{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function Ri(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=d(d({},Di),{},{width:r.toString(),height:i.toString(),top:s,left:o}),c=_().toLowerCase();n&&(a=En(c)?"_blank":n),kn(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")},"");if(function(){var e;return Tn(arguments.length>0&&void 0!==arguments[0]?arguments[0]:_())&&!(null===(e=window.navigator)||void 0===e||!e.standalone)}(c)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",a),new Pi(null);const h=window.open(t||"",a,u);Dt(h,e,"popup-blocked");try{h.focus()}catch(f){}return new Pi(h)}const Li="__/auth/handler",ji="emulator/auth/handler",Oi=encodeURIComponent("fac");async function Mi(e,t,n,r,i,s){Dt(e.config.authDomain,e,"auth-domain-config-required"),Dt(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:rt,eventId:i};if(t instanceof lr){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))o[e]=t}if(t instanceof cr){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(o.scopes=e.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const u of Object.keys(a))void 0===a[u]&&delete a[u];const l=await e._getAppCheckToken(),c=l?"#".concat(Oi,"=").concat(encodeURIComponent(l)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(Li);return Ut(t,ji)}(e),"?").concat(M(a).slice(1)).concat(c)}const Fi="webStorageSupport";const Ui=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Lr,this._completeRedirectFn=pi,this._overrideRedirectResult=di}async _openPopup(e,t,n,r){var i;Rt(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return Ri(e,await Mi(e,t,n,Lt(),r),Or())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){Fr().location.href=e}(await Mi(e,t,n,Lt(),r)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(Rt(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await Ai(e),n=new mi(e);return t.register("authEvent",t=>{Dt(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Fi,{type:Fi},n=>{var r;const i=null===n||void 0===n||null===(r=n[0])||void 0===r?void 0:r[Fi];void 0!==i&&t(!!i),Ct(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=wi(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Dn()||Sn()||Tn()}};var Bi="@firebase/auth",Vi="1.12.0";class zi{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Dt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Wi=x("authIdTokenMaxAge")||300;let Hi=null;var qi,Gi;qi={loadJS:e=>new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=Nt("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(e=null===(t=document.getElementsByTagName("head"))||void 0===t?void 0:t[0])&&void 0!==e?e:document}().appendChild(r)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},Fn=qi,Gi="Browser",Xe(new W("auth",(e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Dt(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:Gi,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Pn(Gi)},c=new jn(r,i,s,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(gn);null!==t&&void 0!==t&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),Xe(new W("auth-internal",e=>(e=>new zi(e))(On(e.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),ot(Bi,Vi,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(Gi)),ot(Bi,Vi,"esm2020");ot("firebase","12.9.0","app");var Ki,Qi,Yi="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Ji={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}function n(e,t,n){n||(n=0);const r=Array(16);if("string"===typeof t)for(var i=0;i<16;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;i<16;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];let s,o=e.g[3];s=t+(o^n&(i^o))+r[0]+3614090360&4294967295,s=o+(i^(t=n+(s<<7&4294967295|s>>>25))&(n^i))+r[1]+3905402710&4294967295,o=t+(s<<12&4294967295|s>>>20),s=i+(n^o&(t^n))+r[2]+606105819&4294967295,s=n+(t^(i=o+(s<<17&4294967295|s>>>15))&(o^t))+r[3]+3250441966&4294967295,s=t+(o^(n=i+(s<<22&4294967295|s>>>10))&(i^o))+r[4]+4118548399&4294967295,s=o+(i^(t=n+(s<<7&4294967295|s>>>25))&(n^i))+r[5]+1200080426&4294967295,o=t+(s<<12&4294967295|s>>>20),s=i+(n^o&(t^n))+r[6]+2821735955&4294967295,s=n+(t^(i=o+(s<<17&4294967295|s>>>15))&(o^t))+r[7]+4249261313&4294967295,s=t+(o^(n=i+(s<<22&4294967295|s>>>10))&(i^o))+r[8]+1770035416&4294967295,s=o+(i^(t=n+(s<<7&4294967295|s>>>25))&(n^i))+r[9]+2336552879&4294967295,o=t+(s<<12&4294967295|s>>>20),s=i+(n^o&(t^n))+r[10]+4294925233&4294967295,s=n+(t^(i=o+(s<<17&4294967295|s>>>15))&(o^t))+r[11]+2304563134&4294967295,s=t+(o^(n=i+(s<<22&4294967295|s>>>10))&(i^o))+r[12]+1804603682&4294967295,s=o+(i^(t=n+(s<<7&4294967295|s>>>25))&(n^i))+r[13]+4254626195&4294967295,o=t+(s<<12&4294967295|s>>>20),s=i+(n^o&(t^n))+r[14]+2792965006&4294967295,s=n+(t^(i=o+(s<<17&4294967295|s>>>15))&(o^t))+r[15]+1236535329&4294967295,s=t+(i^o&((n=i+(s<<22&4294967295|s>>>10))^i))+r[1]+4129170786&4294967295,s=o+(n^i&((t=n+(s<<5&4294967295|s>>>27))^n))+r[6]+3225465664&4294967295,o=t+(s<<9&4294967295|s>>>23),s=i+(t^n&(o^t))+r[11]+643717713&4294967295,s=n+(o^t&((i=o+(s<<14&4294967295|s>>>18))^o))+r[0]+3921069994&4294967295,s=t+(i^o&((n=i+(s<<20&4294967295|s>>>12))^i))+r[5]+3593408605&4294967295,s=o+(n^i&((t=n+(s<<5&4294967295|s>>>27))^n))+r[10]+38016083&4294967295,o=t+(s<<9&4294967295|s>>>23),s=i+(t^n&(o^t))+r[15]+3634488961&4294967295,s=n+(o^t&((i=o+(s<<14&4294967295|s>>>18))^o))+r[4]+3889429448&4294967295,s=t+(i^o&((n=i+(s<<20&4294967295|s>>>12))^i))+r[9]+568446438&4294967295,s=o+(n^i&((t=n+(s<<5&4294967295|s>>>27))^n))+r[14]+3275163606&4294967295,o=t+(s<<9&4294967295|s>>>23),s=i+(t^n&(o^t))+r[3]+4107603335&4294967295,s=n+(o^t&((i=o+(s<<14&4294967295|s>>>18))^o))+r[8]+1163531501&4294967295,s=t+(i^o&((n=i+(s<<20&4294967295|s>>>12))^i))+r[13]+2850285829&4294967295,s=o+(n^i&((t=n+(s<<5&4294967295|s>>>27))^n))+r[2]+4243563512&4294967295,o=t+(s<<9&4294967295|s>>>23),s=i+(t^n&(o^t))+r[7]+1735328473&4294967295,s=n+(o^t&((i=o+(s<<14&4294967295|s>>>18))^o))+r[12]+2368359562&4294967295,s=t+((n=i+(s<<20&4294967295|s>>>12))^i^o)+r[5]+4294588738&4294967295,s=o+((t=n+(s<<4&4294967295|s>>>28))^n^i)+r[8]+2272392833&4294967295,o=t+(s<<11&4294967295|s>>>21),s=i+(o^t^n)+r[11]+1839030562&4294967295,s=n+((i=o+(s<<16&4294967295|s>>>16))^o^t)+r[14]+4259657740&4294967295,s=t+((n=i+(s<<23&4294967295|s>>>9))^i^o)+r[1]+2763975236&4294967295,s=o+((t=n+(s<<4&4294967295|s>>>28))^n^i)+r[4]+1272893353&4294967295,o=t+(s<<11&4294967295|s>>>21),s=i+(o^t^n)+r[7]+4139469664&4294967295,s=n+((i=o+(s<<16&4294967295|s>>>16))^o^t)+r[10]+3200236656&4294967295,s=t+((n=i+(s<<23&4294967295|s>>>9))^i^o)+r[13]+681279174&4294967295,s=o+((t=n+(s<<4&4294967295|s>>>28))^n^i)+r[0]+3936430074&4294967295,o=t+(s<<11&4294967295|s>>>21),s=i+(o^t^n)+r[3]+3572445317&4294967295,s=n+((i=o+(s<<16&4294967295|s>>>16))^o^t)+r[6]+76029189&4294967295,s=t+((n=i+(s<<23&4294967295|s>>>9))^i^o)+r[9]+3654602809&4294967295,s=o+((t=n+(s<<4&4294967295|s>>>28))^n^i)+r[12]+3873151461&4294967295,o=t+(s<<11&4294967295|s>>>21),s=i+(o^t^n)+r[15]+530742520&4294967295,s=n+((i=o+(s<<16&4294967295|s>>>16))^o^t)+r[2]+3299628645&4294967295,s=t+(i^((n=i+(s<<23&4294967295|s>>>9))|~o))+r[0]+4096336452&4294967295,s=o+(n^((t=n+(s<<6&4294967295|s>>>26))|~i))+r[7]+1126891415&4294967295,o=t+(s<<10&4294967295|s>>>22),s=i+(t^(o|~n))+r[14]+2878612391&4294967295,s=n+(o^((i=o+(s<<15&4294967295|s>>>17))|~t))+r[5]+4237533241&4294967295,s=t+(i^((n=i+(s<<21&4294967295|s>>>11))|~o))+r[12]+1700485571&4294967295,s=o+(n^((t=n+(s<<6&4294967295|s>>>26))|~i))+r[3]+2399980690&4294967295,o=t+(s<<10&4294967295|s>>>22),s=i+(t^(o|~n))+r[10]+4293915773&4294967295,s=n+(o^((i=o+(s<<15&4294967295|s>>>17))|~t))+r[1]+2240044497&4294967295,s=t+(i^((n=i+(s<<21&4294967295|s>>>11))|~o))+r[8]+1873313359&4294967295,s=o+(n^((t=n+(s<<6&4294967295|s>>>26))|~i))+r[15]+4264355552&4294967295,o=t+(s<<10&4294967295|s>>>22),s=i+(t^(o|~n))+r[6]+2734768916&4294967295,s=n+(o^((i=o+(s<<15&4294967295|s>>>17))|~t))+r[13]+1309151649&4294967295,s=t+(i^((n=i+(s<<21&4294967295|s>>>11))|~o))+r[4]+4149444226&4294967295,s=o+(n^((t=n+(s<<6&4294967295|s>>>26))|~i))+r[11]+3174756917&4294967295,o=t+(s<<10&4294967295|s>>>22),s=i+(t^(o|~n))+r[2]+718787259&4294967295,s=n+(o^((i=o+(s<<15&4294967295|s>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(s<<21&4294967295|s>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+o&4294967295}function r(e,t){this.h=t;const n=[];let r=!0;for(let i=e.length-1;i>=0;i--){const s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.F=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.D=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}(t,function(){this.blockSize=-1}),t.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.v=function(e,t){void 0===t&&(t=e.length);const r=t-this.blockSize,i=this.C;let s=this.h,o=0;for(;o<t;){if(0==s)for(;o<=r;)n(this,e,o),o+=this.blockSize;if("string"===typeof e){for(;o<t;)if(i[s++]=e.charCodeAt(o++),s==this.blockSize){n(this,i),s=0;break}}else for(;o<t;)if(i[s++]=e[o++],s==this.blockSize){n(this,i),s=0;break}}this.h=s,this.o+=t},t.prototype.A=function(){var e=Array((this.h<56?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;t=8*this.o;for(var n=e.length-8;n<e.length;++n)e[n]=255&t,t/=256;for(this.v(e),e=Array(16),t=0,n=0;n<4;++n)for(let r=0;r<32;r+=8)e[t++]=this.g[n]>>>r&255;return e};var i={};function s(e){return-128<=e&&e<128?function(e,t){var n=i;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(e){return new r([0|e],e<0?-1:0)}):new r([0|e],e<0?-1:0)}function o(e){if(isNaN(e)||!isFinite(e))return a;if(e<0)return h(o(-e));const t=[];let n=1;for(let r=0;e>=n;r++)t[r]=e/n|0,n*=4294967296;return new r(t,0)}var a=s(0),l=s(1),c=s(16777216);function u(e){if(0!=e.h)return!1;for(let t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function d(e){return-1==e.h}function h(e){const t=e.g.length,n=[];for(let r=0;r<t;r++)n[r]=~e.g[r];return new r(n,~e.h).add(l)}function f(e,t){return e.add(h(t))}function p(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function m(e,t){this.g=e,this.h=t}function g(e,t){if(u(t))throw Error("division by zero");if(u(e))return new m(a,a);if(d(e))return t=g(h(e),t),new m(h(t.g),h(t.h));if(d(t))return t=g(e,h(t)),new m(h(t.g),t.h);if(e.g.length>30){if(d(e)||d(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,r=t;r.l(e)<=0;)n=v(n),r=v(r);var i=y(n,1),s=y(r,1);for(r=y(r,2),n=y(n,2);!u(r);){var c=s.add(r);c.l(e)<=0&&(i=i.add(n),s=c),r=y(r,1),n=y(n,1)}return t=f(e,i.j(t)),new m(i,t)}for(i=a;e.l(t)>=0;){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=(r=Math.ceil(Math.log(n)/Math.LN2))<=48?1:Math.pow(2,r-48),c=(s=o(n)).j(t);d(c)||c.l(e)>0;)c=(s=o(n-=r)).j(t);u(s)&&(s=l),i=i.add(s),e=f(e,c)}return new m(i,e)}function v(e){const t=e.g.length+1,n=[];for(let r=0;r<t;r++)n[r]=e.i(r)<<1|e.i(r-1)>>>31;return new r(n,e.h)}function y(e,t){const n=t>>5;t%=32;const i=e.g.length-n,s=[];for(let r=0;r<i;r++)s[r]=t>0?e.i(r+n)>>>t|e.i(r+n+1)<<32-t:e.i(r+n);return new r(s,e.h)}(e=r.prototype).m=function(){if(d(this))return-h(this).m();let e=0,t=1;for(let n=0;n<this.g.length;n++){const r=this.i(n);e+=(r>=0?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if((e=e||10)<2||36<e)throw Error("radix out of range: "+e);if(u(this))return"0";if(d(this))return"-"+h(this).toString(e);const t=o(Math.pow(e,6));var n=this;let r="";for(;;){const i=g(n,t).g;let s=(((n=f(n,i.j(t))).g.length>0?n.g[0]:n.h)>>>0).toString(e);if(u(n=i))return s+r;for(;s.length<6;)s="0"+s;r=s+r}},e.i=function(e){return e<0?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return d(e=f(this,e))?-1:u(e)?0:1},e.abs=function(){return d(this)?h(this):this},e.add=function(e){const t=Math.max(this.g.length,e.g.length),n=[];let i=0;for(let r=0;r<=t;r++){let t=i+(65535&this.i(r))+(65535&e.i(r)),s=(t>>>16)+(this.i(r)>>>16)+(e.i(r)>>>16);i=s>>>16,t&=65535,s&=65535,n[r]=s<<16|t}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(u(this)||u(e))return a;if(d(this))return d(e)?h(this).j(h(e)):h(h(this).j(e));if(d(e))return h(this.j(h(e)));if(this.l(c)<0&&e.l(c)<0)return o(this.m()*e.m());const t=this.g.length+e.g.length,n=[];for(var i=0;i<2*t;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(let t=0;t<e.g.length;t++){const r=this.i(i)>>>16,s=65535&this.i(i),o=e.i(t)>>>16,a=65535&e.i(t);n[2*i+2*t]+=s*a,p(n,2*i+2*t),n[2*i+2*t+1]+=r*a,p(n,2*i+2*t+1),n[2*i+2*t+1]+=s*o,p(n,2*i+2*t+1),n[2*i+2*t+2]+=r*o,p(n,2*i+2*t+2)}for(e=0;e<t;e++)n[e]=n[2*e+1]<<16|n[2*e];for(e=t;e<2*t;e++)n[e]=0;return new r(n,0)},e.B=function(e){return g(this,e).h},e.and=function(e){const t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)&e.i(r);return new r(n,this.h&e.h)},e.or=function(e){const t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)|e.i(r);return new r(n,this.h|e.h)},e.xor=function(e){const t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)^e.i(r);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.A,t.prototype.reset=t.prototype.u,t.prototype.update=t.prototype.v,Qi=Ji.Md5=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.B,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=o,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if((n=n||10)<2||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return h(e(t.substring(1),n));if(t.indexOf("-")>=0)throw Error('number format error: interior "-" character');const r=o(Math.pow(n,8));let i=a;for(let a=0;a<t.length;a+=8){var s=Math.min(8,t.length-a);const e=parseInt(t.substring(a,a+s),n);s<8?(s=o(Math.pow(n,s)),i=i.j(s).add(o(e))):(i=i.j(r),i=i.add(o(e)))}return i},Ki=Ji.Integer=r}).apply("undefined"!==typeof Yi?Yi:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var $i,Xi,Zi,es,ts,ns,rs,is,ss="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},os={};(function(){var e,t=Object.defineProperty;var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof ss&&ss];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);function r(e,r){if(r)e:{var i=n;e=e.split(".");for(var s=0;s<e.length-1;s++){var o=e[s];if(!(o in i))break e;i=i[o]}(r=r(s=i[e=e[e.length-1]]))!=s&&null!=r&&t(i,e,{configurable:!0,writable:!0,value:r})}}r("Symbol.dispose",function(e){return e||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(e){return e||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(e){return e||function(e){var t,n=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.push([t,e[t]]);return n}});var i=i||{},s=this||self;function o(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function a(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){return(l=a).apply(null,arguments)}function c(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function u(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Ob=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}var d="undefined"!==typeof AsyncContext&&"function"===typeof AsyncContext.Snapshot?e=>e&&AsyncContext.Snapshot.wrap(e):e=>e;function h(e){const t=e.length;if(t>0){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function f(e,t){for(let r=1;r<arguments.length;r++){const t=arguments[r];var n=typeof t;if("array"==(n="object"!=n?n:t?Array.isArray(t)?"array":n:"null")||"object"==n&&"number"==typeof t.length){n=e.length||0;const r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function p(e){s.setTimeout(()=>{throw e},0)}function m(){var e=w;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var g=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return this.h>0?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new v,e=>e.reset());class v{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let y,b=!1,w=new class{constructor(){this.h=this.g=null}add(e,t){const n=g.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},x=()=>{const e=Promise.resolve(void 0);y=()=>{e.then(k)}};function k(){for(var e;e=m();){try{e.h.call(e.g)}catch(n){p(n)}var t=g;t.j(e),t.h<100&&(t.h++,e.next=t.g,t.g=e)}b=!1}function S(){this.u=this.u,this.C=this.C}function E(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}S.prototype.u=!1,S.prototype.dispose=function(){this.u||(this.u=!0,this.N())},S.prototype[Symbol.dispose]=function(){this.dispose()},S.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},E.prototype.h=function(){this.defaultPrevented=!0};var C=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};s.addEventListener("test",e,t),s.removeEventListener("test",e,t)}catch(n){}return e}();function N(e){return/^[\s\xa0]*$/.test(e)}function I(e,t){E.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e&&this.init(e,t)}u(I,E),I.prototype.init=function(e,t){const n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;this.target=e.target||e.srcElement,this.g=t,(t=e.relatedTarget)||("mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement)),this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=e.pointerType,this.state=e.state,this.i=e,e.defaultPrevented&&I.Z.h.call(this)},I.prototype.h=function(){I.Z.h.call(this);const e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var _="closure_listenable_"+(1e6*Math.random()|0),T=0;function A(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++T,this.da=this.fa=!1}function D(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function P(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function R(e){const t={};for(const n in e)t[n]=e[n];return t}const L="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function j(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<L.length;t++)n=L[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function O(e){this.src=e,this.g={},this.h=0}function M(e,t){const n=t.type;if(n in e.g){var r,i=e.g[n],s=Array.prototype.indexOf.call(i,t,void 0);(r=s>=0)&&Array.prototype.splice.call(i,s,1),r&&(D(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function F(e,t,n,r){for(let i=0;i<e.length;++i){const s=e[i];if(!s.da&&s.listener==t&&s.capture==!!n&&s.ha==r)return i}return-1}O.prototype.add=function(e,t,n,r,i){const s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);const o=F(e,t,r,i);return o>-1?(t=e[o],n||(t.fa=!1)):((t=new A(t,this.src,s,!!r,i)).fa=n,e.push(t)),t};var U="closure_lm_"+(1e6*Math.random()|0),B={};function V(e,t,n,r,i){if(r&&r.once)return W(e,t,n,r,i);if(Array.isArray(t)){for(let s=0;s<t.length;s++)V(e,t[s],n,r,i);return null}return n=J(n),e&&e[_]?e.J(t,n,o(r)?!!r.capture:!!r,i):z(e,t,n,!1,r,i)}function z(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");const a=o(i)?!!i.capture:!!i;let l=Q(e);if(l||(e[U]=l=new O(e)),(n=l.add(t,n,r,a,s)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=K;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)C||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(G(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function W(e,t,n,r,i){if(Array.isArray(t)){for(let s=0;s<t.length;s++)W(e,t[s],n,r,i);return null}return n=J(n),e&&e[_]?e.K(t,n,o(r)?!!r.capture:!!r,i):z(e,t,n,!0,r,i)}function H(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)H(e,t[s],n,r,i);else r=o(r)?!!r.capture:!!r,n=J(n),e&&e[_]?(e=e.i,(s=String(t).toString())in e.g&&((n=F(t=e.g[s],n,r,i))>-1&&(D(t[n]),Array.prototype.splice.call(t,n,1),0==t.length&&(delete e.g[s],e.h--)))):e&&(e=Q(e))&&(t=e.g[t.toString()],e=-1,t&&(e=F(t,n,r,i)),(n=e>-1?t[e]:null)&&q(n))}function q(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[_])M(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(G(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Q(t))?(M(n,e),0==n.h&&(n.src=null,t[U]=null)):D(e)}}}function G(e){return e in B?B[e]:B[e]="on"+e}function K(e,t){if(e.da)e=!0;else{t=new I(t,this);const n=e.listener,r=e.ha||e.src;e.fa&&q(e),e=n.call(r,t)}return e}function Q(e){return(e=e[U])instanceof O?e:null}var Y="__closure_events_fn_"+(1e9*Math.random()>>>0);function J(e){return"function"===typeof e?e:(e[Y]||(e[Y]=function(t){return e.handleEvent(t)}),e[Y])}function $(){S.call(this),this.i=new O(this),this.M=this,this.G=null}function X(e,t){var n,r=e.G;if(r)for(n=[];r;r=r.G)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new E(t,e);else if(t instanceof E)t.target=t.target||e;else{var i=t;j(t=new E(r,e),i)}let s,o;if(i=!0,n)for(o=n.length-1;o>=0;o--)s=t.g=n[o],i=Z(s,r,!0,t)&&i;if(s=t.g=e,i=Z(s,r,!0,t)&&i,i=Z(s,r,!1,t)&&i,n)for(o=0;o<n.length;o++)s=t.g=n[o],i=Z(s,r,!1,t)&&i}function Z(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();let i=!0;for(let s=0;s<t.length;++s){const o=t[s];if(o&&!o.da&&o.capture==n){const t=o.listener,n=o.ha||o.src;o.fa&&M(e.i,o),i=!1!==t.call(n,r)&&i}}return i&&!r.defaultPrevented}function ee(e){e.g=function(e,t){if("function"!==typeof e){if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=l(e.handleEvent,e)}return Number(t)>2147483647?-1:s.setTimeout(e,t||0)}(()=>{e.g=null,e.i&&(e.i=!1,ee(e))},e.l);const t=e.h;e.h=null,e.m.apply(null,t)}u($,S),$.prototype[_]=!0,$.prototype.removeEventListener=function(e,t,n,r){H(this,e,t,n,r)},$.prototype.N=function(){if($.Z.N.call(this),this.i){var e=this.i;for(const t in e.g){const n=e.g[t];for(let e=0;e<n.length;e++)D(n[e]);delete e.g[t],e.h--}}this.G=null},$.prototype.J=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},$.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class te extends S{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:ee(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ne(e){S.call(this),this.h=e,this.g={}}u(ne,S);var re=[];function ie(e){P(e.g,function(e,t){this.g.hasOwnProperty(t)&&q(e)},e),e.g={}}ne.prototype.N=function(){ne.Z.N.call(this),ie(this)},ne.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var se=s.JSON.stringify,oe=s.JSON.parse,ae=class{stringify(e){return s.JSON.stringify(e,void 0)}parse(e){return s.JSON.parse(e,void 0)}};function le(){}function ce(){}var ue={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function de(){E.call(this,"d")}function he(){E.call(this,"c")}u(de,E),u(he,E);var fe={},pe=null;function me(){return pe=pe||new $}function ge(e){E.call(this,fe.Ia,e)}function ve(e){const t=me();X(t,new ge(t))}function ye(e,t){E.call(this,fe.STAT_EVENT,e),this.stat=t}function be(e){const t=me();X(t,new ye(t,e))}function we(e,t){E.call(this,fe.Ja,e),this.size=t}function xe(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){e()},t)}function ke(){this.g=!0}function Se(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{const s=JSON.parse(t);if(s)for(e=0;e<s.length;e++)if(Array.isArray(s[e])){var n=s[e];if(!(n.length<2)){var r=n[1];if(Array.isArray(r)&&!(r.length<1)){var i=r[0];if("noop"!=i&&"stop"!=i&&"close"!=i)for(let e=1;e<r.length;e++)r[e]=""}}}return se(s)}catch(s){return t}}(e,n)+(r?" "+r:"")})}fe.Ia="serverreachability",u(ge,E),fe.STAT_EVENT="statevent",u(ye,E),fe.Ja="timingevent",u(we,E),ke.prototype.ua=function(){this.g=!1},ke.prototype.info=function(){};var Ee,Ce={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ne={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"};function Ie(){}function _e(e){return encodeURIComponent(String(e))}function Te(e){var t=1;e=e.split(":");const n=[];for(;t>0&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function Ae(e,t,n,r){this.j=e,this.i=t,this.l=n,this.S=r||1,this.V=new ne(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new De}function De(){this.i=null,this.g="",this.h=!1}u(Ie,le),Ie.prototype.g=function(){return new XMLHttpRequest},Ee=new Ie;var Pe={},Re={};function Le(e,t,n){e.M=1,e.A=st(et(t)),e.u=n,e.R=!0,je(e,null)}function je(e,t){e.F=Date.now(),Fe(e),e.B=et(e.A);var n=e.B,r=e.S;Array.isArray(r)||(r=[String(r)]),bt(n.i,"t",r),e.C=0,n=e.j.L,e.h=new De,e.g=on(e.j,n?t:null,!e.u),e.P>0&&(e.O=new te(l(e.Y,e,e.g),e.P)),t=e.V,n=e.g,r=e.ba;var i="readystatechange";Array.isArray(i)||(i&&(re[0]=i.toString()),i=re);for(let s=0;s<i.length;s++){const e=V(n,i[s],r||t.handleEvent,!1,t.h||t);if(!e)break;t.g[e.key]=e}t=e.J?R(e.J):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.B,e.v,e.u,t)):(e.v="GET",e.g.ea(e.B,e.v,null,t)),ve(),function(e,t,n,r,i,s){e.info(function(){if(e.g)if(s){var o="",a=s.split("&");for(let e=0;e<a.length;e++){var l=a[e].split("=");if(l.length>1){const e=l[0];l=l[1];const t=e.split("_");o=t.length>=2&&"type"==t[1]?o+(e+"=")+l+"&":o+(e+"=redacted&")}}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o})}(e.i,e.v,e.B,e.l,e.S,e.u)}function Oe(e){return!!e.g&&("GET"==e.v&&2!=e.M&&e.j.Aa)}function Me(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Re:(n=Number(t.substring(n,r)),isNaN(n)?Pe:(r+=1)+n>t.length?Re:(t=t.slice(r,r+n),e.C=r+n,t))}function Fe(e){e.T=Date.now()+e.H,Ue(e,e.H)}function Ue(e,t){if(null!=e.D)throw Error("WatchDog timer not null");e.D=xe(l(e.aa,e),t)}function Be(e){e.D&&(s.clearTimeout(e.D),e.D=null)}function Ve(e){0==e.j.I||e.K||en(e.j,e)}function ze(e){Be(e);var t=e.O;t&&"function"==typeof t.dispose&&t.dispose(),e.O=null,ie(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.dispose())}function We(e,t){try{var n=e.j;if(0!=n.I&&(n.g==e||Qe(n.h,e)))if(!e.L&&Qe(n.h,e)&&3==n.I){try{var r=n.Ba.g.parse(t)}catch(u){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.v){if(n.g){if(!(n.g.F+3e3<e.F))break e;Zt(n),Wt(n)}Jt(n),be(18)}}else n.xa=i[1],0<n.xa-n.K&&i[2]<37500&&n.F&&0==n.A&&!n.C&&(n.C=xe(l(n.Va,n),6e3));Ke(n.h)<=1&&n.ta&&(n.ta=void 0)}else nn(n,11)}else if((e.L||n.g==e)&&Zt(n),!N(t))for(i=n.Ba.g.parse(t),t=0;t<i.length;t++){let l=i[t];const u=l[0];if(!(u<=n.K))if(n.K=u,l=l[1],2==n.I)if("c"==l[0]){n.M=l[1],n.ba=l[2];const t=l[3];null!=t&&(n.ka=t,n.j.info("VER="+n.ka));const i=l[4];null!=i&&(n.za=i,n.j.info("SVER="+n.za));const u=l[5];null!=u&&"number"===typeof u&&u>0&&(r=1.5*u,n.O=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const d=e.g;if(d){const e=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.h;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(Ye(s,s.h),s.h=null))}if(r.G){const e=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.wa=e,it(r.J,r.G,e))}}n.I=3,n.l&&n.l.ra(),n.aa&&(n.T=Date.now()-e.F,n.j.info("Handshake RTT: "+n.T+"ms"));var o=e;if((r=n).na=sn(r,r.L?r.ba:null,r.W),o.L){Je(r.h,o);var a=o,c=r.O;c&&(a.H=c),a.D&&(Be(a),Fe(a)),r.g=o}else Yt(r);n.i.length>0&&qt(n)}else"stop"!=l[0]&&"close"!=l[0]||nn(n,7);else 3==n.I&&("stop"==l[0]||"close"==l[0]?"stop"==l[0]?nn(n,7):zt(n):"noop"!=l[0]&&n.l&&n.l.qa(l),n.A=0)}ve()}catch(u){}}Ae.prototype.ba=function(e){e=e.target;const t=this.O;t&&3==Ft(e)?t.j():this.Y(e)},Ae.prototype.Y=function(e){try{if(e==this.g)e:{const l=Ft(this.g),c=this.g.ya();this.g.ca();if(!(l<3)&&(3!=l||this.g&&(this.h.h||this.g.la()||Ut(this.g)))){this.K||4!=l||7==c||ve(),Be(this);var t=this.g.ca();this.X=t;var n=function(e){if(!Oe(e))return e.g.la();const t=Ut(e.g);if(""===t)return"";let n="";const r=t.length,i=4==Ft(e.g);if(!e.h.i){if("undefined"===typeof TextDecoder)return ze(e),Ve(e),"";e.h.i=new s.TextDecoder}for(let s=0;s<r;s++)e.h.h=!0,n+=e.h.i.decode(t[s],{stream:!(i&&s==r-1)});return t.length=0,e.h.g+=n,e.C=0,e.h.g}(this);if(this.o=200==t,function(e,t,n,r,i,s,o){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+o})}(this.i,this.v,this.B,this.l,this.S,l,t),this.o){if(this.U&&!this.L){t:{if(this.g){var r,i=this.g;if((r=i.g?i.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!N(r)){var o=r;break t}}o=null}if(!(e=o)){this.o=!1,this.m=3,be(12),ze(this),Ve(this);break e}Se(this.i,this.l,e,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,We(this,e)}if(this.R){let t;for(e=!0;!this.K&&this.C<n.length;){if(t=Me(this,n),t==Re){4==l&&(this.m=4,be(14),e=!1),Se(this.i,this.l,null,"[Incomplete Response]");break}if(t==Pe){this.m=4,be(15),Se(this.i,this.l,n,"[Invalid Chunk]"),e=!1;break}Se(this.i,this.l,t,null),We(this,t)}if(Oe(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=l||0!=n.length||this.h.h||(this.m=1,be(16),e=!1),this.o=this.o&&e,e){if(n.length>0&&!this.W){this.W=!0;var a=this.j;a.g==this&&a.aa&&!a.P&&(a.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),$t(a),a.P=!0,be(11))}}else Se(this.i,this.l,n,"[Invalid Chunked Response]"),ze(this),Ve(this)}else Se(this.i,this.l,n,null),We(this,n);4==l&&ze(this),this.o&&!this.K&&(4==l?en(this.j,this):(this.o=!1,Fe(this)))}else(function(e){const t={};e=(e.g&&Ft(e)>=2&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(N(e[r]))continue;var n=Te(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==t&&n.indexOf("Unknown SID")>0?(this.m=3,be(12)):(this.m=0,be(13)),ze(this),Ve(this)}}}catch(l){}},Ae.prototype.cancel=function(){this.K=!0,ze(this)},Ae.prototype.aa=function(){this.D=null;const e=Date.now();e-this.T>=0?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.i,this.B),2!=this.M&&(ve(),be(17)),ze(this),this.m=2,Ve(this)):Ue(this,this.T-e)};var He=class{constructor(e,t){this.g=e,this.map=t}};function qe(e){this.l=e||10,s.PerformanceNavigationTiming?e=(e=s.performance.getEntriesByType("navigation")).length>0&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ge(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Ke(e){return e.h?1:e.g?e.g.size:0}function Qe(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Ye(e,t){e.g?e.g.add(t):e.h=t}function Je(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function $e(e){if(null!=e.h)return e.i.concat(e.h.G);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.G);return t}return h(e.i)}qe.prototype.cancel=function(){if(this.i=$e(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var Xe=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ze(e){let t;this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1,e instanceof Ze?(this.l=e.l,tt(this,e.j),this.o=e.o,this.g=e.g,nt(this,e.u),this.h=e.h,rt(this,wt(e.i)),this.m=e.m):e&&(t=String(e).match(Xe))?(this.l=!1,tt(this,t[1]||"",!0),this.o=ot(t[2]||""),this.g=ot(t[3]||"",!0),nt(this,t[4]),this.h=ot(t[5]||"",!0),rt(this,t[6]||"",!0),this.m=ot(t[7]||"")):(this.l=!1,this.i=new pt(null,this.l))}function et(e){return new Ze(e)}function tt(e,t,n){e.j=n?ot(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function nt(e,t){if(t){if(t=Number(t),isNaN(t)||t<0)throw Error("Bad port number "+t);e.u=t}else e.u=null}function rt(e,t,n){t instanceof pt?(e.i=t,function(e,t){t&&!e.j&&(mt(e),e.i=null,e.g.forEach(function(e,t){const n=t.toLowerCase();t!=n&&(gt(this,t),bt(this,n,e))},e)),e.j=t}(e.i,e.l)):(n||(t=at(t,ht)),e.i=new pt(t,e.l))}function it(e,t,n){e.i.set(t,n)}function st(e){return it(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function ot(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function at(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,lt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function lt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Ze.prototype.toString=function(){const e=[];var t=this.j;t&&e.push(at(t,ct,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(at(t,ct,!0),"@"),e.push(_e(n).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.u)&&e.push(":",String(n))),(n=this.h)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(at(n,"/"==n.charAt(0)?dt:ut,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",at(n,ft)),e.join("")},Ze.prototype.resolve=function(e){const t=et(this);let n=!!e.j;n?tt(t,e.j):n=!!e.o,n?t.o=e.o:n=!!e.g,n?t.g=e.g:n=null!=e.u;var r=e.h;if(n)nt(t,e.u);else if(n=!!e.h){if("/"!=r.charAt(0))if(this.g&&!this.h)r="/"+r;else{var i=t.h.lastIndexOf("/");-1!=i&&(r=t.h.slice(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(-1!=i.indexOf("./")||-1!=i.indexOf("/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");const e=[];for(let t=0;t<i.length;){const n=i[t++];"."==n?r&&t==i.length&&e.push(""):".."==n?((e.length>1||1==e.length&&""!=e[0])&&e.pop(),r&&t==i.length&&e.push("")):(e.push(n),r=!0)}r=e.join("/")}else r=i}return n?t.h=r:n=""!==e.i.toString(),n?rt(t,wt(e.i)):n=!!e.m,n&&(t.m=e.m),t};var ct=/[#\/\?@]/g,ut=/[#\?:]/g,dt=/[#\?]/g,ht=/[#\?@]/g,ft=/#/g;function pt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function mt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(let n=0;n<e.length;n++){const r=e[n].indexOf("=");let i,s=null;r>=0?(i=e[n].substring(0,r),s=e[n].substring(r+1)):i=e[n],t(i,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function gt(e,t){mt(e),t=xt(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function vt(e,t){return mt(e),t=xt(e,t),e.g.has(t)}function yt(e,t){mt(e);let n=[];if("string"===typeof t)vt(e,t)&&(n=n.concat(e.g.get(xt(e,t))));else for(e=Array.from(e.g.values()),t=0;t<e.length;t++)n=n.concat(e[t]);return n}function bt(e,t,n){gt(e,t),n.length>0&&(e.i=null,e.g.set(xt(e,t),h(n)),e.h+=n.length)}function wt(e){const t=new pt;return t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),t}function xt(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function kt(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch(s){}}function St(){this.g=new ae}function Et(e){this.i=e.Sb||null,this.h=e.ab||!1}function Ct(e,t){$.call(this),this.H=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}function Nt(e){e.j.read().then(e.Ma.bind(e)).catch(e.ga.bind(e))}function It(e){e.readyState=4,e.l=null,e.j=null,e.B=null,_t(e)}function _t(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Tt(e){let t="";return P(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function At(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Tt(n),"string"===typeof e?null!=n&&_e(n):it(e,t,n))}function Dt(e){$.call(this),this.headers=new Map,this.L=e||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}(e=pt.prototype).add=function(e,t){mt(this),this.i=null,e=xt(this,e);let n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){mt(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)},e.set=function(e,t){return mt(this),this.i=null,vt(this,e=xt(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&(e=yt(this,e)).length>0?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(let r=0;r<t.length;r++){var n=t[r];const i=_e(n);n=yt(this,n);for(let t=0;t<n.length;t++){let r=i;""!==n[t]&&(r+="="+_e(n[t])),e.push(r)}}return this.i=e.join("&")},u(Et,le),Et.prototype.g=function(){return new Ct(this.i,this.h)},u(Ct,$),(e=Ct.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.F=e,this.D=t,this.readyState=1,_t(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const t={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};e&&(t.body=e),(this.H||s).fetch(new Request(this.D,t)).then(this.Pa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&4!=this.readyState&&(this.g=!1,It(this)),this.readyState=0},e.Pa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,_t(this)),this.g&&(this.readyState=3,_t(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if("undefined"!==typeof s.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Nt(this)}else e.text().then(this.Oa.bind(this),this.ga.bind(this))},e.Ma=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.B.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?It(this):_t(this),3==this.readyState&&Nt(this)}},e.Oa=function(e){this.g&&(this.response=this.responseText=e,It(this))},e.Na=function(e){this.g&&(this.response=e,It(this))},e.ga=function(){this.g&&It(this)},e.setRequestHeader=function(e,t){this.A.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Ct.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),u(Dt,$);var Pt=/^https?$/i,Rt=["POST","PUT"];function Lt(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.o=5,jt(e),Mt(e)}function jt(e){e.A||(e.A=!0,X(e,"complete"),X(e,"error"))}function Ot(e){if(e.h&&"undefined"!=typeof i)if(e.v&&4==Ft(e))setTimeout(e.Ca.bind(e),0);else if(X(e,"readystatechange"),4==Ft(e)){e.h=!1;try{const i=e.ca();e:switch(i){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===i){let t=String(e.D).match(Xe)[1]||null;!t&&s.self&&s.self.location&&(t=s.self.location.protocol.slice(0,-1)),r=!Pt.test(t?t.toLowerCase():"")}n=r}if(n)X(e,"complete"),X(e,"success");else{e.o=6;try{var o=Ft(e)>2?e.g.statusText:""}catch(a){o=""}e.l=o+" ["+e.ca()+"]",jt(e)}}finally{Mt(e)}}}function Mt(e,t){if(e.g){e.m&&(clearTimeout(e.m),e.m=null);const r=e.g;e.g=null,t||X(e,"ready");try{r.onreadystatechange=null}catch(n){}}}function Ft(e){return e.g?e.g.readyState:0}function Ut(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.F){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Bt(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Vt(e){this.za=0,this.i=[],this.j=new ke,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Bt("failFast",!1,e),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Bt("baseRetryDelayMs",5e3,e),this.Za=Bt("retryDelaySeedMs",1e4,e),this.Ta=Bt("forwardChannelMaxRetries",2,e),this.va=Bt("forwardChannelRequestTimeoutMs",2e4,e),this.ma=e&&e.xmlHttpFactory||void 0,this.Ua=e&&e.Rb||void 0,this.Aa=e&&e.useFetchStreams||!1,this.O=void 0,this.L=e&&e.supportsCrossDomainXhr||!1,this.M="",this.h=new qe(e&&e.concurrentRequestLimit),this.Ba=new St,this.S=e&&e.fastHandshake||!1,this.R=e&&e.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=e&&e.Pb||!1,e&&e.ua&&this.j.ua(),e&&e.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&e&&e.detectBufferingProxy||!1,this.ia=void 0,e&&e.longPollingTimeout&&e.longPollingTimeout>0&&(this.ia=e.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}function zt(e){if(Ht(e),3==e.I){var t=e.V++,n=et(e.J);if(it(n,"SID",e.M),it(n,"RID",t),it(n,"TYPE","terminate"),Kt(e,n),(t=new Ae(e,e.j,t)).M=2,t.A=st(et(n)),n=!1,s.navigator&&s.navigator.sendBeacon)try{n=s.navigator.sendBeacon(t.A.toString(),"")}catch(r){}!n&&s.Image&&((new Image).src=t.A,n=!0),n||(t.g=on(t.j,null),t.g.ea(t.A)),t.F=Date.now(),Fe(t)}rn(e)}function Wt(e){e.g&&($t(e),e.g.cancel(),e.g=null)}function Ht(e){Wt(e),e.v&&(s.clearTimeout(e.v),e.v=null),Zt(e),e.h.cancel(),e.m&&("number"===typeof e.m&&s.clearTimeout(e.m),e.m=null)}function qt(e){if(!Ge(e.h)&&!e.m){e.m=!0;var t=e.Ea;y||x(),b||(y(),b=!0),w.add(t,e),e.D=0}}function Gt(e,t){var n;n=t?t.l:e.V++;const r=et(e.J);it(r,"SID",e.M),it(r,"RID",n),it(r,"AID",e.K),Kt(e,r),e.u&&e.o&&At(r,e.u,e.o),n=new Ae(e,e.j,n,e.D+1),null===e.u&&(n.J=e.o),t&&(e.i=t.G.concat(e.i)),t=Qt(e,n,1e3),n.H=Math.round(.5*e.va)+Math.round(.5*e.va*Math.random()),Ye(e.h,n),Le(n,r,t)}function Kt(e,t){e.H&&P(e.H,function(e,n){it(t,n,e)}),e.l&&P({},function(e,n){it(t,n,e)})}function Qt(e,t,n){n=Math.min(e.i.length,n);const r=e.l?l(e.l.Ka,e.l,e):null;e:{var i=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?n>0?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let l=!0;for(let c=0;c<n;c++){var s=i[c].g;const n=i[c].map;if((s-=t)<0)t=Math.max(0,i[c].g-100),l=!1;else try{s="req"+s+"_"||0;try{var a=n instanceof Map?n:Object.entries(n);for(const[t,n]of a){let r=n;o(n)&&(r=se(n)),e.push(s+t+"="+encodeURIComponent(r))}}catch(Fs){throw e.push(s+"type="+encodeURIComponent("_badmap")),Fs}}catch(Fs){r&&r(n)}}if(l){a=e.join("&");break e}}a=void 0}return e=e.i.splice(0,n),t.G=e,a}function Yt(e){if(!e.g&&!e.v){e.Y=1;var t=e.Da;y||x(),b||(y(),b=!0),w.add(t,e),e.A=0}}function Jt(e){return!(e.g||e.v||e.A>=3)&&(e.Y++,e.v=xe(l(e.Da,e),tn(e,e.A)),e.A++,!0)}function $t(e){null!=e.B&&(s.clearTimeout(e.B),e.B=null)}function Xt(e){e.g=new Ae(e,e.j,"rpc",e.Y),null===e.u&&(e.g.J=e.o),e.g.P=0;var t=et(e.na);it(t,"RID","rpc"),it(t,"SID",e.M),it(t,"AID",e.K),it(t,"CI",e.F?"0":"1"),!e.F&&e.ia&&it(t,"TO",e.ia),it(t,"TYPE","xmlhttp"),Kt(e,t),e.u&&e.o&&At(t,e.u,e.o),e.O&&(e.g.H=e.O);var n=e.g;e=e.ba,n.M=1,n.A=st(et(t)),n.u=null,n.R=!0,je(n,e)}function Zt(e){null!=e.C&&(s.clearTimeout(e.C),e.C=null)}function en(e,t){var n=null;if(e.g==t){Zt(e),$t(e),e.g=null;var r=2}else{if(!Qe(e.h,t))return;n=t.G,Je(e.h,t),r=1}if(0!=e.I)if(t.o)if(1==r){n=t.u?t.u.length:0,t=Date.now()-t.F;var i=e.D;X(r=me(),new we(r,n)),qt(e)}else Yt(e);else if(3==(i=t.m)||0==i&&t.X>0||!(1==r&&function(e,t){return!(Ke(e.h)>=e.h.j-(e.m?1:0))&&(e.m?(e.i=t.G.concat(e.i),!0):!(1==e.I||2==e.I||e.D>=(e.Sa?0:e.Ta))&&(e.m=xe(l(e.Ea,e,t),tn(e,e.D)),e.D++,!0))}(e,t)||2==r&&Jt(e)))switch(n&&n.length>0&&(t=e.h,t.i=t.i.concat(n)),i){case 1:nn(e,5);break;case 4:nn(e,10);break;case 3:nn(e,6);break;default:nn(e,2)}}function tn(e,t){let n=e.Qa+Math.floor(Math.random()*e.Za);return e.isActive()||(n*=2),n*t}function nn(e,t){if(e.j.info("Error code "+t),2==t){var n=l(e.bb,e),r=e.Ua;const t=!r;r=new Ze(r||"//www.google.com/images/cleardot.gif"),s.location&&"http"==s.location.protocol||tt(r,"https"),st(r),t?function(e,t){const n=new ke;if(s.Image){const r=new Image;r.onload=c(kt,n,"TestLoadImage: loaded",!0,t,r),r.onerror=c(kt,n,"TestLoadImage: error",!1,t,r),r.onabort=c(kt,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=c(kt,n,"TestLoadImage: timeout",!1,t,r),s.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new ke;const n=new AbortController,r=setTimeout(()=>{n.abort(),kt(0,0,!1,t)},1e4);fetch(e,{signal:n.signal}).then(e=>{clearTimeout(r),e.ok?kt(0,0,!0,t):kt(0,0,!1,t)}).catch(()=>{clearTimeout(r),kt(0,0,!1,t)})}(r.toString(),n)}else be(2);e.I=0,e.l&&e.l.pa(t),rn(e),Ht(e)}function rn(e){if(e.I=0,e.ja=[],e.l){const t=$e(e.h);0==t.length&&0==e.i.length||(f(e.ja,t),f(e.ja,e.i),e.h.i.length=0,h(e.i),e.i.length=0),e.l.oa()}}function sn(e,t,n){var r=n instanceof Ze?et(n):new Ze(n);if(""!=r.g)t&&(r.g=t+"."+r.g),nt(r,r.u);else{var i=s.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;const e=new Ze(null);r&&tt(e,r),t&&(e.g=t),i&&nt(e,i),n&&(e.h=n),r=e}return n=e.G,t=e.wa,n&&t&&it(r,n,t),it(r,"VER",e.ka),Kt(e,r),r}function on(e,t,n){if(t&&!e.L)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Aa&&!e.ma?new Dt(new Et({ab:n})):new Dt(e.ma)).Fa(e.L),t}function an(){}function ln(){}function cn(e,t){$.call(this),this.g=new Vt(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.sa&&(e?e["X-WebChannel-Client-Profile"]=t.sa:e={"X-WebChannel-Client-Profile":t.sa}),this.g.U=e,(e=t&&t.Qb)&&!N(e)&&(this.g.u=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!N(t)&&(this.g.G=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new hn(this)}function un(e){de.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function dn(){he.call(this),this.status=1}function hn(e){this.g=e}(e=Dt.prototype).Fa=function(e){this.H=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ee.g(),this.g.onreadystatechange=d(l(this.Ca,this));try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(o){return void Lt(this,o)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),i=s.FormData&&e instanceof s.FormData,!(Array.prototype.indexOf.call(Rt,t,void 0)>=0)||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,a]of n)this.g.setRequestHeader(s,a);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(e),this.v=!1}catch(o){Lt(this,o)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=e||7,X(this,"complete"),X(this,"abort"),Mt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Mt(this,!0)),Dt.Z.N.call(this)},e.Ca=function(){this.u||(this.B||this.v||this.j?Ot(this):this.Xa())},e.Xa=function(){Ot(this)},e.isActive=function(){return!!this.g},e.ca=function(){try{return Ft(this)>2?this.g.status:-1}catch(e){return-1}},e.la=function(){try{return this.g?this.g.responseText:""}catch(e){return""}},e.La=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),oe(t)}},e.ya=function(){return this.o},e.Ha=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=Vt.prototype).ka=8,e.I=1,e.connect=function(e,t,n,r){be(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.J=sn(this,null,this.W),qt(this)},e.Ea=function(e){if(this.m)if(this.m=null,1==this.I){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;const i=new Ae(this,this.j,e);let s=this.o;if(this.U&&(s?(s=R(s),j(s,this.U)):s=this.U),null!==this.u||this.R||(i.J=s,s=null),this.S)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if((t+=r)>4096){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=Qt(this,i,t),it(n=et(this.J),"RID",e),it(n,"CVER",22),this.G&&it(n,"X-HTTP-Session-Id",this.G),Kt(this,n),s&&(this.R?t="headers="+_e(Tt(s))+"&"+t:this.u&&At(n,this.u,s)),Ye(this.h,i),this.Ra&&it(n,"TYPE","init"),this.S?(it(n,"$req",t),it(n,"SID","null"),i.U=!0,Le(i,n,null)):Le(i,n,t),this.I=2}}else 3==this.I&&(e?Gt(this,e):0==this.i.length||Ge(this.h)||Gt(this))},e.Da=function(){if(this.v=null,Xt(this),this.aa&&!(this.P||null==this.g||this.T<=0)){var e=4*this.T;this.j.info("BP detection timer enabled: "+e),this.B=xe(l(this.Wa,this),e)}},e.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,be(10),Wt(this),Xt(this))},e.Va=function(){null!=this.C&&(this.C=null,Wt(this),Jt(this),be(19))},e.bb=function(e){e?(this.j.info("Successfully pinged google.com"),be(2)):(this.j.info("Failed to ping google.com"),be(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=an.prototype).ra=function(){},e.qa=function(){},e.pa=function(){},e.oa=function(){},e.isActive=function(){return!0},e.Ka=function(){},ln.prototype.g=function(e,t){return new cn(e,t)},u(cn,$),cn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},cn.prototype.close=function(){zt(this.g)},cn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=se(e),e=n);t.i.push(new He(t.Ya++,e)),3==t.I&&qt(t)},cn.prototype.N=function(){this.g.l=null,delete this.j,zt(this.g),delete this.g,cn.Z.N.call(this)},u(un,de),u(dn,he),u(hn,an),hn.prototype.ra=function(){X(this.g,"a")},hn.prototype.qa=function(e){X(this.g,new un(e))},hn.prototype.pa=function(e){X(this.g,new dn)},hn.prototype.oa=function(){X(this.g,"b")},ln.prototype.createWebChannel=ln.prototype.g,cn.prototype.send=cn.prototype.o,cn.prototype.open=cn.prototype.m,cn.prototype.close=cn.prototype.close,is=os.createWebChannelTransport=function(){return new ln},rs=os.getStatEventTarget=function(){return me()},ns=os.Event=fe,ts=os.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ce.NO_ERROR=0,Ce.TIMEOUT=8,Ce.HTTP_ERROR=6,es=os.ErrorCode=Ce,Ne.COMPLETE="complete",Zi=os.EventType=Ne,ce.EventType=ue,ue.OPEN="a",ue.CLOSE="b",ue.ERROR="c",ue.MESSAGE="d",$.prototype.listen=$.prototype.J,Xi=os.WebChannel=ce,os.FetchXmlHttpFactory=Et,Dt.prototype.listenOnce=Dt.prototype.K,Dt.prototype.getLastError=Dt.prototype.Ha,Dt.prototype.getLastErrorCode=Dt.prototype.ya,Dt.prototype.getStatus=Dt.prototype.ca,Dt.prototype.getResponseJson=Dt.prototype.La,Dt.prototype.getResponseText=Dt.prototype.la,Dt.prototype.send=Dt.prototype.ea,Dt.prototype.setWithCredentials=Dt.prototype.Fa,$i=os.XhrIo=Dt}).apply("undefined"!==typeof ss?ss:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});class as{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}as.UNAUTHENTICATED=new as(null),as.GOOGLE_CREDENTIALS=new as("google-credentials-uid"),as.FIRST_PARTY=new as("first-party-uid"),as.MOCK_USER=new as("mock-user");let ls="12.9.0";const cs=new Z("@firebase/firestore");function us(){return cs.logLevel}function ds(e){if(cs.logLevel<=Q.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(ps);cs.debug("Firestore (".concat(ls,"): ").concat(e),...i)}}function hs(e){if(cs.logLevel<=Q.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(ps);cs.error("Firestore (".concat(ls,"): ").concat(e),...i)}}function fs(e){if(cs.logLevel<=Q.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(ps);cs.warn("Firestore (".concat(ls,"): ").concat(e),...i)}}function ps(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function ms(e,t,n){let r="Unexpected state";"string"==typeof t?r=t:n=t,gs(e,r,n)}function gs(e,t,n){let r="FIRESTORE (".concat(ls,") INTERNAL ASSERTION FAILED: ").concat(t," (ID: ").concat(e.toString(16),")");if(void 0!==n)try{r+=" CONTEXT: "+JSON.stringify(n)}catch(e){r+=" CONTEXT: "+n}throw hs(r),new Error(r)}function vs(e,t,n,r){let i="Unexpected state";"string"==typeof n?i=n:r=n,e||gs(t,i,r)}function ys(e,t){return e}const bs={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ws extends P{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class xs{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class ks{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class Ss{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(as.UNAUTHENTICATED))}shutdown(){}}class Es{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Cs{constructor(e){this.t=e,this.currentUser=as.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){vs(void 0===this.o,42304);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new xs;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new xs,e.enqueueRetryable(()=>r(this.currentUser))};const s=()=>{const t=i;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},o=e=>{ds("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(e=>o(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(ds("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new xs)}},0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(ds("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(vs("string"==typeof t.accessToken,31837,{l:t}),new ks(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return vs(null===e||"string"==typeof e,2055,{h:e}),new as(e)}}class Ns{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=as.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class Is{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new Ns(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(as.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class _s{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Ts{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,et(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){vs(void 0===this.o,3512);const n=e=>{null!=e.error&&ds("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.m;return this.m=e.token,ds("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const r=e=>{ds("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){const e=this.V.getImmediate({optional:!0});e?r(e):ds("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new _s(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(vs("string"==typeof e.token,44558,{tokenResult:e}),this.m=e.token,new _s(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function As(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class Ds{static newId(){const e=62*Math.floor(256/62);let t="";for(;t.length<20;){const n=As(40);for(let r=0;r<n.length;++r)t.length<20&&n[r]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[r]%62))}return t}}function Ps(e,t){return e<t?-1:e>t?1:0}function Rs(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.charAt(r),i=t.charAt(r);if(n!==i)return Os(n)===Os(i)?Ps(n,i):Os(n)?1:-1}return Ps(e.length,t.length)}const Ls=55296,js=57343;function Os(e){const t=e.charCodeAt(0);return t>=Ls&&t<=js}function Ms(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}const Fs="__name__";class Us{constructor(e,t,n){void 0===t?t=0:t>e.length&&ms(637,{offset:t,range:e.length}),void 0===n?n=e.length-t:n>e.length-t&&ms(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===Us.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Us?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=Us.compareSegments(e.get(r),t.get(r));if(0!==n)return n}return Ps(e.length,t.length)}static compareSegments(e,t){const n=Us.isNumericId(e),r=Us.isNumericId(t);return n&&!r?-1:!n&&r?1:n&&r?Us.extractNumericId(e).compare(Us.extractNumericId(t)):Rs(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ki.fromString(e.substring(4,e.length-2))}}class Bs extends Us{construct(e,t,n){return new Bs(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new ws(bs.INVALID_ARGUMENT,"Invalid segment (".concat(i,"). Paths must not contain // in them."));e.push(...i.split("/").filter(e=>e.length>0))}return new Bs(e)}static emptyPath(){return new Bs([])}}const Vs=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class zs extends Us{construct(e,t,n){return new zs(e,t,n)}static isValidIdentifier(e){return Vs.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),zs.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===Fs}static keyField(){return new zs([Fs])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new ws(bs.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new ws(bs.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new ws(bs.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new ws(bs.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new zs(t)}static emptyPath(){return new zs([])}}class Ws{constructor(e){this.path=e}static fromPath(e){return new Ws(Bs.fromString(e))}static fromName(e){return new Ws(Bs.fromString(e).popFirst(5))}static empty(){return new Ws(Bs.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Bs.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Bs.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ws(new Bs(e.slice()))}}function Hs(e,t,n){if(!n)throw new ws(bs.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function qs(e){if(!Ws.isDocumentKey(e))throw new ws(bs.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function Gs(e){if(Ws.isDocumentKey(e))throw new ws(bs.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function Ks(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}function Qs(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":ms(12329,{type:typeof e})}function Ys(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new ws(bs.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Qs(e);throw new ws(bs.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}function Js(e,t){const n={typeString:e};return t&&(n.value=t),n}function $s(e,t){if(!Ks(e))throw new ws(bs.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in t)if(t[r]){const i=t[r].typeString,s="value"in t[r]?{value:t[r].value}:void 0;if(!(r in e)){n="JSON missing required field: '".concat(r,"'");break}const o=e[r];if(i&&typeof o!==i){n="JSON field '".concat(r,"' must be a ").concat(i,".");break}if(void 0!==s&&o!==s.value){n="Expected '".concat(r,"' field to equal '").concat(s.value,"'");break}}if(n)throw new ws(bs.INVALID_ARGUMENT,n);return!0}const Xs=-62135596800,Zs=1e6;class eo{static now(){return eo.fromMillis(Date.now())}static fromDate(e){return eo.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*Zs);return new eo(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ws(bs.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ws(bs.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Xs)throw new ws(bs.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ws(bs.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Zs}_compareTo(e){return this.seconds===e.seconds?Ps(this.nanoseconds,e.nanoseconds):Ps(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:eo._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if($s(e,eo._jsonSchema))return new eo(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Xs;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}eo._jsonSchemaVersion="firestore/timestamp/1.0",eo._jsonSchema={type:Js("string",eo._jsonSchemaVersion),seconds:Js("number"),nanoseconds:Js("number")};class to{static fromTimestamp(e){return new to(e)}static min(){return new to(new eo(0,0))}static max(){return new to(new eo(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const no=-1;class ro{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}ro.UNKNOWN_ID=-1;function io(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=to.fromTimestamp(1e9===r?new eo(n+1,0):new eo(n,r));return new oo(i,Ws.empty(),t)}function so(e){return new oo(e.readTime,e.key,no)}class oo{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new oo(to.min(),Ws.empty(),no)}static max(){return new oo(to.max(),Ws.empty(),no)}}function ao(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=Ws.comparator(e.documentKey,t.documentKey),0!==n?n:Ps(e.largestBatchId,t.largestBatchId))}const lo="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class co{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function uo(e){if(e.code!==bs.FAILED_PRECONDITION||e.message!==lo)throw e;ds("LocalStore","Unexpectedly lost primary lease")}class ho{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ms(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ho((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ho?t:ho.resolve(t)}catch(e){return ho.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ho.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ho.reject(t)}static resolve(e){return new ho((t,n)=>{t(e)})}static reject(e){return new ho((t,n)=>{n(e)})}static waitFor(e){return new ho((t,n)=>{let r=0,i=0,s=!1;e.forEach(e=>{++r,e.next(()=>{++i,s&&i===r&&t()},e=>n(e))}),s=!0,i===r&&t()})}static or(e){let t=ho.resolve(!1);for(const n of e)t=t.next(e=>e?ho.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}static mapArray(e,t){return new ho((n,r)=>{const i=e.length,s=new Array(i);let o=0;for(let a=0;a<i;a++){const l=a;t(e[l]).next(e=>{s[l]=e,++o,o===i&&n(s)},e=>r(e))}})}static doWhile(e,t){return new ho((n,r)=>{const i=()=>{!0===e()?t().next(()=>{i()},r):n()};i()})}}function fo(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function po(e){return"IndexedDbTransactionError"===e.name}class mo{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ae(e),this.ue=e=>t.writeSequenceNumber(e))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}mo.ce=-1;const go=-1;function vo(e){return null==e}function yo(e){return 0===e&&1/e==-1/0}function bo(e){return"number"==typeof e&&Number.isInteger(e)&&!yo(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}const wo="\x01";function xo(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=So(t)),t=ko(e.get(n),t);return So(t)}function ko(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case wo:n+="\x01\x11";break;default:n+=t}}return n}function So(e){return e+wo+"\x01"}const Eo="remoteDocuments",Co="owner",No="mutationQueues",Io="mutations";const _o="documentMutations",To="remoteDocumentsV14",Ao="remoteDocumentGlobal",Do="targets",Po="targetDocuments",Ro="targetGlobal",Lo="collectionParents",jo="clientMetadata",Oo="bundles",Mo="namedQueries",Fo="indexConfiguration",Uo="indexState",Bo="indexEntries",Vo="documentOverlays",zo="globals",Wo=[No,Io,_o,Eo,Do,Co,Ro,Po,jo,Ao,Lo,Oo,Mo],Ho=[No,Io,_o,To,Do,Co,Ro,Po,jo,Ao,Lo,Oo,Mo,Vo],qo=Ho,Go=[...qo,Fo,Uo,Bo];function Ko(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Qo(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Yo(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class Jo{constructor(e,t){this.comparator=e,this.root=t||Xo.EMPTY}insert(e,t){return new Jo(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Xo.BLACK,null,null))}remove(e){return new Jo(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Xo.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push("".concat(t,":").concat(n)),!1)),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new $o(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new $o(this.root,e,this.comparator,!1)}getReverseIterator(){return new $o(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new $o(this.root,e,this.comparator,!0)}}class $o{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Xo{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:Xo.RED,this.left=null!=r?r:Xo.EMPTY,this.right=null!=i?i:Xo.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new Xo(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Xo.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return Xo.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Xo.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Xo.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ms(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ms(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ms(27949);return e+(this.isRed()?0:1)}}Xo.EMPTY=null,Xo.RED=!0,Xo.BLACK=!1,Xo.EMPTY=new class{constructor(){this.size=0}get key(){throw ms(57766)}get value(){throw ms(16141)}get color(){throw ms(16727)}get left(){throw ms(29726)}get right(){throw ms(36894)}copy(e,t,n,r,i){return this}insert(e,t,n){return new Xo(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Zo{constructor(e){this.comparator=e,this.data=new Jo(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new ea(this.data.getIterator())}getIteratorFrom(e){return new ea(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof Zo))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Zo(this.comparator);return t.data=e,t}}class ea{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class ta{constructor(e){this.fields=e,e.sort(zs.comparator)}static empty(){return new ta([])}unionWith(e){let t=new Zo(zs.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new ta(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ms(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class na extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class ra{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new na("Invalid base64 string: "+e):e}}(e);return new ra(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new ra(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ps(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ra.EMPTY_BYTE_STRING=new ra("");const ia=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function sa(e){if(vs(!!e,39018),"string"==typeof e){let t=0;const n=ia.exec(e);if(vs(!!n,46558,{timestamp:e}),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:oa(e.seconds),nanos:oa(e.nanos)}}function oa(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function aa(e){return"string"==typeof e?ra.fromBase64String(e):ra.fromUint8Array(e)}const la="server_timestamp",ca="__type__",ua="__previous_value__",da="__local_write_time__";function ha(e){var t,n;return(null===(t=((null===e||void 0===e||null===(n=e.mapValue)||void 0===n?void 0:n.fields)||{})[ca])||void 0===t?void 0:t.stringValue)===la}function fa(e){const t=e.mapValue.fields[ua];return ha(t)?fa(t):t}function pa(e){const t=sa(e.mapValue.fields[da].timestampValue);return new eo(t.seconds,t.nanos)}class ma{constructor(e,t,n,r,i,s,o,a,l,c,u){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=l,this.isUsingEmulator=c,this.apiKey=u}}const ga="(default)";class va{constructor(e,t){this.projectId=e,this.database=t||ga}static empty(){return new va("","")}get isDefaultDatabase(){return this.database===ga}isEqual(e){return e instanceof va&&e.projectId===this.projectId&&e.database===this.database}}const ya="__type__",ba="__max__",wa={mapValue:{fields:{__type__:{stringValue:ba}}}},xa="__vector__",ka="value";function Sa(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?ha(e)?4:Ba(e)?9007199254740991:Fa(e)?10:11:ms(28295,{value:e})}function Ea(e,t){if(e===t)return!0;const n=Sa(e);if(n!==Sa(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return pa(e).isEqual(pa(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=sa(e.timestampValue),r=sa(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return aa(e.bytesValue).isEqual(aa(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return oa(e.geoPointValue.latitude)===oa(t.geoPointValue.latitude)&&oa(e.geoPointValue.longitude)===oa(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return oa(e.integerValue)===oa(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=oa(e.doubleValue),r=oa(t.doubleValue);return n===r?yo(n)===yo(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Ms(e.arrayValue.values||[],t.arrayValue.values||[],Ea);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Ko(n)!==Ko(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Ea(n[i],r[i])))return!1;return!0}(e,t);default:return ms(52216,{left:e})}}function Ca(e,t){return void 0!==(e.values||[]).find(e=>Ea(e,t))}function Na(e,t){if(e===t)return 0;const n=Sa(e),r=Sa(t);if(n!==r)return Ps(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ps(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=oa(e.integerValue||e.doubleValue),r=oa(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Ia(e.timestampValue,t.timestampValue);case 4:return Ia(pa(e),pa(t));case 5:return Rs(e.stringValue,t.stringValue);case 6:return function(e,t){const n=aa(e),r=aa(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=Ps(n[i],r[i]);if(0!==e)return e}return Ps(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Ps(oa(e.latitude),oa(t.latitude));return 0!==n?n:Ps(oa(e.longitude),oa(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return _a(e.arrayValue,t.arrayValue);case 10:return function(e,t,n,r,i,s){const o=e.fields||{},a=t.fields||{},l=null===(n=o[ka])||void 0===n?void 0:n.arrayValue,c=null===(r=a[ka])||void 0===r?void 0:r.arrayValue,u=Ps((null===l||void 0===l||null===(i=l.values)||void 0===i?void 0:i.length)||0,(null===c||void 0===c||null===(s=c.values)||void 0===s?void 0:s.length)||0);return 0!==u?u:_a(l,c)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===wa.mapValue&&t===wa.mapValue)return 0;if(e===wa.mapValue)return 1;if(t===wa.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let o=0;o<r.length&&o<s.length;++o){const e=Rs(r[o],s[o]);if(0!==e)return e;const t=Na(n[r[o]],i[s[o]]);if(0!==t)return t}return Ps(r.length,s.length)}(e.mapValue,t.mapValue);default:throw ms(23264,{he:n})}}function Ia(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Ps(e,t);const n=sa(e),r=sa(t),i=Ps(n.seconds,r.seconds);return 0!==i?i:Ps(n.nanos,r.nanos)}function _a(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=Na(n[i],r[i]);if(e)return e}return Ps(n.length,r.length)}function Ta(e){return Aa(e)}function Aa(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=sa(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return aa(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return Ws.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Aa(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+="".concat(i,":").concat(Aa(e.fields[i]));return n+"}"}(e.mapValue):ms(61005,{value:e})}function Da(e){switch(Sa(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=fa(e);return t?16+Da(t):16;case 5:return 2*e.stringValue.length;case 6:return aa(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(e){return(e.values||[]).reduce((e,t)=>e+Da(t),0)}(e.arrayValue);case 10:case 11:return function(e){let t=0;return Qo(e.fields,(e,n)=>{t+=e.length+Da(n)}),t}(e.mapValue);default:throw ms(13486,{value:e})}}function Pa(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Ra(e){return!!e&&"integerValue"in e}function La(e){return!!e&&"arrayValue"in e}function ja(e){return!!e&&"nullValue"in e}function Oa(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Ma(e){return!!e&&"mapValue"in e}function Fa(e){var t,n;return(null===(t=((null===e||void 0===e||null===(n=e.mapValue)||void 0===n?void 0:n.fields)||{})[ya])||void 0===t?void 0:t.stringValue)===xa}function Ua(e){if(e.geoPointValue)return{geoPointValue:d({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:d({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Qo(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=Ua(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Ua(e.arrayValue.values[n]);return t}return d({},e)}function Ba(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===ba}class Va{constructor(e){this.value=e}static empty(){return new Va({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Ma(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ua(t)}setAll(e){let t=zs.emptyPath(),n={},r=[];e.forEach((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=Ua(e):r.push(i.lastSegment())});const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());Ma(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ea(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Ma(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Qo(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new Va(Ua(this.value))}}function za(e){const t=[];return Qo(e.fields,(e,n)=>{const r=new zs([e]);if(Ma(n)){const e=za(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new ta(t)}class Wa{constructor(e,t,n,r,i,s,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=o}static newInvalidDocument(e){return new Wa(e,0,to.min(),to.min(),to.min(),Va.empty(),0)}static newFoundDocument(e,t,n,r){return new Wa(e,1,t,to.min(),n,r,0)}static newNoDocument(e,t){return new Wa(e,2,t,to.min(),to.min(),Va.empty(),0)}static newUnknownDocument(e,t){return new Wa(e,3,t,to.min(),to.min(),Va.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(to.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Va.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Va.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=to.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Wa&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Wa(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class Ha{constructor(e,t){this.position=e,this.inclusive=t}}function qa(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(r=s.field.isKeyField()?Ws.comparator(Ws.fromName(o.referenceValue),n.key):Na(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function Ga(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Ea(e.position[n],t.position[n]))return!1;return!0}class Ka{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function Qa(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class Ya{}class Ja extends Ya{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new il(e,t,n):"array-contains"===t?new ll(e,n):"in"===t?new cl(e,n):"not-in"===t?new ul(e,n):"array-contains-any"===t?new dl(e,n):new Ja(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new sl(e,n):new ol(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&void 0===t.nullValue&&this.matchesComparison(Na(t,this.value)):null!==t&&Sa(this.value)===Sa(t)&&this.matchesComparison(Na(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ms(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class $a extends Ya{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new $a(e,t)}matches(e){return Xa(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.Pe||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Xa(e){return"and"===e.op}function Za(e){return el(e)&&Xa(e)}function el(e){for(const t of e.filters)if(t instanceof $a)return!1;return!0}function tl(e){if(e instanceof Ja)return e.field.canonicalString()+e.op.toString()+Ta(e.value);if(Za(e))return e.filters.map(e=>tl(e)).join(",");{const t=e.filters.map(e=>tl(e)).join(",");return"".concat(e.op,"(").concat(t,")")}}function nl(e,t){return e instanceof Ja?function(e,t){return t instanceof Ja&&e.op===t.op&&e.field.isEqual(t.field)&&Ea(e.value,t.value)}(e,t):e instanceof $a?function(e,t){return t instanceof $a&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,r)=>e&&nl(n,t.filters[r]),!0)}(e,t):void ms(19439)}function rl(e){return e instanceof Ja?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(Ta(e.value))}(e):e instanceof $a?function(e){return e.op.toString()+" {"+e.getFilters().map(rl).join(" ,")+"}"}(e):"Filter"}class il extends Ja{constructor(e,t,n){super(e,t,n),this.key=Ws.fromName(n.referenceValue)}matches(e){const t=Ws.comparator(e.key,this.key);return this.matchesComparison(t)}}class sl extends Ja{constructor(e,t){super(e,"in",t),this.keys=al("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class ol extends Ja{constructor(e,t){super(e,"not-in",t),this.keys=al("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function al(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>Ws.fromName(e.referenceValue))}class ll extends Ja{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return La(t)&&Ca(t.arrayValue,this.value)}}class cl extends Ja{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Ca(this.value.arrayValue,t)}}class ul extends Ja{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ca(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&void 0===t.nullValue&&!Ca(this.value.arrayValue,t)}}class dl extends Ja{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!La(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>Ca(this.value.arrayValue,e))}}class hl{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.Te=null}}function fl(e){return new hl(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function pl(e){const t=ys(e);if(null===t.Te){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>tl(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),vo(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>Ta(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>Ta(e)).join(",")),t.Te=e}return t.Te}function ml(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Qa(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!nl(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Ga(e.startAt,t.startAt)&&Ga(e.endAt,t.endAt)}function gl(e){return Ws.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class vl{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function yl(e,t,n,r,i,s,o,a){return new vl(e,t,n,r,i,s,o,a)}function bl(e){return new vl(e)}function wl(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function xl(e){return null!==e.collectionGroup}function kl(e){const t=ys(e);if(null===t.Ie){t.Ie=[];const e=new Set;for(const i of t.explicitOrderBy)t.Ie.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new Zo(zs.comparator);return e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t}(t);r.forEach(r=>{e.has(r.canonicalString())||r.isKeyField()||t.Ie.push(new Ka(r,n))}),e.has(zs.keyField().canonicalString())||t.Ie.push(new Ka(zs.keyField(),n))}return t.Ie}function Sl(e){const t=ys(e);return t.Ee||(t.Ee=El(t,kl(e))),t.Ee}function El(e,t){if("F"===e.limitType)return fl(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{const t="desc"===e.dir?"asc":"desc";return new Ka(e.field,t)});const n=e.endAt?new Ha(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Ha(e.startAt.position,e.startAt.inclusive):null;return fl(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Cl(e,t){const n=e.filters.concat([t]);return new vl(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Nl(e,t,n){return new vl(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Il(e,t){return ml(Sl(e),Sl(t))&&e.limitType===t.limitType}function _l(e){return"".concat(pl(Sl(e)),"|lt:").concat(e.limitType)}function Tl(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map(e=>rl(e)).join(", "),"]")),vo(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map(e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>Ta(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>Ta(e)).join(",")),"Target(".concat(t,")")}(Sl(e)),"; limitType=").concat(e.limitType,")")}function Al(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Ws.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of kl(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=qa(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,kl(e),t))&&!(e.endAt&&!function(e,t,n){const r=qa(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,kl(e),t))}(e,t)}function Dl(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Pl(e){return(t,n)=>{let r=!1;for(const i of kl(e)){const e=Rl(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function Rl(e,t,n){const r=e.field.isKeyField()?Ws.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Na(r,i):ms(42886)}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return ms(19790,{direction:e.dir})}}class Ll{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Qo(this.inner,(t,n)=>{for(const[r,i]of n)e(r,i)})}isEmpty(){return Yo(this.inner)}size(){return this.innerSize}}const jl=new Jo(Ws.comparator);function Ol(){return jl}const Ml=new Jo(Ws.comparator);function Fl(){let e=Ml;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function Ul(e){let t=Ml;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function Bl(){return zl()}function Vl(){return zl()}function zl(){return new Ll(e=>e.toString(),(e,t)=>e.isEqual(t))}const Wl=new Jo(Ws.comparator),Hl=new Zo(Ws.comparator);function ql(){let e=Hl;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const Gl=new Zo(Ps);function Kl(){return Gl}function Ql(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:yo(t)?"-0":t}}function Yl(e){return{integerValue:""+e}}function Jl(e,t){return bo(t)?Yl(t):Ql(e,t)}class $l{constructor(){this._=void 0}}function Xl(e,t,n){return e instanceof tc?function(e,t){const n={fields:{[ca]:{stringValue:la},[da]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&ha(t)&&(t=fa(t)),t&&(n.fields[ua]=t),{mapValue:n}}(n,t):e instanceof nc?rc(e,t):e instanceof ic?sc(e,t):function(e,t){const n=ec(e,t),r=ac(n)+ac(e.Ae);return Ra(n)&&Ra(e.Ae)?Yl(r):Ql(e.serializer,r)}(e,t)}function Zl(e,t,n){return e instanceof nc?rc(e,t):e instanceof ic?sc(e,t):n}function ec(e,t){return e instanceof oc?function(e){return Ra(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class tc extends $l{}class nc extends $l{constructor(e){super(),this.elements=e}}function rc(e,t){const n=lc(t);for(const r of e.elements)n.some(e=>Ea(e,r))||n.push(r);return{arrayValue:{values:n}}}class ic extends $l{constructor(e){super(),this.elements=e}}function sc(e,t){let n=lc(t);for(const r of e.elements)n=n.filter(e=>!Ea(e,r));return{arrayValue:{values:n}}}class oc extends $l{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function ac(e){return oa(e.integerValue||e.doubleValue)}function lc(e){return La(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class cc{constructor(e,t){this.field=e,this.transform=t}}class uc{constructor(e,t){this.version=e,this.transformResults=t}}class dc{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new dc}static exists(e){return new dc(void 0,e)}static updateTime(e){return new dc(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function hc(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class fc{}function pc(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Ec(e.key,dc.none()):new bc(e.key,e.data,dc.none());{const n=e.data,r=Va.empty();let i=new Zo(zs.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new wc(e.key,r,new ta(i.toArray()),dc.none())}}function mc(e,t,n){e instanceof bc?function(e,t,n){const r=e.value.clone(),i=kc(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof wc?function(e,t,n){if(!hc(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=kc(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(xc(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function gc(e,t,n,r){return e instanceof bc?function(e,t,n,r){if(!hc(e.precondition,t))return n;const i=e.value.clone(),s=Sc(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof wc?function(e,t,n,r){if(!hc(e.precondition,t))return n;const i=Sc(e.fieldTransforms,r,t),s=t.data;return s.setAll(xc(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,r):function(e,t,n){return hc(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function vc(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=ec(r.transform,e||null);null!=i&&(null===n&&(n=Va.empty()),n.set(r.field,i))}return n||null}function yc(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Ms(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof nc&&t instanceof nc||e instanceof ic&&t instanceof ic?Ms(e.elements,t.elements,Ea):e instanceof oc&&t instanceof oc?Ea(e.Ae,t.Ae):e instanceof tc&&t instanceof tc}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class bc extends fc{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class wc extends fc{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function xc(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function kc(e,t,n){const r=new Map;vs(e.length===n.length,32656,{Ve:n.length,de:e.length});for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,Zl(o,a,n[i]))}return r}function Sc(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,Xl(e,s,t))}return r}class Ec extends fc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Cc extends fc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Nc{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&mc(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=gc(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=gc(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=Vl();return this.mutations.forEach(r=>{const i=e.get(r.key),s=i.overlayedDocument;let o=this.applyToLocalView(s,i.mutatedFields);o=t.has(r.key)?null:o;const a=pc(s,o);null!==a&&n.set(r.key,a),s.isValidDocument()||s.convertToNoDocument(to.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ql())}isEqual(e){return this.batchId===e.batchId&&Ms(this.mutations,e.mutations,(e,t)=>yc(e,t))&&Ms(this.baseMutations,e.baseMutations,(e,t)=>yc(e,t))}}class Ic{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){vs(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let r=Wl;const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new Ic(e,t,n,r)}}class _c{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class Tc{constructor(e,t){this.count=e,this.unchangedNames=t}}var Ac,Dc;function Pc(e){switch(e){case bs.OK:return ms(64938);case bs.CANCELLED:case bs.UNKNOWN:case bs.DEADLINE_EXCEEDED:case bs.RESOURCE_EXHAUSTED:case bs.INTERNAL:case bs.UNAVAILABLE:case bs.UNAUTHENTICATED:return!1;case bs.INVALID_ARGUMENT:case bs.NOT_FOUND:case bs.ALREADY_EXISTS:case bs.PERMISSION_DENIED:case bs.FAILED_PRECONDITION:case bs.ABORTED:case bs.OUT_OF_RANGE:case bs.UNIMPLEMENTED:case bs.DATA_LOSS:return!0;default:return ms(15467,{code:e})}}function Rc(e){if(void 0===e)return hs("GRPC error has no .code"),bs.UNKNOWN;switch(e){case Ac.OK:return bs.OK;case Ac.CANCELLED:return bs.CANCELLED;case Ac.UNKNOWN:return bs.UNKNOWN;case Ac.DEADLINE_EXCEEDED:return bs.DEADLINE_EXCEEDED;case Ac.RESOURCE_EXHAUSTED:return bs.RESOURCE_EXHAUSTED;case Ac.INTERNAL:return bs.INTERNAL;case Ac.UNAVAILABLE:return bs.UNAVAILABLE;case Ac.UNAUTHENTICATED:return bs.UNAUTHENTICATED;case Ac.INVALID_ARGUMENT:return bs.INVALID_ARGUMENT;case Ac.NOT_FOUND:return bs.NOT_FOUND;case Ac.ALREADY_EXISTS:return bs.ALREADY_EXISTS;case Ac.PERMISSION_DENIED:return bs.PERMISSION_DENIED;case Ac.FAILED_PRECONDITION:return bs.FAILED_PRECONDITION;case Ac.ABORTED:return bs.ABORTED;case Ac.OUT_OF_RANGE:return bs.OUT_OF_RANGE;case Ac.UNIMPLEMENTED:return bs.UNIMPLEMENTED;case Ac.DATA_LOSS:return bs.DATA_LOSS;default:return ms(39323,{code:e})}}(Dc=Ac||(Ac={}))[Dc.OK=0]="OK",Dc[Dc.CANCELLED=1]="CANCELLED",Dc[Dc.UNKNOWN=2]="UNKNOWN",Dc[Dc.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Dc[Dc.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Dc[Dc.NOT_FOUND=5]="NOT_FOUND",Dc[Dc.ALREADY_EXISTS=6]="ALREADY_EXISTS",Dc[Dc.PERMISSION_DENIED=7]="PERMISSION_DENIED",Dc[Dc.UNAUTHENTICATED=16]="UNAUTHENTICATED",Dc[Dc.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Dc[Dc.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Dc[Dc.ABORTED=10]="ABORTED",Dc[Dc.OUT_OF_RANGE=11]="OUT_OF_RANGE",Dc[Dc.UNIMPLEMENTED=12]="UNIMPLEMENTED",Dc[Dc.INTERNAL=13]="INTERNAL",Dc[Dc.UNAVAILABLE=14]="UNAVAILABLE",Dc[Dc.DATA_LOSS=15]="DATA_LOSS";let Lc=null;function jc(){return new TextEncoder}const Oc=new Ki([4294967295,4294967295],0);function Mc(e){const t=jc().encode(e),n=new Qi;return n.update(t),new Uint8Array(n.digest())}function Fc(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new Ki([n,r],0),new Ki([i,s],0)]}class Uc{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new Bc("Invalid padding: ".concat(t));if(n<0)throw new Bc("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new Bc("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new Bc("Invalid padding when bitmap length is 0: ".concat(t));this.ge=8*e.length-t,this.pe=Ki.fromNumber(this.ge)}ye(e,t,n){let r=e.add(t.multiply(Ki.fromNumber(n)));return 1===r.compare(Oc)&&(r=new Ki([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.ge)return!1;const t=Mc(e),[n,r]=Fc(t);for(let i=0;i<this.hashCount;i++){const e=this.ye(n,r,i);if(!this.we(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new Uc(i,r,t);return n.forEach(e=>s.insert(e)),s}insert(e){if(0===this.ge)return;const t=Mc(e),[n,r]=Fc(t);for(let i=0;i<this.hashCount;i++){const e=this.ye(n,r,i);this.be(e)}}be(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class Bc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Vc{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,zc.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new Vc(to.min(),r,new Jo(Ps),Ol(),ql())}}class zc{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new zc(n,t,ql(),ql(),ql())}}class Wc{constructor(e,t,n,r){this.Se=e,this.removedTargetIds=t,this.key=n,this.De=r}}class Hc{constructor(e,t){this.targetId=e,this.Ce=t}}class qc{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ra.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class Gc{constructor(){this.ve=0,this.Fe=Yc(),this.Me=ra.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return 0!==this.ve}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ql(),t=ql(),n=ql();return this.Fe.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:ms(38017,{changeType:i})}}),new zc(this.Me,this.xe,e,t,n)}Ke(){this.Oe=!1,this.Fe=Yc()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,vs(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class Kc{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ol(),this.He=Qc(),this.Je=Qc(),this.Ze=new Jo(Ps)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{const n=this.nt(t);switch(e.state){case 0:this.rt(t)&&n.Le(e.resumeToken);break;case 1:n.We(),n.Ne||n.Ke(),n.Le(e.resumeToken);break;case 2:n.We(),n.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(n.Qe(),n.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),n.Le(e.resumeToken));break;default:ms(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((e,n)=>{this.rt(n)&&t(n)})}st(e){const t=e.targetId,n=e.Ce.count,r=this.ot(t);if(r){const s=r.target;if(gl(s))if(0===n){const e=new Ws(s.path);this.et(t,e,Wa.newNoDocument(e,to.min()))}else vs(1===n,20013,{expectedCount:n});else{const r=this._t(t);if(r!==n){var i;const n=this.ut(e),s=n?this.ct(n,e,r):1;if(0!==s){this.it(t);const e=2===s?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,e)}null===(i=Lc)||void 0===i||i.lt(function(e,t,n,r,i,s,o,a,l,c){const u={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},d=t.unchangedNames;return d&&(u.bloomFilter={applied:0===i,hashCount:null!==(s=null===d||void 0===d?void 0:d.hashCount)&&void 0!==s?s:0,bitmapLength:null!==(o=null===d||void 0===d||null===(a=d.bits)||void 0===a||null===(a=a.bitmap)||void 0===a?void 0:a.length)&&void 0!==o?o:0,padding:null!==(l=null===d||void 0===d||null===(c=d.bits)||void 0===c?void 0:c.padding)&&void 0!==l?l:0,mightContain:e=>{var t;return null!==(t=null===r||void 0===r?void 0:r.mightContain(e))&&void 0!==t&&t}}),u}(r,e.Ce,this.Ge.ht(),n,s))}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let s,o;try{s=aa(n).toUint8Array()}catch(e){if(e instanceof na)return fs("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{o=new Uc(s,r,i)}catch(e){return fs(e instanceof Bc?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===o.ge?null:o}ct(e,t,n){return t.Ce.count===n-this.Pt(e,t.targetId)?0:2}Pt(e,t){const n=this.Ge.getRemoteKeysForTarget(t);let r=0;return n.forEach(n=>{const i=this.Ge.ht(),s="projects/".concat(i.projectId,"/databases/").concat(i.database,"/documents/").concat(n.path.canonicalString());e.mightContain(s)||(this.et(t,n,null),r++)}),r}Tt(e){const t=new Map;this.ze.forEach((n,r)=>{const i=this.ot(r);if(i){if(n.current&&gl(i.target)){const t=new Ws(i.target.path);this.It(t).has(r)||this.Et(r,t)||this.et(r,t,Wa.newNoDocument(t,e))}n.Be&&(t.set(r,n.ke()),n.Ke())}});let n=ql();this.Je.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this.ot(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))}),this.je.forEach((t,n)=>n.setReadTime(e));const r=new Vc(e,t,this.Ze,this.je,n);return this.je=Ol(),this.He=Qc(),this.Je=Qc(),this.Ze=new Jo(Ps),r}Ye(e,t){if(!this.rt(e))return;const n=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,n),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,n){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,t)?r.qe(t,1):r.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),n&&(this.je=this.je.insert(t,n))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new Gc,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new Zo(Ps),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new Zo(Ps),this.He=this.He.insert(e,t)),t}rt(e){const t=null!==this.ot(e);return t||ds("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Gc),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Qc(){return new Jo(Ws.comparator)}function Yc(){return new Jo(Ws.comparator)}const Jc={asc:"ASCENDING",desc:"DESCENDING"},$c={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Xc={and:"AND",or:"OR"};class Zc{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function eu(e,t){return e.useProto3Json||vo(t)?t:{value:t}}function tu(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function nu(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function ru(e,t){return tu(e,t.toTimestamp())}function iu(e){return vs(!!e,49232),to.fromTimestamp(function(e){const t=sa(e);return new eo(t.seconds,t.nanos)}(e))}function su(e,t){return ou(e,t).canonicalString()}function ou(e,t){const n=function(e){return new Bs(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function au(e){const t=Bs.fromString(e);return vs(Iu(t),10190,{key:t.toString()}),t}function lu(e,t){return su(e.databaseId,t.path)}function cu(e,t){const n=au(t);if(n.get(1)!==e.databaseId.projectId)throw new ws(bs.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new ws(bs.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Ws(fu(n))}function uu(e,t){return su(e.databaseId,t)}function du(e){const t=au(e);return 4===t.length?Bs.emptyPath():fu(t)}function hu(e){return new Bs(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function fu(e){return vs(e.length>4&&"documents"===e.get(4),29091,{key:e.toString()}),e.popFirst(5)}function pu(e,t,n){return{name:lu(e,t),fields:n.value.mapValue.fields}}function mu(e,t){let n;if(t instanceof bc)n={update:pu(e,t.key,t.value)};else if(t instanceof Ec)n={delete:lu(e,t.key)};else if(t instanceof wc)n={update:pu(e,t.key,t.data),updateMask:Nu(t.fieldMask)};else{if(!(t instanceof Cc))return ms(16599,{dt:t.type});n={verify:lu(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof tc)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof nc)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof ic)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof oc)return{fieldPath:t.field.canonicalString(),increment:n.Ae};throw ms(20930,{transform:t.transform})}(0,e))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:ru(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:ms(27497)}(e,t.precondition)),n}function gu(e,t){return{documents:[uu(e,t.path)]}}function vu(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=uu(e,i);const s=function(e){if(0!==e.length)return Cu($a.create(e,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(e){if(0!==e.length)return e.map(e=>function(e){return{field:Su(e.field),direction:wu(e.dir)}}(e))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=eu(e,t.limit);return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{ft:n,parent:i}}function yu(e){let t=du(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){vs(1===r,65062);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=bu(e);return t instanceof $a&&Za(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=function(e){return e.map(e=>function(e){return new Ka(Eu(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))}(n.orderBy));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,vo(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new Ha(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new Ha(n,t)}(n.endAt)),yl(t,i,o,s,a,"F",l,c)}function bu(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Eu(e.unaryFilter.field);return Ja.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Eu(e.unaryFilter.field);return Ja.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Eu(e.unaryFilter.field);return Ja.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Eu(e.unaryFilter.field);return Ja.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ms(61313);default:return ms(60726)}}(e):void 0!==e.fieldFilter?function(e){return Ja.create(Eu(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ms(58110);default:return ms(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return $a.create(e.compositeFilter.filters.map(e=>bu(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return ms(1026)}}(e.compositeFilter.op))}(e):ms(30097,{filter:e})}function wu(e){return Jc[e]}function xu(e){return $c[e]}function ku(e){return Xc[e]}function Su(e){return{fieldPath:e.canonicalString()}}function Eu(e){return zs.fromServerFormat(e.fieldPath)}function Cu(e){return e instanceof Ja?function(e){if("=="===e.op){if(Oa(e.value))return{unaryFilter:{field:Su(e.field),op:"IS_NAN"}};if(ja(e.value))return{unaryFilter:{field:Su(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Oa(e.value))return{unaryFilter:{field:Su(e.field),op:"IS_NOT_NAN"}};if(ja(e.value))return{unaryFilter:{field:Su(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Su(e.field),op:xu(e.op),value:e.value}}}(e):e instanceof $a?function(e){const t=e.getFilters().map(e=>Cu(e));return 1===t.length?t[0]:{compositeFilter:{op:ku(e.op),filters:t}}}(e):ms(54877,{filter:e})}function Nu(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function Iu(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function _u(e){return!!e&&"function"==typeof e._toProto&&"ProtoValue"===e._protoValueType}class Tu{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:to.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:to.min(),o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:ra.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new Tu(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Tu(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Tu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Tu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Au{constructor(e){this.yt=e}}function Du(e){const t=yu({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Nl(t,t.limit,"L"):t}class Pu{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(oa(e.integerValue));else if("doubleValue"in e){const n=oa(e.doubleValue);isNaN(n)?this.Ft(t,13):(this.Ft(t,15),yo(n)?t.Mt(0):t.Mt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Ft(t,20),"string"==typeof n&&(n=sa(n)),t.xt("".concat(n.seconds||"")),t.Mt(n.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(aa(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Ft(t,45),t.Mt(n.latitude||0),t.Mt(n.longitude||0)}else"mapValue"in e?Ba(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):Fa(e)?this.kt(e.mapValue,t):(this.Kt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Nt(t)):ms(19022,{Ut:e})}Ot(e,t){this.Ft(t,25),this.$t(e,t)}$t(e,t){t.xt(e)}Kt(e,t){const n=e.fields||{};this.Ft(t,55);for(const r of Object.keys(n))this.Ot(r,t),this.Ct(n[r],t)}kt(e,t){var n;const r=e.fields||{};this.Ft(t,53);const i=ka,s=(null===(n=r[i].arrayValue)||void 0===n||null===(n=n.values)||void 0===n?void 0:n.length)||0;this.Ft(t,15),t.Mt(oa(s)),this.Ot(i,t),this.Ct(r[i],t)}qt(e,t){const n=e.values||[];this.Ft(t,50);for(const r of n)this.Ct(r,t)}Lt(e,t){this.Ft(t,37),Ws.fromName(e).path.forEach(e=>{this.Ft(t,60),this.$t(e,t)})}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}Pu.Wt=new Pu;class Ru{constructor(){this.Sn=new Lu}addToCollectionParentIndex(e,t){return this.Sn.add(t),ho.resolve()}getCollectionParents(e,t){return ho.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return ho.resolve()}deleteFieldIndex(e,t){return ho.resolve()}deleteAllFieldIndexes(e){return ho.resolve()}createTargetIndexes(e,t){return ho.resolve()}getDocumentsMatchingTarget(e,t){return ho.resolve(null)}getIndexType(e,t){return ho.resolve(0)}getFieldIndexes(e,t){return ho.resolve([])}getNextCollectionGroupToUpdate(e){return ho.resolve(null)}getMinOffset(e,t){return ho.resolve(oo.min())}getMinOffsetFromCollectionGroup(e,t){return ho.resolve(oo.min())}updateCollectionGroup(e,t,n){return ho.resolve()}updateIndexEntries(e,t){return ho.resolve()}}class Lu{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Zo(Bs.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Zo(Bs.comparator)).toArray()}}new Uint8Array(0);const ju={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Ou=41943040;class Mu{static withCacheSize(e){return new Mu(e,Mu.DEFAULT_COLLECTION_PERCENTILE,Mu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}Mu.DEFAULT_COLLECTION_PERCENTILE=10,Mu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Mu.DEFAULT=new Mu(Ou,Mu.DEFAULT_COLLECTION_PERCENTILE,Mu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Mu.DISABLED=new Mu(-1,0,0);class Fu{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Fu(0)}static ar(){return new Fu(-1)}}const Uu="LruGarbageCollector",Bu=1048576;function Vu(e,t){let[n,r]=e,[i,s]=t;const o=Ps(n,i);return 0===o?Ps(r,s):o}class zu{constructor(e){this.Pr=e,this.buffer=new Zo(Vu),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();Vu(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Wu{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Rr=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return null!==this.Rr}Ar(e){ds(Uu,"Garbage collection scheduled in ".concat(e,"ms")),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){po(e)?ds(Uu,"Ignoring IndexedDB error during garbage collection: ",e):await uo(e)}await this.Ar(3e5)})}}class Hu{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next(e=>Math.floor(t/100*e))}nthSequenceNumber(e,t){if(0===t)return ho.resolve(mo.ce);const n=new zu(t);return this.Vr.forEachTarget(e,e=>n.Er(e.sequenceNumber)).next(()=>this.Vr.mr(e,e=>n.Er(e))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.Vr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(ds("LruGarbageCollector","Garbage collection skipped; disabled"),ho.resolve(ju)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(ds("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(n," is lower than threshold ").concat(this.params.cacheSizeCollectionThreshold)),ju):this.gr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let n,r,i,s,o,a,l;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(t=>(t>this.params.maximumSequenceNumbersToCollect?(ds("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(this.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=this.params.maximumSequenceNumbersToCollect):r=t,s=Date.now(),this.nthSequenceNumber(e,r))).next(r=>(n=r,o=Date.now(),this.removeTargets(e,n,t))).next(t=>(i=t,a=Date.now(),this.removeOrphanedDocuments(e,n))).next(e=>(l=Date.now(),us()<=Q.DEBUG&&ds("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(s-c,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-s)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(a-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(l-a)+"ms\n"+"Total Duration: ".concat(l-c,"ms")),ho.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})))}}function qu(e,t){return new Hu(e,t)}class Gu{constructor(){this.changes=new Ll(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Wa.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?ho.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Ku{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Qu{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&gc(n.mutation,e,ta.empty(),eo.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,ql()).next(()=>t))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ql();const r=Bl();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(e=>{let t=Fl();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=Bl();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,ql()))}populateOverlays(e,t,n){const r=[];return n.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,r){let i=Ol();const s=zl(),o=zl();return t.forEach((e,t)=>{const o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof wc)?i=i.insert(t.key,t):void 0!==o?(s.set(t.key,o.mutation.getFieldMask()),gc(o.mutation,t,o.mutation.getFieldMask(),eo.now())):s.set(t.key,ta.empty())}),this.recalculateAndSaveOverlays(e,i).next(e=>(e.forEach((e,t)=>s.set(e,t)),t.forEach((e,t)=>{var n;return o.set(e,new Ku(t,null!==(n=s.get(e))&&void 0!==n?n:null))}),o))}recalculateAndSaveOverlays(e,t){const n=zl();let r=new Jo((e,t)=>e-t),i=ql();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const i of e)i.keys().forEach(e=>{const s=t.get(e);if(null===s)return;let o=n.get(e)||ta.empty();o=i.applyToLocalView(s,o),n.set(e,o);const a=(r.get(i.batchId)||ql()).add(e);r=r.insert(i.batchId,a)})}).next(()=>{const s=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,l=r.value,c=Vl();l.forEach(e=>{if(!i.has(e)){const r=pc(t.get(e),n.get(e));null!==r&&c.set(e,r),i=i.add(e)}}),s.push(this.documentOverlayCache.saveOverlays(e,a,c))}return ho.waitFor(s)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return Ws.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):xl(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):ho.resolve(Bl());let o=no,a=i;return s.next(t=>ho.forEach(t,(t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(t)?ho.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{a=a.insert(t,e)}))).next(()=>this.populateOverlays(e,t,i)).next(()=>this.computeViews(e,a,t,ql())).next(e=>({batchId:o,changes:Ul(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ws(t)).next(e=>{let t=Fl();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let s=Fl();return this.indexManager.getCollectionParents(e,i).next(o=>ho.forEach(o,o=>{const a=function(e,t){return new vl(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return this.getDocumentsMatchingCollectionQuery(e,a,n,r).next(e=>{e.forEach((e,t)=>{s=s.insert(e,t)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r))).next(e=>{i.forEach((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,Wa.newInvalidDocument(r)))});let n=Fl();return e.forEach((e,r)=>{const s=i.get(e);void 0!==s&&gc(s.mutation,r,ta.empty(),eo.now()),Al(t,r)&&(n=n.insert(e,r))}),n})}}class Yu{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return ho.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:iu(e.createTime)}}(t)),ho.resolve()}getNamedQuery(e,t){return ho.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,function(e){return{name:e.name,query:Du(e.bundledQuery),readTime:iu(e.readTime)}}(t)),ho.resolve()}}class Ju{constructor(){this.overlays=new Jo(Ws.comparator),this.Lr=new Map}getOverlay(e,t){return ho.resolve(this.overlays.get(t))}getOverlays(e,t){const n=Bl();return ho.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,r)=>{this.bt(e,t,r)}),ho.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.Lr.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.Lr.delete(n)),ho.resolve()}getOverlaysForCollection(e,t,n){const r=Bl(),i=t.length+1,s=new Ws(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return ho.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new Jo((e,t)=>e-t);const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=Bl(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=Bl(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach((e,t)=>o.set(e,t)),!(o.size()>=r)););return ho.resolve(o)}bt(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.Lr.get(r.largestBatchId).delete(n.key);this.Lr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new _c(t,n));let i=this.Lr.get(t);void 0===i&&(i=ql(),this.Lr.set(t,i)),this.Lr.set(t,i.add(n.key))}}class $u{constructor(){this.sessionToken=ra.EMPTY_BYTE_STRING}getSessionToken(e){return ho.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ho.resolve()}}class Xu{constructor(){this.kr=new Zo(Zu.Kr),this.qr=new Zo(Zu.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const n=new Zu(e,t);this.kr=this.kr.add(n),this.qr=this.qr.add(n)}$r(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.Wr(new Zu(e,t))}Qr(e,t){e.forEach(e=>this.removeReference(e,t))}Gr(e){const t=new Ws(new Bs([])),n=new Zu(t,e),r=new Zu(t,e+1),i=[];return this.qr.forEachInRange([n,r],e=>{this.Wr(e),i.push(e.key)}),i}zr(){this.kr.forEach(e=>this.Wr(e))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new Ws(new Bs([])),n=new Zu(t,e),r=new Zu(t,e+1);let i=ql();return this.qr.forEachInRange([n,r],e=>{i=i.add(e.key)}),i}containsKey(e){const t=new Zu(e,0),n=this.kr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class Zu{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return Ws.comparator(e.key,t.key)||Ps(e.Hr,t.Hr)}static Ur(e,t){return Ps(e.Hr,t.Hr)||Ws.comparator(e.key,t.key)}}class ed{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new Zo(Zu.Kr)}checkEmpty(e){return ho.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new Nc(i,t,n,r);this.mutationQueue.push(s);for(const o of r)this.Jr=this.Jr.add(new Zu(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return ho.resolve(s)}lookupMutationBatch(e,t){return ho.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.Xr(n),i=r<0?0:r;return ho.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return ho.resolve(0===this.mutationQueue.length?go:this.Yn-1)}getAllMutationBatches(e){return ho.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Zu(t,0),r=new Zu(t,Number.POSITIVE_INFINITY),i=[];return this.Jr.forEachInRange([n,r],e=>{const t=this.Zr(e.Hr);i.push(t)}),ho.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Zo(Ps);return t.forEach(e=>{const t=new Zu(e,0),r=new Zu(e,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([t,r],e=>{n=n.add(e.Hr)})}),ho.resolve(this.Yr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;Ws.isDocumentKey(i)||(i=i.child(""));const s=new Zu(new Ws(i),0);let o=new Zo(Ps);return this.Jr.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.Hr)),!0)},s),ho.resolve(this.Yr(o))}Yr(e){const t=[];return e.forEach(e=>{const n=this.Zr(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){vs(0===this.ei(t.batchId,"removed"),55003),this.mutationQueue.shift();let n=this.Jr;return ho.forEach(t.mutations,r=>{const i=new Zu(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Jr=n})}nr(e){}containsKey(e,t){const n=new Zu(t,0),r=this.Jr.firstAfterOrEqual(n);return ho.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,ho.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class td{constructor(e){this.ti=e,this.docs=new Jo(Ws.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.ti(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return ho.resolve(n?n.document.mutableCopy():Wa.newInvalidDocument(t))}getEntries(e,t){let n=Ol();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Wa.newInvalidDocument(e))}),ho.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=Ol();const s=t.path,o=new Ws(s.child("__id-9223372036854775808__")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:e,value:{document:o}}=a.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||ao(so(o),n)<=0||(r.has(o.key)||Al(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return ho.resolve(i)}getAllFromCollectionGroup(e,t,n,r){ms(9500)}ni(e,t){return ho.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new nd(this)}getSize(e){return ho.resolve(this.size)}}class nd extends Gu{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.Mr.addEntry(e,r)):this.Mr.removeEntry(n)}),ho.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}class rd{constructor(e){this.persistence=e,this.ri=new Ll(e=>pl(e),ml),this.lastRemoteSnapshotVersion=to.min(),this.highestTargetId=0,this.ii=0,this.si=new Xu,this.targetCount=0,this.oi=Fu._r()}forEachTarget(e,t){return this.ri.forEach((e,n)=>t(n)),ho.resolve()}getLastRemoteSnapshotVersion(e){return ho.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ho.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),ho.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.ii&&(this.ii=t),ho.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new Fu(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,ho.resolve()}updateTargetData(e,t){return this.lr(t),ho.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,ho.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.ri.forEach((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.ri.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)}),ho.waitFor(i).next(()=>r)}getTargetCount(e){return ho.resolve(this.targetCount)}getTargetData(e,t){const n=this.ri.get(t)||null;return ho.resolve(n)}addMatchingKeys(e,t,n){return this.si.$r(t,n),ho.resolve()}removeMatchingKeys(e,t,n){this.si.Qr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(t=>{i.push(r.markPotentiallyOrphaned(e,t))}),ho.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),ho.resolve()}getMatchingKeysForTargetId(e,t){const n=this.si.jr(t);return ho.resolve(n)}containsKey(e,t){return ho.resolve(this.si.containsKey(t))}}class id{constructor(e,t){this._i={},this.overlays={},this.ai=new mo(0),this.ui=!1,this.ui=!0,this.ci=new $u,this.referenceDelegate=e(this),this.li=new rd(this),this.indexManager=new Ru,this.remoteDocumentCache=function(e){return new td(e)}(e=>this.referenceDelegate.hi(e)),this.serializer=new Au(t),this.Pi=new Yu(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Ju,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this._i[e.toKey()];return n||(n=new ed(t,this.referenceDelegate),this._i[e.toKey()]=n),n}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,n){ds("MemoryPersistence","Starting transaction:",e);const r=new sd(this.ai.next());return this.referenceDelegate.Ti(),n(r).next(e=>this.referenceDelegate.Ii(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Ei(e,t){return ho.or(Object.values(this._i).map(n=>()=>n.containsKey(e,t)))}}class sd extends co{constructor(e){super(),this.currentSequenceNumber=e}}class od{constructor(e){this.persistence=e,this.Ri=new Xu,this.Ai=null}static Vi(e){return new od(e)}get di(){if(this.Ai)return this.Ai;throw ms(60996)}addReference(e,t,n){return this.Ri.addReference(n,t),this.di.delete(n.toString()),ho.resolve()}removeReference(e,t,n){return this.Ri.removeReference(n,t),this.di.add(n.toString()),ho.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),ho.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach(e=>this.di.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.di.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ho.forEach(this.di,n=>{const r=Ws.fromPath(n);return this.mi(e,r).next(e=>{e||t.removeEntry(r,to.min())})}).next(()=>(this.Ai=null,t.apply(e)))}updateLimboDocument(e,t){return this.mi(e,t).next(e=>{e?this.di.delete(t.toString()):this.di.add(t.toString())})}hi(e){return 0}mi(e,t){return ho.or([()=>ho.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class ad{constructor(e,t){this.persistence=e,this.fi=new Ll(e=>xo(e.path),(e,t)=>e.isEqual(t)),this.garbageCollector=qu(this,t)}static Vi(e,t){return new ad(e,t)}Ti(){}Ii(e){return ho.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}pr(e){let t=0;return this.mr(e,e=>{t++}).next(()=>t)}mr(e,t){return ho.forEach(this.fi,(n,r)=>this.wr(e,n,r).next(e=>e?ho.resolve():t(r)))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.ni(e,r=>this.wr(e,r,t).next(e=>{e||(n++,i.removeEntry(r,to.min()))})).next(()=>i.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),ho.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.fi.set(n,e.currentSequenceNumber),ho.resolve()}removeReference(e,t,n){return this.fi.set(n,e.currentSequenceNumber),ho.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),ho.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Da(e.data.value)),t}wr(e,t,n){return ho.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const e=this.fi.get(t);return ho.resolve(void 0!==e&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class ld{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Ts=n,this.Is=r}static Es(e,t){let n=ql(),r=ql();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new ld(e,t.fromCache,n,r)}}class cd{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class ud{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=A()?8:fo(_())>0?6:4}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.gs(e,t).next(e=>{i.result=e}).next(()=>{if(!i.result)return this.ps(e,t,r,n).next(e=>{i.result=e})}).next(()=>{if(i.result)return;const n=new cd;return this.ys(e,t,n).next(r=>{if(i.result=r,this.As)return this.ws(e,t,n,r.size)})}).next(()=>i.result)}ws(e,t,n,r){return n.documentReadCount<this.Vs?(us()<=Q.DEBUG&&ds("QueryEngine","SDK will not create cache indexes for query:",Tl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),ho.resolve()):(us()<=Q.DEBUG&&ds("QueryEngine","Query:",Tl(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.ds*r?(us()<=Q.DEBUG&&ds("QueryEngine","The SDK decides to create cache indexes for query:",Tl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Sl(t))):ho.resolve())}gs(e,t){if(wl(t))return ho.resolve(null);let n=Sl(t);return this.indexManager.getIndexType(e,n).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=Nl(t,null,"F"),n=Sl(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(r=>{const i=ql(...r);return this.fs.getDocuments(e,i).next(r=>this.indexManager.getMinOffset(e,n).next(n=>{const s=this.bs(t,r);return this.Ss(t,s,i,n.readTime)?this.gs(e,Nl(t,null,"F")):this.Ds(e,s,t,n)}))})))}ps(e,t,n,r){return wl(t)||r.isEqual(to.min())?ho.resolve(null):this.fs.getDocuments(e,n).next(i=>{const s=this.bs(t,i);return this.Ss(t,s,n,r)?ho.resolve(null):(us()<=Q.DEBUG&&ds("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Tl(t)),this.Ds(e,s,t,io(r,no)).next(e=>e))})}bs(e,t){let n=new Zo(Pl(e));return t.forEach((t,r)=>{Al(e,r)&&(n=n.add(r))}),n}Ss(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}ys(e,t,n){return us()<=Q.DEBUG&&ds("QueryEngine","Using full collection scan to execute query:",Tl(t)),this.fs.getDocumentsMatchingQuery(e,t,oo.min(),n)}Ds(e,t,n,r){return this.fs.getDocumentsMatchingQuery(e,n,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}const dd="LocalStore";class hd{constructor(e,t,n,r){this.persistence=e,this.Cs=t,this.serializer=r,this.vs=new Jo(Ps),this.Fs=new Ll(e=>pl(e),ml),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(n)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Qu(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.vs))}}function fd(e,t,n,r){return new hd(e,t,n,r)}async function pd(e,t){const n=ys(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next(i=>(r=i,n.Os(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const i=[],s=[];let o=ql();for(const e of r){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next(e=>({Ns:e,removedBatchIds:i,addedBatchIds:s}))})})}function md(e){const t=ys(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.li.getLastRemoteSnapshotVersion(e))}function gd(e,t,n){let r=ql(),i=ql();return n.forEach(e=>r=r.add(e)),t.getEntries(e,r).next(e=>{let r=Ol();return n.forEach((n,s)=>{const o=e.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(to.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):ds(dd,"Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)}),{Bs:r,Ls:i}})}function vd(e,t){const n=ys(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=go),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}function yd(e,t){const n=ys(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.li.getTargetData(e,t).next(i=>i?(r=i,ho.resolve(r)):n.li.allocateTargetId(e).next(i=>(r=new Tu(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.li.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.vs.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.vs=n.vs.insert(e.targetId,e),n.Fs.set(t,e.targetId)),e})}async function bd(e,t,n){const r=ys(e),i=r.vs.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,e=>r.persistence.referenceDelegate.removeTarget(e,i))}catch(e){if(!po(e))throw e;ds(dd,"Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.vs=r.vs.remove(t),r.Fs.delete(i.target)}function wd(e,t,n){const r=ys(e);let i=to.min(),s=ql();return r.persistence.runTransaction("Execute query","readwrite",e=>function(e,t,n){const r=ys(e),i=r.Fs.get(n);return void 0!==i?ho.resolve(r.vs.get(i)):r.li.getTargetData(t,n)}(r,e,Sl(t)).next(t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(e,t.targetId).next(e=>{s=e})}).next(()=>r.Cs.getDocumentsMatchingQuery(e,t,n?i:to.min(),n?s:ql())).next(e=>(xd(r,Dl(t),e),{documents:e,ks:s})))}function xd(e,t,n){let r=e.Ms.get(t)||to.min();n.forEach((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)}),e.Ms.set(t,r)}class kd{constructor(){this.activeTargetIds=Kl()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Sd{constructor(){this.vo=new kd,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,n){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new kd,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Ed{Mo(e){}shutdown(){}}const Cd="ConnectivityMonitor";class Nd{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){ds(Cd,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){ds(Cd,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Id=null;function _d(){return null===Id?Id=268435456+Math.round(2147483648*Math.random()):Id++,"0x"+Id.toString(16)}const Td="RestConnection",Ad={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class Dd{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo="projects/".concat(n,"/databases/").concat(r),this.$o=this.databaseId.database===ga?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}Wo(e,t,n,r,i){const s=_d(),o=this.Qo(e,t.toUriEncodedString());ds(Td,"Sending RPC '".concat(e,"' ").concat(s,":"),o,n);const a={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(a,r,i);const{host:l}=new URL(o),c=S(l);return this.zo(e,o,a,n,c).then(t=>(ds(Td,"Received RPC '".concat(e,"' ").concat(s,": "),t),t),t=>{throw fs(Td,"RPC '".concat(e,"' ").concat(s," failed with error: "),t,"url: ",o,"request:",n),t})}jo(e,t,n,r,i,s){return this.Wo(e,t,n,r,i)}Go(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+ls,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}Qo(e,t){const n=Ad[e];let r="".concat(this.qo,"/v1/").concat(t,":").concat(n);return this.databaseInfo.apiKey&&(r="".concat(r,"?key=").concat(encodeURIComponent(this.databaseInfo.apiKey))),r}terminate(){}}class Pd{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}const Rd="WebChannelConnection",Ld=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};class jd extends Dd{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!jd.c_){const e=rs();Ld(e,ns.STAT_EVENT,e=>{e.stat===ts.PROXY?ds(Rd,"STAT_EVENT: detected buffering proxy"):e.stat===ts.NOPROXY&&ds(Rd,"STAT_EVENT: detected no buffering proxy")}),jd.c_=!0}}zo(e,t,n,r,i){const s=_d();return new Promise((i,o)=>{const a=new $i;a.setWithCredentials(!0),a.listenOnce(Zi.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case es.NO_ERROR:const n=a.getResponseJson();ds(Rd,"XHR for RPC '".concat(e,"' ").concat(s," received:"),JSON.stringify(n)),i(n);break;case es.TIMEOUT:ds(Rd,"RPC '".concat(e,"' ").concat(s," timed out")),o(new ws(bs.DEADLINE_EXCEEDED,"Request time out"));break;case es.HTTP_ERROR:const r=a.getStatus();if(ds(Rd,"RPC '".concat(e,"' ").concat(s," failed with status:"),r,"response text:",a.getResponseText()),r>0){var t;let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const n=null===(t=e)||void 0===t?void 0:t.error;if(n&&n.status&&n.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(bs).indexOf(t)>=0?t:bs.UNKNOWN}(n.status);o(new ws(e,n.message))}else o(new ws(bs.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new ws(bs.UNAVAILABLE,"Connection failed."));break;default:ms(9055,{l_:e,streamId:s,h_:a.getLastErrorCode(),P_:a.getLastError()})}}finally{ds(Rd,"RPC '".concat(e,"' ").concat(s," completed."))}});const l=JSON.stringify(r);ds(Rd,"RPC '".concat(e,"' ").concat(s," sending request:"),r),a.send(t,"POST",l,n,15)})}T_(e,t,n){const r=_d(),i=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=this.createWebChannelTransport(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},a=this.longPollingOptions.timeoutSeconds;void 0!==a&&(o.longPollingTimeout=Math.round(1e3*a)),this.useFetchStreams&&(o.useFetchStreams=!0),this.Go(o.initMessageHeaders,t,n),o.encodeInitMessageHeaders=!0;const l=i.join("");ds(Rd,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(l),o);const c=s.createWebChannel(l,o);this.I_(c);let u=!1,d=!1;const h=new Pd({Ho:t=>{d?ds(Rd,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(u||(ds(Rd,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),c.open(),u=!0),ds(Rd,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),c.send(t))},Jo:()=>c.close()});return Ld(c,Xi.EventType.OPEN,()=>{d||(ds(Rd,"RPC '".concat(e,"' stream ").concat(r," transport opened.")),h.i_())}),Ld(c,Xi.EventType.CLOSE,()=>{d||(d=!0,ds(Rd,"RPC '".concat(e,"' stream ").concat(r," transport closed")),h.o_(),this.E_(c))}),Ld(c,Xi.EventType.ERROR,t=>{d||(d=!0,fs(Rd,"RPC '".concat(e,"' stream ").concat(r," transport errored. Name:"),t.name,"Message:",t.message),h.o_(new ws(bs.UNAVAILABLE,"The operation could not be completed")))}),Ld(c,Xi.EventType.MESSAGE,t=>{if(!d){var n;const i=t.data[0];vs(!!i,16349);const s=i,o=(null===s||void 0===s?void 0:s.error)||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){ds(Rd,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);const t=o.status;let n=function(e){const t=Ac[e];if(void 0!==t)return Rc(t)}(t),i=o.message;"NOT_FOUND"===t&&i.includes("database")&&i.includes("does not exist")&&i.includes(this.databaseId.database)&&fs("Database '".concat(this.databaseId.database,"' not found. Please check your project configuration.")),void 0===n&&(n=bs.INTERNAL,i="Unknown error status: "+t+" with message "+o.message),d=!0,h.o_(new ws(n,i)),c.close()}else ds(Rd,"RPC '".concat(e,"' stream ").concat(r," received:"),i),h.__(i)}}),jd.u_(),setTimeout(()=>{h.s_()},0),h}terminate(){this.a_.forEach(e=>e.close()),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter(t=>t===e)}Go(e,t,n){super.Go(e,t,n),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return is()}}function Od(e){return new jd(e)}function Md(){return"undefined"!=typeof document?document:null}function Fd(e){return new Zc(e,!0)}jd.c_=!1;class Ud{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.Ci=e,this.timerId=t,this.R_=n,this.A_=r,this.V_=i,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),n=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-n);r>0&&ds("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.d_," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.m_=this.Ci.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),e())),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){null!==this.m_&&(this.m_.skipDelay(),this.m_=null)}cancel(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}const Bd="PersistentStream";class Vd{constructor(e,t,n,r,i,s,o,a){this.Ci=e,this.b_=n,this.S_=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Ud(e,t)}x_(){return 1===this.state||5===this.state||this.O_()}O_(){return 2===this.state||3===this.state}start(){this.F_=0,4!==this.state?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&null===this.C_&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,()=>this.k_()))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,4!==e?this.M_.reset():t&&t.code===bs.RESOURCE_EXHAUSTED?(hs(t.toString()),hs("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===bs.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(e=>{let[n,r]=e;this.D_===t&&this.G_(n,r)},t=>{e(()=>{const e=new ws(bs.UNKNOWN,"Fetching auth token failed: "+t.message);return this.z_(e)})})}G_(e,t){const n=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo(()=>{n(()=>this.listener.Zo())}),this.stream.Yo(()=>{n(()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.Yo()))}),this.stream.t_(e=>{n(()=>this.z_(e))}),this.stream.onMessage(e=>{n(()=>1==++this.F_?this.H_(e):this.onNext(e))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return ds(Bd,"close with error: ".concat(e)),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget(()=>this.D_===e?t():(ds(Bd,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class zd extends Vd{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:ms(39313,{state:e})}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(vs(void 0===t||"string"==typeof t,58123),ra.fromBase64String(t||"")):(vs(void 0===t||t instanceof Buffer||t instanceof Uint8Array,16193),ra.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?bs.UNKNOWN:Rc(e.code);return new ws(t,e.message||"")}(o);n=new qc(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=cu(e,r.document.name),s=iu(r.document.updateTime),o=r.document.createTime?iu(r.document.createTime):to.min(),a=new Va({mapValue:{fields:r.document.fields}}),l=Wa.newFoundDocument(i,s,o,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new Wc(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=cu(e,r.document),s=r.readTime?iu(r.readTime):to.min(),o=Wa.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Wc([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=cu(e,r.document),s=r.removedTargetIds||[];n=new Wc([],s,i,null)}else{if(!("filter"in t))return ms(11601,{Vt:t});{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new Tc(r,i),o=e.targetId;n=new Hc(o,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return to.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?to.min():t.readTime?iu(t.readTime):to.min()}(e);return this.listener.J_(t,n)}Z_(e){const t={};t.database=hu(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=gl(r)?{documents:gu(e,r)}:{query:vu(e,r).ft},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=nu(e,t.resumeToken);const r=eu(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(to.min())>0){n.readTime=tu(e,t.snapshotVersion.toTimestamp());const r=eu(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ms(28987,{purpose:e})}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.K_(t)}X_(e){const t={};t.database=hu(this.serializer),t.removeTarget=e,this.K_(t)}}class Wd extends Vd{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return vs(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,vs(!e.writeResults||0===e.writeResults.length,55816),this.listener.ta()}onNext(e){vs(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=function(e,t){return e&&e.length>0?(vs(void 0!==t,14353),e.map(e=>function(e,t){let n=e.updateTime?iu(e.updateTime):iu(t);return n.isEqual(to.min())&&(n=iu(t)),new uc(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=iu(e.commitTime);return this.listener.na(n,t)}ra(){const e={};e.database=hu(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>mu(this.serializer,e))};this.K_(t)}}class Hd{}class qd extends Hd{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new ws(bs.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,n,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(i=>{let[s,o]=i;return this.connection.Wo(e,ou(t,n),r,s,o)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===bs.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new ws(bs.UNKNOWN,e.toString())})}jo(e,t,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(s=>{let[o,a]=s;return this.connection.jo(e,ou(t,n),r,o,a,i)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===bs.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new ws(bs.UNKNOWN,e.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}function Gd(e,t,n,r){return new qd(e,t,n,r)}class Kd{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){0===this.oa&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){"Online"===this.state?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,"Online"===e&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.aa?(hs(t),this.aa=!1):ds("OnlineStateTracker",t)}Pa(){null!==this._a&&(this._a.cancel(),this._a=null)}}const Qd="RemoteStore";class Yd{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=i,this.Aa.Mo(e=>{n.enqueueAndForget(async()=>{ih(this)&&(ds(Qd,"Restarting streams for network reachability change."),await async function(e){const t=ys(e);t.Ea.add(4),await $d(t),t.Va.set("Unknown"),t.Ea.delete(4),await Jd(t)}(this))})}),this.Va=new Kd(n,r)}}async function Jd(e){if(ih(e))for(const t of e.Ra)await t(!0)}async function $d(e){for(const t of e.Ra)await t(!1)}function Xd(e,t){const n=ys(e);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),rh(n)?nh(n):Sh(n).O_()&&eh(n,t))}function Zd(e,t){const n=ys(e),r=Sh(n);n.Ia.delete(t),r.O_()&&th(n,t),0===n.Ia.size&&(r.O_()?r.L_():ih(n)&&n.Va.set("Unknown"))}function eh(e,t){if(e.da.$e(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(to.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Sh(e).Z_(t)}function th(e,t){e.da.$e(t),Sh(e).X_(t)}function nh(e){e.da=new Kc({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),Sh(e).start(),e.Va.ua()}function rh(e){return ih(e)&&!Sh(e).x_()&&e.Ia.size>0}function ih(e){return 0===ys(e).Ea.size}function sh(e){e.da=void 0}async function oh(e){e.Va.set("Online")}async function ah(e){e.Ia.forEach((t,n)=>{eh(e,t)})}async function lh(e,t){sh(e),rh(e)?(e.Va.ha(t),nh(e)):e.Va.set("Unknown")}async function ch(e,t,n){if(e.Va.set("Online"),t instanceof qc&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.Ia.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.Ia.delete(r),e.da.removeTarget(r))}(e,t)}catch(n){ds(Qd,"Failed to remove targets %s: %s ",t.targetIds.join(","),n),await uh(e,n)}else if(t instanceof Wc?e.da.Xe(t):t instanceof Hc?e.da.st(t):e.da.tt(t),!n.isEqual(to.min()))try{const t=await md(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.da.Tt(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.Ia.get(r);i&&e.Ia.set(r,i.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach((t,n)=>{const r=e.Ia.get(t);if(!r)return;e.Ia.set(t,r.withResumeToken(ra.EMPTY_BYTE_STRING,r.snapshotVersion)),th(e,t);const i=new Tu(r.target,t,n,r.sequenceNumber);eh(e,i)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){ds(Qd,"Failed to raise snapshot:",t),await uh(e,t)}}async function uh(e,t,n){if(!po(t))throw t;e.Ea.add(1),await $d(e),e.Va.set("Offline"),n||(n=()=>md(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{ds(Qd,"Retrying IndexedDB access"),await n(),e.Ea.delete(1),await Jd(e)})}function dh(e,t){return t().catch(n=>uh(e,n,t))}async function hh(e){const t=ys(e),n=Eh(t);let r=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:go;for(;fh(t);)try{const e=await vd(t.localStore,r);if(null===e){0===t.Ta.length&&n.L_();break}r=e.batchId,ph(t,e)}catch(e){await uh(t,e)}mh(t)&&gh(t)}function fh(e){return ih(e)&&e.Ta.length<10}function ph(e,t){e.Ta.push(t);const n=Eh(e);n.O_()&&n.Y_&&n.ea(t.mutations)}function mh(e){return ih(e)&&!Eh(e).x_()&&e.Ta.length>0}function gh(e){Eh(e).start()}async function vh(e){Eh(e).ra()}async function yh(e){const t=Eh(e);for(const n of e.Ta)t.ea(n.mutations)}async function bh(e,t,n){const r=e.Ta.shift(),i=Ic.from(r,t,n);await dh(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await hh(e)}async function wh(e,t){t&&Eh(e).Y_&&await async function(e,t){if(function(e){return Pc(e)&&e!==bs.ABORTED}(t.code)){const n=e.Ta.shift();Eh(e).B_(),await dh(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await hh(e)}}(e,t),mh(e)&&gh(e)}async function xh(e,t){const n=ys(e);n.asyncQueue.verifyOperationInProgress(),ds(Qd,"RemoteStore received new credentials");const r=ih(n);n.Ea.add(3),await $d(n),r&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await Jd(n)}async function kh(e,t){const n=ys(e);t?(n.Ea.delete(2),await Jd(n)):t||(n.Ea.add(2),await $d(n),n.Va.set("Unknown"))}function Sh(e){return e.ma||(e.ma=function(e,t,n){const r=ys(e);return r.sa(),new zd(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Zo:oh.bind(null,e),Yo:ah.bind(null,e),t_:lh.bind(null,e),J_:ch.bind(null,e)}),e.Ra.push(async t=>{t?(e.ma.B_(),rh(e)?nh(e):e.Va.set("Unknown")):(await e.ma.stop(),sh(e))})),e.ma}function Eh(e){return e.fa||(e.fa=function(e,t,n){const r=ys(e);return r.sa(),new Wd(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Zo:()=>Promise.resolve(),Yo:vh.bind(null,e),t_:wh.bind(null,e),ta:yh.bind(null,e),na:bh.bind(null,e)}),e.Ra.push(async t=>{t?(e.fa.B_(),await hh(e)):(await e.fa.stop(),e.Ta.length>0&&(ds(Qd,"Stopping write stream with ".concat(e.Ta.length," pending writes")),e.Ta=[]))})),e.fa}class Ch{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new xs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,o=new Ch(e,t,s,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ws(bs.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Nh(e,t){if(hs("AsyncQueue","".concat(t,": ").concat(e)),po(e))return new ws(bs.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class Ih{static emptySet(e){return new Ih(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||Ws.comparator(t.key,n.key):(e,t)=>Ws.comparator(e.key,t.key),this.keyedMap=Fl(),this.sortedSet=new Jo(this.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ih))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new Ih;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class _h{constructor(){this.ga=new Jo(Ws.comparator)}track(e){const t=e.doc.key,n=this.ga.get(t);n?0!==e.type&&3===n.type?this.ga=this.ga.insert(t,e):3===e.type&&1!==n.type?this.ga=this.ga.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.ga=this.ga.remove(t):1===e.type&&2===n.type?this.ga=this.ga.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):ms(63341,{Vt:e,pa:n}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal((t,n)=>{e.push(n)}),e}}class Th{constructor(e,t,n,r,i,s,o,a,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach(e=>{s.push({type:0,doc:e})}),new Th(e,t,Ih.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Il(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class Ah{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some(e=>e.Da())}}class Dh{constructor(){this.queries=Ph(),this.onlineState="Unknown",this.Ca=new Set}terminate(){!function(e,t){const n=ys(e),r=n.queries;n.queries=Ph(),r.forEach((e,n)=>{for(const r of n.ba)r.onError(t)})}(this,new ws(bs.ABORTED,"Firestore shutting down"))}}function Ph(){return new Ll(e=>_l(e),Il)}async function Rh(e,t){const n=ys(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.Sa()&&t.Da()&&(r=2):(s=new Ah,r=t.Da()?0:1);try{switch(r){case 0:s.wa=await n.onListen(i,!0);break;case 1:s.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){const n=Nh(e,"Initialization of query '".concat(Tl(t.query),"' failed"));return void t.onError(n)}n.queries.set(i,s),s.ba.push(t),t.va(n.onlineState),s.wa&&t.Fa(s.wa)&&Mh(n)}async function Lh(e,t){const n=ys(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const e=s.ba.indexOf(t);e>=0&&(s.ba.splice(e,1),0===s.ba.length?i=t.Da()?0:1:!s.Sa()&&t.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function jh(e,t){const n=ys(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.ba)e.Fa(i)&&(r=!0);t.wa=i}}r&&Mh(n)}function Oh(e,t,n){const r=ys(e),i=r.queries.get(t);if(i)for(const s of i.ba)s.onError(n);r.queries.delete(t)}function Mh(e){e.Ca.forEach(e=>{e.next()})}var Fh,Uh;(Uh=Fh||(Fh={})).Ma="default",Uh.Cache="cache";class Bh{constructor(e,t,n){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new Th(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache)return!0;if(!this.Da())return!0;const n="Offline"!==t;return(!this.options.Ka||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}ka(e){e=Th.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Fh.Cache}}class Vh{constructor(e){this.key=e}}class zh{constructor(e){this.key=e}}class Wh{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=ql(),this.mutatedKeys=ql(),this.eu=Pl(e),this.tu=new Ih(this.eu)}get nu(){return this.Za}ru(e,t){const n=t?t.iu:new _h,r=t?t.tu:this.tu;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const c=r.get(e),u=Al(this.query,t)?t:null,d=!!c&&this.mutatedKeys.has(c.key),h=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?d!==h&&(n.track({type:3,doc:u}),f=!0):this.su(c,u)||(n.track({type:2,doc:u}),f=!0,(a&&this.eu(u,a)>0||l&&this.eu(u,l)<0)&&(o=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(a||l)&&(o=!0)),f&&(u?(s=s.add(u),i=h?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))}),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{tu:s,iu:n,Ss:o,mutatedKeys:i}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const s=e.iu.ya();s.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ms(20277,{Vt:e})}};return n(e)-n(t)}(e.type,t.type)||this.eu(e.doc,t.doc)),this.ou(n),r=null!==r&&void 0!==r&&r;const o=t&&!r?this._u():[],a=0===this.Ya.size&&this.current&&!r?1:0,l=a!==this.Xa;return this.Xa=a,0!==s.length||l?{snapshot:new Th(this.query,e.tu,i,s,e.mutatedKeys,0===a,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:o}:{au:o}}va(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({tu:this.tu,iu:new _h,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(e=>this.Za=this.Za.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Za=this.Za.delete(e)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=ql(),this.tu.forEach(e=>{this.uu(e.key)&&(this.Ya=this.Ya.add(e.key))});const t=[];return e.forEach(e=>{this.Ya.has(e)||t.push(new zh(e))}),this.Ya.forEach(n=>{e.has(n)||t.push(new Vh(n))}),t}cu(e){this.Za=e.ks,this.Ya=ql();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Th.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,0===this.Xa,this.hasCachedResults)}}const Hh="SyncEngine";class qh{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class Gh{constructor(e){this.key=e,this.hu=!1}}class Kh{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new Ll(e=>_l(e),Il),this.Iu=new Map,this.Eu=new Set,this.Ru=new Jo(Ws.comparator),this.Au=new Map,this.Vu=new Xu,this.du={},this.mu=new Map,this.fu=Fu.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return!0===this.gu}}async function Qh(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=gf(e);let i;const s=r.Tu.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await Jh(r,t,n,!0),i}async function Yh(e,t){const n=gf(e);await Jh(n,t,!0,!1)}async function Jh(e,t,n,r){const i=await yd(e.localStore,Sl(t)),s=i.targetId,o=e.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await $h(e,t,s,"current"===o,i.resumeToken)),e.isPrimaryClient&&n&&Xd(e.remoteStore,i),a}async function $h(e,t,n,r,i){e.pu=(t,n,r)=>async function(e,t,n,r){let i=t.view.ru(n);i.Ss&&(i=await wd(e.localStore,t.query,!1).then(e=>{let{documents:n}=e;return t.view.ru(n,i)}));const s=r&&r.targetChanges.get(t.targetId),o=r&&null!=r.targetMismatches.get(t.targetId),a=t.view.applyChanges(i,e.isPrimaryClient,s,o);return uf(e,t.targetId,a.au),a.snapshot}(e,t,n,r);const s=await wd(e.localStore,t,!0),o=new Wh(t,s.ks),a=o.ru(s.documents),l=zc.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),c=o.applyChanges(a,e.isPrimaryClient,l);uf(e,n,c.au);const u=new qh(t,n,o);return e.Tu.set(t,u),e.Iu.has(n)?e.Iu.get(n).push(t):e.Iu.set(n,[t]),c.snapshot}async function Xh(e,t,n){const r=ys(e),i=r.Tu.get(t),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter(e=>!Il(e,t))),void r.Tu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await bd(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Zd(r.remoteStore,i.targetId),lf(r,i.targetId)}).catch(uo)):(lf(r,i.targetId),await bd(r.localStore,i.targetId,!0))}async function Zh(e,t){const n=ys(e),r=n.Tu.get(t),i=n.Iu.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Zd(n.remoteStore,r.targetId))}async function ef(e,t){const n=ys(e);try{const e=await function(e,t){const n=ys(e),r=t.snapshotVersion;let i=n.vs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const s=n.xs.newChangeBuffer({trackRemovals:!0});i=n.vs;const o=[];t.targetChanges.forEach((s,a)=>{const l=i.get(a);if(!l)return;o.push(n.li.removeMatchingKeys(e,s.removedDocuments,a).next(()=>n.li.addMatchingKeys(e,s.addedDocuments,a)));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?c=c.withResumeToken(ra.EMPTY_BYTE_STRING,to.min()).withLastLimboFreeSnapshotVersion(to.min()):s.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(s.resumeToken,r)),i=i.insert(a,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(l,c,s)&&o.push(n.li.updateTargetData(e,c))});let a=Ol(),l=ql();if(t.documentUpdates.forEach(r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),o.push(gd(e,s,t.documentUpdates).next(e=>{a=e.Bs,l=e.Ls})),!r.isEqual(to.min())){const t=n.li.getLastRemoteSnapshotVersion(e).next(t=>n.li.setTargetsMetadata(e,e.currentSequenceNumber,r));o.push(t)}return ho.waitFor(o).next(()=>s.apply(e)).next(()=>n.localDocuments.getLocalViewOfDocuments(e,a,l)).next(()=>a)}).then(e=>(n.vs=i,e))}(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.Au.get(t);r&&(vs(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1,22616),e.addedDocuments.size>0?r.hu=!0:e.modifiedDocuments.size>0?vs(r.hu,14607):e.removedDocuments.size>0&&(vs(r.hu,42227),r.hu=!1))}),await ff(n,e,t)}catch(e){await uo(e)}}function tf(e,t,n){const r=ys(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.Tu.forEach((n,r)=>{const i=r.view.va(t);i.snapshot&&e.push(i.snapshot)}),function(e,t){const n=ys(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const i of n.ba)i.va(t)&&(r=!0)}),r&&Mh(n)}(r.eventManager,t),e.length&&r.Pu.J_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function nf(e,t,n){const r=ys(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Au.get(t),s=i&&i.key;if(s){let e=new Jo(Ws.comparator);e=e.insert(s,Wa.newNoDocument(s,to.min()));const n=ql().add(s),i=new Vc(to.min(),new Map,new Jo(Ps),e,n);await ef(r,i),r.Ru=r.Ru.remove(s),r.Au.delete(t),hf(r)}else await bd(r.localStore,t,!1).then(()=>lf(r,t,n)).catch(uo)}async function rf(e,t){const n=ys(e),r=t.batch.batchId;try{const e=await function(e,t){const n=ys(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),i=n.xs.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let o=ho.resolve();return s.forEach(e=>{o=o.next(()=>r.getEntry(t,e)).next(t=>{const s=n.docVersions.get(e);vs(null!==s,48541),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),o.next(()=>e.mutationQueue.removeMutationBatch(t,i))}(n,e,t,i).next(()=>i.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=ql();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,r))})}(n.localStore,t);af(n,r,null),of(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ff(n,e)}catch(e){await uo(e)}}async function sf(e,t,n){const r=ys(e);try{const e=await function(e,t){const n=ys(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(vs(null!==t,37113),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)).next(()=>n.localDocuments.getDocuments(e,r))})}(r.localStore,t);af(r,t,n),of(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await ff(r,e)}catch(n){await uo(n)}}function of(e,t){(e.mu.get(t)||[]).forEach(e=>{e.resolve()}),e.mu.delete(t)}function af(e,t,n){const r=ys(e);let i=r.du[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.du[r.currentUser.toKey()]=i}}function lf(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Iu.get(t))e.Tu.delete(r),n&&e.Pu.yu(r,n);e.Iu.delete(t),e.isPrimaryClient&&e.Vu.Gr(t).forEach(t=>{e.Vu.containsKey(t)||cf(e,t)})}function cf(e,t){e.Eu.delete(t.path.canonicalString());const n=e.Ru.get(t);null!==n&&(Zd(e.remoteStore,n),e.Ru=e.Ru.remove(t),e.Au.delete(n),hf(e))}function uf(e,t,n){for(const r of n)r instanceof Vh?(e.Vu.addReference(r.key,t),df(e,r)):r instanceof zh?(ds(Hh,"Document no longer in limbo: "+r.key),e.Vu.removeReference(r.key,t),e.Vu.containsKey(r.key)||cf(e,r.key)):ms(19791,{wu:r})}function df(e,t){const n=t.key,r=n.path.canonicalString();e.Ru.get(n)||e.Eu.has(r)||(ds(Hh,"New document in limbo: "+n),e.Eu.add(r),hf(e))}function hf(e){for(;e.Eu.size>0&&e.Ru.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const n=new Ws(Bs.fromString(t)),r=e.fu.next();e.Au.set(r,new Gh(n)),e.Ru=e.Ru.insert(n,r),Xd(e.remoteStore,new Tu(Sl(bl(n.path)),r,"TargetPurposeLimboResolution",mo.ce))}}async function ff(e,t,n){const r=ys(e),i=[],s=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((e,a)=>{o.push(r.pu(a,t,n).then(e=>{if((e||n)&&r.isPrimaryClient){var t;const i=e?!e.fromCache:null===n||void 0===n||null===(t=n.targetChanges.get(a.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(a.targetId,i?"current":"not-current")}if(e){i.push(e);const t=ld.Es(a.targetId,e);s.push(t)}}))}),await Promise.all(o),r.Pu.J_(i),await async function(e,t){const n=ys(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>ho.forEach(t,t=>ho.forEach(t.Ts,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>ho.forEach(t.Is,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(e){if(!po(e))throw e;ds(dd,"Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.vs.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.vs=n.vs.insert(e,i)}}}(r.localStore,s))}async function pf(e,t){const n=ys(e);if(!n.currentUser.isEqual(t)){ds(Hh,"User change. New user:",t.toKey());const e=await pd(n.localStore,t);n.currentUser=t,function(e,t){e.mu.forEach(e=>{e.forEach(e=>{e.reject(new ws(bs.CANCELLED,t))})}),e.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await ff(n,e.Ns)}}function mf(e,t){const n=ys(e),r=n.Au.get(t);if(r&&r.hu)return ql().add(r.key);{let e=ql();const r=n.Iu.get(t);if(!r)return e;for(const t of r){const r=n.Tu.get(t);e=e.unionWith(r.view.nu)}return e}}function gf(e){const t=ys(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=ef.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=mf.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=nf.bind(null,t),t.Pu.J_=jh.bind(null,t.eventManager),t.Pu.yu=Oh.bind(null,t.eventManager),t}function vf(e){const t=ys(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=rf.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=sf.bind(null,t),t}class yf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Fd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return fd(this.persistence,new ud,e.initialUser,this.serializer)}Cu(e){return new id(od.Vi,this.serializer)}Du(e){return new Sd}async terminate(){var e,t;null!==(e=this.gcScheduler)&&void 0!==e&&e.stop(),null!==(t=this.indexBackfillerScheduler)&&void 0!==t&&t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}yf.provider={build:()=>new yf};class bf extends yf{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){vs(this.persistence.referenceDelegate instanceof ad,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new Wu(n,e.asyncQueue,t)}Cu(e){const t=void 0!==this.cacheSizeBytes?Mu.withCacheSize(this.cacheSizeBytes):Mu.DEFAULT;return new id(e=>ad.Vi(e,t),this.serializer)}}class wf{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>tf(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=pf.bind(null,this.syncEngine),await kh(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Dh}createDatastore(e){const t=Fd(e.databaseInfo.databaseId),n=Od(e.databaseInfo);return Gd(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new Yd(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,e=>tf(this.syncEngine,e,0),Nd.v()?new Nd:new Ed)}createSyncEngine(e,t){return function(e,t,n,r,i,s,o){const a=new Kh(e,t,n,r,i,s);return o&&(a.gu=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=ys(e);ds(Qd,"RemoteStore shutting down."),t.Ea.add(5),await $d(t),t.Aa.shutdown(),t.Va.set("Unknown")}(this.remoteStore),null!==(e=this.datastore)&&void 0!==e&&e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}wf.provider={build:()=>new wf};class xf{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):hs("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}}const kf="FirestoreClient";class Sf{constructor(e,t,n,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this._databaseInfo=r,this.user=as.UNAUTHENTICATED,this.clientId=Ds.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,async e=>{ds(kf,"Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>(ds(kf,"Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new xs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=Nh(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function Ef(e,t){e.asyncQueue.verifyOperationInProgress(),ds(kf,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async e=>{r.isEqual(e)||(await pd(t.localStore,e),r=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function Cf(e,t){e.asyncQueue.verifyOperationInProgress();const n=await Nf(e);ds(kf,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(e=>xh(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>xh(t.remoteStore,n)),e._onlineComponents=t}async function Nf(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){ds(kf,"Using user provided OfflineComponentProvider");try{await Ef(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(e){return"FirebaseError"===e.name?e.code===bs.FAILED_PRECONDITION||e.code===bs.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;fs("Error using user provided cache. Falling back to memory cache: "+n),await Ef(e,new yf)}}else ds(kf,"Using default OfflineComponentProvider"),await Ef(e,new bf(void 0));return e._offlineComponents}async function If(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(ds(kf,"Using user provided OnlineComponentProvider"),await Cf(e,e._uninitializedComponentsProvider._online)):(ds(kf,"Using default OnlineComponentProvider"),await Cf(e,new wf))),e._onlineComponents}function _f(e){return If(e).then(e=>e.syncEngine)}async function Tf(e){const t=await If(e),n=t.eventManager;return n.onListen=Qh.bind(null,t.syncEngine),n.onUnlisten=Xh.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=Yh.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=Zh.bind(null,t.syncEngine),n}function Af(e,t){const n=new xs;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){const r=vf(e);try{const e=await function(e,t){const n=ys(e),r=eo.now(),i=t.reduce((e,t)=>e.add(t.key),ql());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>{let a=Ol(),l=ql();return n.xs.getEntries(e,i).next(e=>{a=e,a.forEach((e,t)=>{t.isValidDocument()||(l=l.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(e,a)).next(i=>{s=i;const o=[];for(const e of t){const t=vc(e,s.get(e.key).overlayedDocument);null!=t&&o.push(new wc(e.key,t,za(t.value.mapValue),dc.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)}).next(t=>{o=t;const r=t.applyToLocalDocumentSet(s,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)})}).then(()=>({batchId:o.batchId,changes:Ul(s)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.du[e.currentUser.toKey()];r||(r=new Jo(Ps)),r=r.insert(t,n),e.du[e.currentUser.toKey()]=r}(r,e.batchId,n),await ff(r,e.changes),await hh(r.remoteStore)}catch(e){const t=Nh(e,"Failed to persist write");n.reject(t)}}(await _f(e),t,n)),n.promise}function Df(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const Pf="ComponentProvider",Rf=new Map;function Lf(e,t,n,r,i){return new ma(e,t,n,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling,Df(i.experimentalLongPollingOptions),i.useFetchStreams,i.isUsingEmulator,r)}const jf="firestore.googleapis.com",Of=!0;class Mf{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new ws(bs.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=jf,this.ssl=Of}else this.host=e.host,this.ssl=null!==(t=e.ssl)&&void 0!==t?t:Of;if(this.isUsingEmulator=void 0!==e.emulatorOptions,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=Ou;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<Bu)throw new ws(bs.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new ws(bs.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Df(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new ws(bs.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new ws(bs.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new ws(bs.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ff{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Mf({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ws(bs.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new ws(bs.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Mf(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Ss;switch(e.type){case"firstParty":return new Is(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new ws(bs.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Rf.get(e);t&&(ds(Pf,"Removing Datastore"),Rf.delete(e),t.terminate())}(this),Promise.resolve()}}function Uf(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e=Ys(e,Ff);const i=S(t),s=e._getSettings(),o=d(d({},s),{},{emulatorOptions:e._getEmulatorOptions()}),a="".concat(t,":").concat(n);i&&(E("https://".concat(a)),I("Firestore",!0)),s.host!==jf&&s.host!==a&&fs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l=d(d({},s),{},{host:a,ssl:i,emulatorOptions:r});if(!j(l,o)&&(e._setSettings(l),r.mockUserToken)){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=as.MOCK_USER;else{var c;t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=d({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[m(JSON.stringify({alg:"none",type:"JWT"})),m(JSON.stringify(s)),""].join(".")}(r.mockUserToken,null===(c=e._app)||void 0===c?void 0:c.options.projectId);const i=r.mockUserToken.sub||r.mockUserToken.user_id;if(!i)throw new ws(bs.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new as(i)}e._authCredentials=new Es(new ks(t,n))}}class Bf{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Bf(this.firestore,e,this._query)}}class Vf{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new zf(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Vf(this.firestore,e,this._key)}toJSON(){return{type:Vf._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,n){if($s(t,Vf._jsonSchema))return new Vf(e,n||null,new Ws(Bs.fromString(t.referencePath)))}}Vf._jsonSchemaVersion="firestore/documentReference/1.0",Vf._jsonSchema={type:Js("string",Vf._jsonSchemaVersion),referencePath:Js("string")};class zf extends Bf{constructor(e,t,n){super(e,t,bl(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Vf(this.firestore,null,new Ws(e))}withConverter(e){return new zf(this.firestore,e,this._path)}}function Wf(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=z(e),Hs("collection","path",t),e instanceof Ff){const n=Bs.fromString(t,...r);return Gs(n),new zf(e,null,n)}{if(!(e instanceof Vf||e instanceof zf))throw new ws(bs.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Bs.fromString(t,...r));return Gs(n),new zf(e.firestore,null,n)}}function Hf(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=z(e),1===arguments.length&&(t=Ds.newId()),Hs("doc","path",t),e instanceof Ff){const n=Bs.fromString(t,...r);return qs(n),new Vf(e,null,new Ws(n))}{if(!(e instanceof Vf||e instanceof zf))throw new ws(bs.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Bs.fromString(t,...r));return qs(n),new Vf(e.firestore,e instanceof zf?e.converter:null,new Ws(n))}}const qf="AsyncQueue";class Gf{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Ud(this,"async_queue_retry"),this._c=()=>{const e=Md();e&&ds(qf,"Visibility state changed to "+e.visibilityState),this.M_.w_()},this.ac=e;const t=Md();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Md();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const t=new xs;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Yu.push(e),this.lc()))}async lc(){if(0!==this.Yu.length){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!po(e))throw e;ds(qf,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const t=this.ac.then(()=>(this.rc=!0,e().catch(e=>{throw this.nc=e,this.rc=!1,hs("INTERNAL UNHANDLED ERROR: ",Kf(e)),e}).then(e=>(this.rc=!1,e))));return this.ac=t,t}enqueueAfterDelay(e,t,n){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const r=Ch.createAndSchedule(this,e,t,n,e=>this.hc(e));return this.tc.push(r),r}uc(){this.nc&&ms(47125,{Pc:Kf(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do{e=this.ac,await e}while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.tc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Tc()})}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function Kf(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}class Qf extends Ff{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new Gf,this._persistenceKey=(null===r||void 0===r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Gf(e),this._firestoreClient=void 0,await e}}}function Yf(e){if(e._terminated)throw new ws(bs.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||Jf(e),e._firestoreClient}function Jf(e){var t,n,r,i;const s=e._freezeSettings(),o=Lf(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,null===(n=e._app)||void 0===n?void 0:n.options.apiKey,s);e._componentsProvider||null!==(r=s.localCache)&&void 0!==r&&r._offlineComponentProvider&&null!==(i=s.localCache)&&void 0!==i&&i._onlineComponentProvider&&(e._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),e._firestoreClient=new Sf(e._authCredentials,e._appCheckCredentials,e._queue,o,e._componentsProvider&&function(e){const t=null===e||void 0===e?void 0:e._online.build();return{_offline:null===e||void 0===e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}class $f{constructor(e){this._byteString=e}static fromBase64String(e){try{return new $f(ra.fromBase64String(e))}catch(e){throw new ws(bs.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new $f(ra.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:$f._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if($s(e,$f._jsonSchema))return $f.fromBase64String(e.bytes)}}$f._jsonSchemaVersion="firestore/bytes/1.0",$f._jsonSchema={type:Js("string",$f._jsonSchemaVersion),bytes:Js("string")};class Xf{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new ws(bs.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new zs(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Zf{constructor(e){this._methodName=e}}class ep{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ws(bs.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ws(bs.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ps(this._lat,e._lat)||Ps(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ep._jsonSchemaVersion}}static fromJSON(e){if($s(e,ep._jsonSchema))return new ep(e.latitude,e.longitude)}}ep._jsonSchemaVersion="firestore/geoPoint/1.0",ep._jsonSchema={type:Js("string",ep._jsonSchemaVersion),latitude:Js("number"),longitude:Js("number")};class tp{constructor(e){this._values=(e||[]).map(e=>e)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}toJSON(){return{type:tp._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if($s(e,tp._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(e=>"number"==typeof e))return new tp(e.vectorValues);throw new ws(bs.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}tp._jsonSchemaVersion="firestore/vectorValue/1.0",tp._jsonSchema={type:Js("string",tp._jsonSchemaVersion),vectorValues:Js("object")};const np=/^__.*__$/;class rp{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new wc(e,this.data,this.fieldMask,t,this.fieldTransforms):new bc(e,this.data,t,this.fieldTransforms)}}class ip{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new wc(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function sp(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ms(40011,{dataSource:e})}}class op{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.validatePath(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new op(d(d({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Sp(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(0===e.length)throw this.createError("Document fields must not be empty");if(sp(this.dataSource)&&np.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class ap{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Fd(e)}createContext(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new op({dataSource:e,methodName:t,targetDoc:n,path:zs.emptyPath(),arrayElement:!1,hasConverter:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function lp(e){const t=e._freezeSettings(),n=Fd(e._databaseId);return new ap(e._databaseId,!!t.ignoreUndefinedProperties,n)}function cp(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const o=e.createContext(s.merge||s.mergeFields?2:0,t,n,i);bp("Data must be an object, but it was:",o,r);const a=vp(r,o);let l,c;if(s.merge)l=new ta(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=wp(t,r,n);if(!o.contains(i))throw new ws(bs.INVALID_ARGUMENT,"Field '".concat(i,"' is specified in your field mask but missing from your input data."));Ep(e,i)||e.push(i)}l=new ta(e),c=o.fieldTransforms.filter(e=>l.covers(e.field))}else l=null,c=o.fieldTransforms;return new rp(new Va(a),l,c)}class up extends Zf{_toFieldTransform(e){if(2!==e.dataSource)throw 1===e.dataSource?e.createError("".concat(this._methodName,"() can only appear at the top level of your update data")):e.createError("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof up}}class dp extends Zf{_toFieldTransform(e){return new cc(e.path,new tc)}isEqual(e){return e instanceof dp}}class hp extends Zf{constructor(e,t){super(e),this.Vc=t}_toFieldTransform(e){const t=new oc(e.serializer,Jl(e.serializer,this.Vc));return new cc(e.path,t)}isEqual(e){return e instanceof hp&&this.Vc===e.Vc}}function fp(e,t,n,r){const i=e.createContext(1,t,n);bp("Data must be an object, but it was:",i,r);const s=[],o=Va.empty();Qo(r,(e,r)=>{const a=kp(t,e,n);r=z(r);const l=i.childContextForFieldPath(a);if(r instanceof up)s.push(a);else{const e=gp(r,l);null!=e&&(s.push(a),o.set(a,e))}});const a=new ta(s);return new ip(o,a,i.fieldTransforms)}function pp(e,t,n,r,i,s){const o=e.createContext(1,t,n),a=[wp(t,r,n)],l=[i];if(s.length%2!=0)throw new ws(bs.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let h=0;h<s.length;h+=2)a.push(wp(t,s[h])),l.push(s[h+1]);const c=[],u=Va.empty();for(let h=a.length-1;h>=0;--h)if(!Ep(c,a[h])){const e=a[h];let t=l[h];t=z(t);const n=o.childContextForFieldPath(e);if(t instanceof up)c.push(e);else{const r=gp(t,n);null!=r&&(c.push(e),u.set(e,r))}}const d=new ta(c);return new ip(u,d,o.fieldTransforms)}function mp(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return gp(n,e.createContext(r?4:3,t))}function gp(e,t){if(yp(e=z(e)))return bp("Unsupported field value:",t,e),vp(e,t);if(e instanceof Zf)return function(e,t){if(!sp(t.dataSource))throw t.createError("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.createError("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.arrayElement&&4!==t.dataSource)throw t.createError("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=gp(i,t.childContextForArray(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=z(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Jl(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=eo.fromDate(e);return{timestampValue:tu(t.serializer,n)}}if(e instanceof eo){const n=new eo(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:tu(t.serializer,n)}}if(e instanceof ep)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof $f)return{bytesValue:nu(t.serializer,e._byteString)};if(e instanceof Vf){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.createError("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:su(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof tp)return function(e,t){const n=e instanceof tp?e.toArray():e,r={fields:{[ya]:{stringValue:xa},[ka]:{arrayValue:{values:n.map(e=>{if("number"!=typeof e)throw t.createError("VectorValues must only contain numeric values.");return Ql(t.serializer,e)})}}}};return{mapValue:r}}(e,t);if(_u(e))return e._toProto(t.serializer);throw t.createError("Unsupported field value: ".concat(Qs(e)))}(e,t)}function vp(e,t){const n={};return Yo(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Qo(e,(e,r)=>{const i=gp(r,t.childContextForField(e));null!=i&&(n[e]=i)}),{mapValue:{fields:n}}}function yp(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof eo||e instanceof ep||e instanceof $f||e instanceof Vf||e instanceof Zf||e instanceof tp||_u(e))}function bp(e,t,n){if(!yp(n)||!Ks(n)){const r=Qs(n);throw"an object"===r?t.createError(e+" a custom object"):t.createError(e+" "+r)}}function wp(e,t,n){if((t=z(t))instanceof Xf)return t._internalPath;if("string"==typeof t)return kp(e,t);throw Sp("Field path arguments must be of type string or ",e,!1,void 0,n)}const xp=new RegExp("[~\\*/\\[\\]]");function kp(e,t,n){if(t.search(xp)>=0)throw Sp("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new Xf(...t.split("."))._internalPath}catch(r){throw Sp("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function Sp(e,t,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a="Function ".concat(t,"() called with invalid data");n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=" in field ".concat(r)),o&&(l+=" in document ".concat(i)),l+=")"),new ws(bs.INVALID_ARGUMENT,a+e+l)}function Ep(e,t){return e.some(e=>e.isEqual(t))}class Cp{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Sa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return oa(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(aa(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ms(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return Qo(e,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertVectorValue(e){var t;const n=null===(t=e.fields)||void 0===t||null===(t=t[ka].arrayValue)||void 0===t||null===(t=t.values)||void 0===t?void 0:t.map(e=>oa(e.doubleValue));return new tp(n)}convertGeoPoint(e){return new ep(oa(e.latitude),oa(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=fa(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(pa(e));default:return null}}convertTimestamp(e){const t=sa(e);return new eo(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Bs.fromString(e);vs(Iu(n),9688,{name:e});const r=new va(n.get(1),n.get(3)),i=new Ws(n.popFirst(5));return r.isEqual(t)||hs("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}class Np extends Cp{constructor(e){super(),this.firestore=e}convertBytes(e){return new $f(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Vf(this.firestore,null,t)}}function Ip(){return new dp("serverTimestamp")}function _p(e){return new hp("increment",e)}const Tp="@firebase/firestore",Ap="4.11.0";class Dp{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Vf(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Pp(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e,t;return null!==(e=null===(t=this._document)||void 0===t?void 0:t.data.clone().value.mapValue.fields)&&void 0!==e?e:void 0}get(e){if(this._document){const t=this._document.data.field(wp("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Pp extends Dp{data(){return super.data()}}function Rp(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new ws(bs.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Lp{}class jp extends Lp{}function Op(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];t instanceof Lp&&n.push(t),n=n.concat(i),function(e){const t=e.filter(e=>e instanceof Up).length,n=e.filter(e=>e instanceof Mp).length;if(t>1||t>0&&n>0)throw new ws(bs.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const o of n)e=o._apply(e);return e}class Mp extends jp{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new Mp(e,t,n)}_apply(e){const t=this._parse(e);return Gp(e._query,t),new Bf(e.firestore,e.converter,Cl(e._query,t))}_parse(e){const t=lp(e.firestore),n=function(e,t,n,r,i,s,o){let a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new ws(bs.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(s,"' queries on documentId()."));if("in"===s||"not-in"===s){qp(o,s);const t=[];for(const n of o)t.push(Hp(r,e,n));a={arrayValue:{values:t}}}else a=Hp(r,e,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||qp(o,s),a=mp(n,t,o,"in"===s||"not-in"===s);return Ja.create(i,s,a)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}function Fp(e,t,n){const r=t,i=wp("where",e);return Mp._create(i,r,n)}class Up extends Lp{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Up(e,t)}_parse(e){const t=this._queryConstraints.map(t=>t._parse(e)).filter(e=>e.getFilters().length>0);return 1===t.length?t[0]:$a.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)Gp(n,i),n=Cl(n,i)}(e._query,t),new Bf(e.firestore,e.converter,Cl(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Bp extends jp{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Bp(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new ws(bs.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new ws(bs.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ka(t,n)}(e._query,this._field,this._direction);return new Bf(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new vl(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function Vp(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=wp("orderBy",e);return Bp._create(n,t)}class zp extends jp{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new zp(e,t,n)}_apply(e){return new Bf(e.firestore,e.converter,Nl(e._query,this._limit,this._limitType))}}function Wp(e){return function(e,t){if(t<=0)throw new ws(bs.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}("limit",e),zp._create("limit",e,"F")}function Hp(e,t,n){if("string"==typeof(n=z(n))){if(""===n)throw new ws(bs.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!xl(t)&&-1!==n.indexOf("/"))throw new ws(bs.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(Bs.fromString(n));if(!Ws.isDocumentKey(r))throw new ws(bs.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Pa(e,new Ws(r))}if(n instanceof Vf)return Pa(e,n._key);throw new ws(bs.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(Qs(n),"."))}function qp(e,t){if(!Array.isArray(e)||0===e.length)throw new ws(bs.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function Gp(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new ws(bs.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new ws(bs.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}function Kp(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class Qp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Yp extends Dp{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new Jp(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(wp("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ws(bs.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Yp._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),e&&e.isValidDocument()&&e.isFoundDocument()?(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t):t}}Yp._jsonSchemaVersion="firestore/documentSnapshot/1.0",Yp._jsonSchema={type:Js("string",Yp._jsonSchemaVersion),bundleSource:Js("string","DocumentSnapshot"),bundleName:Js("string"),bundle:Js("string")};class Jp extends Yp{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class $p{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Qp(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new Jp(this._firestore,this._userDataWriter,n.key,n,new Qp(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new ws(bs.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{const r=new Jp(e._firestore,e._userDataWriter,n.doc.key,n.doc,new Qp(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new Jp(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Qp(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:Xp(t.type),doc:r,oldIndex:i,newIndex:s}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ws(bs.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=$p._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Ds.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],n=[],r=[];return this.docs.forEach(e=>{null!==e._document&&(t.push(e._document),n.push(this._userDataWriter.convertObjectMap(e._document.data.value.mapValue.fields,"previous")),r.push(e.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Xp(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ms(61501,{type:e})}}$p._jsonSchemaVersion="firestore/querySnapshot/1.0",$p._jsonSchema={type:Js("string",$p._jsonSchemaVersion),bundleSource:Js("string","QuerySnapshot"),bundleName:Js("string"),bundle:Js("string")};class Zp{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=lp(e)}set(e,t,n){this._verifyNotCommitted();const r=em(e,this._firestore),i=Kp(r.converter,t,n),s=cp(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(s.toMutation(r._key,dc.none())),this}update(e,t,n){this._verifyNotCommitted();const r=em(e,this._firestore);let i;for(var s=arguments.length,o=new Array(s>3?s-3:0),a=3;a<s;a++)o[a-3]=arguments[a];return i="string"==typeof(t=z(t))||t instanceof Xf?pp(this._dataReader,"WriteBatch.update",r._key,t,n,o):fp(this._dataReader,"WriteBatch.update",r._key,t),this._mutations.push(i.toMutation(r._key,dc.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=em(e,this._firestore);return this._mutations=this._mutations.concat(new Ec(t._key,dc.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ws(bs.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function em(e,t){if((e=z(e)).firestore!==t)throw new ws(bs.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}function tm(e){e=Ys(e,Vf);const t=Ys(e.firestore,Qf);return function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new xs;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const s=new xf({next:a=>{s.Nu(),t.enqueueAndForget(()=>Lh(e,o));const l=a.docs.has(n);!l&&a.fromCache?i.reject(new ws(bs.UNAVAILABLE,"Failed to get document because the client is offline.")):l&&a.fromCache&&r&&"server"===r.source?i.reject(new ws(bs.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:e=>i.reject(e)}),o=new Bh(bl(n.path),s,{includeMetadataChanges:!0,Ka:!0});return Rh(e,o)}(await Tf(e),e.asyncQueue,t,n,r)),r.promise}(Yf(t),e._key).then(n=>om(t,e,n))}function nm(e){e=Ys(e,Bf);const t=Ys(e.firestore,Qf),n=Yf(t),r=new Np(t);return Rp(e._query),function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new xs;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const s=new xf({next:n=>{s.Nu(),t.enqueueAndForget(()=>Lh(e,o)),n.fromCache&&"server"===r.source?i.reject(new ws(bs.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),o=new Bh(n,s,{includeMetadataChanges:!0,Ka:!0});return Rh(e,o)}(await Tf(e),e.asyncQueue,t,n,r)),r.promise}(n,e._query).then(n=>new $p(t,r,e,n))}function rm(e,t,n){e=Ys(e,Vf);const r=Ys(e.firestore,Qf),i=Kp(e.converter,t,n);return sm(r,[cp(lp(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,dc.none())])}function im(e,t){const n=Ys(e.firestore,Qf),r=Hf(e),i=Kp(e.converter,t);return sm(n,[cp(lp(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,dc.exists(!1))]).then(()=>r)}function sm(e,t){return Af(Yf(e),t)}function om(e,t,n){const r=n.docs.get(t._key),i=new Np(e);return new Yp(e,i,t._key,r,new Qp(n.hasPendingWrites,n.fromCache),t.converter)}function am(e){return Yf(e=Ys(e,Qf)),new Zp(e,t=>sm(e,t))}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];ls=rt,Xe(new W("firestore",(e,n)=>{let{instanceIdentifier:r,options:i}=n;const s=e.getProvider("app").getImmediate(),o=new Qf(new Cs(e.getProvider("auth-internal")),new Ts(s,e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new ws(bs.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new va(e.options.projectId,t)}(s,r),s);return i=d({useFetchStreams:t},i),o._setSettings(i),o},"PUBLIC").setMultipleInstances(!0)),ot(Tp,Ap,e),ot(Tp,Ap,"esm2020")}();const lm=it({apiKey:"AIzaSyDQcOtn1iNoYtEezwMIpauCnZ3pdM2fyW0",authDomain:"tenminutesfromhell.firebaseapp.com",projectId:"tenminutesfromhell",storageBucket:"tenminutesfromhell.firebasestorage.app",messagingSenderId:"24426608546",appId:"1:24426608546:web:a38f1e008d0968d8c2a4fb"}),cm=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:st();const t=Ze(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=Ze(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(j(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;Ct(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:Ui,persistence:[Yr,Tr,Lr]}),r=x("authTokenSyncURL");if(r&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=(i=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>Wi)return;const r=null===t||void 0===t?void 0:t.token;Hi!==r&&(Hi=r,await fetch(i,{method:r?"POST":"DELETE",headers:r?{Authorization:"Bearer ".concat(r)}:{}}))});!function(e,t,n){z(e).beforeAuthStateChanged(t,n)}(n,t,()=>t(n.currentUser)),function(e,t,n,r){z(e).onIdTokenChanged(t,n,r)}(n,e=>t(e))}}var i;const s=b("auth");return s&&Qn(n,"http://".concat(s)),n}(lm),um=function(e,t){const n="object"==typeof e?e:st(),r="string"==typeof e?e:t||ga,i=Ze(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const e=(e=>{const t=b(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]})("firestore");e&&Uf(i,...e)}return i}(lm),dm=new dr,hm=()=>async function(e,t,n){if(et(e.app))return Promise.reject(Nt(e,"operation-not-supported-in-this-environment"));const r=On(e);Tt(e,t,lr);const i=ti(r,n);return new li(r,"signInViaPopup",t,i).executeNotNull()}(cm,dm),fm=async(e,t,n)=>{const r=await async function(e,t,n){if(et(e.app))return Promise.reject(_t(e));const r=On(e),i=Gn(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",pr,"EMAIL_PASSWORD_PROVIDER"),s=await i.catch(t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&Sr(e),t}),o=await mr._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(o.user),o}(cm,e,t);return await Er(r.user,{displayName:n}),r},pm=(e,t)=>function(e,t,n){return et(e.app)?Promise.reject(_t(e)):kr(z(e),ar.credential(t,n)).catch(async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&Sr(e),t})}(cm,e,t),mm=()=>function(e){return z(e).signOut()}(cm),gm=e=>function(e,t,n,r){return z(e).onAuthStateChanged(t,n,r)}(cm,e);var vm=n(579);const ym=(0,r.createContext)(null),bm=e=>{let{children:t}=e;const[n,i]=(0,r.useState)(null),[s,o]=(0,r.useState)(!0);return(0,r.useEffect)(()=>gm(e=>{i(e),o(!1)}),[]),(0,vm.jsx)(ym.Provider,{value:{user:n,loading:s},children:t})},wm=()=>{const e=(0,r.useContext)(ym);return null===e?{user:null,loading:!1}:e},xm=e=>{let{timeLeft:t,targetTime:n,isRunning:i,onStart:s,onStop:o,onReset:a,onTimeClick:l,activeColor:c="#ff3b30",restColor:u="#007aff",flickering:d=!1,restTime:h=15,activeLastMinute:f=!0,drawIn:p=!1,revealTime:m=!1,isCompleted:g=!1,setCount:v=1,onNextSet:y}=e;const[b,w]=(0,r.useState)(p?"title":"done"),[x,k]=(0,r.useState)(!1),S=(0,r.useRef)(null);(0,r.useEffect)(()=>{if(!m||"title"!==b)return;w("fadeout");const e=setTimeout(()=>w("time"),300);return()=>clearTimeout(e)},[m]),(0,r.useEffect)(()=>(d?S.current=setInterval(()=>{k(e=>!e)},250):(S.current&&clearInterval(S.current),k(!1)),()=>{S.current&&clearInterval(S.current)}),[d]);const E=(n-t)/n*100,C=2*Math.PI*120,N=C,I=C-E/100*C,_=()=>{if(!i&&t>0)return"#ffffff";if(d)return x?u:c;const e=t%60;return e>=1&&e<=h&&(!f||t>60)?u:c},T=(e,t)=>{const n=parseInt(e.slice(1,3),16),r=parseInt(e.slice(3,5),16),i=parseInt(e.slice(5,7),16);return"rgba(".concat(n,", ").concat(r,", ").concat(i,", ").concat(t,")")},A=e=>{const t=Math.floor(e/60),n=e%60;return"".concat(t.toString().padStart(2,"0"),":").concat(n.toString().padStart(2,"0"))};return(0,vm.jsxs)("div",{className:"timer-display",children:[(0,vm.jsxs)("svg",{className:"progress-ring",width:"300",height:"300",children:[(0,vm.jsx)("circle",{className:"progress-ring-bg ".concat(p?"draw-in":""),stroke:"rgba(44, 44, 46, 0.93)",strokeWidth:"8",fill:"transparent",r:"120",cx:"150",cy:"150"}),(0,vm.jsx)("circle",{className:"progress-ring-fill",stroke:_(),strokeWidth:"8",fill:"transparent",r:"120",cx:"150",cy:"150",strokeDasharray:N,strokeDashoffset:I,strokeLinecap:"round",transform:"rotate(-90 150 150)",style:{filter:"#ffffff"===_()?"drop-shadow(0 0 6px ".concat(T(_(),.3),") drop-shadow(0 0 14px ").concat(T(_(),.15),")"):"drop-shadow(0 0 8px ".concat(T(_(),.7),") drop-shadow(0 0 20px ").concat(T(_(),.5),") drop-shadow(0 0 40px ").concat(T(_(),.25),")")}})]}),p&&("title"===b||"fadeout"===b)&&(0,vm.jsx)("div",{className:"ring-brand-title",children:"HIITem".split("").map((e,t)=>(0,vm.jsx)("span",{className:"fadeout"===b?"brand-letter-out":"brand-letter",style:"fadeout"===b?{animationDelay:"".concat(60*t,"ms")}:void 0,children:e},t))}),!(p&&"title"===b)&&(0,vm.jsx)("div",{className:"time-text ".concat(!p||"fadeout"!==b&&"time"!==b?"":"draw-in-time"),onClick:l,style:{cursor:"pointer"},children:p&&"fadeout"===b?A(t).split("").map((e,t)=>(0,vm.jsx)("span",{className:"digit-stagger",style:{animationDelay:"".concat(60*t,"ms")},children:e},t)):A(t)}),!(p&&"title"===b)&&(0,vm.jsx)("button",{className:"play-btn ".concat(i?"hidden":""," ").concat(!p||"fadeout"!==b&&"time"!==b?"":"draw-in-time"),onClick:g?y:s,children:g?(0,vm.jsx)("span",{className:"set-number",children:["I","II","III","IV","V","VI","VII","VIII","IX","X"][v]||v+1}):(0,vm.jsx)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"currentColor",style:{marginLeft:"1px",filter:"drop-shadow(0 0 4px currentColor)"},children:(0,vm.jsx)("path",{d:"M7.5 4.5c0-1.08 1.22-1.71 2.1-1.08l10.2 7.5c.76.56.76 1.6 0 2.16l-10.2 7.5c-.88.63-2.1 0-2.1-1.08V4.5z"})})}),(0,vm.jsx)("button",{className:"reset-btn ".concat(!i&&t<n?"":"hidden"),onClick:a,children:(0,vm.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,vm.jsx)("polyline",{points:"1 4 1 10 7 10"}),(0,vm.jsx)("path",{d:"M3.51 15a9 9 0 1 0 2.13-9.36L1 10"})]})}),(0,vm.jsx)("button",{className:"pause-btn ".concat(i?"":"hidden"),onClick:o,children:(0,vm.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",children:[(0,vm.jsx)("rect",{x:"6",y:"4",width:"4",height:"16",fill:"currentColor"}),(0,vm.jsx)("rect",{x:"14",y:"4",width:"4",height:"16",fill:"currentColor"})]})})]})},km=e=>{let{workoutList:t,workoutIndex:n,isRunning:i,timeLeft:s,onWorkoutSelect:o,showAllWhenPaused:a,staggerIn:l=!1,restTime:c=15}=e;const u=(0,r.useRef)(null);return(0,r.useEffect)(()=>{i&&u.current&&u.current.scrollTo({top:0,behavior:"smooth"})},[i]),(0,vm.jsx)("div",{className:"workout-list",ref:u,children:t.map((e,r)=>{const a=r===n&&i&&s>0,u=r<n||0===s&&r<t.length,h=r>n||r===n&&!i&&s>0,f=s%60,p=a&&f>=1&&f<=c&&s>60;return(0,vm.jsxs)("div",{className:"workout-item ".concat(a?"active":""," ").concat(u?"completed":""," ").concat(h?"upcoming":""," ").concat(p?"warning":""," ").concat(i?"":"selectable"," ").concat(l?"fade-in-item":""),onClick:()=>o&&o(r),style:d({cursor:i?"default":"pointer"},l?{"--stagger-delay":"".concat(100+40*r,"ms")}:{}),children:[(0,vm.jsx)("span",{className:"workout-number",children:r+1}),(0,vm.jsx)("span",{className:"workout-text",children:e})]},r)})})},Sm=n.p+"static/media/SPARKS.83fda4ffb1e40078a06e.gif",Em=e=>{let{workouts:t=[],prepTime:n=15,timeLeft:i,isRunning:s,targetTime:o,selectedWorkoutIndex:a,onTimerStateChange:l,selectedWorkoutName:c="",activeColor:u="#ff3b30",restColor:h="#007aff",sidePlankAlertEnabled:f=!0,restTime:p=15,activeLastMinute:m=!0,initialLoad:g=!1,workoutReady:v=!0,onInitialLoadDone:y,isVisible:b=!0}=e;const w=t.length>0?t:["Russian Twist","Boat hold or seated in and outs","Glut boat hold","Jack knifes","Sit up twist (weight over head)","Leg raises (weight in feet)","Chair sit ups (weight in one arm)","Plank knees to elbows","Side planks dips","Bicycle","Boat hold leg flutters"],x=()=>60*w.length+n,[k,S]=(0,r.useState)(void 0!==i?i:x()),[E,C]=(0,r.useState)(void 0!==s&&s),[N,I]=(0,r.useState)(void 0!==o?o:x()),[_,T]=(0,r.useState)(void 0!==a?a:0),[A,D]=(0,r.useState)(1),[P,R]=(0,r.useState)(g),[L,j]=(0,r.useState)(!1),O=(0,r.useRef)(g),[M,F]=(0,r.useState)(!g),[U,B]=(0,r.useState)(!g),[V,z]=(0,r.useState)(!g),[W,H]=(0,r.useState)(!g);(0,r.useEffect)(()=>{if(!g)return;const e=setTimeout(()=>H(!0),600);return()=>clearTimeout(e)},[g]),(0,r.useEffect)(()=>{v&&W&&!V&&(z(!0),B(!0))},[v,W,V]),(0,r.useEffect)(()=>{if(U&&!M){const e=150+40*w.length,t=setTimeout(()=>{F(!0),y&&y()},e);return()=>clearTimeout(t)}},[U,M,w.length,y]),(0,r.useEffect)(()=>{!O.current||!E&&b||(O.current=!1,j(!0),setTimeout(()=>{R(!1),j(!1)},600))},[E,b]),(0,r.useEffect)(()=>{0===k&&!E&&N>0&&(R(!0),j(!1))},[k,E,N]),(0,r.useEffect)(()=>{void 0!==i&&S(i),void 0!==s&&C(s),void 0!==o&&I(o),void 0!==a&&T(a)},[i,s,o,a]),(0,r.useEffect)(()=>{D(1)},[o]);const q=e=>{l&&l(d({timeLeft:k,isRunning:E,targetTime:N,selectedWorkoutIndex:_},e))},G=Math.min(Math.floor((N-k)/60),w.length-1),K=(w[G]||"").toLowerCase().includes("side plank"),Q=k%60,Y=!(Q>=1&&Q<=p&&(!m||k>60)),J=Math.round(31+p/2),$=f&&K&&Y&&E&&Q===J;return(0,vm.jsxs)("div",{className:"timer-container",children:[P&&(0,vm.jsx)("div",{className:"timer-sparks-bg ".concat(L?"timer-sparks-closing":""),children:(0,vm.jsx)("img",{src:Sm,alt:"",className:"timer-sparks-img"})}),(0,vm.jsx)(xm,{timeLeft:k,targetTime:N,isRunning:E,onStart:()=>{k>0&&(C(!0),q({isRunning:!0}))},onStop:()=>{C(!1),q({isRunning:!1})},onReset:()=>{P&&(j(!0),setTimeout(()=>{R(!1),j(!1)},600)),D(e=>e+1),C(!1),S(N),q({isRunning:!1,timeLeft:N})},onTimeClick:()=>{const e=Math.max(0,k-5);S(e),q({timeLeft:e})},activeColor:u,restColor:h,flickering:$,restTime:p,activeLastMinute:m,drawIn:g,revealTime:V,isCompleted:0===k&&!E&&N>0,setCount:A,onNextSet:()=>{P&&(j(!0),setTimeout(()=>{R(!1),j(!1)},600)),D(e=>e+1),S(N),C(!1),q({isRunning:!1,timeLeft:N})}}),U&&(0,vm.jsxs)(vm.Fragment,{children:[c&&(0,vm.jsx)("div",{className:"timer-workout-title ".concat(E?"hidden":""," ").concat(M?"":"fade-in-item"),style:M?void 0:{"--stagger-delay":"0ms"},children:c}),(0,vm.jsx)(km,{workoutList:w,workoutIndex:G,isRunning:E,timeLeft:k,onWorkoutSelect:e=>{if(!E){T(e),q({selectedWorkoutIndex:e});const t=N-60*e,n=Math.max(0,t);S(n),q({timeLeft:n})}},showAllWhenPaused:!E,staggerIn:!M,restTime:p})]})]})};function Cm(e,t){return Cm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Cm(e,t)}function Nm(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Cm(e,t)}function Im(){return Im=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Im.apply(null,arguments)}function _m(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var Tm="function"===typeof Symbol&&Symbol.observable||"@@observable",Am=function(){return Math.random().toString(36).substring(7).split("").join(".")},Dm={INIT:"@@redux/INIT"+Am(),REPLACE:"@@redux/REPLACE"+Am(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+Am()}};function Pm(e){if("object"!==typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function Rm(e,t,n){var r;if("function"===typeof t&&"function"===typeof n||"function"===typeof n&&"function"===typeof arguments[3])throw new Error(_m(0));if("function"===typeof t&&"undefined"===typeof n&&(n=t,t=void 0),"undefined"!==typeof n){if("function"!==typeof n)throw new Error(_m(1));return n(Rm)(e,t)}if("function"!==typeof e)throw new Error(_m(2));var i=e,s=t,o=[],a=o,l=!1;function c(){a===o&&(a=o.slice())}function u(){if(l)throw new Error(_m(3));return s}function d(e){if("function"!==typeof e)throw new Error(_m(4));if(l)throw new Error(_m(5));var t=!0;return c(),a.push(e),function(){if(t){if(l)throw new Error(_m(6));t=!1,c();var n=a.indexOf(e);a.splice(n,1),o=null}}}function h(e){if(!Pm(e))throw new Error(_m(7));if("undefined"===typeof e.type)throw new Error(_m(8));if(l)throw new Error(_m(9));try{l=!0,s=i(s,e)}finally{l=!1}for(var t=o=a,n=0;n<t.length;n++){(0,t[n])()}return e}return h({type:Dm.INIT}),(r={dispatch:h,subscribe:d,getState:u,replaceReducer:function(e){if("function"!==typeof e)throw new Error(_m(10));i=e,h({type:Dm.REPLACE})}})[Tm]=function(){var e,t=d;return(e={subscribe:function(e){if("object"!==typeof e||null===e)throw new Error(_m(11));function n(){e.next&&e.next(u())}return n(),{unsubscribe:t(n)}}})[Tm]=function(){return this},e},r}function Lm(e,t){return function(){return t(e.apply(this,arguments))}}function jm(e,t){if("function"===typeof e)return Lm(e,t);if("object"!==typeof e||null===e)throw new Error(_m(16));var n={};for(var r in e){var i=e[r];"function"===typeof i&&(n[r]=Lm(i,t))}return n}function Om(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce(function(e,t){return function(){return e(t.apply(void 0,arguments))}})}var Mm=r.createContext(null);var Fm=function(e){e()},Um=function(){return Fm};var Bm={notify:function(){},get:function(){return[]}};function Vm(e,t){var n,r=Bm;function i(){o.onStateChange&&o.onStateChange()}function s(){n||(n=t?t.addNestedSub(i):e.subscribe(i),r=function(){var e=Um(),t=null,n=null;return{clear:function(){t=null,n=null},notify:function(){e(function(){for(var e=t;e;)e.callback(),e=e.next})},get:function(){for(var e=[],n=t;n;)e.push(n),n=n.next;return e},subscribe:function(e){var r=!0,i=n={callback:e,next:null,prev:n};return i.prev?i.prev.next=i:t=i,function(){r&&null!==t&&(r=!1,i.next?i.next.prev=i.prev:n=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}())}var o={addNestedSub:function(e){return s(),r.subscribe(e)},notifyNestedSubs:function(){r.notify()},handleChangeWrapper:i,isSubscribed:function(){return Boolean(n)},trySubscribe:s,tryUnsubscribe:function(){n&&(n(),n=void 0,r.clear(),r=Bm)},getListeners:function(){return r}};return o}var zm="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement?r.useLayoutEffect:r.useEffect;const Wm=function(e){var t=e.store,n=e.context,i=e.children,s=(0,r.useMemo)(function(){var e=Vm(t);return{store:t,subscription:e}},[t]),o=(0,r.useMemo)(function(){return t.getState()},[t]);zm(function(){var e=s.subscription;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),o!==t.getState()&&e.notifyNestedSubs(),function(){e.tryUnsubscribe(),e.onStateChange=null}},[s,o]);var a=n||Mm;return r.createElement(a.Provider,{value:s},i)};var Hm=n(219),qm=n.n(Hm),Gm=n(86),Km=["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"],Qm=["reactReduxForwardedRef"],Ym=[],Jm=[null,null];function $m(e,t){var n=e[1];return[t.payload,n+1]}function Xm(e,t,n){zm(function(){return e.apply(void 0,t)},n)}function Zm(e,t,n,r,i,s,o){e.current=r,t.current=i,n.current=!1,s.current&&(s.current=null,o())}function eg(e,t,n,r,i,s,o,a,l,c){if(e){var u=!1,d=null,h=function(){if(!u){var e,n,h=t.getState();try{e=r(h,i.current)}catch(f){n=f,d=f}n||(d=null),e===s.current?o.current||l():(s.current=e,a.current=e,o.current=!0,c({type:"STORE_UPDATED",payload:{error:n}}))}};n.onStateChange=h,n.trySubscribe(),h();return function(){if(u=!0,n.tryUnsubscribe(),n.onStateChange=null,d)throw d}}}var tg=function(){return[null,0]};function ng(e,t){void 0===t&&(t={});var n=t,i=n.getDisplayName,o=void 0===i?function(e){return"ConnectAdvanced("+e+")"}:i,a=n.methodName,l=void 0===a?"connectAdvanced":a,c=n.renderCountProp,u=void 0===c?void 0:c,d=n.shouldHandleStateChanges,h=void 0===d||d,f=n.storeKey,p=void 0===f?"store":f,m=(n.withRef,n.forwardRef),g=void 0!==m&&m,v=n.context,y=void 0===v?Mm:v,b=s(n,Km),w=y;return function(t){var n=t.displayName||t.name||"Component",i=o(n),a=Im({},b,{getDisplayName:o,methodName:l,renderCountProp:u,shouldHandleStateChanges:h,storeKey:p,displayName:i,wrappedComponentName:n,WrappedComponent:t}),c=b.pure;var d=c?r.useMemo:function(e){return e()};function f(n){var i=(0,r.useMemo)(function(){var e=n.reactReduxForwardedRef,t=s(n,Qm);return[n.context,e,t]},[n]),o=i[0],l=i[1],c=i[2],u=(0,r.useMemo)(function(){return o&&o.Consumer&&(0,Gm.isContextConsumer)(r.createElement(o.Consumer,null))?o:w},[o,w]),f=(0,r.useContext)(u),p=Boolean(n.store)&&Boolean(n.store.getState)&&Boolean(n.store.dispatch);Boolean(f)&&Boolean(f.store);var m=p?n.store:f.store,g=(0,r.useMemo)(function(){return function(t){return e(t.dispatch,a)}(m)},[m]),v=(0,r.useMemo)(function(){if(!h)return Jm;var e=Vm(m,p?null:f.subscription),t=e.notifyNestedSubs.bind(e);return[e,t]},[m,p,f]),y=v[0],b=v[1],x=(0,r.useMemo)(function(){return p?f:Im({},f,{subscription:y})},[p,f,y]),k=(0,r.useReducer)($m,Ym,tg),S=k[0][0],E=k[1];if(S&&S.error)throw S.error;var C=(0,r.useRef)(),N=(0,r.useRef)(c),I=(0,r.useRef)(),_=(0,r.useRef)(!1),T=d(function(){return I.current&&c===N.current?I.current:g(m.getState(),c)},[m,S,c]);Xm(Zm,[N,C,_,c,T,I,b]),Xm(eg,[h,m,y,g,N,C,_,I,b,E],[m,y,g]);var A=(0,r.useMemo)(function(){return r.createElement(t,Im({},T,{ref:l}))},[l,t,T]);return(0,r.useMemo)(function(){return h?r.createElement(u.Provider,{value:x},A):A},[u,A,x])}var m=c?r.memo(f):f;if(m.WrappedComponent=t,m.displayName=f.displayName=i,g){var v=r.forwardRef(function(e,t){return r.createElement(m,Im({},e,{reactReduxForwardedRef:t}))});return v.displayName=i,v.WrappedComponent=t,qm()(v,t)}return qm()(m,t)}}function rg(e,t){return e===t?0!==e||0!==t||1/e===1/t:e!==e&&t!==t}function ig(e,t){if(rg(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var i=0;i<n.length;i++)if(!Object.prototype.hasOwnProperty.call(t,n[i])||!rg(e[n[i]],t[n[i]]))return!1;return!0}function sg(e){return function(t,n){var r=e(t,n);function i(){return r}return i.dependsOnOwnProps=!1,i}}function og(e){return null!==e.dependsOnOwnProps&&void 0!==e.dependsOnOwnProps?Boolean(e.dependsOnOwnProps):1!==e.length}function ag(e,t){return function(t,n){n.displayName;var r=function(e,t){return r.dependsOnOwnProps?r.mapToProps(e,t):r.mapToProps(e)};return r.dependsOnOwnProps=!0,r.mapToProps=function(t,n){r.mapToProps=e,r.dependsOnOwnProps=og(e);var i=r(t,n);return"function"===typeof i&&(r.mapToProps=i,r.dependsOnOwnProps=og(i),i=r(t,n)),i},r}}const lg=[function(e){return"function"===typeof e?ag(e):void 0},function(e){return e?void 0:sg(function(e){return{dispatch:e}})},function(e){return e&&"object"===typeof e?sg(function(t){return function(e,t){var n={},r=function(r){var i=e[r];"function"===typeof i&&(n[r]=function(){return t(i.apply(void 0,arguments))})};for(var i in e)r(i);return n}(e,t)}):void 0}];const cg=[function(e){return"function"===typeof e?ag(e):void 0},function(e){return e?void 0:sg(function(){return{}})}];function ug(e,t,n){return Im({},n,e,t)}const dg=[function(e){return"function"===typeof e?function(e){return function(t,n){n.displayName;var r,i=n.pure,s=n.areMergedPropsEqual,o=!1;return function(t,n,a){var l=e(t,n,a);return o?i&&s(l,r)||(r=l):(o=!0,r=l),r}}}(e):void 0},function(e){return e?void 0:function(){return ug}}];var hg=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function fg(e,t,n,r){return function(i,s){return n(e(i,s),t(r,s),s)}}function pg(e,t,n,r,i){var s,o,a,l,c,u=i.areStatesEqual,d=i.areOwnPropsEqual,h=i.areStatePropsEqual,f=!1;function p(i,f){var p=!d(f,o),m=!u(i,s,f,o);return s=i,o=f,p&&m?(a=e(s,o),t.dependsOnOwnProps&&(l=t(r,o)),c=n(a,l,o)):p?(e.dependsOnOwnProps&&(a=e(s,o)),t.dependsOnOwnProps&&(l=t(r,o)),c=n(a,l,o)):m?function(){var t=e(s,o),r=!h(t,a);return a=t,r&&(c=n(a,l,o)),c}():c}return function(i,u){return f?p(i,u):(a=e(s=i,o=u),l=t(r,o),c=n(a,l,o),f=!0,c)}}function mg(e,t){var n=t.initMapStateToProps,r=t.initMapDispatchToProps,i=t.initMergeProps,o=s(t,hg),a=n(e,o),l=r(e,o),c=i(e,o);return(o.pure?pg:fg)(a,l,c,e,o)}var gg=["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"];function vg(e,t,n){for(var r=t.length-1;r>=0;r--){var i=t[r](e);if(i)return i}return function(t,r){throw new Error("Invalid value of type "+typeof e+" for "+n+" argument when connecting component "+r.wrappedComponentName+".")}}function yg(e,t){return e===t}function bg(e){var t=void 0===e?{}:e,n=t.connectHOC,r=void 0===n?ng:n,i=t.mapStateToPropsFactories,o=void 0===i?cg:i,a=t.mapDispatchToPropsFactories,l=void 0===a?lg:a,c=t.mergePropsFactories,u=void 0===c?dg:c,d=t.selectorFactory,h=void 0===d?mg:d;return function(e,t,n,i){void 0===i&&(i={});var a=i,c=a.pure,d=void 0===c||c,f=a.areStatesEqual,p=void 0===f?yg:f,m=a.areOwnPropsEqual,g=void 0===m?ig:m,v=a.areStatePropsEqual,y=void 0===v?ig:v,b=a.areMergedPropsEqual,w=void 0===b?ig:b,x=s(a,gg),k=vg(e,o,"mapStateToProps"),S=vg(t,l,"mapDispatchToProps"),E=vg(n,u,"mergeProps");return r(h,Im({methodName:"connect",getDisplayName:function(e){return"Connect("+e+")"},shouldHandleStateChanges:Boolean(e),initMapStateToProps:k,initMapDispatchToProps:S,initMergeProps:E,pure:d,areStatesEqual:p,areOwnPropsEqual:g,areStatePropsEqual:y,areMergedPropsEqual:w},x))}}const wg=bg();var xg,kg=n(950);function Sg(e,t){var n=(0,r.useState)(function(){return{inputs:t,result:e()}})[0],i=(0,r.useRef)(!0),s=(0,r.useRef)(n),o=i.current||Boolean(t&&s.current.inputs&&function(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}(t,s.current.inputs))?s.current:{inputs:t,result:e()};return(0,r.useEffect)(function(){i.current=!1,s.current=o},[o]),o.result}xg=kg.unstable_batchedUpdates,Fm=xg;var Eg=Sg,Cg=function(e,t){return Sg(function(){return e},t)},Ng="Invariant failed";var Ig=function(e){var t=e.top,n=e.right,r=e.bottom,i=e.left;return{top:t,right:n,bottom:r,left:i,width:n-i,height:r-t,x:i,y:t,center:{x:(n+i)/2,y:(r+t)/2}}},_g=function(e,t){return{top:e.top-t.top,left:e.left-t.left,bottom:e.bottom+t.bottom,right:e.right+t.right}},Tg=function(e,t){return{top:e.top+t.top,left:e.left+t.left,bottom:e.bottom-t.bottom,right:e.right-t.right}},Ag={top:0,right:0,bottom:0,left:0},Dg=function(e){var t=e.borderBox,n=e.margin,r=void 0===n?Ag:n,i=e.border,s=void 0===i?Ag:i,o=e.padding,a=void 0===o?Ag:o,l=Ig(_g(t,r)),c=Ig(Tg(t,s)),u=Ig(Tg(c,a));return{marginBox:l,borderBox:Ig(t),paddingBox:c,contentBox:u,margin:r,border:s,padding:a}},Pg=function(e){var t=e.slice(0,-2);if("px"!==e.slice(-2))return 0;var n=Number(t);return isNaN(n)&&function(e){if(!e)throw new Error(Ng)}(!1),n},Rg=function(e,t){var n,r,i=e.borderBox,s=e.border,o=e.margin,a=e.padding,l=(r=t,{top:(n=i).top+r.y,left:n.left+r.x,bottom:n.bottom+r.y,right:n.right+r.x});return Dg({borderBox:l,border:s,margin:o,padding:a})},Lg=function(e,t){return void 0===t&&(t={x:window.pageXOffset,y:window.pageYOffset}),Rg(e,t)},jg=function(e,t){var n={top:Pg(t.marginTop),right:Pg(t.marginRight),bottom:Pg(t.marginBottom),left:Pg(t.marginLeft)},r={top:Pg(t.paddingTop),right:Pg(t.paddingRight),bottom:Pg(t.paddingBottom),left:Pg(t.paddingLeft)},i={top:Pg(t.borderTopWidth),right:Pg(t.borderRightWidth),bottom:Pg(t.borderBottomWidth),left:Pg(t.borderLeftWidth)};return Dg({borderBox:e,margin:n,padding:r,border:i})},Og=function(e){var t=e.getBoundingClientRect(),n=window.getComputedStyle(e);return jg(t,n)},Mg=Number.isNaN||function(e){return"number"===typeof e&&e!==e};function Fg(e,t){return e===t||!(!Mg(e)||!Mg(t))}function Ug(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!Fg(e[n],t[n]))return!1;return!0}const Bg=function(e,t){var n;void 0===t&&(t=Ug);var r,i=[],s=!1;return function(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];return s&&n===this&&t(o,i)||(r=e.apply(this,o),s=!0,n=this,i=o),r}};const Vg=function(e){var t=[],n=null,r=function(){for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];t=i,n||(n=requestAnimationFrame(function(){n=null,e.apply(void 0,t)}))};return r.cancel=function(){n&&(cancelAnimationFrame(n),n=null)},r};function zg(e,t){}zg.bind(null,"warn"),zg.bind(null,"error");function Wg(){}function Hg(e,t,n){var r=t.map(function(t){var r=function(e,t){return Im({},e,{},t)}(n,t.options);return e.addEventListener(t.eventName,t.fn,r),function(){e.removeEventListener(t.eventName,t.fn,r)}});return function(){r.forEach(function(e){e()})}}var qg="Invariant failed";function Gg(e){this.message=e}function Kg(e,t){if(!e)throw new Gg(qg)}Gg.prototype.toString=function(){return this.message};var Qg=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).callbacks=null,t.unbind=Wg,t.onWindowError=function(e){var n=t.getCallbacks();n.isDragging()&&n.tryAbort(),e.error instanceof Gg&&e.preventDefault()},t.getCallbacks=function(){if(!t.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return t.callbacks},t.setCallbacks=function(e){t.callbacks=e},t}Nm(t,e);var n=t.prototype;return n.componentDidMount=function(){this.unbind=Hg(window,[{eventName:"error",fn:this.onWindowError}])},n.componentDidCatch=function(e){if(!(e instanceof Gg))throw e;this.setState({})},n.componentWillUnmount=function(){this.unbind()},n.render=function(){return this.props.children(this.setCallbacks)},t}(r.Component),Yg=function(e){return e+1},Jg=function(e,t){var n=e.droppableId===t.droppableId,r=Yg(e.index),i=Yg(t.index);return n?"\n      You have moved the item from position "+r+"\n      to position "+i+"\n    ":"\n    You have moved the item from position "+r+"\n    in list "+e.droppableId+"\n    to list "+t.droppableId+"\n    in position "+i+"\n  "},$g=function(e,t,n){return t.droppableId===n.droppableId?"\n      The item "+e+"\n      has been combined with "+n.draggableId:"\n      The item "+e+"\n      in list "+t.droppableId+"\n      has been combined with "+n.draggableId+"\n      in list "+n.droppableId+"\n    "},Xg=function(e){return"\n  The item has returned to its starting position\n  of "+Yg(e.index)+"\n"},Zg="\n  Press space bar to start a drag.\n  When dragging you can use the arrow keys to move the item around and escape to cancel.\n  Some screen readers may require you to be in focus mode or to use your pass through key\n",ev=function(e){return"\n  You have lifted an item in position "+Yg(e.source.index)+"\n"},tv=function(e){var t=e.destination;if(t)return Jg(e.source,t);var n=e.combine;return n?$g(e.draggableId,e.source,n):"You are over an area that cannot be dropped on"},nv=function(e){if("CANCEL"===e.reason)return"\n      Movement cancelled.\n      "+Xg(e.source)+"\n    ";var t=e.destination,n=e.combine;return t?"\n      You have dropped the item.\n      "+Jg(e.source,t)+"\n    ":n?"\n      You have dropped the item.\n      "+$g(e.draggableId,e.source,n)+"\n    ":"\n    The item has been dropped while not over a drop area.\n    "+Xg(e.source)+"\n  "},rv={x:0,y:0},iv=function(e,t){return{x:e.x+t.x,y:e.y+t.y}},sv=function(e,t){return{x:e.x-t.x,y:e.y-t.y}},ov=function(e,t){return e.x===t.x&&e.y===t.y},av=function(e){return{x:0!==e.x?-e.x:0,y:0!==e.y?-e.y:0}},lv=function(e,t,n){var r;return void 0===n&&(n=0),(r={})[e]=t,r["x"===e?"y":"x"]=n,r},cv=function(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))},uv=function(e,t){return Math.min.apply(Math,t.map(function(t){return cv(e,t)}))},dv=function(e){return function(t){return{x:e(t.x),y:e(t.y)}}},hv=function(e,t){return{top:e.top+t.y,left:e.left+t.x,bottom:e.bottom+t.y,right:e.right+t.x}},fv=function(e){return[{x:e.left,y:e.top},{x:e.right,y:e.top},{x:e.left,y:e.bottom},{x:e.right,y:e.bottom}]},pv=function(e,t){return t&&t.shouldClipSubject?function(e,t){var n=Ig({top:Math.max(t.top,e.top),right:Math.min(t.right,e.right),bottom:Math.min(t.bottom,e.bottom),left:Math.max(t.left,e.left)});return n.width<=0||n.height<=0?null:n}(t.pageMarginBox,e):Ig(e)},mv=function(e){var t=e.page,n=e.withPlaceholder,r=e.axis,i=e.frame,s=function(e,t){return t?hv(e,t.scroll.diff.displacement):e}(t.marginBox,i),o=function(e,t,n){var r;return n&&n.increasedBy?Im({},e,((r={})[t.end]=e[t.end]+n.increasedBy[t.line],r)):e}(s,r,n);return{page:t,withPlaceholder:n,active:pv(o,i)}},gv=function(e,t){e.frame||Kg(!1);var n=e.frame,r=sv(t,n.scroll.initial),i=av(r),s=Im({},n,{scroll:{initial:n.scroll.initial,current:t,diff:{value:r,displacement:i},max:n.scroll.max}});return Im({},e,{frame:s,subject:mv({page:e.subject.page,withPlaceholder:e.subject.withPlaceholder,axis:e.axis,frame:s})})};function vv(e){return Object.values?Object.values(e):Object.keys(e).map(function(t){return e[t]})}function yv(e,t){if(e.findIndex)return e.findIndex(t);for(var n=0;n<e.length;n++)if(t(e[n]))return n;return-1}function bv(e,t){if(e.find)return e.find(t);var n=yv(e,t);return-1!==n?e[n]:void 0}function wv(e){return Array.prototype.slice.call(e)}var xv=Bg(function(e){return e.reduce(function(e,t){return e[t.descriptor.id]=t,e},{})}),kv=Bg(function(e){return e.reduce(function(e,t){return e[t.descriptor.id]=t,e},{})}),Sv=Bg(function(e){return vv(e)}),Ev=Bg(function(e){return vv(e)}),Cv=Bg(function(e,t){var n=Ev(t).filter(function(t){return e===t.descriptor.droppableId}).sort(function(e,t){return e.descriptor.index-t.descriptor.index});return n});function Nv(e){return e.at&&"REORDER"===e.at.type?e.at.destination:null}function Iv(e){return e.at&&"COMBINE"===e.at.type?e.at.combine:null}var _v=Bg(function(e,t){return t.filter(function(t){return t.descriptor.id!==e.descriptor.id})}),Tv=function(e,t){return e.descriptor.droppableId===t.descriptor.id},Av={point:rv,value:0},Dv={invisible:{},visible:{},all:[]},Pv={displaced:Dv,displacedBy:Av,at:null},Rv=function(e,t){return function(n){return e<=n&&n<=t}},Lv=function(e){var t=Rv(e.top,e.bottom),n=Rv(e.left,e.right);return function(r){if(t(r.top)&&t(r.bottom)&&n(r.left)&&n(r.right))return!0;var i=t(r.top)||t(r.bottom),s=n(r.left)||n(r.right);if(i&&s)return!0;var o=r.top<e.top&&r.bottom>e.bottom,a=r.left<e.left&&r.right>e.right;return!(!o||!a)||(o&&s||a&&i)}},jv=function(e){var t=Rv(e.top,e.bottom),n=Rv(e.left,e.right);return function(e){return t(e.top)&&t(e.bottom)&&n(e.left)&&n(e.right)}},Ov={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},Mv={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"},Fv=function(e){var t=e.target,n=e.destination,r=e.viewport,i=e.withDroppableDisplacement,s=e.isVisibleThroughFrameFn,o=i?function(e,t){var n=t.frame?t.frame.scroll.diff.displacement:rv;return hv(e,n)}(t,n):t;return function(e,t,n){return!!t.subject.active&&n(t.subject.active)(e)}(o,n,s)&&function(e,t,n){return n(t)(e)}(o,r,s)},Uv=function(e){return Fv(Im({},e,{isVisibleThroughFrameFn:Lv}))},Bv=function(e){return Fv(Im({},e,{isVisibleThroughFrameFn:jv}))};function Vv(e){var t=e.afterDragging,n=e.destination,r=e.displacedBy,i=e.viewport,s=e.forceShouldAnimate,o=e.last;return t.reduce(function(e,t){var a=function(e,t){var n=e.page.marginBox,r={top:t.point.y,right:0,bottom:0,left:t.point.x};return Ig(_g(n,r))}(t,r),l=t.descriptor.id;if(e.all.push(l),!Uv({target:a,destination:n,viewport:i,withDroppableDisplacement:!0}))return e.invisible[t.descriptor.id]=!0,e;var c=function(e,t,n){if("boolean"===typeof n)return n;if(!t)return!0;var r=t.invisible,i=t.visible;if(r[e])return!1;var s=i[e];return!s||s.shouldAnimate}(l,o,s),u={draggableId:l,shouldAnimate:c};return e.visible[l]=u,e},{all:[],visible:{},invisible:{}})}function zv(e){var t=e.insideDestination,n=e.inHomeList,r=e.displacedBy,i=e.destination,s=function(e,t){if(!e.length)return 0;var n=e[e.length-1].descriptor.index;return t.inHomeList?n:n+1}(t,{inHomeList:n});return{displaced:Dv,displacedBy:r,at:{type:"REORDER",destination:{droppableId:i.descriptor.id,index:s}}}}function Wv(e){var t=e.draggable,n=e.insideDestination,r=e.destination,i=e.viewport,s=e.displacedBy,o=e.last,a=e.index,l=e.forceShouldAnimate,c=Tv(t,r);if(null==a)return zv({insideDestination:n,inHomeList:c,displacedBy:s,destination:r});var u=bv(n,function(e){return e.descriptor.index===a});if(!u)return zv({insideDestination:n,inHomeList:c,displacedBy:s,destination:r});var d=_v(t,n),h=n.indexOf(u);return{displaced:Vv({afterDragging:d.slice(h),destination:r,displacedBy:s,last:o,viewport:i.frame,forceShouldAnimate:l}),displacedBy:s,at:{type:"REORDER",destination:{droppableId:r.descriptor.id,index:a}}}}function Hv(e,t){return Boolean(t.effected[e])}var qv=function(e){var t=e.isMovingForward,n=e.isInHomeList,r=e.draggable,i=e.draggables,s=e.destination,o=e.insideDestination,a=e.previousImpact,l=e.viewport,c=e.afterCritical,u=a.at;if(u||Kg(!1),"REORDER"===u.type){var d=function(e){var t=e.isMovingForward,n=e.isInHomeList,r=e.insideDestination,i=e.location;if(!r.length)return null;var s=i.index,o=t?s+1:s-1,a=r[0].descriptor.index,l=r[r.length-1].descriptor.index;return o<a||o>(n?l:l+1)?null:o}({isMovingForward:t,isInHomeList:n,location:u.destination,insideDestination:o});return null==d?null:Wv({draggable:r,insideDestination:o,destination:s,viewport:l,last:a.displaced,displacedBy:a.displacedBy,index:d})}var h=function(e){var t=e.isMovingForward,n=e.destination,r=e.draggables,i=e.combine,s=e.afterCritical;if(!n.isCombineEnabled)return null;var o=i.draggableId,a=r[o].descriptor.index;return Hv(o,s)?t?a:a-1:t?a+1:a}({isMovingForward:t,destination:s,displaced:a.displaced,draggables:i,combine:u.combine,afterCritical:c});return null==h?null:Wv({draggable:r,insideDestination:o,destination:s,viewport:l,last:a.displaced,displacedBy:a.displacedBy,index:h})},Gv=function(e){var t=e.afterCritical,n=e.impact,r=e.draggables,i=Iv(n);i||Kg(!1);var s=i.draggableId,o=r[s].page.borderBox.center,a=function(e){var t=e.displaced,n=e.afterCritical,r=e.combineWith,i=e.displacedBy,s=Boolean(t.visible[r]||t.invisible[r]);return Hv(r,n)?s?rv:av(i.point):s?i.point:rv}({displaced:n.displaced,afterCritical:t,combineWith:s,displacedBy:n.displacedBy});return iv(o,a)},Kv=function(e,t){return t.margin[e.start]+t.borderBox[e.size]/2},Qv=function(e,t,n){return t[e.crossAxisStart]+n.margin[e.crossAxisStart]+n.borderBox[e.crossAxisSize]/2},Yv=function(e){var t=e.axis,n=e.moveRelativeTo,r=e.isMoving;return lv(t.line,n.marginBox[t.end]+Kv(t,r),Qv(t,n.marginBox,r))},Jv=function(e){var t=e.axis,n=e.moveRelativeTo,r=e.isMoving;return lv(t.line,n.marginBox[t.start]-function(e,t){return t.margin[e.end]+t.borderBox[e.size]/2}(t,r),Qv(t,n.marginBox,r))},$v=function(e){var t=e.impact,n=e.draggable,r=e.draggables,i=e.droppable,s=e.afterCritical,o=Cv(i.descriptor.id,r),a=n.page,l=i.axis;if(!o.length)return function(e){var t=e.axis,n=e.moveInto,r=e.isMoving;return lv(t.line,n.contentBox[t.start]+Kv(t,r),Qv(t,n.contentBox,r))}({axis:l,moveInto:i.page,isMoving:a});var c=t.displaced,u=t.displacedBy,d=c.all[0];if(d){var h=r[d];if(Hv(d,s))return Jv({axis:l,moveRelativeTo:h.page,isMoving:a});var f=Rg(h.page,u.point);return Jv({axis:l,moveRelativeTo:f,isMoving:a})}var p=o[o.length-1];if(p.descriptor.id===n.descriptor.id)return a.borderBox.center;if(Hv(p.descriptor.id,s)){var m=Rg(p.page,av(s.displacedBy.point));return Yv({axis:l,moveRelativeTo:m,isMoving:a})}return Yv({axis:l,moveRelativeTo:p.page,isMoving:a})},Xv=function(e,t){var n=e.frame;return n?iv(t,n.scroll.diff.displacement):t},Zv=function(e){var t=function(e){var t=e.impact,n=e.draggable,r=e.droppable,i=e.draggables,s=e.afterCritical,o=n.page.borderBox.center,a=t.at;return r&&a?"REORDER"===a.type?$v({impact:t,draggable:n,draggables:i,droppable:r,afterCritical:s}):Gv({impact:t,draggables:i,afterCritical:s}):o}(e),n=e.droppable;return n?Xv(n,t):t},ey=function(e,t){var n=sv(t,e.scroll.initial),r=av(n);return{frame:Ig({top:t.y,bottom:t.y+e.frame.height,left:t.x,right:t.x+e.frame.width}),scroll:{initial:e.scroll.initial,max:e.scroll.max,current:t,diff:{value:n,displacement:r}}}};function ty(e,t){return e.map(function(e){return t[e]})}var ny=function(e){var t=e.pageBorderBoxCenter,n=e.draggable,r=function(e,t){return iv(e.scroll.diff.displacement,t)}(e.viewport,t),i=sv(r,n.page.borderBox.center);return iv(n.client.borderBox.center,i)},ry=function(e){var t=e.draggable,n=e.destination,r=e.newPageBorderBoxCenter,i=e.viewport,s=e.withDroppableDisplacement,o=e.onlyOnMainAxis,a=void 0!==o&&o,l=sv(r,t.page.borderBox.center),c={target:hv(t.page.borderBox,l),destination:n,withDroppableDisplacement:s,viewport:i};return a?function(e){return Fv(Im({},e,{isVisibleThroughFrameFn:(t=e.destination.axis,function(e){var n=Rv(e.top,e.bottom),r=Rv(e.left,e.right);return function(e){return t===Ov?n(e.top)&&n(e.bottom):r(e.left)&&r(e.right)}})}));var t}(c):Bv(c)},iy=function(e){var t=e.isMovingForward,n=e.draggable,r=e.destination,i=e.draggables,s=e.previousImpact,o=e.viewport,a=e.previousPageBorderBoxCenter,l=e.previousClientSelection,c=e.afterCritical;if(!r.isEnabled)return null;var u=Cv(r.descriptor.id,i),d=Tv(n,r),h=function(e){var t=e.isMovingForward,n=e.draggable,r=e.destination,i=e.insideDestination,s=e.previousImpact;if(!r.isCombineEnabled)return null;if(!Nv(s))return null;function o(e){var t={type:"COMBINE",combine:{draggableId:e,droppableId:r.descriptor.id}};return Im({},s,{at:t})}var a=s.displaced.all,l=a.length?a[0]:null;if(t)return l?o(l):null;var c=_v(n,i);if(!l)return c.length?o(c[c.length-1].descriptor.id):null;var u=yv(c,function(e){return e.descriptor.id===l});-1===u&&Kg(!1);var d=u-1;return d<0?null:o(c[d].descriptor.id)}({isMovingForward:t,draggable:n,destination:r,insideDestination:u,previousImpact:s})||qv({isMovingForward:t,isInHomeList:d,draggable:n,draggables:i,destination:r,insideDestination:u,previousImpact:s,viewport:o,afterCritical:c});if(!h)return null;var f=Zv({impact:h,draggable:n,droppable:r,draggables:i,afterCritical:c});if(ry({draggable:n,destination:r,newPageBorderBoxCenter:f,viewport:o.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0}))return{clientSelection:ny({pageBorderBoxCenter:f,draggable:n,viewport:o}),impact:h,scrollJumpRequest:null};var p=sv(f,a),m=function(e){var t=e.impact,n=e.viewport,r=e.destination,i=e.draggables,s=e.maxScrollChange,o=ey(n,iv(n.scroll.current,s)),a=r.frame?gv(r,iv(r.frame.scroll.current,s)):r,l=t.displaced,c=Vv({afterDragging:ty(l.all,i),destination:r,displacedBy:t.displacedBy,viewport:o.frame,last:l,forceShouldAnimate:!1}),u=Vv({afterDragging:ty(l.all,i),destination:a,displacedBy:t.displacedBy,viewport:n.frame,last:l,forceShouldAnimate:!1}),d={},h={},f=[l,c,u];return l.all.forEach(function(e){var t=function(e,t){for(var n=0;n<t.length;n++){var r=t[n].visible[e];if(r)return r}return null}(e,f);t?h[e]=t:d[e]=!0}),Im({},t,{displaced:{all:l.all,invisible:d,visible:h}})}({impact:h,viewport:o,destination:r,draggables:i,maxScrollChange:p});return{clientSelection:l,impact:m,scrollJumpRequest:p}},sy=function(e){var t=e.subject.active;return t||Kg(!1),t},oy=function(e,t){var n=e.page.borderBox.center;return Hv(e.descriptor.id,t)?sv(n,t.displacedBy.point):n},ay=function(e,t){var n=e.page.borderBox;return Hv(e.descriptor.id,t)?hv(n,av(t.displacedBy.point)):n},ly=Bg(function(e,t){var n=t[e.line];return{value:n,point:lv(e.line,n)}}),cy=function(e,t){return Im({},e,{scroll:Im({},e.scroll,{max:t})})},uy=function(e,t,n){var r=e.frame;Tv(t,e)&&Kg(!1),e.subject.withPlaceholder&&Kg(!1);var i=ly(e.axis,t.displaceBy).point,s=function(e,t,n){var r=e.axis;if("virtual"===e.descriptor.mode)return lv(r.line,t[r.line]);var i=e.subject.page.contentBox[r.size],s=Cv(e.descriptor.id,n).reduce(function(e,t){return e+t.client.marginBox[r.size]},0),o=s+t[r.line]-i;return o<=0?null:lv(r.line,o)}(e,i,n),o={placeholderSize:i,increasedBy:s,oldFrameMaxScroll:e.frame?e.frame.scroll.max:null};if(!r)return Im({},e,{subject:mv({page:e.subject.page,withPlaceholder:o,axis:e.axis,frame:e.frame})});var a=s?iv(r.scroll.max,s):r.scroll.max,l=cy(r,a);return Im({},e,{subject:mv({page:e.subject.page,withPlaceholder:o,axis:e.axis,frame:l}),frame:l})},dy=function(e){var t=e.isMovingForward,n=e.previousPageBorderBoxCenter,r=e.draggable,i=e.isOver,s=e.draggables,o=e.droppables,a=e.viewport,l=e.afterCritical,c=function(e){var t=e.isMovingForward,n=e.pageBorderBoxCenter,r=e.source,i=e.droppables,s=e.viewport,o=r.subject.active;if(!o)return null;var a=r.axis,l=Rv(o[a.start],o[a.end]),c=Sv(i).filter(function(e){return e!==r}).filter(function(e){return e.isEnabled}).filter(function(e){return Boolean(e.subject.active)}).filter(function(e){return Lv(s.frame)(sy(e))}).filter(function(e){var n=sy(e);return t?o[a.crossAxisEnd]<n[a.crossAxisEnd]:n[a.crossAxisStart]<o[a.crossAxisStart]}).filter(function(e){var t=sy(e),n=Rv(t[a.start],t[a.end]);return l(t[a.start])||l(t[a.end])||n(o[a.start])||n(o[a.end])}).sort(function(e,n){var r=sy(e)[a.crossAxisStart],i=sy(n)[a.crossAxisStart];return t?r-i:i-r}).filter(function(e,t,n){return sy(e)[a.crossAxisStart]===sy(n[0])[a.crossAxisStart]});if(!c.length)return null;if(1===c.length)return c[0];var u=c.filter(function(e){return Rv(sy(e)[a.start],sy(e)[a.end])(n[a.line])});return 1===u.length?u[0]:u.length>1?u.sort(function(e,t){return sy(e)[a.start]-sy(t)[a.start]})[0]:c.sort(function(e,t){var r=uv(n,fv(sy(e))),i=uv(n,fv(sy(t)));return r!==i?r-i:sy(e)[a.start]-sy(t)[a.start]})[0]}({isMovingForward:t,pageBorderBoxCenter:n,source:i,droppables:o,viewport:a});if(!c)return null;var u=Cv(c.descriptor.id,s),d=function(e){var t=e.pageBorderBoxCenter,n=e.viewport,r=e.destination,i=e.insideDestination,s=e.afterCritical,o=i.filter(function(e){return Bv({target:ay(e,s),destination:r,viewport:n.frame,withDroppableDisplacement:!0})}).sort(function(e,n){var i=cv(t,Xv(r,oy(e,s))),o=cv(t,Xv(r,oy(n,s)));return i<o?-1:o<i?1:e.descriptor.index-n.descriptor.index});return o[0]||null}({pageBorderBoxCenter:n,viewport:a,destination:c,insideDestination:u,afterCritical:l}),h=function(e){var t=e.previousPageBorderBoxCenter,n=e.moveRelativeTo,r=e.insideDestination,i=e.draggable,s=e.draggables,o=e.destination,a=e.viewport,l=e.afterCritical;if(!n){if(r.length)return null;var c={displaced:Dv,displacedBy:Av,at:{type:"REORDER",destination:{droppableId:o.descriptor.id,index:0}}},u=Zv({impact:c,draggable:i,droppable:o,draggables:s,afterCritical:l}),d=Tv(i,o)?o:uy(o,i,s);return ry({draggable:i,destination:d,newPageBorderBoxCenter:u,viewport:a.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0})?c:null}var h=Boolean(t[o.axis.line]<=n.page.borderBox.center[o.axis.line]),f=function(){var e=n.descriptor.index;return n.descriptor.id===i.descriptor.id||h?e:e+1}(),p=ly(o.axis,i.displaceBy);return Wv({draggable:i,insideDestination:r,destination:o,viewport:a,displacedBy:p,last:Dv,index:f})}({previousPageBorderBoxCenter:n,destination:c,draggable:r,draggables:s,moveRelativeTo:d,insideDestination:u,viewport:a,afterCritical:l});if(!h)return null;var f=Zv({impact:h,draggable:r,droppable:c,draggables:s,afterCritical:l});return{clientSelection:ny({pageBorderBoxCenter:f,draggable:r,viewport:a}),impact:h,scrollJumpRequest:null}},hy=function(e){var t=e.at;return t?"REORDER"===t.type?t.destination.droppableId:t.combine.droppableId:null},fy=function(e){var t=e.state,n=e.type,r=function(e,t){var n=hy(e);return n?t[n]:null}(t.impact,t.dimensions.droppables),i=Boolean(r),s=t.dimensions.droppables[t.critical.droppable.id],o=r||s,a=o.axis.direction,l="vertical"===a&&("MOVE_UP"===n||"MOVE_DOWN"===n)||"horizontal"===a&&("MOVE_LEFT"===n||"MOVE_RIGHT"===n);if(l&&!i)return null;var c="MOVE_DOWN"===n||"MOVE_RIGHT"===n,u=t.dimensions.draggables[t.critical.draggable.id],d=t.current.page.borderBoxCenter,h=t.dimensions,f=h.draggables,p=h.droppables;return l?iy({isMovingForward:c,previousPageBorderBoxCenter:d,draggable:u,destination:o,draggables:f,viewport:t.viewport,previousClientSelection:t.current.client.selection,previousImpact:t.impact,afterCritical:t.afterCritical}):dy({isMovingForward:c,previousPageBorderBoxCenter:d,draggable:u,isOver:o,draggables:f,droppables:p,viewport:t.viewport,afterCritical:t.afterCritical})};function py(e){return"DRAGGING"===e.phase||"COLLECTING"===e.phase}function my(e){var t=Rv(e.top,e.bottom),n=Rv(e.left,e.right);return function(e){return t(e.y)&&n(e.x)}}function gy(e){var t=e.pageBorderBox,n=e.draggable,r=e.droppables,i=Sv(r).filter(function(e){if(!e.isEnabled)return!1;var n,r,i=e.subject.active;if(!i)return!1;if(r=i,!((n=t).left<r.right&&n.right>r.left&&n.top<r.bottom&&n.bottom>r.top))return!1;if(my(i)(t.center))return!0;var s=e.axis,o=i.center[s.crossAxisLine],a=t[s.crossAxisStart],l=t[s.crossAxisEnd],c=Rv(i[s.crossAxisStart],i[s.crossAxisEnd]),u=c(a),d=c(l);return!u&&!d||(u?a<o:l>o)});return i.length?1===i.length?i[0].descriptor.id:function(e){var t=e.pageBorderBox,n=e.draggable,r=e.candidates,i=n.page.borderBox.center,s=r.map(function(e){var n=e.axis,r=lv(e.axis.line,t.center[n.line],e.page.borderBox.center[n.crossAxisLine]);return{id:e.descriptor.id,distance:cv(i,r)}}).sort(function(e,t){return t.distance-e.distance});return s[0]?s[0].id:null}({pageBorderBox:t,draggable:n,candidates:i}):null}var vy=function(e,t){return Ig(hv(e,t))};function yy(e){var t=e.displaced,n=e.id;return Boolean(t.visible[n]||t.invisible[n])}var by=function(e){var t=e.pageOffset,n=e.draggable,r=e.draggables,i=e.droppables,s=e.previousImpact,o=e.viewport,a=e.afterCritical,l=vy(n.page.borderBox,t),c=gy({pageBorderBox:l,draggable:n,droppables:i});if(!c)return Pv;var u=i[c],d=Cv(u.descriptor.id,r),h=function(e,t){var n=e.frame;return n?vy(t,n.scroll.diff.value):t}(u,l);return function(e){var t=e.draggable,n=e.pageBorderBoxWithDroppableScroll,r=e.previousImpact,i=e.destination,s=e.insideDestination,o=e.afterCritical;if(!i.isCombineEnabled)return null;var a=i.axis,l=ly(i.axis,t.displaceBy),c=l.value,u=n[a.start],d=n[a.end],h=bv(_v(t,s),function(e){var t=e.descriptor.id,n=e.page.borderBox,i=n[a.size]/4,s=Hv(t,o),l=yy({displaced:r.displaced,id:t});return s?l?d>n[a.start]+i&&d<n[a.end]-i:u>n[a.start]-c+i&&u<n[a.end]-c-i:l?d>n[a.start]+c+i&&d<n[a.end]+c-i:u>n[a.start]+i&&u<n[a.end]-i});return h?{displacedBy:l,displaced:r.displaced,at:{type:"COMBINE",combine:{draggableId:h.descriptor.id,droppableId:i.descriptor.id}}}:null}({pageBorderBoxWithDroppableScroll:h,draggable:n,previousImpact:s,destination:u,insideDestination:d,afterCritical:a})||function(e){var t=e.pageBorderBoxWithDroppableScroll,n=e.draggable,r=e.destination,i=e.insideDestination,s=e.last,o=e.viewport,a=e.afterCritical,l=r.axis,c=ly(r.axis,n.displaceBy),u=c.value,d=t[l.start],h=t[l.end],f=function(e){var t=e.draggable,n=e.closest,r=e.inHomeList;return n?r&&n.descriptor.index>t.descriptor.index?n.descriptor.index-1:n.descriptor.index:null}({draggable:n,closest:bv(_v(n,i),function(e){var t=e.descriptor.id,n=e.page.borderBox.center[l.line],r=Hv(t,a),i=yy({displaced:s,id:t});return r?i?h<=n:d<n-u:i?h<=n+u:d<n}),inHomeList:Tv(n,r)});return Wv({draggable:n,insideDestination:i,destination:r,viewport:o,last:s,displacedBy:c,index:f})}({pageBorderBoxWithDroppableScroll:h,draggable:n,destination:u,insideDestination:d,last:s.displaced,viewport:o,afterCritical:a})},wy=function(e,t){var n;return Im({},e,((n={})[t.descriptor.id]=t,n))},xy=function(e){var t=e.previousImpact,n=e.impact,r=e.droppables,i=hy(t),s=hy(n);if(!i)return r;if(i===s)return r;var o=r[i];if(!o.subject.withPlaceholder)return r;var a=function(e){var t=e.subject.withPlaceholder;t||Kg(!1);var n=e.frame;if(!n)return Im({},e,{subject:mv({page:e.subject.page,axis:e.axis,frame:null,withPlaceholder:null})});var r=t.oldFrameMaxScroll;r||Kg(!1);var i=cy(n,r);return Im({},e,{subject:mv({page:e.subject.page,axis:e.axis,frame:i,withPlaceholder:null}),frame:i})}(o);return wy(r,a)},ky=function(e){var t=e.state,n=e.clientSelection,r=e.dimensions,i=e.viewport,s=e.impact,o=e.scrollJumpRequest,a=i||t.viewport,l=r||t.dimensions,c=n||t.current.client.selection,u=sv(c,t.initial.client.selection),d={offset:u,selection:c,borderBoxCenter:iv(t.initial.client.borderBoxCenter,u)},h={selection:iv(d.selection,a.scroll.current),borderBoxCenter:iv(d.borderBoxCenter,a.scroll.current),offset:iv(d.offset,a.scroll.diff.value)},f={client:d,page:h};if("COLLECTING"===t.phase)return Im({phase:"COLLECTING"},t,{dimensions:l,viewport:a,current:f});var p=l.draggables[t.critical.draggable.id],m=s||by({pageOffset:h.offset,draggable:p,draggables:l.draggables,droppables:l.droppables,previousImpact:t.impact,viewport:a,afterCritical:t.afterCritical}),g=function(e){var t=e.draggable,n=e.draggables,r=e.droppables,i=e.previousImpact,s=e.impact,o=xy({previousImpact:i,impact:s,droppables:r}),a=hy(s);if(!a)return o;var l=r[a];if(Tv(t,l))return o;if(l.subject.withPlaceholder)return o;var c=uy(l,t,n);return wy(o,c)}({draggable:p,impact:m,previousImpact:t.impact,draggables:l.draggables,droppables:l.droppables});return Im({},t,{current:f,dimensions:{draggables:l.draggables,droppables:g},impact:m,viewport:a,scrollJumpRequest:o||null,forceShouldAnimate:!o&&null})};var Sy=function(e){var t=e.impact,n=e.viewport,r=e.draggables,i=e.destination,s=e.forceShouldAnimate,o=t.displaced,a=function(e,t){return e.map(function(e){return t[e]})}(o.all,r);return Im({},t,{displaced:Vv({afterDragging:a,destination:i,displacedBy:t.displacedBy,viewport:n.frame,forceShouldAnimate:s,last:o})})},Ey=function(e){var t=e.impact,n=e.draggable,r=e.droppable,i=e.draggables,s=e.viewport,o=e.afterCritical,a=Zv({impact:t,draggable:n,draggables:i,droppable:r,afterCritical:o});return ny({pageBorderBoxCenter:a,draggable:n,viewport:s})},Cy=function(e){var t=e.state,n=e.dimensions,r=e.viewport;"SNAP"!==t.movementMode&&Kg(!1);var i=t.impact,s=r||t.viewport,o=n||t.dimensions,a=o.draggables,l=o.droppables,c=a[t.critical.draggable.id],u=hy(i);u||Kg(!1);var d=l[u],h=Sy({impact:i,viewport:s,destination:d,draggables:a}),f=Ey({impact:h,draggable:c,droppable:d,draggables:a,viewport:s,afterCritical:t.afterCritical});return ky({impact:h,clientSelection:f,state:t,dimensions:o,viewport:s})},Ny=function(e){var t=e.draggable,n=e.home,r=e.draggables,i=e.viewport,s=ly(n.axis,t.displaceBy),o=Cv(n.descriptor.id,r),a=o.indexOf(t);-1===a&&Kg(!1);var l,c=o.slice(a+1),u=c.reduce(function(e,t){return e[t.descriptor.id]=!0,e},{}),d={inVirtualList:"virtual"===n.descriptor.mode,displacedBy:s,effected:u};return{impact:{displaced:Vv({afterDragging:c,destination:n,displacedBy:s,last:null,viewport:i.frame,forceShouldAnimate:!1}),displacedBy:s,at:{type:"REORDER",destination:(l=t.descriptor,{index:l.index,droppableId:l.droppableId})}},afterCritical:d}},Iy=function(e){0},_y=function(e){0},Ty=function(e){var t=e.additions,n=e.updatedDroppables,r=e.viewport,i=r.scroll.diff.value;return t.map(function(e){var t=e.descriptor.droppableId,s=function(e){var t=e.frame;return t||Kg(!1),t}(n[t]),o=s.scroll.diff.value,a=function(e){var t=e.draggable,n=e.offset,r=e.initialWindowScroll,i=Rg(t.client,n),s=Lg(i,r);return Im({},t,{placeholder:Im({},t.placeholder,{client:i}),client:i,page:s})}({draggable:e,offset:iv(i,o),initialWindowScroll:r.scroll.initial});return a})},Ay=function(e){return"SNAP"===e.movementMode},Dy=function(e,t,n){var r=function(e,t){return{draggables:e.draggables,droppables:wy(e.droppables,t)}}(e.dimensions,t);return!Ay(e)||n?ky({state:e,dimensions:r}):Cy({state:e,dimensions:r})};function Py(e){return e.isDragging&&"SNAP"===e.movementMode?Im({phase:"DRAGGING"},e,{scrollJumpRequest:null}):e}var Ry={phase:"IDLE",completed:null,shouldFlush:!1},Ly=function(e,t){if(void 0===e&&(e=Ry),"FLUSH"===t.type)return Im({},Ry,{shouldFlush:!0});if("INITIAL_PUBLISH"===t.type){"IDLE"!==e.phase&&Kg(!1);var n=t.payload,r=n.critical,i=n.clientSelection,s=n.viewport,o=n.dimensions,a=n.movementMode,l=o.draggables[r.draggable.id],c=o.droppables[r.droppable.id],u={selection:i,borderBoxCenter:l.client.borderBox.center,offset:rv},d={client:u,page:{selection:iv(u.selection,s.scroll.initial),borderBoxCenter:iv(u.selection,s.scroll.initial),offset:iv(u.selection,s.scroll.diff.value)}},h=Sv(o.droppables).every(function(e){return!e.isFixedOnPage}),f=Ny({draggable:l,home:c,draggables:o.draggables,viewport:s}),p=f.impact;return{phase:"DRAGGING",isDragging:!0,critical:r,movementMode:a,dimensions:o,initial:d,current:d,isWindowScrollAllowed:h,impact:p,afterCritical:f.afterCritical,onLiftImpact:p,viewport:s,scrollJumpRequest:null,forceShouldAnimate:null}}if("COLLECTION_STARTING"===t.type)return"COLLECTING"===e.phase||"DROP_PENDING"===e.phase?e:("DRAGGING"!==e.phase&&Kg(!1),Im({phase:"COLLECTING"},e,{phase:"COLLECTING"}));if("PUBLISH_WHILE_DRAGGING"===t.type)return"COLLECTING"!==e.phase&&"DROP_PENDING"!==e.phase&&Kg(!1),function(e){var t=e.state,n=e.published;Iy();var r=n.modified.map(function(e){var n=t.dimensions.droppables[e.droppableId];return gv(n,e.scroll)}),i=Im({},t.dimensions.droppables,{},xv(r)),s=kv(Ty({additions:n.additions,updatedDroppables:i,viewport:t.viewport})),o=Im({},t.dimensions.draggables,{},s);n.removals.forEach(function(e){delete o[e]});var a={droppables:i,draggables:o},l=hy(t.impact),c=l?a.droppables[l]:null,u=a.draggables[t.critical.draggable.id],d=a.droppables[t.critical.droppable.id],h=Ny({draggable:u,home:d,draggables:o,viewport:t.viewport}),f=h.impact,p=h.afterCritical,m=c&&c.isCombineEnabled?t.impact:f,g=by({pageOffset:t.current.page.offset,draggable:a.draggables[t.critical.draggable.id],draggables:a.draggables,droppables:a.droppables,previousImpact:m,viewport:t.viewport,afterCritical:p});_y();var v=Im({phase:"DRAGGING"},t,{phase:"DRAGGING",impact:g,onLiftImpact:f,dimensions:a,afterCritical:p,forceShouldAnimate:!1});return"COLLECTING"===t.phase?v:Im({phase:"DROP_PENDING"},v,{phase:"DROP_PENDING",reason:t.reason,isWaiting:!1})}({state:e,published:t.payload});if("MOVE"===t.type){if("DROP_PENDING"===e.phase)return e;py(e)||Kg(!1);var m=t.payload.client;return ov(m,e.current.client.selection)?e:ky({state:e,clientSelection:m,impact:Ay(e)?e.impact:null})}if("UPDATE_DROPPABLE_SCROLL"===t.type){if("DROP_PENDING"===e.phase)return Py(e);if("COLLECTING"===e.phase)return Py(e);py(e)||Kg(!1);var g=t.payload,v=g.id,y=g.newScroll,b=e.dimensions.droppables[v];if(!b)return e;var w=gv(b,y);return Dy(e,w,!1)}if("UPDATE_DROPPABLE_IS_ENABLED"===t.type){if("DROP_PENDING"===e.phase)return e;py(e)||Kg(!1);var x=t.payload,k=x.id,S=x.isEnabled,E=e.dimensions.droppables[k];E||Kg(!1),E.isEnabled===S&&Kg(!1);var C=Im({},E,{isEnabled:S});return Dy(e,C,!0)}if("UPDATE_DROPPABLE_IS_COMBINE_ENABLED"===t.type){if("DROP_PENDING"===e.phase)return e;py(e)||Kg(!1);var N=t.payload,I=N.id,_=N.isCombineEnabled,T=e.dimensions.droppables[I];T||Kg(!1),T.isCombineEnabled===_&&Kg(!1);var A=Im({},T,{isCombineEnabled:_});return Dy(e,A,!0)}if("MOVE_BY_WINDOW_SCROLL"===t.type){if("DROP_PENDING"===e.phase||"DROP_ANIMATING"===e.phase)return e;py(e)||Kg(!1),e.isWindowScrollAllowed||Kg(!1);var D=t.payload.newScroll;if(ov(e.viewport.scroll.current,D))return Py(e);var P=ey(e.viewport,D);return Ay(e)?Cy({state:e,viewport:P}):ky({state:e,viewport:P})}if("UPDATE_VIEWPORT_MAX_SCROLL"===t.type){if(!py(e))return e;var R=t.payload.maxScroll;if(ov(R,e.viewport.scroll.max))return e;var L=Im({},e.viewport,{scroll:Im({},e.viewport.scroll,{max:R})});return Im({phase:"DRAGGING"},e,{viewport:L})}if("MOVE_UP"===t.type||"MOVE_DOWN"===t.type||"MOVE_LEFT"===t.type||"MOVE_RIGHT"===t.type){if("COLLECTING"===e.phase||"DROP_PENDING"===e.phase)return e;"DRAGGING"!==e.phase&&Kg(!1);var j=fy({state:e,type:t.type});return j?ky({state:e,impact:j.impact,clientSelection:j.clientSelection,scrollJumpRequest:j.scrollJumpRequest}):e}if("DROP_PENDING"===t.type){var O=t.payload.reason;return"COLLECTING"!==e.phase&&Kg(!1),Im({phase:"DROP_PENDING"},e,{phase:"DROP_PENDING",isWaiting:!0,reason:O})}if("DROP_ANIMATE"===t.type){var M=t.payload,F=M.completed,U=M.dropDuration,B=M.newHomeClientOffset;return"DRAGGING"!==e.phase&&"DROP_PENDING"!==e.phase&&Kg(!1),{phase:"DROP_ANIMATING",completed:F,dropDuration:U,newHomeClientOffset:B,dimensions:e.dimensions}}return"DROP_COMPLETE"===t.type?{phase:"IDLE",completed:t.payload.completed,shouldFlush:!1}:e},jy=function(e){return{type:"PUBLISH_WHILE_DRAGGING",payload:e}},Oy=function(){return{type:"COLLECTION_STARTING",payload:null}},My=function(e){return{type:"UPDATE_DROPPABLE_SCROLL",payload:e}},Fy=function(e){return{type:"UPDATE_DROPPABLE_IS_ENABLED",payload:e}},Uy=function(e){return{type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:e}},By=function(e){return{type:"MOVE",payload:e}},Vy=function(){return{type:"MOVE_UP",payload:null}},zy=function(){return{type:"MOVE_DOWN",payload:null}},Wy=function(){return{type:"MOVE_RIGHT",payload:null}},Hy=function(){return{type:"MOVE_LEFT",payload:null}},qy=function(e){return{type:"DROP_COMPLETE",payload:e}},Gy=function(e){return{type:"DROP",payload:e}},Ky=function(){return{type:"DROP_ANIMATION_FINISHED",payload:null}};var Qy="cubic-bezier(.2,1,.1,1)",Yy={drop:0,combining:.7},Jy={drop:.75},$y=.2+"s "+"cubic-bezier(0.2, 0, 0, 1)",Xy={fluid:"opacity "+$y,snap:"transform "+$y+", opacity "+$y,drop:function(e){var t=e+"s "+Qy;return"transform "+t+", opacity "+t},outOfTheWay:"transform "+$y,placeholder:"height "+$y+", width "+$y+", margin "+$y},Zy=function(e){return ov(e,rv)?null:"translate("+e.x+"px, "+e.y+"px)"},eb=Zy,tb=function(e,t){var n=Zy(e);return n?t?n+" scale("+Jy.drop+")":n:null},nb=.33,rb=.55,ib=rb-nb,sb=function(e){var t=e.getState,n=e.dispatch;return function(e){return function(r){if("DROP"===r.type){var i=t(),s=r.payload.reason;if("COLLECTING"!==i.phase){if("IDLE"!==i.phase){"DROP_PENDING"===i.phase&&i.isWaiting&&Kg(!1),"DRAGGING"!==i.phase&&"DROP_PENDING"!==i.phase&&Kg(!1);var o=i.critical,a=i.dimensions,l=a.draggables[i.critical.draggable.id],c=function(e){var t=e.draggables,n=e.reason,r=e.lastImpact,i=e.home,s=e.viewport,o=e.onLiftImpact;return r.at&&"DROP"===n?"REORDER"===r.at.type?{impact:r,didDropInsideDroppable:!0}:{impact:Im({},r,{displaced:Dv}),didDropInsideDroppable:!0}:{impact:Sy({draggables:t,impact:o,destination:i,viewport:s,forceShouldAnimate:!0}),didDropInsideDroppable:!1}}({reason:s,lastImpact:i.impact,afterCritical:i.afterCritical,onLiftImpact:i.onLiftImpact,home:i.dimensions.droppables[i.critical.droppable.id],viewport:i.viewport,draggables:i.dimensions.draggables}),u=c.impact,d=c.didDropInsideDroppable,h=d?Nv(u):null,f=d?Iv(u):null,p={index:o.draggable.index,droppableId:o.droppable.id},m={draggableId:l.descriptor.id,type:l.descriptor.type,source:p,reason:s,mode:i.movementMode,destination:h,combine:f},g=function(e){var t=e.impact,n=e.draggable,r=e.dimensions,i=e.viewport,s=e.afterCritical,o=r.draggables,a=r.droppables,l=hy(t),c=l?a[l]:null,u=a[n.descriptor.droppableId],d=Ey({impact:t,draggable:n,draggables:o,afterCritical:s,droppable:c||u,viewport:i});return sv(d,n.client.borderBox.center)}({impact:u,draggable:l,dimensions:a,viewport:i.viewport,afterCritical:i.afterCritical}),v={critical:i.critical,afterCritical:i.afterCritical,result:m,impact:u};if(!ov(i.current.client.offset,g)||Boolean(m.combine)){var y=function(e){var t=e.current,n=e.destination,r=e.reason,i=cv(t,n);if(i<=0)return nb;if(i>=1500)return rb;var s=nb+ib*(i/1500);return Number(("CANCEL"===r?.6*s:s).toFixed(2))}({current:i.current.client.offset,destination:g,reason:s});n(function(e){return{type:"DROP_ANIMATE",payload:e}}({newHomeClientOffset:g,dropDuration:y,completed:v}))}else n(qy({completed:v}))}}else n(function(e){return{type:"DROP_PENDING",payload:e}}({reason:s}))}else e(r)}}},ob=function(){return{x:window.pageXOffset,y:window.pageYOffset}};function ab(e){var t=e.onWindowScroll;var n=Vg(function(){t(ob())}),r=function(e){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(t){t.target!==window&&t.target!==window.document||e()}}}(n),i=Wg;function s(){return i!==Wg}return{start:function(){s()&&Kg(!1),i=Hg(window,[r])},stop:function(){s()||Kg(!1),n.cancel(),i(),i=Wg},isActive:s}}var lb=function(e){var t=ab({onWindowScroll:function(t){e.dispatch({type:"MOVE_BY_WINDOW_SCROLL",payload:{newScroll:t}})}});return function(e){return function(n){t.isActive()||"INITIAL_PUBLISH"!==n.type||t.start(),t.isActive()&&function(e){return"DROP_COMPLETE"===e.type||"DROP_ANIMATE"===e.type||"FLUSH"===e.type}(n)&&t.stop(),e(n)}}},cb=function(){var e=[];return{add:function(t){var n=setTimeout(function(){return function(t){var n=yv(e,function(e){return e.timerId===t});-1===n&&Kg(!1),e.splice(n,1)[0].callback()}(n)}),r={timerId:n,callback:t};e.push(r)},flush:function(){if(e.length){var t=[].concat(e);e.length=0,t.forEach(function(e){clearTimeout(e.timerId),e.callback()})}}}},ub=function(e,t){Iy(),t(),_y()},db=function(e,t){return{draggableId:e.draggable.id,type:e.droppable.type,source:{droppableId:e.droppable.id,index:e.draggable.index},mode:t}},hb=function(e,t,n,r){if(e){var i=function(e){var t=!1,n=!1,r=setTimeout(function(){n=!0}),i=function(i){t||n||(t=!0,e(i),clearTimeout(r))};return i.wasCalled=function(){return t},i}(n);e(t,{announce:i}),i.wasCalled()||n(r(t))}else n(r(t))},fb=function(e,t){var n=function(e,t){var n=cb(),r=null,i=function(n){r||Kg(!1),r=null,ub(0,function(){return hb(e().onDragEnd,n,t,nv)})};return{beforeCapture:function(t,n){r&&Kg(!1),ub(0,function(){var r=e().onBeforeCapture;r&&r({draggableId:t,mode:n})})},beforeStart:function(t,n){r&&Kg(!1),ub(0,function(){var r=e().onBeforeDragStart;r&&r(db(t,n))})},start:function(i,s){r&&Kg(!1);var o=db(i,s);r={mode:s,lastCritical:i,lastLocation:o.source,lastCombine:null},n.add(function(){ub(0,function(){return hb(e().onDragStart,o,t,ev)})})},update:function(i,s){var o=Nv(s),a=Iv(s);r||Kg(!1);var l=!function(e,t){if(e===t)return!0;var n=e.draggable.id===t.draggable.id&&e.draggable.droppableId===t.draggable.droppableId&&e.draggable.type===t.draggable.type&&e.draggable.index===t.draggable.index,r=e.droppable.id===t.droppable.id&&e.droppable.type===t.droppable.type;return n&&r}(i,r.lastCritical);l&&(r.lastCritical=i);var c,u,d=(u=o,!(null==(c=r.lastLocation)&&null==u||null!=c&&null!=u&&c.droppableId===u.droppableId&&c.index===u.index));d&&(r.lastLocation=o);var h=!function(e,t){return null==e&&null==t||null!=e&&null!=t&&e.draggableId===t.draggableId&&e.droppableId===t.droppableId}(r.lastCombine,a);if(h&&(r.lastCombine=a),l||d||h){var f=Im({},db(i,r.mode),{combine:a,destination:o});n.add(function(){ub(0,function(){return hb(e().onDragUpdate,f,t,tv)})})}},flush:function(){r||Kg(!1),n.flush()},drop:i,abort:function(){if(r){var e=Im({},db(r.lastCritical,r.mode),{combine:null,destination:null,reason:"CANCEL"});i(e)}}}}(e,t);return function(e){return function(t){return function(r){if("BEFORE_INITIAL_CAPTURE"!==r.type){if("INITIAL_PUBLISH"===r.type){var i=r.payload.critical;return n.beforeStart(i,r.payload.movementMode),t(r),void n.start(i,r.payload.movementMode)}if("DROP_COMPLETE"===r.type){var s=r.payload.completed.result;return n.flush(),t(r),void n.drop(s)}if(t(r),"FLUSH"!==r.type){var o=e.getState();"DRAGGING"===o.phase&&n.update(o.critical,o.impact)}else n.abort()}else n.beforeCapture(r.payload.draggableId,r.payload.movementMode)}}}},pb=function(e){return function(t){return function(n){if("DROP_ANIMATION_FINISHED"===n.type){var r=e.getState();"DROP_ANIMATING"!==r.phase&&Kg(!1),e.dispatch(qy({completed:r.completed}))}else t(n)}}},mb=function(e){var t=null,n=null;return function(r){return function(i){if("FLUSH"!==i.type&&"DROP_COMPLETE"!==i.type&&"DROP_ANIMATION_FINISHED"!==i.type||(n&&(cancelAnimationFrame(n),n=null),t&&(t(),t=null)),r(i),"DROP_ANIMATE"===i.type){var s={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){"DROP_ANIMATING"===e.getState().phase&&e.dispatch({type:"DROP_ANIMATION_FINISHED",payload:null})}};n=requestAnimationFrame(function(){n=null,t=Hg(window,[s])})}}}},gb=function(e){return function(t){return function(n){if(t(n),"PUBLISH_WHILE_DRAGGING"===n.type){var r=e.getState();"DROP_PENDING"===r.phase&&(r.isWaiting||e.dispatch(Gy({reason:r.reason})))}}}},vb=Om,yb=function(e){var t,n=e.dimensionMarshal,r=e.focusMarshal,i=e.styleMarshal,s=e.getResponders,o=e.announce,a=e.autoScroller;return Rm(Ly,vb(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){var n=e.apply(void 0,arguments),r=function(){throw new Error(_m(15))},i={getState:n.getState,dispatch:function(){return r.apply(void 0,arguments)}},s=t.map(function(e){return e(i)});return r=Om.apply(void 0,s)(n.dispatch),d(d({},n),{},{dispatch:r})}}}((t=i,function(){return function(e){return function(n){"INITIAL_PUBLISH"===n.type&&t.dragging(),"DROP_ANIMATE"===n.type&&t.dropping(n.payload.completed.result.reason),"FLUSH"!==n.type&&"DROP_COMPLETE"!==n.type||t.resting(),e(n)}}}),function(e){return function(){return function(t){return function(n){"DROP_COMPLETE"!==n.type&&"FLUSH"!==n.type&&"DROP_ANIMATE"!==n.type||e.stopPublishing(),t(n)}}}}(n),function(e){return function(t){var n=t.getState,r=t.dispatch;return function(t){return function(i){if("LIFT"===i.type){var s=i.payload,o=s.id,a=s.clientSelection,l=s.movementMode,c=n();"DROP_ANIMATING"===c.phase&&r(qy({completed:c.completed})),"IDLE"!==n().phase&&Kg(!1),r({type:"FLUSH",payload:null}),r({type:"BEFORE_INITIAL_CAPTURE",payload:{draggableId:o,movementMode:l}});var u={draggableId:o,scrollOptions:{shouldPublishImmediately:"SNAP"===l}},d=e.startPublishing(u),h=d.critical,f=d.dimensions,p=d.viewport;r({type:"INITIAL_PUBLISH",payload:{critical:h,dimensions:f,clientSelection:a,movementMode:l,viewport:p}})}else t(i)}}}}(n),sb,pb,mb,gb,function(e){return function(t){return function(n){return function(r){if(function(e){return"DROP_COMPLETE"===e.type||"DROP_ANIMATE"===e.type||"FLUSH"===e.type}(r))return e.stop(),void n(r);if("INITIAL_PUBLISH"===r.type){n(r);var i=t.getState();return"DRAGGING"!==i.phase&&Kg(!1),void e.start(i)}n(r),e.scroll(t.getState())}}}}(a),lb,function(e){var t=!1;return function(){return function(n){return function(r){if("INITIAL_PUBLISH"===r.type)return t=!0,e.tryRecordFocus(r.payload.critical.draggable.id),n(r),void e.tryRestoreFocusRecorded();if(n(r),t){if("FLUSH"===r.type)return t=!1,void e.tryRestoreFocusRecorded();if("DROP_COMPLETE"===r.type){t=!1;var i=r.payload.completed.result;i.combine&&e.tryShiftRecord(i.draggableId,i.combine.draggableId),e.tryRestoreFocusRecorded()}}}}}}(r),fb(s,o))))};var bb=function(e){var t=e.scrollHeight,n=e.scrollWidth,r=e.height,i=e.width,s=sv({x:n,y:t},{x:i,y:r});return{x:Math.max(0,s.x),y:Math.max(0,s.y)}},wb=function(){var e=document.documentElement;return e||Kg(!1),e},xb=function(){var e=wb();return bb({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,width:e.clientWidth,height:e.clientHeight})},kb=function(e){var t=e.critical,n=e.scrollOptions,r=e.registry;Iy();var i=function(){var e=ob(),t=xb(),n=e.y,r=e.x,i=wb(),s=i.clientWidth,o=i.clientHeight;return{frame:Ig({top:n,left:r,right:r+s,bottom:n+o}),scroll:{initial:e,current:e,max:t,diff:{value:rv,displacement:rv}}}}(),s=i.scroll.current,o=t.droppable,a=r.droppable.getAllByType(o.type).map(function(e){return e.callbacks.getDimensionAndWatchScroll(s,n)}),l=r.draggable.getAllByType(t.draggable.type).map(function(e){return e.getDimension(s)}),c={draggables:kv(l),droppables:xv(a)};return _y(),{dimensions:c,critical:t,viewport:i}};function Sb(e,t,n){return n.descriptor.id!==t.id&&(n.descriptor.type===t.type&&"virtual"===e.droppable.getById(n.descriptor.droppableId).descriptor.mode)}var Eb=function(e,t){var n=null,r=function(e){var t=e.registry,n=e.callbacks,r={additions:{},removals:{},modified:{}},i=null,s=function(){i||(n.collectionStarting(),i=requestAnimationFrame(function(){i=null,Iy();var e=r,s=e.additions,o=e.removals,a=e.modified,l=Object.keys(s).map(function(e){return t.draggable.getById(e).getDimension(rv)}).sort(function(e,t){return e.descriptor.index-t.descriptor.index}),c=Object.keys(a).map(function(e){return{droppableId:e,scroll:t.droppable.getById(e).callbacks.getScrollWhileDragging()}}),u={additions:l,removals:Object.keys(o),modified:c};r={additions:{},removals:{},modified:{}},_y(),n.publish(u)}))};return{add:function(e){var t=e.descriptor.id;r.additions[t]=e,r.modified[e.descriptor.droppableId]=!0,r.removals[t]&&delete r.removals[t],s()},remove:function(e){var t=e.descriptor;r.removals[t.id]=!0,r.modified[t.droppableId]=!0,r.additions[t.id]&&delete r.additions[t.id],s()},stop:function(){i&&(cancelAnimationFrame(i),i=null,r={additions:{},removals:{},modified:{}})}}}({callbacks:{publish:t.publishWhileDragging,collectionStarting:t.collectionStarting},registry:e}),i=function(t){n||Kg(!1);var i=n.critical.draggable;"ADDITION"===t.type&&Sb(e,i,t.value)&&r.add(t.value),"REMOVAL"===t.type&&Sb(e,i,t.value)&&r.remove(t.value)},s={updateDroppableIsEnabled:function(r,i){e.droppable.exists(r)||Kg(!1),n&&t.updateDroppableIsEnabled({id:r,isEnabled:i})},updateDroppableIsCombineEnabled:function(r,i){n&&(e.droppable.exists(r)||Kg(!1),t.updateDroppableIsCombineEnabled({id:r,isCombineEnabled:i}))},scrollDroppable:function(t,r){n&&e.droppable.getById(t).callbacks.scroll(r)},updateDroppableScroll:function(r,i){n&&(e.droppable.exists(r)||Kg(!1),t.updateDroppableScroll({id:r,newScroll:i}))},startPublishing:function(t){n&&Kg(!1);var r=e.draggable.getById(t.draggableId),s=e.droppable.getById(r.descriptor.droppableId),o={draggable:r.descriptor,droppable:s.descriptor},a=e.subscribe(i);return n={critical:o,unsubscribe:a},kb({critical:o,registry:e,scrollOptions:t.scrollOptions})},stopPublishing:function(){if(n){r.stop();var t=n.critical.droppable;e.droppable.getAllByType(t.type).forEach(function(e){return e.callbacks.dragStopped()}),n.unsubscribe(),n=null}}};return s},Cb=function(e,t){return"IDLE"===e.phase||"DROP_ANIMATING"===e.phase&&(e.completed.result.draggableId!==t&&"DROP"===e.completed.result.reason)},Nb=function(e){window.scrollBy(e.x,e.y)},Ib=Bg(function(e){return Sv(e).filter(function(e){return!!e.isEnabled&&!!e.frame})}),_b=function(e){var t=e.center,n=e.destination,r=e.droppables;if(n){var i=r[n];return i.frame?i:null}var s=function(e,t){var n=bv(Ib(t),function(t){return t.frame||Kg(!1),my(t.frame.pageMarginBox)(e)});return n}(t,r);return s},Tb=.25,Ab=.05,Db=28,Pb=function(e){return Math.pow(e,2)},Rb={stopDampeningAt:1200,accelerateAt:360},Lb=function(e){var t=e.startOfRange,n=e.endOfRange,r=e.current,i=n-t;return 0===i?0:(r-t)/i},jb=Rb.accelerateAt,Ob=Rb.stopDampeningAt,Mb=function(e){var t=e.distanceToEdge,n=e.thresholds,r=e.dragStartTime,i=e.shouldUseTimeDampening,s=function(e,t){if(e>t.startScrollingFrom)return 0;if(e<=t.maxScrollValueAt)return Db;if(e===t.startScrollingFrom)return 1;var n=Lb({startOfRange:t.maxScrollValueAt,endOfRange:t.startScrollingFrom,current:e}),r=Db*Pb(1-n);return Math.ceil(r)}(t,n);return 0===s?0:i?Math.max(function(e,t){var n=t,r=Ob,i=Date.now()-n;if(i>=Ob)return e;if(i<jb)return 1;var s=Lb({startOfRange:jb,endOfRange:r,current:i}),o=e*Pb(s);return Math.ceil(o)}(s,r),1):s},Fb=function(e){var t=e.container,n=e.distanceToEdges,r=e.dragStartTime,i=e.axis,s=e.shouldUseTimeDampening,o=function(e,t){return{startScrollingFrom:e[t.size]*Tb,maxScrollValueAt:e[t.size]*Ab}}(t,i);return n[i.end]<n[i.start]?Mb({distanceToEdge:n[i.end],thresholds:o,dragStartTime:r,shouldUseTimeDampening:s}):-1*Mb({distanceToEdge:n[i.start],thresholds:o,dragStartTime:r,shouldUseTimeDampening:s})},Ub=dv(function(e){return 0===e?0:e}),Bb=function(e){var t=e.dragStartTime,n=e.container,r=e.subject,i=e.center,s=e.shouldUseTimeDampening,o={top:i.y-n.top,right:n.right-i.x,bottom:n.bottom-i.y,left:i.x-n.left},a=Fb({container:n,distanceToEdges:o,dragStartTime:t,axis:Ov,shouldUseTimeDampening:s}),l=Fb({container:n,distanceToEdges:o,dragStartTime:t,axis:Mv,shouldUseTimeDampening:s}),c=Ub({x:l,y:a});if(ov(c,rv))return null;var u=function(e){var t=e.container,n=e.subject,r=e.proposedScroll,i=n.height>t.height,s=n.width>t.width;return s||i?s&&i?null:{x:s?0:r.x,y:i?0:r.y}:r}({container:n,subject:r,proposedScroll:c});return u?ov(u,rv)?null:u:null},Vb=dv(function(e){return 0===e?0:e>0?1:-1}),zb=function(){var e=function(e,t){return e<0?e:e>t?e-t:0};return function(t){var n=t.current,r=t.max,i=t.change,s=iv(n,i),o={x:e(s.x,r.x),y:e(s.y,r.y)};return ov(o,rv)?null:o}}(),Wb=function(e){var t=e.max,n=e.current,r=e.change,i={x:Math.max(n.x,t.x),y:Math.max(n.y,t.y)},s=Vb(r),o=zb({max:i,current:n,change:s});return!o||(0!==s.x&&0===o.x||0!==s.y&&0===o.y)},Hb=function(e,t){return Wb({current:e.scroll.current,max:e.scroll.max,change:t})},qb=function(e,t){var n=e.frame;return!!n&&Wb({current:n.scroll.current,max:n.scroll.max,change:t})},Gb=function(e){var t=e.state,n=e.dragStartTime,r=e.shouldUseTimeDampening,i=e.scrollWindow,s=e.scrollDroppable,o=t.current.page.borderBoxCenter,a=t.dimensions.draggables[t.critical.draggable.id].page.marginBox;if(t.isWindowScrollAllowed){var l=function(e){var t=e.viewport,n=e.subject,r=e.center,i=e.dragStartTime,s=e.shouldUseTimeDampening,o=Bb({dragStartTime:i,container:t.frame,subject:n,center:r,shouldUseTimeDampening:s});return o&&Hb(t,o)?o:null}({dragStartTime:n,viewport:t.viewport,subject:a,center:o,shouldUseTimeDampening:r});if(l)return void i(l)}var c=_b({center:o,destination:hy(t.impact),droppables:t.dimensions.droppables});if(c){var u=function(e){var t=e.droppable,n=e.subject,r=e.center,i=e.dragStartTime,s=e.shouldUseTimeDampening,o=t.frame;if(!o)return null;var a=Bb({dragStartTime:i,container:o.pageMarginBox,subject:n,center:r,shouldUseTimeDampening:s});return a&&qb(t,a)?a:null}({dragStartTime:n,droppable:c,subject:a,center:o,shouldUseTimeDampening:r});u&&s(c.descriptor.id,u)}},Kb=function(e){var t=e.move,n=e.scrollDroppable,r=e.scrollWindow,i=function(e,t){if(!qb(e,t))return t;var r=function(e,t){var n=e.frame;return n&&qb(e,t)?zb({current:n.scroll.current,max:n.scroll.max,change:t}):null}(e,t);if(!r)return n(e.descriptor.id,t),null;var i=sv(t,r);return n(e.descriptor.id,i),sv(t,i)},s=function(e,t,n){if(!e)return n;if(!Hb(t,n))return n;var i=function(e,t){if(!Hb(e,t))return null;var n=e.scroll.max,r=e.scroll.current;return zb({current:r,max:n,change:t})}(t,n);if(!i)return r(n),null;var s=sv(n,i);return r(s),sv(n,s)};return function(e){var n=e.scrollJumpRequest;if(n){var r=hy(e.impact);r||Kg(!1);var o=i(e.dimensions.droppables[r],n);if(o){var a=e.viewport,l=s(e.isWindowScrollAllowed,a,o);l&&function(e,n){var r=iv(e.current.client.selection,n);t({client:r})}(e,l)}}}},Qb=function(e){var t=e.scrollDroppable,n=e.scrollWindow,r=e.move,i=function(e){var t=e.scrollWindow,n=e.scrollDroppable,r=Vg(t),i=Vg(n),s=null,o=function(e){s||Kg(!1);var t=s,n=t.shouldUseTimeDampening,o=t.dragStartTime;Gb({state:e,scrollWindow:r,scrollDroppable:i,dragStartTime:o,shouldUseTimeDampening:n})};return{start:function(e){Iy(),s&&Kg(!1);var t=Date.now(),n=!1,r=function(){n=!0};Gb({state:e,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:r,scrollDroppable:r}),s={dragStartTime:t,shouldUseTimeDampening:n},_y(),n&&o(e)},stop:function(){s&&(r.cancel(),i.cancel(),s=null)},scroll:o}}({scrollWindow:n,scrollDroppable:t}),s=Kb({move:r,scrollWindow:n,scrollDroppable:t});return{scroll:function(e){"DRAGGING"===e.phase&&("FLUID"!==e.movementMode?e.scrollJumpRequest&&s(e):i.scroll(e))},start:i.start,stop:i.stop}},Yb="data-rbd",Jb=function(){var e=Yb+"-drag-handle";return{base:e,draggableId:e+"-draggable-id",contextId:e+"-context-id"}}(),$b=function(){var e=Yb+"-draggable";return{base:e,contextId:e+"-context-id",id:e+"-id"}}(),Xb=function(){var e=Yb+"-droppable";return{base:e,contextId:e+"-context-id",id:e+"-id"}}(),Zb={contextId:Yb+"-scroll-container-context-id"},ew=function(e,t){return e.map(function(e){var n=e.styles[t];return n?e.selector+" { "+n+" }":""}).join(" ")},tw="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement?r.useLayoutEffect:r.useEffect,nw=function(){var e=document.querySelector("head");return e||Kg(!1),e},rw=function(e){var t=document.createElement("style");return e&&t.setAttribute("nonce",e),t.type="text/css",t};function iw(e,t){var n=Eg(function(){return function(e){var t,n=(t=e,function(e){return"["+e+'="'+t+'"]'}),r=function(){var e="\n      cursor: -webkit-grab;\n      cursor: grab;\n    ";return{selector:n(Jb.contextId),styles:{always:"\n          -webkit-touch-callout: none;\n          -webkit-tap-highlight-color: rgba(0,0,0,0);\n          touch-action: manipulation;\n        ",resting:e,dragging:"pointer-events: none;",dropAnimating:e}}}(),i=[function(){var e="\n      transition: "+Xy.outOfTheWay+";\n    ";return{selector:n($b.contextId),styles:{dragging:e,dropAnimating:e,userCancel:e}}}(),r,{selector:n(Xb.contextId),styles:{always:"overflow-anchor: none;"}},{selector:"body",styles:{dragging:"\n        cursor: grabbing;\n        cursor: -webkit-grabbing;\n        user-select: none;\n        -webkit-user-select: none;\n        -moz-user-select: none;\n        -ms-user-select: none;\n        overflow-anchor: none;\n      "}}];return{always:ew(i,"always"),resting:ew(i,"resting"),dragging:ew(i,"dragging"),dropAnimating:ew(i,"dropAnimating"),userCancel:ew(i,"userCancel")}}(e)},[e]),i=(0,r.useRef)(null),s=(0,r.useRef)(null),o=Cg(Bg(function(e){var t=s.current;t||Kg(!1),t.textContent=e}),[]),a=Cg(function(e){var t=i.current;t||Kg(!1),t.textContent=e},[]);tw(function(){(i.current||s.current)&&Kg(!1);var r=rw(t),l=rw(t);return i.current=r,s.current=l,r.setAttribute(Yb+"-always",e),l.setAttribute(Yb+"-dynamic",e),nw().appendChild(r),nw().appendChild(l),a(n.always),o(n.resting),function(){var e=function(e){var t=e.current;t||Kg(!1),nw().removeChild(t),e.current=null};e(i),e(s)}},[t,a,o,n.always,n.resting,e]);var l=Cg(function(){return o(n.dragging)},[o,n.dragging]),c=Cg(function(e){o("DROP"!==e?n.userCancel:n.dropAnimating)},[o,n.dropAnimating,n.userCancel]),u=Cg(function(){s.current&&o(n.resting)},[o,n.resting]);return Eg(function(){return{dragging:l,dropping:c,resting:u}},[l,c,u])}var sw=function(e){return e&&e.ownerDocument?e.ownerDocument.defaultView:window};function ow(e){return e instanceof sw(e).HTMLElement}function aw(e,t){var n="["+Jb.contextId+'="'+e+'"]',r=wv(document.querySelectorAll(n));if(!r.length)return null;var i=bv(r,function(e){return e.getAttribute(Jb.draggableId)===t});return i&&ow(i)?i:null}function lw(){var e={draggables:{},droppables:{}},t=[];function n(e){t.length&&t.forEach(function(t){return t(e)})}function r(t){return e.draggables[t]||null}function i(t){return e.droppables[t]||null}return{draggable:{register:function(t){e.draggables[t.descriptor.id]=t,n({type:"ADDITION",value:t})},update:function(t,n){var r=e.draggables[n.descriptor.id];r&&r.uniqueId===t.uniqueId&&(delete e.draggables[n.descriptor.id],e.draggables[t.descriptor.id]=t)},unregister:function(t){var i=t.descriptor.id,s=r(i);s&&t.uniqueId===s.uniqueId&&(delete e.draggables[i],n({type:"REMOVAL",value:t}))},getById:function(e){var t=r(e);return t||Kg(!1),t},findById:r,exists:function(e){return Boolean(r(e))},getAllByType:function(t){return vv(e.draggables).filter(function(e){return e.descriptor.type===t})}},droppable:{register:function(t){e.droppables[t.descriptor.id]=t},unregister:function(t){var n=i(t.descriptor.id);n&&t.uniqueId===n.uniqueId&&delete e.droppables[t.descriptor.id]},getById:function(e){var t=i(e);return t||Kg(!1),t},findById:i,exists:function(e){return Boolean(i(e))},getAllByType:function(t){return vv(e.droppables).filter(function(e){return e.descriptor.type===t})}},subscribe:function(e){return t.push(e),function(){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}},clean:function(){e.draggables={},e.droppables={},t.length=0}}}var cw=r.createContext(null),uw=function(){var e=document.body;return e||Kg(!1),e},dw={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"};var hw=0,fw={separator:"::"};function pw(e,t){return void 0===t&&(t=fw),Eg(function(){return""+e+t.separator+hw++},[t.separator,e])}var mw=r.createContext(null);function gw(e){0}function vw(e,t){gw()}function yw(){vw()}function bw(e){var t=(0,r.useRef)(e);return(0,r.useEffect)(function(){t.current=e}),t}var ww,xw=((ww={})[13]=!0,ww[9]=!0,ww),kw=function(e){xw[e.keyCode]&&e.preventDefault()},Sw=function(){var e="visibilitychange";return"undefined"===typeof document?e:bv([e,"ms"+e,"webkit"+e,"moz"+e,"o"+e],function(e){return"on"+e in document})||e}();var Ew,Cw={type:"IDLE"};function Nw(e){var t=e.cancel,n=e.completed,r=e.getPhase,i=e.setPhase;return[{eventName:"mousemove",fn:function(e){var t=e.button,n=e.clientX,s=e.clientY;if(0===t){var o={x:n,y:s},a=r();if("DRAGGING"===a.type)return e.preventDefault(),void a.actions.move(o);"PENDING"!==a.type&&Kg(!1);var l=a.point;if(c=l,u=o,Math.abs(u.x-c.x)>=5||Math.abs(u.y-c.y)>=5){var c,u;e.preventDefault();var d=a.actions.fluidLift(o);i({type:"DRAGGING",actions:d})}}}},{eventName:"mouseup",fn:function(e){var i=r();"DRAGGING"===i.type?(e.preventDefault(),i.actions.drop({shouldBlockNextClick:!0}),n()):t()}},{eventName:"mousedown",fn:function(e){"DRAGGING"===r().type&&e.preventDefault(),t()}},{eventName:"keydown",fn:function(e){if("PENDING"!==r().type)return 27===e.keyCode?(e.preventDefault(),void t()):void kw(e);t()}},{eventName:"resize",fn:t},{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(){"PENDING"===r().type&&t()}},{eventName:"webkitmouseforcedown",fn:function(e){var n=r();"IDLE"===n.type&&Kg(!1),n.actions.shouldRespectForcePress()?t():e.preventDefault()}},{eventName:Sw,fn:t}]}function Iw(){}var _w=((Ew={})[34]=!0,Ew[33]=!0,Ew[36]=!0,Ew[35]=!0,Ew);function Tw(e,t){function n(){t(),e.cancel()}return[{eventName:"keydown",fn:function(r){return 27===r.keyCode?(r.preventDefault(),void n()):32===r.keyCode?(r.preventDefault(),t(),void e.drop()):40===r.keyCode?(r.preventDefault(),void e.moveDown()):38===r.keyCode?(r.preventDefault(),void e.moveUp()):39===r.keyCode?(r.preventDefault(),void e.moveRight()):37===r.keyCode?(r.preventDefault(),void e.moveLeft()):void(_w[r.keyCode]?r.preventDefault():kw(r))}},{eventName:"mousedown",fn:n},{eventName:"mouseup",fn:n},{eventName:"click",fn:n},{eventName:"touchstart",fn:n},{eventName:"resize",fn:n},{eventName:"wheel",fn:n,options:{passive:!0}},{eventName:Sw,fn:n}]}var Aw={type:"IDLE"};var Dw={input:!0,button:!0,textarea:!0,select:!0,option:!0,optgroup:!0,video:!0,audio:!0};function Pw(e,t){if(null==t)return!1;if(Boolean(Dw[t.tagName.toLowerCase()]))return!0;var n=t.getAttribute("contenteditable");return"true"===n||""===n||t!==e&&Pw(e,t.parentElement)}function Rw(e,t){var n=t.target;return!!ow(n)&&Pw(e,n)}var Lw=function(e){return Ig(e.getBoundingClientRect()).center};var jw=function(){var e="matches";return"undefined"===typeof document?e:bv([e,"msMatchesSelector","webkitMatchesSelector"],function(e){return e in Element.prototype})||e}();function Ow(e,t){return null==e?null:e[jw](t)?e:Ow(e.parentElement,t)}function Mw(e,t){return e.closest?e.closest(t):Ow(e,t)}function Fw(e,t){var n,r=t.target;if(!((n=r)instanceof sw(n).Element))return null;var i=function(e){return"["+Jb.contextId+'="'+e+'"]'}(e),s=Mw(r,i);return s&&ow(s)?s:null}function Uw(e){e.preventDefault()}function Bw(e){var t=e.expected,n=e.phase,r=e.isLockActive;e.shouldWarn;return!!r()&&t===n}function Vw(e){var t=e.lockAPI,n=e.store,r=e.registry,i=e.draggableId;if(t.isClaimed())return!1;var s=r.draggable.findById(i);return!!s&&(!!s.options.isEnabled&&!!Cb(n.getState(),i))}function zw(e){var t=e.lockAPI,n=e.contextId,r=e.store,i=e.registry,s=e.draggableId,o=e.forceSensorStop,a=e.sourceEvent;if(!Vw({lockAPI:t,store:r,registry:i,draggableId:s}))return null;var l=i.draggable.getById(s),c=function(e,t){var n="["+$b.contextId+'="'+e+'"]',r=bv(wv(document.querySelectorAll(n)),function(e){return e.getAttribute($b.id)===t});return r&&ow(r)?r:null}(n,l.descriptor.id);if(!c)return null;if(a&&!l.options.canDragInteractiveElements&&Rw(c,a))return null;var u=t.claim(o||Wg),d="PRE_DRAG";function h(){return l.options.shouldRespectForcePress}function f(){return t.isActive(u)}var p=function(e,t){Bw({expected:e,phase:d,isLockActive:f,shouldWarn:!0})&&r.dispatch(t())}.bind(null,"DRAGGING");function m(e){function n(){t.release(),d="COMPLETED"}function i(t,i){if(void 0===i&&(i={shouldBlockNextClick:!1}),e.cleanup(),i.shouldBlockNextClick){var s=Hg(window,[{eventName:"click",fn:Uw,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(s)}n(),r.dispatch(Gy({reason:t}))}return"PRE_DRAG"!==d&&(n(),"PRE_DRAG"!==d&&Kg(!1)),r.dispatch(function(e){return{type:"LIFT",payload:e}}(e.liftActionArgs)),d="DRAGGING",Im({isActive:function(){return Bw({expected:"DRAGGING",phase:d,isLockActive:f,shouldWarn:!1})},shouldRespectForcePress:h,drop:function(e){return i("DROP",e)},cancel:function(e){return i("CANCEL",e)}},e.actions)}var g={isActive:function(){return Bw({expected:"PRE_DRAG",phase:d,isLockActive:f,shouldWarn:!1})},shouldRespectForcePress:h,fluidLift:function(e){var t=Vg(function(e){p(function(){return By({client:e})})});return Im({},m({liftActionArgs:{id:s,clientSelection:e,movementMode:"FLUID"},cleanup:function(){return t.cancel()},actions:{move:t}}),{move:t})},snapLift:function(){var e={moveUp:function(){return p(Vy)},moveRight:function(){return p(Wy)},moveDown:function(){return p(zy)},moveLeft:function(){return p(Hy)}};return m({liftActionArgs:{id:s,clientSelection:Lw(c),movementMode:"SNAP"},cleanup:Wg,actions:e})},abort:function(){Bw({expected:"PRE_DRAG",phase:d,isLockActive:f,shouldWarn:!0})&&t.release()}};return g}var Ww=[function(e){var t=(0,r.useRef)(Cw),n=(0,r.useRef)(Wg),i=Eg(function(){return{eventName:"mousedown",fn:function(t){if(!t.defaultPrevented&&0===t.button&&!(t.ctrlKey||t.metaKey||t.shiftKey||t.altKey)){var r=e.findClosestDraggableId(t);if(r){var i=e.tryGetLock(r,a,{sourceEvent:t});if(i){t.preventDefault();var s={x:t.clientX,y:t.clientY};n.current(),u(i,s)}}}}}},[e]),s=Eg(function(){return{eventName:"webkitmouseforcewillbegin",fn:function(t){if(!t.defaultPrevented){var n=e.findClosestDraggableId(t);if(n){var r=e.findOptionsForDraggable(n);r&&(r.shouldRespectForcePress||e.canGetLock(n)&&t.preventDefault())}}}}},[e]),o=Cg(function(){n.current=Hg(window,[s,i],{passive:!1,capture:!0})},[s,i]),a=Cg(function(){"IDLE"!==t.current.type&&(t.current=Cw,n.current(),o())},[o]),l=Cg(function(){var e=t.current;a(),"DRAGGING"===e.type&&e.actions.cancel({shouldBlockNextClick:!0}),"PENDING"===e.type&&e.actions.abort()},[a]),c=Cg(function(){var e=Nw({cancel:l,completed:a,getPhase:function(){return t.current},setPhase:function(e){t.current=e}});n.current=Hg(window,e,{capture:!0,passive:!1})},[l,a]),u=Cg(function(e,n){"IDLE"!==t.current.type&&Kg(!1),t.current={type:"PENDING",point:n,actions:e},c()},[c]);tw(function(){return o(),function(){n.current()}},[o])},function(e){var t=(0,r.useRef)(Iw),n=Eg(function(){return{eventName:"keydown",fn:function(n){if(!n.defaultPrevented&&32===n.keyCode){var r=e.findClosestDraggableId(n);if(r){var s=e.tryGetLock(r,l,{sourceEvent:n});if(s){n.preventDefault();var o=!0,a=s.snapLift();t.current(),t.current=Hg(window,Tw(a,l),{capture:!0,passive:!1})}}}function l(){o||Kg(!1),o=!1,t.current(),i()}}}},[e]),i=Cg(function(){t.current=Hg(window,[n],{passive:!1,capture:!0})},[n]);tw(function(){return i(),function(){t.current()}},[i])},function(e){var t=(0,r.useRef)(Aw),n=(0,r.useRef)(Wg),i=Cg(function(){return t.current},[]),s=Cg(function(e){t.current=e},[]),o=Eg(function(){return{eventName:"touchstart",fn:function(t){if(!t.defaultPrevented){var r=e.findClosestDraggableId(t);if(r){var i=e.tryGetLock(r,l,{sourceEvent:t});if(i){var s=t.touches[0],o={x:s.clientX,y:s.clientY};n.current(),h(i,o)}}}}}},[e]),a=Cg(function(){n.current=Hg(window,[o],{capture:!0,passive:!1})},[o]),l=Cg(function(){var e=t.current;"IDLE"!==e.type&&("PENDING"===e.type&&clearTimeout(e.longPressTimerId),s(Aw),n.current(),a())},[a,s]),c=Cg(function(){var e=t.current;l(),"DRAGGING"===e.type&&e.actions.cancel({shouldBlockNextClick:!0}),"PENDING"===e.type&&e.actions.abort()},[l]),u=Cg(function(){var e={capture:!0,passive:!1},t={cancel:c,completed:l,getPhase:i},r=Hg(window,function(e){var t=e.cancel,n=e.completed,r=e.getPhase;return[{eventName:"touchmove",options:{capture:!1},fn:function(e){var n=r();if("DRAGGING"===n.type){n.hasMoved=!0;var i=e.touches[0],s={x:i.clientX,y:i.clientY};e.preventDefault(),n.actions.move(s)}else t()}},{eventName:"touchend",fn:function(e){var i=r();"DRAGGING"===i.type?(e.preventDefault(),i.actions.drop({shouldBlockNextClick:!0}),n()):t()}},{eventName:"touchcancel",fn:function(e){"DRAGGING"===r().type?(e.preventDefault(),t()):t()}},{eventName:"touchforcechange",fn:function(e){var n=r();"IDLE"===n.type&&Kg(!1);var i=e.touches[0];if(i&&i.force>=.15){var s=n.actions.shouldRespectForcePress();if("PENDING"!==n.type)return s?n.hasMoved?void e.preventDefault():void t():void e.preventDefault();s&&t()}}},{eventName:Sw,fn:t}]}(t),e),s=Hg(window,function(e){var t=e.cancel,n=e.getPhase;return[{eventName:"orientationchange",fn:t},{eventName:"resize",fn:t},{eventName:"contextmenu",fn:function(e){e.preventDefault()}},{eventName:"keydown",fn:function(e){"DRAGGING"===n().type?(27===e.keyCode&&e.preventDefault(),t()):t()}},{eventName:Sw,fn:t}]}(t),e);n.current=function(){r(),s()}},[c,i,l]),d=Cg(function(){var e=i();"PENDING"!==e.type&&Kg(!1);var t=e.actions.fluidLift(e.point);s({type:"DRAGGING",actions:t,hasMoved:!1})},[i,s]),h=Cg(function(e,t){"IDLE"!==i().type&&Kg(!1);var n=setTimeout(d,120);s({type:"PENDING",point:t,actions:e,longPressTimerId:n}),u()},[u,i,s,d]);tw(function(){return a(),function(){n.current();var e=i();"PENDING"===e.type&&(clearTimeout(e.longPressTimerId),s(Aw))}},[i,a,s]),tw(function(){return Hg(window,[{eventName:"touchmove",fn:function(){},options:{capture:!1,passive:!1}}])},[])}];function Hw(e){var t=e.contextId,n=e.store,i=e.registry,s=e.customSensors,o=e.enableDefaultSensors,a=[].concat(o?Ww:[],s||[]),l=(0,r.useState)(function(){return function(){var e=null;function t(){e||Kg(!1),e=null}return{isClaimed:function(){return Boolean(e)},isActive:function(t){return t===e},claim:function(t){e&&Kg(!1);var n={abandon:t};return e=n,n},release:t,tryAbandon:function(){e&&(e.abandon(),t())}}}()})[0],c=Cg(function(e,t){e.isDragging&&!t.isDragging&&l.tryAbandon()},[l]);tw(function(){var e=n.getState();return n.subscribe(function(){var t=n.getState();c(e,t),e=t})},[l,n,c]),tw(function(){return l.tryAbandon},[l.tryAbandon]);var u=Cg(function(e){return Vw({lockAPI:l,registry:i,store:n,draggableId:e})},[l,i,n]),d=Cg(function(e,r,s){return zw({lockAPI:l,registry:i,contextId:t,store:n,draggableId:e,forceSensorStop:r,sourceEvent:s&&s.sourceEvent?s.sourceEvent:null})},[t,l,i,n]),h=Cg(function(e){return function(e,t){var n=Fw(e,t);return n?n.getAttribute(Jb.draggableId):null}(t,e)},[t]),f=Cg(function(e){var t=i.draggable.findById(e);return t?t.options:null},[i.draggable]),p=Cg(function(){l.isClaimed()&&(l.tryAbandon(),"IDLE"!==n.getState().phase&&n.dispatch({type:"FLUSH",payload:null}))},[l,n]),m=Cg(l.isClaimed,[l]),g=Eg(function(){return{canGetLock:u,tryGetLock:d,findClosestDraggableId:h,findOptionsForDraggable:f,tryReleaseLock:p,isLockClaimed:m}},[u,d,h,f,p,m]);gw();for(var v=0;v<a.length;v++)a[v](g)}function qw(e){return e.current||Kg(!1),e.current}function Gw(e){var t=e.contextId,n=e.setCallbacks,i=e.sensors,s=e.nonce,o=e.dragHandleUsageInstructions,a=(0,r.useRef)(null);yw();var l=bw(e),c=Cg(function(){return function(e){return{onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragEnd:e.onDragEnd,onDragUpdate:e.onDragUpdate}}(l.current)},[l]),u=function(e){var t=Eg(function(){return function(e){return"rbd-announcement-"+e}(e)},[e]),n=(0,r.useRef)(null);return(0,r.useEffect)(function(){var e=document.createElement("div");return n.current=e,e.id=t,e.setAttribute("aria-live","assertive"),e.setAttribute("aria-atomic","true"),Im(e.style,dw),uw().appendChild(e),function(){setTimeout(function(){var t=uw();t.contains(e)&&t.removeChild(e),e===n.current&&(n.current=null)})}},[t]),Cg(function(e){var t=n.current;t&&(t.textContent=e)},[])}(t),d=function(e){var t=e.contextId,n=e.text,i=pw("hidden-text",{separator:"-"}),s=Eg(function(){return"rbd-hidden-text-"+(e={contextId:t,uniqueId:i}).contextId+"-"+e.uniqueId;var e},[i,t]);return(0,r.useEffect)(function(){var e=document.createElement("div");return e.id=s,e.textContent=n,e.style.display="none",uw().appendChild(e),function(){var t=uw();t.contains(e)&&t.removeChild(e)}},[s,n]),s}({contextId:t,text:o}),h=iw(t,s),f=Cg(function(e){qw(a).dispatch(e)},[]),p=Eg(function(){return jm({publishWhileDragging:jy,updateDroppableScroll:My,updateDroppableIsEnabled:Fy,updateDroppableIsCombineEnabled:Uy,collectionStarting:Oy},f)},[f]),m=function(){var e=Eg(lw,[]);return(0,r.useEffect)(function(){return function(){requestAnimationFrame(e.clean)}},[e]),e}(),g=Eg(function(){return Eb(m,p)},[m,p]),v=Eg(function(){return Qb(Im({scrollWindow:Nb,scrollDroppable:g.scrollDroppable},jm({move:By},f)))},[g.scrollDroppable,f]),y=function(e){var t=(0,r.useRef)({}),n=(0,r.useRef)(null),i=(0,r.useRef)(null),s=(0,r.useRef)(!1),o=Cg(function(e,n){var r={id:e,focus:n};return t.current[e]=r,function(){var n=t.current;n[e]!==r&&delete n[e]}},[]),a=Cg(function(t){var n=aw(e,t);n&&n!==document.activeElement&&n.focus()},[e]),l=Cg(function(e,t){n.current===e&&(n.current=t)},[]),c=Cg(function(){i.current||s.current&&(i.current=requestAnimationFrame(function(){i.current=null;var e=n.current;e&&a(e)}))},[a]),u=Cg(function(e){n.current=null;var t=document.activeElement;t&&t.getAttribute(Jb.draggableId)===e&&(n.current=e)},[]);return tw(function(){return s.current=!0,function(){s.current=!1;var e=i.current;e&&cancelAnimationFrame(e)}},[]),Eg(function(){return{register:o,tryRecordFocus:u,tryRestoreFocusRecorded:c,tryShiftRecord:l}},[o,u,c,l])}(t),b=Eg(function(){return yb({announce:u,autoScroller:v,dimensionMarshal:g,focusMarshal:y,getResponders:c,styleMarshal:h})},[u,v,g,y,c,h]);a.current=b;var w=Cg(function(){var e=qw(a);"IDLE"!==e.getState().phase&&e.dispatch({type:"FLUSH",payload:null})},[]),x=Cg(function(){var e=qw(a).getState();return e.isDragging||"DROP_ANIMATING"===e.phase},[]);n(Eg(function(){return{isDragging:x,tryAbort:w}},[x,w]));var k=Cg(function(e){return Cb(qw(a).getState(),e)},[]),S=Cg(function(){return py(qw(a).getState())},[]),E=Eg(function(){return{marshal:g,focus:y,contextId:t,canLift:k,isMovementAllowed:S,dragHandleUsageInstructionsId:d,registry:m}},[t,g,d,y,k,S,m]);return Hw({contextId:t,store:b,registry:m,customSensors:i,enableDefaultSensors:!1!==e.enableDefaultSensors}),(0,r.useEffect)(function(){return w},[w]),r.createElement(mw.Provider,{value:E},r.createElement(Wm,{context:cw,store:b},e.children))}var Kw=0;function Qw(e){var t=Eg(function(){return""+Kw++},[]),n=e.dragHandleUsageInstructions||Zg;return r.createElement(Qg,null,function(i){return r.createElement(Gw,{nonce:e.nonce,contextId:t,setCallbacks:i,dragHandleUsageInstructions:n,enableDefaultSensors:e.enableDefaultSensors,sensors:e.sensors,onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragUpdate:e.onDragUpdate,onDragEnd:e.onDragEnd},e.children)})}var Yw=function(e){return function(t){return e===t}},Jw=Yw("scroll"),$w=Yw("auto"),Xw=(Yw("visible"),function(e,t){return t(e.overflowX)||t(e.overflowY)}),Zw=function e(t){return null==t||t===document.body||t===document.documentElement?null:function(e){var t=window.getComputedStyle(e),n={overflowX:t.overflowX,overflowY:t.overflowY};return Xw(n,Jw)||Xw(n,$w)}(t)?t:e(t.parentElement)},ex=function(e){return{x:e.scrollLeft,y:e.scrollTop}},tx=function e(t){return!!t&&("fixed"===window.getComputedStyle(t).position||e(t.parentElement))},nx=function(e){return{closestScrollable:Zw(e),isFixedOnPage:tx(e)}},rx=function(e){var t=e.ref,n=e.descriptor,r=e.env,i=e.windowScroll,s=e.direction,o=e.isDropDisabled,a=e.isCombineEnabled,l=e.shouldClipSubject,c=r.closestScrollable,u=function(e,t){var n=Og(e);if(!t)return n;if(e!==t)return n;var r=n.paddingBox.top-t.scrollTop,i=n.paddingBox.left-t.scrollLeft,s=r+t.scrollHeight,o=i+t.scrollWidth,a=_g({top:r,right:o,bottom:s,left:i},n.border);return Dg({borderBox:a,margin:n.margin,border:n.border,padding:n.padding})}(t,c),d=Lg(u,i),h=function(){if(!c)return null;var e=Og(c),t={scrollHeight:c.scrollHeight,scrollWidth:c.scrollWidth};return{client:e,page:Lg(e,i),scroll:ex(c),scrollSize:t,shouldClipSubject:l}}(),f=function(e){var t=e.descriptor,n=e.isEnabled,r=e.isCombineEnabled,i=e.isFixedOnPage,s=e.direction,o=e.client,a=e.page,l=e.closest,c=function(){if(!l)return null;var e=l.scrollSize,t=l.client,n=bb({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,height:t.paddingBox.height,width:t.paddingBox.width});return{pageMarginBox:l.page.marginBox,frameClient:t,scrollSize:e,shouldClipSubject:l.shouldClipSubject,scroll:{initial:l.scroll,current:l.scroll,max:n,diff:{value:rv,displacement:rv}}}}(),u="vertical"===s?Ov:Mv;return{descriptor:t,isCombineEnabled:r,isFixedOnPage:i,axis:u,isEnabled:n,client:o,page:a,frame:c,subject:mv({page:a,withPlaceholder:null,axis:u,frame:c})}}({descriptor:n,isEnabled:!o,isCombineEnabled:a,isFixedOnPage:r.isFixedOnPage,direction:s,client:u,page:d,closest:h});return f},ix={passive:!1},sx={passive:!0},ox=function(e){return e.shouldPublishImmediately?ix:sx};function ax(e){var t=(0,r.useContext)(e);return t||Kg(!1),t}var lx=function(e){return e&&e.env.closestScrollable||null};function cx(){}var ux={width:0,height:0,margin:{top:0,right:0,bottom:0,left:0}},dx=function(e){var t=e.isAnimatingOpenOnMount,n=e.placeholder,r=e.animate,i=function(e){var t=e.isAnimatingOpenOnMount,n=e.placeholder,r=e.animate;return t||"close"===r?ux:{height:n.client.borderBox.height,width:n.client.borderBox.width,margin:n.client.margin}}({isAnimatingOpenOnMount:t,placeholder:n,animate:r});return{display:n.display,boxSizing:"border-box",width:i.width,height:i.height,marginTop:i.margin.top,marginRight:i.margin.right,marginBottom:i.margin.bottom,marginLeft:i.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:"none"!==r?Xy.placeholder:null}};var hx=r.memo(function(e){var t=(0,r.useRef)(null),n=Cg(function(){t.current&&(clearTimeout(t.current),t.current=null)},[]),i=e.animate,s=e.onTransitionEnd,o=e.onClose,a=e.contextId,l=(0,r.useState)("open"===e.animate),c=l[0],u=l[1];(0,r.useEffect)(function(){return c?"open"!==i?(n(),u(!1),cx):t.current?cx:(t.current=setTimeout(function(){t.current=null,u(!1)}),n):cx},[i,c,n]);var d=Cg(function(e){"height"===e.propertyName&&(s(),"close"===i&&o())},[i,o,s]),h=dx({isAnimatingOpenOnMount:c,animate:e.animate,placeholder:e.placeholder});return r.createElement(e.placeholder.tagName,{style:h,"data-rbd-placeholder-context-id":a,onTransitionEnd:d,ref:e.innerRef})}),fx=r.createContext(null);var px=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).state={isVisible:Boolean(t.props.on),data:t.props.on,animate:t.props.shouldAnimate&&t.props.on?"open":"none"},t.onClose=function(){"close"===t.state.animate&&t.setState({isVisible:!1})},t}return Nm(t,e),t.getDerivedStateFromProps=function(e,t){return e.shouldAnimate?e.on?{isVisible:!0,data:e.on,animate:"open"}:t.isVisible?{isVisible:!0,data:t.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:Boolean(e.on),data:e.on,animate:"none"}},t.prototype.render=function(){if(!this.state.isVisible)return null;var e={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(e)},t}(r.PureComponent),mx=5e3,gx=4500,vx=function(e,t){return t?Xy.drop(t.duration):e?Xy.snap:Xy.fluid},yx=function(e,t){return e?t?Yy.drop:Yy.combining:null};function bx(e){return"DRAGGING"===e.type?function(e){var t=e.dimension.client,n=e.offset,r=e.combineWith,i=e.dropping,s=Boolean(r),o=function(e){return null!=e.forceShouldAnimate?e.forceShouldAnimate:"SNAP"===e.mode}(e),a=Boolean(i),l=a?tb(n,s):eb(n);return{position:"fixed",top:t.marginBox.top,left:t.marginBox.left,boxSizing:"border-box",width:t.borderBox.width,height:t.borderBox.height,transition:vx(o,i),transform:l,opacity:yx(s,a),zIndex:a?gx:mx,pointerEvents:"none"}}(e):{transform:eb((t=e).offset),transition:t.shouldAnimateDisplacement?null:"none"};var t}function wx(e){var t=pw("draggable"),n=e.descriptor,i=e.registry,s=e.getDraggableRef,o=e.canDragInteractiveElements,a=e.shouldRespectForcePress,l=e.isEnabled,c=Eg(function(){return{canDragInteractiveElements:o,shouldRespectForcePress:a,isEnabled:l}},[o,l,a]),u=Cg(function(e){var t=s();return t||Kg(!1),function(e,t,n){void 0===n&&(n=rv);var r=window.getComputedStyle(t),i=t.getBoundingClientRect(),s=jg(i,r),o=Lg(s,n);return{descriptor:e,placeholder:{client:s,tagName:t.tagName.toLowerCase(),display:r.display},displaceBy:{x:s.marginBox.width,y:s.marginBox.height},client:s,page:o}}(n,t,e)},[n,s]),d=Eg(function(){return{uniqueId:t,descriptor:n,options:c,getDimension:u}},[n,u,c,t]),h=(0,r.useRef)(d),f=(0,r.useRef)(!0);tw(function(){return i.draggable.register(h.current),function(){return i.draggable.unregister(h.current)}},[i.draggable]),tw(function(){if(f.current)f.current=!1;else{var e=h.current;h.current=d,i.draggable.update(d,e)}},[d,i.draggable])}function xx(e,t,n){vw()}function kx(e){e.preventDefault()}var Sx=function(e,t){return e===t},Ex=function(e){var t=e.combine,n=e.destination;return n?n.droppableId:t?t.droppableId:null};function Cx(e){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:e,combineWith:null}}var Nx={mapped:{type:"SECONDARY",offset:rv,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:Cx(null)}};var Ix=wg(function(){var e=function(){var e=Bg(function(e,t){return{x:e,y:t}}),t=Bg(function(e,t,n,r,i){return{isDragging:!0,isClone:t,isDropAnimating:Boolean(i),dropAnimation:i,mode:e,draggingOver:n,combineWith:r,combineTargetFor:null}}),n=Bg(function(e,n,r,i,s,o,a){return{mapped:{type:"DRAGGING",dropping:null,draggingOver:s,combineWith:o,mode:n,offset:e,dimension:r,forceShouldAnimate:a,snapshot:t(n,i,s,o,null)}}});return function(r,i){if(r.isDragging){if(r.critical.draggable.id!==i.draggableId)return null;var s=r.current.client.offset,o=r.dimensions.draggables[i.draggableId],a=hy(r.impact),l=(u=r.impact).at&&"COMBINE"===u.at.type?u.at.combine.draggableId:null,c=r.forceShouldAnimate;return n(e(s.x,s.y),r.movementMode,o,i.isClone,a,l,c)}var u;if("DROP_ANIMATING"===r.phase){var d=r.completed;if(d.result.draggableId!==i.draggableId)return null;var h=i.isClone,f=r.dimensions.draggables[i.draggableId],p=d.result,m=p.mode,g=Ex(p),v=function(e){return e.combine?e.combine.draggableId:null}(p),y={duration:r.dropDuration,curve:Qy,moveTo:r.newHomeClientOffset,opacity:v?Yy.drop:null,scale:v?Jy.drop:null};return{mapped:{type:"DRAGGING",offset:r.newHomeClientOffset,dimension:f,dropping:y,draggingOver:g,combineWith:v,mode:m,forceShouldAnimate:null,snapshot:t(m,h,g,v,y)}}}return null}}(),t=function(){var e=Bg(function(e,t){return{x:e,y:t}}),t=Bg(Cx),n=Bg(function(e,n,r){return void 0===n&&(n=null),{mapped:{type:"SECONDARY",offset:e,combineTargetFor:n,shouldAnimateDisplacement:r,snapshot:t(n)}}}),r=function(e){return e?n(rv,e,!0):null},i=function(t,i,s,o){var a=s.displaced.visible[t],l=Boolean(o.inVirtualList&&o.effected[t]),c=Iv(s),u=c&&c.draggableId===t?i:null;if(!a){if(!l)return r(u);if(s.displaced.invisible[t])return null;var d=av(o.displacedBy.point),h=e(d.x,d.y);return n(h,u,!0)}if(l)return r(u);var f=s.displacedBy.point,p=e(f.x,f.y);return n(p,u,a.shouldAnimate)};return function(e,t){if(e.isDragging)return e.critical.draggable.id===t.draggableId?null:i(t.draggableId,e.critical.draggable.id,e.impact,e.afterCritical);if("DROP_ANIMATING"===e.phase){var n=e.completed;return n.result.draggableId===t.draggableId?null:i(t.draggableId,n.result.draggableId,n.impact,n.afterCritical)}return null}}();return function(n,r){return e(n,r)||t(n,r)||Nx}},{dropAnimationFinished:Ky},null,{context:cw,pure:!0,areStatePropsEqual:Sx})(function(e){var t=(0,r.useRef)(null),n=Cg(function(e){t.current=e},[]),i=Cg(function(){return t.current},[]),s=ax(mw),o=s.contextId,a=s.dragHandleUsageInstructionsId,l=s.registry,c=ax(fx),u=c.type,d=c.droppableId,h=Eg(function(){return{id:e.draggableId,index:e.index,type:u,droppableId:d}},[e.draggableId,e.index,u,d]),f=e.children,p=e.draggableId,m=e.isEnabled,g=e.shouldRespectForcePress,v=e.canDragInteractiveElements,y=e.isClone,b=e.mapped,w=e.dropAnimationFinished;xx(),gw(),y||wx(Eg(function(){return{descriptor:h,registry:l,getDraggableRef:i,canDragInteractiveElements:v,shouldRespectForcePress:g,isEnabled:m}},[h,l,i,v,g,m]));var x=Eg(function(){return m?{tabIndex:0,role:"button","aria-describedby":a,"data-rbd-drag-handle-draggable-id":p,"data-rbd-drag-handle-context-id":o,draggable:!1,onDragStart:kx}:null},[o,a,p,m]),k=Cg(function(e){"DRAGGING"===b.type&&b.dropping&&"transform"===e.propertyName&&w()},[w,b]),S=Eg(function(){var e=bx(b),t="DRAGGING"===b.type&&b.dropping?k:null;return{innerRef:n,draggableProps:{"data-rbd-draggable-context-id":o,"data-rbd-draggable-id":p,style:e,onTransitionEnd:t},dragHandleProps:x}},[o,x,p,b,k,n]),E=Eg(function(){return{draggableId:h.id,type:h.type,source:{index:h.index,droppableId:h.droppableId}}},[h.droppableId,h.id,h.index,h.type]);return f(S,b.snapshot,E)});function _x(e){return ax(fx).isUsingCloneFor!==e.draggableId||e.isClone?r.createElement(Ix,e):null}function Tx(e){var t="boolean"!==typeof e.isDragDisabled||!e.isDragDisabled,n=Boolean(e.disableInteractiveElementBlocking),i=Boolean(e.shouldRespectForcePress);return r.createElement(_x,Im({},e,{isClone:!1,isEnabled:t,canDragInteractiveElements:n,shouldRespectForcePress:i}))}var Ax=function(e,t){return e===t.droppable.type},Dx=function(e,t){return t.draggables[e.draggable.id]};var Px={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:function(){return document.body||Kg(!1),document.body}},Rx=wg(function(){var e={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},t=Im({},e,{shouldAnimatePlaceholder:!1}),n=Bg(function(e){return{draggableId:e.id,type:e.type,source:{index:e.index,droppableId:e.droppableId}}}),r=Bg(function(r,i,s,o,a,l){var c=a.descriptor.id;if(a.descriptor.droppableId===r){var u=l?{render:l,dragging:n(a.descriptor)}:null,d={isDraggingOver:s,draggingOverWith:s?c:null,draggingFromThisWith:c,isUsingPlaceholder:!0};return{placeholder:a.placeholder,shouldAnimatePlaceholder:!1,snapshot:d,useClone:u}}if(!i)return t;if(!o)return e;var h={isDraggingOver:s,draggingOverWith:c,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:a.placeholder,shouldAnimatePlaceholder:!0,snapshot:h,useClone:null}});return function(n,i){var s=i.droppableId,o=i.type,a=!i.isDropDisabled,l=i.renderClone;if(n.isDragging){var c=n.critical;if(!Ax(o,c))return t;var u=Dx(c,n.dimensions),d=hy(n.impact)===s;return r(s,a,d,d,u,l)}if("DROP_ANIMATING"===n.phase){var h=n.completed;if(!Ax(o,h.critical))return t;var f=Dx(h.critical,n.dimensions);return r(s,a,Ex(h.result)===s,hy(h.impact)===s,f,l)}if("IDLE"===n.phase&&n.completed&&!n.shouldFlush){var p=n.completed;if(!Ax(o,p.critical))return t;var m=hy(p.impact)===s,g=Boolean(p.impact.at&&"COMBINE"===p.impact.at.type),v=p.critical.droppable.id===s;return m?g?e:t:v?e:t}return t}},{updateViewportMaxScroll:function(e){return{type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:e}}},null,{context:cw,pure:!0,areStatePropsEqual:Sx})(function(e){var t=(0,r.useContext)(mw);t||Kg(!1);var n=t.contextId,i=t.isMovementAllowed,s=(0,r.useRef)(null),o=(0,r.useRef)(null),a=e.children,l=e.droppableId,c=e.type,u=e.mode,d=e.direction,h=e.ignoreContainerClipping,f=e.isDropDisabled,p=e.isCombineEnabled,m=e.snapshot,g=e.useClone,v=e.updateViewportMaxScroll,y=e.getContainerForClone,b=Cg(function(){return s.current},[]),w=Cg(function(e){s.current=e},[]),x=(Cg(function(){return o.current},[]),Cg(function(e){o.current=e},[]));vw();var k=Cg(function(){i()&&v({maxScroll:xb()})},[i,v]);!function(e){var t=(0,r.useRef)(null),n=ax(mw),i=pw("droppable"),s=n.registry,o=n.marshal,a=bw(e),l=Eg(function(){return{id:e.droppableId,type:e.type,mode:e.mode}},[e.droppableId,e.mode,e.type]),c=(0,r.useRef)(l),u=Eg(function(){return Bg(function(e,n){t.current||Kg(!1);var r={x:e,y:n};o.updateDroppableScroll(l.id,r)})},[l.id,o]),d=Cg(function(){var e=t.current;return e&&e.env.closestScrollable?ex(e.env.closestScrollable):rv},[]),h=Cg(function(){var e=d();u(e.x,e.y)},[d,u]),f=Eg(function(){return Vg(h)},[h]),p=Cg(function(){var e=t.current,n=lx(e);e&&n||Kg(!1),e.scrollOptions.shouldPublishImmediately?h():f()},[f,h]),m=Cg(function(e,r){t.current&&Kg(!1);var i=a.current,s=i.getDroppableRef();s||Kg(!1);var o=nx(s),c={ref:s,descriptor:l,env:o,scrollOptions:r};t.current=c;var u=rx({ref:s,descriptor:l,env:o,windowScroll:e,direction:i.direction,isDropDisabled:i.isDropDisabled,isCombineEnabled:i.isCombineEnabled,shouldClipSubject:!i.ignoreContainerClipping}),d=o.closestScrollable;return d&&(d.setAttribute(Zb.contextId,n.contextId),d.addEventListener("scroll",p,ox(c.scrollOptions))),u},[n.contextId,l,p,a]),g=Cg(function(){var e=t.current,n=lx(e);return e&&n||Kg(!1),ex(n)},[]),v=Cg(function(){var e=t.current;e||Kg(!1);var n=lx(e);t.current=null,n&&(f.cancel(),n.removeAttribute(Zb.contextId),n.removeEventListener("scroll",p,ox(e.scrollOptions)))},[p,f]),y=Cg(function(e){var n=t.current;n||Kg(!1);var r=lx(n);r||Kg(!1),r.scrollTop+=e.y,r.scrollLeft+=e.x},[]),b=Eg(function(){return{getDimensionAndWatchScroll:m,getScrollWhileDragging:g,dragStopped:v,scroll:y}},[v,m,g,y]),w=Eg(function(){return{uniqueId:i,descriptor:l,callbacks:b}},[b,l,i]);tw(function(){return c.current=w.descriptor,s.droppable.register(w),function(){t.current&&v(),s.droppable.unregister(w)}},[b,l,v,w,o,s.droppable]),tw(function(){t.current&&o.updateDroppableIsEnabled(c.current.id,!e.isDropDisabled)},[e.isDropDisabled,o]),tw(function(){t.current&&o.updateDroppableIsCombineEnabled(c.current.id,e.isCombineEnabled)},[e.isCombineEnabled,o])}({droppableId:l,type:c,mode:u,direction:d,isDropDisabled:f,isCombineEnabled:p,ignoreContainerClipping:h,getDroppableRef:b});var S=r.createElement(px,{on:e.placeholder,shouldAnimate:e.shouldAnimatePlaceholder},function(e){var t=e.onClose,i=e.data,s=e.animate;return r.createElement(hx,{placeholder:i,onClose:t,innerRef:x,animate:s,contextId:n,onTransitionEnd:k})}),E=Eg(function(){return{innerRef:w,placeholder:S,droppableProps:{"data-rbd-droppable-id":l,"data-rbd-droppable-context-id":n}}},[n,l,S,w]),C=g?g.dragging.draggableId:null,N=Eg(function(){return{droppableId:l,type:c,isUsingCloneFor:C}},[l,C,c]);return r.createElement(fx.Provider,{value:N},a(E,m),function(){if(!g)return null;var e=g.dragging,t=g.render,n=r.createElement(_x,{draggableId:e.draggableId,index:e.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},function(n,r){return t(n,r,e)});return kg.createPortal(n,y())}())});Rx.defaultProps=Px;const Lx=e=>{let{onProfileClick:t,onLoginClick:n}=e;const{user:r,loading:i}=wm();if(i)return null;return(0,vm.jsx)("button",{className:"auth-button",onClick:()=>{r?t&&t():n&&n()},children:r?r.photoURL?(0,vm.jsx)("img",{src:r.photoURL,alt:r.displayName,className:"auth-avatar",referrerPolicy:"no-referrer"}):(0,vm.jsx)("span",{className:"auth-avatar-placeholder",children:(r.displayName||"?")[0].toUpperCase()}):(0,vm.jsx)("svg",{className:"auth-icon",viewBox:"0 0 24 24",fill:"currentColor",children:(0,vm.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"})})})},jx=["Full Body","Chest","Back","Shoulders","Biceps","Triceps","Arms","Core","Legs","Quads","Hamstrings","Glutes","Calves"],Ox=e=>{let{timerWorkoutData:t,timerSelectedWorkout:n,workoutHistory:i,onWorkoutSelect:s,onArrowClick:o,onNavigateToTab:a,onDeleteWorkout:l,onReorder:c,onBellClick:u,onLoginClick:h,onProfileClick:f,prepTime:p=15,globalRestTime:m=15,onDetailSave:g,onStartWorkout:v,defaultWorkoutNames:y=[],onVisibilityToggle:b,requestCloseDetail:w=!1,showCardPhotos:x=!0,onShareWorkout:k,onScheduleWorkout:S,weeklySchedule:E={}}=e;const{user:C}=wm(),[N,I]=(0,r.useState)(null),[_,T]=(0,r.useState)(0),[A,D]=(0,r.useState)(!1),P=(0,r.useRef)(!1),[R,L]=(0,r.useState)(null),[j,O]=(0,r.useState)(null),[M,F]=(0,r.useState)(null),[U,B]=(0,r.useState)(null),[V,z]=(0,r.useState)(null),[W,H]=(0,r.useState)(!1),[q,G]=(0,r.useState)([]),K=(0,r.useRef)([]),Q=(0,r.useRef)([]),Y=(0,r.useRef)(!1),J=(0,r.useRef)(null),[,$]=(0,r.useState)(0),[X,Z]=(0,r.useState)(""),[ee,te]=(0,r.useState)(null),[ne,re]=(0,r.useState)([]),[ie,se]=(0,r.useState)(!1),[oe,ae]=(0,r.useState)(!1),[le,ce]=(0,r.useState)(!1),[ue,de]=(0,r.useState)(!1),[he,fe]=(0,r.useState)(""),[pe,me]=(0,r.useState)(null),[ge,ve]=(0,r.useState)(!1),[ye,be]=(0,r.useState)(null),[we,xe]=(0,r.useState)(null),[ke,Se]=(0,r.useState)(!1),[Ee,Ce]=(0,r.useState)(!1),[Ne,Ie]=(0,r.useState)(0),[_e,Te]=(0,r.useState)(null),Ae=_e&&W?Math.min(_e.overhead+q.length*_e.rowH,_e.maxPanelH):null,De=(()=>{if(!_e||!W||null===Ae)return 1/0;const{overhead:e,rowH:t,paginationH:n}=_e,r=Ae-e;return q.length*t<=r?1/0:Math.max(3,Math.floor((r-n)/t))})(),Pe=(0,r.useRef)({active:!1,fromIndex:null,toIndex:null,rowHeight:0}),Re=(0,r.useRef)([]),Le=(0,r.useRef)(0),je=(0,r.useRef)(!1),Oe=(0,r.useRef)(!1),Me=(0,r.useRef)(null),Fe=(0,r.useRef)({perPage:1/0,totalPages:1,currentPage:0,exerciseCount:0}),Ue=(0,r.useRef)(null),Be=(0,r.useRef)(null);(0,r.useLayoutEffect)(()=>{je.current&&(je.current=!1,Re.current.forEach(e=>{if(!e)return;const t=e.querySelector(".home-detail-exercise");t&&(t.style.transform="",t.style.transition="",t.style.zIndex="",t.style.position="")}))},[q]),(0,r.useLayoutEffect)(()=>{var e;if(!Be.current)return;const{newLocalIndex:t,lastY:n}=Be.current;Be.current=null;const r=Ue.current;if(!r||!r.isDragging)return;const i=Fe.current,s=Math.min(i.perPage,i.exerciseCount-i.currentPage*i.perPage);Re.current.length=s,r.originalMids=Re.current.map(e=>{if(!e)return 0;const t=e.getBoundingClientRect();return t.top+t.height/2});const o=null===(e=Re.current[0])||void 0===e?void 0:e.parentElement;if(o){const e=o.getBoundingClientRect();r.containerTop=e.top,r.containerBottom=e.bottom}r.fromLocalIndex=t,r.offset=Le.current,r.edgeDirection=null;const a=Re.current[t];if(r.draggedCard=null===a||void 0===a?void 0:a.querySelector(".home-detail-exercise"),r.draggedCard){const e=r.draggedCard.getBoundingClientRect();r.startY=e.top+e.height/2,r.draggedCard.classList.add("exercise-dragging-card"),r.draggedCard.style.zIndex="10",r.draggedCard.style.position="relative",r.draggedCard.style.transform="translateY(".concat(n-r.startY,"px) scale(1.03)")}Pe.current={active:!0,fromIndex:t,toIndex:t,rowHeight:r.rowH}},[q,Ne]);const Ve=(0,r.useRef)(null),ze=(0,r.useRef)({}),We=(0,r.useRef)(null),He=(0,r.useRef)(0),qe=(0,r.useRef)(0),Ge=(0,r.useRef)(!1),Ke=(0,r.useRef)(0),Qe=(0,r.useRef)(null),Ye=(0,r.useRef)(null),Je=e=>{const t=Math.floor(e/60),n=e%60;return"".concat(t,":").concat(n.toString().padStart(2,"0"))},$e=(e,t)=>e.workoutId?e.workoutId===t.id:!t.id&&e.workoutName===t.name,Xe=(0,r.useMemo)(()=>{const e=[];i&&i.some(e=>t.some(t=>$e(e,t)))&&e.push("Recent");const n=E&&Object.values(E).some(e=>null!=e);n&&e.push("Schedule");const r={};return t.forEach(e=>{(e.tags||(e.tag?[e.tag]:[])).forEach(e=>{r[e]=(r[e]||0)+1})}),Object.keys(r).sort((e,t)=>r[t]-r[e]).forEach(t=>e.push(t)),e},[t,i,E]),Ze=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],et=(0,r.useMemo)(()=>{if(null===j)return t;if("Recent"===j){const e=[];return t.forEach(t=>{const n=null===i||void 0===i?void 0:i.filter(e=>$e(e,t)).sort((e,t)=>{var n,r;const i=null!==(n=e.completedAt)&&void 0!==n&&n.toDate?e.completedAt.toDate():new Date(e.completedAt);return(null!==(r=t.completedAt)&&void 0!==r&&r.toDate?t.completedAt.toDate():new Date(t.completedAt))-i}),r=null===n||void 0===n?void 0:n[0];var s;r&&e.push({workout:t,lastDate:null!==(s=r.completedAt)&&void 0!==s&&s.toDate?r.completedAt.toDate():new Date(r.completedAt)})}),e.sort((e,t)=>t.lastDate-e.lastDate),e.slice(0,7).map(e=>e.workout)}if("Schedule"===j){const e=[];for(let n=0;n<7;n++){const r=E[n];if(!r)continue;const i=t.find(e=>e.name===r);i&&e.push(i)}return e}return t.filter(e=>(e.tags||(e.tag?[e.tag]:[])).includes(j))},[j,t,i,E]),tt=(0,r.useMemo)(()=>{if("Schedule"!==j||!E)return{};const e={};let n=0;for(let r=0;r<7;r++){const i=E[r];if(!i)continue;t.find(e=>e.name===i)&&(e[n]={dayName:Ze[r],dayIndex:r},n++)}return e},[j,E,t]),nt=C&&Xe.length>0&&(t.length>5||Xe.includes("Schedule"));(0,r.useEffect)(()=>{null===j||Xe.includes(j)||O(null)},[j,Xe]);const rt=(0,r.useCallback)(e=>{var t;const n=ze.current[e.name],r=n?n.getBoundingClientRect():null;B(r),F(e),z("entering"),Ie(0),H(!1),G([...e.exercises]),Z(e.name),te(null!==(t=e.restTime)&&void 0!==t?t:null),re(e.tags||(e.tag?[e.tag]:[]))},[]);(0,r.useLayoutEffect)(()=>{if("entering"!==V||!We.current)return;if(!U)return void z("open");const e=We.current,t=e.getBoundingClientRect(),n=U.left+U.width/2-(t.left+t.width/2),r=U.top+U.height/2-(t.top+t.height/2),i=U.width/t.width,s=U.height/t.height;e.style.transition="none",e.style.transform="translate(".concat(n,"px, ").concat(r,"px) scale(").concat(i,", ").concat(s,")"),e.style.borderRadius="14px",e.style.background="rgba(255, 59, 48, 0.1)",e.style.borderColor="rgba(255, 59, 48, 0.3)",e.offsetHeight,e.style.transition=["transform 0.38s cubic-bezier(0.32, 0.72, 0, 1)","border-radius 0.38s cubic-bezier(0.32, 0.72, 0, 1)","background 0.28s ease 0.1s","border-color 0.28s ease 0.1s"].join(", "),e.style.transform="none",e.style.borderRadius="",e.style.background="",e.style.borderColor="";const o=setTimeout(()=>{e.style.transition="",e.style.transform="",z("open")},400);return()=>clearTimeout(o)},[V,U]),(0,r.useLayoutEffect)(()=>{if("open"!==V||!W||_e||!We.current)return;const e=We.current,t=e.querySelector(".home-detail-exercises"),n=t?t.getBoundingClientRect().height:0,r=e.getBoundingClientRect().height-n,i=e.querySelector(".home-detail-exercise"),s=i?i.getBoundingClientRect().height:32,o=e.parentElement,a=getComputedStyle(o),l=o.clientHeight-parseFloat(a.paddingTop)-parseFloat(a.paddingBottom);Te({overhead:r,rowH:s,maxPanelH:l,paginationH:38})},[V,W,_e]),(0,r.useEffect)(()=>{if(!W||!_e)return;const e=()=>{const e=We.current;if(!e)return;const t=e.parentElement;if(!t)return;const n=getComputedStyle(t),r=t.clientHeight-parseFloat(n.paddingTop)-parseFloat(n.paddingBottom);Te(e=>e?d(d({},e),{},{maxPanelH:r}):null)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[W,_e]),(0,r.useEffect)(()=>{W||Te(null)},[W]),(0,r.useEffect)(()=>W?Y.current?(Y.current=!1,void(J.current=q)):(null!==J.current&&(K.current.push(J.current),Q.current=[],$(e=>e+1)),void(J.current=q)):(K.current=[],Q.current=[],void(J.current=null)),[q,W]);const it=(0,r.useCallback)(()=>{if(0===K.current.length)return;Y.current=!0,Q.current.push(q);const e=K.current.pop();G(e),$(e=>e+1)},[q]),st=(0,r.useCallback)(()=>{if(0===Q.current.length)return;Y.current=!0,K.current.push(q);const e=Q.current.pop();G(e),$(e=>e+1)},[q]);(0,r.useEffect)(()=>{if(De===1/0)return;const e=W?q:(null===M||void 0===M?void 0:M.exercises)||[],t=Math.ceil(e.length/De);t>0&&Ne>=t&&Ie(t-1)},[q,M,De,Ne,W]);const ot=(0,r.useCallback)(()=>{if("leaving"===V)return;const e=We.current;if(!e||!M)return F(null),B(null),void z(null);z("leaving");const t=M.name?ze.current[M.name]:null,n=Ve.current,r=t?t.getBoundingClientRect():n?n.getBoundingClientRect():U;if(!r)return void setTimeout(()=>{F(null),B(null),z(null),H(!1),ve(!1),ce(!1)},280);const i=e.getBoundingClientRect(),s=r.left+r.width/2-(i.left+i.width/2),o=r.top+r.height/2-(i.top+i.height/2),a=r.width/i.width,l=r.height/i.height;e.style.transition=["transform 0.22s cubic-bezier(0.2, 0, 0.6, 1)","border-radius 0.22s cubic-bezier(0.2, 0, 0.6, 1)","background 0.15s ease","border-color 0.15s ease"].join(", "),e.style.transform="translate(".concat(s,"px, ").concat(o,"px) scale(").concat(a,", ").concat(l,")"),e.style.borderRadius="14px",e.style.background="rgba(255, 59, 48, 0.1)",e.style.borderColor="rgba(255, 59, 48, 0.3)",setTimeout(()=>{F(null),B(null),z(null),H(!1),ve(!1),ce(!1)},230)},[V,M,U]);(0,r.useEffect)(()=>{w&&(M&&ot(),null!==j&&O(null))},[w]);const at=()=>{const e=Ve.current?Ve.current.getBoundingClientRect():null;F({name:"",type:"timer",exercises:[],isNew:!0}),B(e),z("entering"),Ie(0),H(!0),ve(!0),G([]),Z(""),te(null),re([])},lt=(0,r.useCallback)(function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(t.target.closest(".home-detail-delete-btn"))return;const r=t.touches?t.touches[0].clientY:t.clientY,i=Re.current[e],s=null===i||void 0===i?void 0:i.querySelector(".home-detail-exercise"),o=i?i.getBoundingClientRect().height:40,a=Re.current.map(e=>{if(!e)return 0;const t=e.getBoundingClientRect();return t.top+t.height/2}),l=null===i||void 0===i?void 0:i.parentElement;let c=0,u=0;if(l){const e=l.getBoundingClientRect();c=e.top,u=e.bottom}const d={isDragging:!1,startY:r,fromLocalIndex:e,draggedCard:s,originalMids:a,containerTop:c,containerBottom:u,rowH:o,offset:n,edgeDirection:null,lastY:r};Ue.current=d,Pe.current={active:!1,fromIndex:e,toIndex:e,rowHeight:o};const h=()=>{Me.current&&(clearTimeout(Me.current),Me.current=null),d.edgeDirection=null},f=e=>{const t=e.touches?e.touches[0].clientY:e.clientY;d.lastY=t;const n=Math.abs(t-d.startY);if(!d.isDragging&&n>8&&(d.isDragging=!0,Pe.current.active=!0,d.draggedCard&&(d.draggedCard.classList.add("exercise-dragging-card"),d.draggedCard.style.zIndex="10",d.draggedCard.style.position="relative"),navigator.vibrate&&navigator.vibrate(30)),d.isDragging){e.cancelable&&e.preventDefault(),d.draggedCard&&(d.draggedCard.style.transform="translateY(".concat(t-d.startY,"px) scale(1.03)"));let n=d.fromLocalIndex,s=1/0;d.originalMids.forEach((e,r)=>{const i=Math.abs(t-e);i<s&&(s=i,n=r)}),n!==Pe.current.toIndex&&(Pe.current.toIndex=n,r=d.fromLocalIndex,i=n,Re.current.forEach((e,t)=>{if(!e||t===r)return;const n=e.querySelector(".home-detail-exercise");if(!n)return;let s=0;r!==i&&(r<i&&t>r&&t<=i?s=-d.rowH:r>i&&t>=i&&t<r&&(s=d.rowH)),n.style.transform="translateY(".concat(s,"px)"),n.style.transition="transform 0.2s cubic-bezier(0.2, 0, 0, 1)"}));const{totalPages:o,currentPage:a}=Fe.current;if(o>1){const n=e.touches?e.touches[0].clientX:e.clientX,r=.75*d.rowH,i=30,s=t<d.containerTop+r&&a>0,l=t>d.containerBottom-r&&a<o-1,c=n<i&&a>0,u=n>window.innerWidth-i&&a<o-1,f=s||c?"prev":l||u?"next":null;f!==d.edgeDirection&&(h(),f&&(d.edgeDirection=f,Me.current=setTimeout(()=>{(e=>{const{perPage:t,totalPages:n,currentPage:r}=Fe.current;if(n<=1)return;const i="next"===e?r+1:r-1;if(i<0||i>=n)return;const s=d.offset+Pe.current.fromIndex,o="next"===e?i*t:(i+1)*t-1,a="next"===e?0:t-1;d.draggedCard&&(d.draggedCard.classList.remove("exercise-dragging-card"),d.draggedCard.style.transform="",d.draggedCard.style.transition="",d.draggedCard.style.zIndex="",d.draggedCard.style.position=""),Re.current.forEach(e=>{if(!e)return;const t=e.querySelector(".home-detail-exercise");t&&(t.style.transform="",t.style.transition="",t.style.zIndex="",t.style.position="")}),Be.current={newLocalIndex:a,lastY:d.lastY},G(e=>{const t=[...e],[n]=t.splice(s,1);return t.splice(Math.max(0,Math.min(o,t.length)),0,n),t}),Ie(i),navigator.vibrate&&navigator.vibrate(20)})(f)},800)))}}var r,i},p=()=>{if(h(),Be.current=null,d.draggedCard&&d.draggedCard.classList.remove("exercise-dragging-card"),d.isDragging){Oe.current=!0,setTimeout(()=>{Oe.current=!1},50);const{fromIndex:e,toIndex:t}=Pe.current;if(null!==e&&null!==t&&e!==t){je.current=!0;const n=d.offset+e,r=d.offset+t;G(e=>{const t=[...e],[i]=t.splice(n,1);return t.splice(r,0,i),t}),be(e=>null===e?null:e===n?r:n<e&&r>=e?e-1:n>e&&r<=e?e+1:e)}else Re.current.forEach(e=>{if(!e)return;const t=e.querySelector(".home-detail-exercise");t&&(t.style.transform="",t.style.transition="",t.style.zIndex="",t.style.position="")})}Ue.current=null,Pe.current={active:!1,fromIndex:null,toIndex:null,rowHeight:0},window.removeEventListener("touchmove",f),window.removeEventListener("touchend",p),window.removeEventListener("mousemove",f),window.removeEventListener("mouseup",p)};window.addEventListener("touchmove",f,{passive:!1}),window.addEventListener("touchend",p),window.addEventListener("mousemove",f),window.addEventListener("mouseup",p)},[]),ct=(0,r.useCallback)(e=>{if(!e)return;const t=e.querySelector(".workout-card");t&&(t.style.transform="",t.style.transition=""),e.classList.remove("swipe-left","swipe-right","swipe-full")},[]),ut=(0,r.useCallback)(()=>{if(null!==Qe.current){const e=et[Qe.current],t=e?ze.current[e.name]:null;t&&ct(t)}Ke.current=0,Qe.current=null,I(null),T(0)},[et,ct]);(0,r.useEffect)(()=>{if(null===N)return;const e=e=>{var t;const n=ze.current[null===(t=et[N])||void 0===t?void 0:t.name];n&&!n.contains(e.target)&&ut()};return document.addEventListener("touchstart",e),document.addEventListener("mousedown",e),()=>{document.removeEventListener("touchstart",e),document.removeEventListener("mousedown",e)}},[N,et]),(0,r.useEffect)(()=>{if(null===R)return;const e=e=>{e.target.closest(".workout-card-menu-popup")||e.target.closest(".workout-card-menu-btn")||L(null)};return document.addEventListener("mousedown",e),document.addEventListener("touchstart",e),()=>{document.removeEventListener("mousedown",e),document.removeEventListener("touchstart",e)}},[R]);const dt=(0,r.useRef)(null),ht=(0,r.useRef)(null),ft=(0,r.useRef)(null),pt=(0,r.useRef)(null),mt=(0,r.useCallback)(e=>{if(!e.touches||null===dt.current||P.current)return;const t=e.touches[0].clientX,n=e.touches[0].clientY,r=t-He.current,i=n-qe.current;if(!pt.current){if(Math.abs(r)<8&&Math.abs(i)<8)return;pt.current=Math.abs(r)>=Math.abs(i)?"horizontal":"vertical"}if("vertical"===pt.current)return;e.preventDefault(),Ge.current=!0;const s=Math.max(-80,Math.min(80,r));Ke.current=s;const o=ht.current,a=ft.current;o&&(o.style.transform="translateX(".concat(s,"px)")),a&&(a.classList.toggle("swipe-left",s<0),a.classList.toggle("swipe-right",s>0),a.classList.toggle("swipe-full",Math.abs(s)>=80))},[]),gt=(0,r.useRef)(null),vt=(0,r.useRef)(null),yt=(0,r.useCallback)(e=>{gt.current&&(gt.current.removeEventListener("touchmove",mt),vt.current&&gt.current.removeEventListener("scroll",vt.current)),gt.current=e,e&&(e.addEventListener("touchmove",mt,{passive:!1}),vt.current=()=>{e.classList.toggle("scrolled",e.scrollTop>0)},e.addEventListener("scroll",vt.current,{passive:!0}))},[mt]),bt=null===M||void 0===M?void 0:M.isNew,wt=()=>{if(W){if(!X.trim()||bt&&0===q.length)return;xt()}else{const e=We.current;if(e){const t=e.querySelector(".home-detail-exercises"),n=t?t.getBoundingClientRect().height:0,r=e.getBoundingClientRect().height-n,i=e.querySelector(".home-detail-exercise"),s=i?i.getBoundingClientRect().height:32,o=e.parentElement,a=getComputedStyle(o),l=o.clientHeight-parseFloat(a.paddingTop)-parseFloat(a.paddingBottom);Te({overhead:r,rowH:s,maxPanelH:l,paginationH:38})}}H(!W),Ie(0),ve(!1),ce(!1),be(null)},xt=()=>{if(!M)return;const e=M.forked||!y.includes(M.name);g(M.name,q,X,ee,ne,{isOwned:e}),F(e?e=>d(d({},e),{},{name:X,exercises:[...q],restTime:ee,tags:[...ne],creatorUid:null,creatorName:null,creatorPhotoURL:null}):e=>d(d({},e),{},{name:X,exercises:[...q],restTime:ee,tags:[...ne],id:void 0,forked:!0,creatorUid:null,creatorName:null,creatorPhotoURL:null}))},kt=(0,r.useCallback)(()=>{ue||(de(!0),setTimeout(()=>{ce(!1),de(!1),fe(""),xe(null)},200))},[ue]),St=()=>{if(he.trim()){if(null!==we)G(e=>e.map((e,t)=>t===we?he.trim():e));else{const e=q.length;G(e=>[...e,he.trim()]),me(e),setTimeout(()=>me(null),350),De!==1/0&&Ie(Math.ceil((q.length+1)/De)-1)}fe(""),xe(null),de(!0),setTimeout(()=>{ce(!1),de(!1)},200)}},Et=e=>{te(t=>{const n=null!==t&&void 0!==t?t:m;return Math.max(0,Math.min(30,n+e))})};(0,r.useEffect)(()=>{if(!ge)return;const e=e=>{if(Ye.current&&!Ye.current.contains(e.target)){if(e.target.closest(".home-detail-edit-btn")||e.target.closest(".home-detail-save-circle")||e.target.closest(".home-detail-start-btn"))return;if(!X.trim())return;ve(!1)}};return document.addEventListener("mousedown",e),document.addEventListener("touchstart",e),()=>{document.removeEventListener("mousedown",e),document.removeEventListener("touchstart",e)}},[ge]);const Ct=!!M&&(!M.forked&&y.includes(M.name)),Nt=M&&null!=M.restTime?M.restTime:m,It="open"===V||"entering"===V,_t=W?q:(null===M||void 0===M?void 0:M.exercises)||[],Tt=W&&De!==1/0?De:_t.length,At=Tt>0?Math.max(1,Math.ceil(_t.length/Tt)):1,Dt=Math.min(Ne,Math.max(0,At-1)),Pt=Dt*Tt,Rt=_t.slice(Pt,Pt+Tt);return Le.current=Pt,Fe.current={perPage:Tt,totalPages:At,currentPage:Dt,exerciseCount:_t.length},(0,vm.jsxs)("div",{className:"home-container ".concat(M&&"leaving"!==V?"home-detail-open":""," ").concat(A?"home-reordering":""),children:[(0,vm.jsx)("div",{className:"home-sparks-bg",children:(0,vm.jsx)("img",{src:Sm,alt:"",className:"home-sparks-img"})}),(0,vm.jsxs)("div",{className:"home-header",children:[(0,vm.jsx)("div",{className:"home-header-auth",children:(0,vm.jsx)(Lx,{onLoginClick:h,onProfileClick:f})}),(0,vm.jsx)("span",{className:"home-header-title",children:"HIITem"}),C&&(0,vm.jsx)("button",{className:"home-header-bell",onClick:u,children:(0,vm.jsxs)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,vm.jsx)("path",{d:"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"}),(0,vm.jsx)("path",{d:"M13.73 21a2 2 0 0 1-3.46 0"})]})})]}),nt&&(0,vm.jsx)("div",{className:"home-filter-bar".concat(M&&"leaving"!==V?" home-filter-bar-hidden":""),children:Xe.map(e=>(0,vm.jsx)("button",{className:"home-filter-chip".concat(j===e?" active":""),onClick:()=>O(t=>t===e?null:e),children:e},e))}),(0,vm.jsx)(Qw,{onDragStart:()=>{D(!0),P.current=!0;const e=ht.current,t=ft.current;e&&(e.style.transform="",e.style.transition=""),t&&t.classList.remove("swipe-left","swipe-right","swipe-full"),dt.current=null,ht.current=null,ft.current=null,Ke.current=0,Qe.current=null,Ge.current=!1,I(null),T(0),navigator.vibrate&&navigator.vibrate(30)},onDragEnd:e=>{if(D(!1),P.current=!1,e.destination&&e.source.index!==e.destination.index)if(null===j||"Recent"===j){const n=Array.from(t),[r]=n.splice(e.source.index,1);n.splice(e.destination.index,0,r),c(n)}else{const n=et[e.source.index],r=et[e.destination.index],i=t.indexOf(n),s=t.indexOf(r);if(-1===i||-1===s)return;const o=Array.from(t),[a]=o.splice(i,1);o.splice(s,0,a),c(o)}},children:(0,vm.jsx)(Rx,{droppableId:"home-workouts",direction:"vertical",isDropDisabled:!!M||"Recent"===j||"Schedule"===j,children:e=>(0,vm.jsxs)("div",d(d({},e.droppableProps),{},{ref:t=>{e.innerRef(t),yt(t)},className:"home-workout-list ".concat(A?"reordering":""),children:[et.map((e,t)=>{const o=60*e.exercises.length+p,a=(e=>i&&0!==i.length?i.filter(t=>t.workoutId?t.workoutId===e.id:!e.id&&t.workoutName===e.name).length:0)(e),l=n===e.name,c=tt[t],u=c?"".concat(e.name,"-day").concat(c.dayIndex):e.name;return(0,vm.jsxs)(r.Fragment,{children:[c&&(0,vm.jsxs)("div",{className:"home-schedule-day-header".concat(c.dayIndex===(new Date).getDay()?" today":""),children:[c.dayName,c.dayIndex===(new Date).getDay()?" \u2014 Today":""]}),(0,vm.jsx)(Tx,{draggableId:u,index:t,children:(n,r)=>(0,vm.jsxs)("div",d(d(d({ref:t=>{n.innerRef(t),ze.current[e.name]=t}},n.draggableProps),n.dragHandleProps),{},{className:"workout-card-wrapper",style:d(d({},n.draggableProps.style),{},{marginBottom:"9px",padding:0}),children:[(0,vm.jsxs)("div",{className:"workout-card ".concat(l?"selected":""," ").concat(r.isDragging?"dragging":""),onClick:()=>(e=>{Ge.current||A||(s("timer",e.name),rt(e))})(e),onTouchStart:e=>((e,t)=>{if(!C||A||!t.touches)return;He.current=t.touches[0].clientX,qe.current=t.touches[0].clientY,Ge.current=!1,dt.current=e,pt.current=null;const n=et[e],r=n?ze.current[n.name]:null;ft.current=r,ht.current=r?r.querySelector(".workout-card"):null})(t,e),onTouchEnd:()=>(()=>{if(A)return;const e=Ke.current,t=dt.current;dt.current=null,pt.current=null;const n=ht.current,r=ft.current;if(e<=-80&&null!=t&&k){const e=et[t];e&&k(e)}if(e>=80&&null!=t&&S){const e=et[t];e&&S(e)}n&&(n.style.transition="transform 0.25s ease",n.style.transform="translateX(0px)"),setTimeout(()=>{n&&(n.style.transform="",n.style.transition=""),r&&r.classList.remove("swipe-left","swipe-right","swipe-full")},260),Ke.current=0,Qe.current=null,I(null),T(0),ht.current=null,ft.current=null,setTimeout(()=>{Ge.current=!1},50)})(),children:[x&&(!e.isCustom&&y.includes(e.name)?(0,vm.jsx)("img",{src:"/logo192.png",alt:"",className:"workout-card-avatar"}):e.creatorPhotoURL?(0,vm.jsx)("img",{src:e.creatorPhotoURL,alt:"",className:"workout-card-avatar",referrerPolicy:"no-referrer"}):null!==C&&void 0!==C&&C.photoURL?(0,vm.jsx)("img",{src:C.photoURL,alt:"",className:"workout-card-avatar",referrerPolicy:"no-referrer"}):(0,vm.jsx)("div",{className:"workout-card-avatar workout-card-avatar-fallback",children:(0,vm.jsx)("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"currentColor",children:(0,vm.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"})})})),(0,vm.jsxs)("div",{className:"workout-card-left",children:[(0,vm.jsxs)("div",{className:"workout-card-name-row",children:[(0,vm.jsx)("span",{className:"workout-card-name",children:e.name}),(e.tags||(e.tag?[e.tag]:[])).map(e=>(0,vm.jsx)("span",{className:"workout-card-tag",children:e.toUpperCase()},e))]}),(0,vm.jsxs)("div",{className:"workout-card-detail",children:[(0,vm.jsx)("span",{className:"workout-card-time",children:Je(o)}),(0,vm.jsx)("span",{className:"workout-card-dot",children:"\xb7"}),(0,vm.jsxs)("span",{className:"workout-card-exercises",children:[e.exercises.length," exercises"]}),a>0&&(0,vm.jsxs)(vm.Fragment,{children:[(0,vm.jsx)("span",{className:"workout-card-dot",children:"\xb7"}),(0,vm.jsxs)("span",{className:"workout-card-completions",children:[a,"x"]})]})]})]}),(0,vm.jsx)("button",{className:"workout-card-start-btn".concat(C?"":" always-visible"),onClick:t=>{t.stopPropagation(),v(e.name)},children:(0,vm.jsx)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:(0,vm.jsx)("polyline",{points:"9 18 15 12 9 6"})})}),C&&(0,vm.jsx)("button",{className:"workout-card-menu-btn",onClick:e=>{e.stopPropagation(),L(R===t?null:t)},children:(0,vm.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:[(0,vm.jsx)("circle",{cx:"12",cy:"5",r:"2"}),(0,vm.jsx)("circle",{cx:"12",cy:"12",r:"2"}),(0,vm.jsx)("circle",{cx:"12",cy:"19",r:"2"})]})})]}),R===t&&(0,vm.jsxs)("div",{className:"workout-card-menu-popup",children:[(0,vm.jsxs)("button",{className:"workout-card-menu-item",onClick:t=>{t.stopPropagation(),L(null),k&&k(e)},children:[(0,vm.jsxs)("svg",{width:"15",height:"15",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,vm.jsx)("path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"}),(0,vm.jsx)("polyline",{points:"16 6 12 2 8 6"}),(0,vm.jsx)("line",{x1:"12",y1:"2",x2:"12",y2:"15"})]}),"Share"]}),(0,vm.jsxs)("button",{className:"workout-card-menu-item",onClick:t=>{t.stopPropagation(),L(null),S&&S(e)},children:[(0,vm.jsxs)("svg",{width:"15",height:"15",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,vm.jsx)("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),(0,vm.jsx)("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),(0,vm.jsx)("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),(0,vm.jsx)("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]}),"Schedule"]}),(0,vm.jsxs)("button",{className:"workout-card-menu-item",onClick:t=>{t.stopPropagation(),L(null),v(e.name)},children:[(0,vm.jsx)("svg",{width:"15",height:"15",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,vm.jsx)("polygon",{points:"5 3 19 12 5 21 5 3"})}),"Start"]})]}),(0,vm.jsx)("div",{className:"workout-card-action workout-card-action-left",children:(0,vm.jsxs)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,vm.jsx)("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),(0,vm.jsx)("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),(0,vm.jsx)("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),(0,vm.jsx)("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]})}),(0,vm.jsx)("div",{className:"workout-card-action workout-card-action-right",children:(0,vm.jsxs)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,vm.jsx)("path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"}),(0,vm.jsx)("polyline",{points:"16 6 12 2 8 6"}),(0,vm.jsx)("line",{x1:"12",y1:"2",x2:"12",y2:"15"})]})})]}))},u)]},u)}),e.placeholder,C&&(0,vm.jsxs)("div",{ref:Ve,className:"workout-card-add",onClick:at,children:[(0,vm.jsxs)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,vm.jsx)("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),(0,vm.jsx)("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),(0,vm.jsx)("span",{children:"New Workout"})]})]}))})}),M&&(0,vm.jsxs)("div",{className:"home-detail-overlay ".concat("leaving"===V?"closing":""),onClick:e=>{e.target===e.currentTarget&&ot()},children:[(0,vm.jsx)("div",{ref:We,className:"home-detail-panel",style:null!==Ae?{height:Ae}:void 0,children:(0,vm.jsxs)("div",{className:"home-detail-content ".concat(It?"visible":""),children:[(0,vm.jsxs)("div",{className:"home-detail-header",children:[(0,vm.jsx)("div",{className:"home-detail-creator",children:Ct?(0,vm.jsx)("img",{src:"/logo192.png",alt:"",className:"home-detail-creator-icon home-detail-app-icon"}):M.creatorPhotoURL?(0,vm.jsx)("img",{src:M.creatorPhotoURL,alt:"",className:"home-detail-creator-icon",referrerPolicy:"no-referrer"}):null!==C&&void 0!==C&&C.photoURL?(0,vm.jsx)("img",{src:C.photoURL,alt:"",className:"home-detail-creator-icon"}):(0,vm.jsx)("div",{className:"home-detail-creator-icon home-detail-user-icon",children:(0,vm.jsx)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"currentColor",children:(0,vm.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"})})})}),(0,vm.jsxs)("div",{className:"home-detail-title-group ".concat((W?ne.length>0:(M.tags||(M.tag?[M.tag]:[])).length>0)?"has-tags":""),children:[W&&ge?(0,vm.jsx)("input",{ref:Ye,type:"text",value:X,onChange:e=>Z(e.target.value),onKeyDown:e=>{"Enter"===e.key&&(ve(!1),e.target.blur())},className:"home-detail-name-input",autoFocus:!0}):(0,vm.jsx)("h2",{className:"home-detail-name",onClick:()=>{W&&ve(!0)},children:W?X:M.name}),(()=>{const e=M.tags||(M.tag?[M.tag]:[]);return W&&!ge||e.length>0?(0,vm.jsx)("div",{className:"home-detail-tags-row",children:W?ne.map(e=>(0,vm.jsxs)("span",{className:"home-detail-tag-pill editable",onClick:()=>re(t=>t.filter(t=>t!==e)),children:[e.toUpperCase()," \xd7"]},e)):e.map(e=>(0,vm.jsx)("span",{className:"home-detail-tag-pill",children:e.toUpperCase()},e))}):null})()]}),(0,vm.jsxs)("div",{className:"home-detail-header-actions",children:[C&&(0,vm.jsx)("button",{className:"home-detail-edit-btn",onClick:()=>{ge?ve(!1):wt()},disabled:W&&!ge&&(!X.trim()||bt&&0===q.length),children:W?(0,vm.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,vm.jsx)("polyline",{points:"20 6 9 17 4 12"})}):(0,vm.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,vm.jsx)("path",{d:"M17 3a2.83 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"}),(0,vm.jsx)("path",{d:"m15 5 4 4"})]})}),(0,vm.jsx)("button",{className:"home-detail-close-btn",onClick:()=>{W?bt?ot():(xt(),H(!1),ve(!1),ce(!1),be(null)):ot()},children:(0,vm.jsxs)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,vm.jsx)("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),(0,vm.jsx)("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]})]}),(0,vm.jsxs)("div",{className:"home-detail-meta",children:[(0,vm.jsxs)("div",{className:"home-detail-meta-view ".concat(W?"hidden":""),children:[(0,vm.jsxs)("div",{className:"home-detail-meta-view-left",children:[(0,vm.jsxs)("div",{className:"home-detail-stats",children:[(0,vm.jsx)("span",{children:Je(60*M.exercises.length+p)}),(0,vm.jsx)("span",{className:"home-detail-stats-dot",children:"\xb7"}),(0,vm.jsxs)("span",{children:[M.exercises.length," exercises"]})]}),(0,vm.jsxs)("span",{className:"home-detail-rest-display",children:[Nt,"s rest between exercises"]})]}),C&&!Ct&&(0,vm.jsxs)("button",{className:"home-detail-visibility-btn",onClick:()=>{const e=!M.isPublic;b(M.name,e),F(t=>d(d({},t),{},{isPublic:e}))},children:[(0,vm.jsx)("span",{className:"home-detail-visibility-icon ".concat(M.isPublic?"hidden":""),children:(0,vm.jsxs)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,vm.jsx)("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),(0,vm.jsx)("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]})}),(0,vm.jsx)("span",{className:"home-detail-visibility-icon ".concat(M.isPublic?"":"hidden"),children:(0,vm.jsxs)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,vm.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,vm.jsx)("line",{x1:"2",y1:"12",x2:"22",y2:"12"}),(0,vm.jsx)("path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10A15.3 15.3 0 0 1 12 2z"})]})})]})]}),(0,vm.jsxs)("div",{className:"home-detail-meta-edit ".concat(W?"":"hidden"),children:[(0,vm.jsx)("span",{className:"home-detail-add-tag-btn",onClick:()=>se(!0),children:"+ Tag"}),(0,vm.jsxs)("div",{className:"home-detail-rest-stepper",children:[(0,vm.jsx)("span",{className:"home-detail-rest-label",children:"Rest"}),(0,vm.jsx)("button",{className:"home-detail-stepper-btn",onClick:()=>Et(-5),disabled:(null!==ee&&void 0!==ee?ee:m)<=0,children:"-"}),(0,vm.jsxs)("span",{className:"home-detail-rest-value",children:[null!==ee&&void 0!==ee?ee:m,"s"]}),(0,vm.jsx)("button",{className:"home-detail-stepper-btn",onClick:()=>Et(5),disabled:(null!==ee&&void 0!==ee?ee:m)>=30,children:"+"})]})]})]}),W?(0,vm.jsx)("div",{className:"home-detail-exercises editing",children:Rt.map((e,t)=>{const n=Pt+t;return(0,vm.jsxs)("div",{ref:e=>{Re.current[t]=e},className:"home-detail-exercise-row".concat(n===pe?" exercise-just-added":""),onTouchStart:e=>lt(t,e,Pt),onMouseDown:e=>lt(t,e,Pt),children:[(0,vm.jsx)("span",{className:"home-detail-exercise-num",children:n+1}),(0,vm.jsxs)("div",{className:"home-detail-exercise".concat(ye===n?" selected":""),onClick:()=>{Oe.current||(xe(n),fe(e),ce(!0))},children:[(0,vm.jsx)("span",{className:"home-detail-exercise-name",children:e}),(0,vm.jsx)("button",{className:"home-detail-duplicate-btn",onClick:t=>{t.stopPropagation();const r=n+1;G(t=>[...t.slice(0,r),e,...t.slice(r)]),me(r),setTimeout(()=>me(null),350)},children:(0,vm.jsxs)("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:[(0,vm.jsx)("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),(0,vm.jsx)("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})]})}),(0,vm.jsx)("button",{className:"home-detail-delete-btn",onClick:e=>{e.stopPropagation(),(e=>{G(t=>t.filter((t,n)=>n!==e)),ye===e?be(null):null!==ye&&e<ye&&be(ye-1)})(n)},children:(0,vm.jsxs)("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:[(0,vm.jsx)("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),(0,vm.jsx)("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]})]},"ex-".concat(n))})}):(0,vm.jsx)("div",{className:"home-detail-exercises",children:Rt.map((e,t)=>{const n=Pt+t;return(0,vm.jsxs)("div",{className:"home-detail-exercise",children:[(0,vm.jsx)("span",{className:"home-detail-exercise-num",children:n+1}),(0,vm.jsx)("span",{className:"home-detail-exercise-name",children:e})]},"".concat(e,"-").concat(n))})}),At>1&&(0,vm.jsxs)("div",{className:"home-detail-pagination",children:[(0,vm.jsx)("button",{className:"home-detail-pagination-arrow",onClick:()=>Ie(e=>Math.max(0,e-1)),disabled:0===Dt,children:(0,vm.jsx)("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:(0,vm.jsx)("polyline",{points:"15 18 9 12 15 6"})})}),(0,vm.jsx)("div",{className:"home-detail-pagination-dots",children:Array.from({length:At},(e,t)=>(0,vm.jsx)("div",{className:"home-detail-pagination-dot".concat(t===Dt?" active":""),onClick:()=>Ie(t)},t))}),(0,vm.jsx)("button",{className:"home-detail-pagination-arrow",onClick:()=>Ie(e=>Math.min(At-1,e+1)),disabled:Dt===At-1,children:(0,vm.jsx)("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:(0,vm.jsx)("polyline",{points:"9 18 15 12 9 6"})})})]}),W?(0,vm.jsxs)("div",{className:"home-detail-bottom-row",children:[K.current.length>0?(0,vm.jsxs)("div",{className:"home-detail-undo-redo",children:[(0,vm.jsx)("button",{className:"home-detail-undo-btn",onClick:it,disabled:0===K.current.length,children:(0,vm.jsxs)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,vm.jsx)("polyline",{points:"1 4 1 10 7 10"}),(0,vm.jsx)("path",{d:"M3.51 15a9 9 0 1 0 2.13-9.36L1 10"})]})}),(0,vm.jsx)("button",{className:"home-detail-redo-btn",onClick:st,disabled:0===Q.current.length,children:(0,vm.jsxs)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,vm.jsx)("polyline",{points:"23 4 23 10 17 10"}),(0,vm.jsx)("path",{d:"M20.49 15a9 9 0 1 1-2.13-9.36L23 10"})]})})]}):Ct||bt?(0,vm.jsx)("div",{className:"home-detail-undo-redo"}):(0,vm.jsx)("button",{className:"home-detail-delete-workout-btn",onClick:()=>Se(!0),children:(0,vm.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,vm.jsx)("polyline",{points:"3 6 5 6 21 6"}),(0,vm.jsx)("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]})}),(0,vm.jsx)("button",{className:"home-detail-start-btn",onClick:()=>{bt&&!X.trim()&&Z("My Workout"),ve(!1),xe(null),fe(""),ce(!0)},children:"Add Exercise"}),(0,vm.jsx)("button",{className:"home-detail-save-circle",onClick:()=>{ge?ve(!1):wt()},disabled:!X.trim()||bt&&0===q.length,children:(0,vm.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:(0,vm.jsx)("polyline",{points:"20 6 9 17 4 12"})})})]}):(0,vm.jsx)("div",{className:"home-detail-bottom-row",onClick:ot,children:(0,vm.jsx)("button",{className:"home-detail-start-btn",onClick:e=>{e.stopPropagation(),v(M.name),ot()},children:"Start Workout"})})]})}),le&&(0,vm.jsxs)("div",{className:"home-detail-add-popup ".concat(ue?"closing":""),children:[(0,vm.jsx)("div",{className:"home-detail-popup-overlay",onClick:kt}),(0,vm.jsxs)("div",{className:"home-detail-popup-content",children:[(0,vm.jsx)("h3",{children:null!==we?"Edit Exercise":"Add Exercise"}),(0,vm.jsx)("input",{type:"text",placeholder:"Exercise name...",value:he,onChange:e=>fe(e.target.value),onKeyDown:e=>{"Enter"===e.key?St():"Escape"===e.key&&kt()},autoFocus:!0,className:"home-detail-popup-input"}),(0,vm.jsxs)("div",{className:"home-detail-popup-actions",children:[(0,vm.jsx)("button",{className:"home-detail-popup-cancel",onClick:kt,children:"Cancel"}),(0,vm.jsx)("button",{className:"home-detail-popup-confirm",onClick:St,children:null!==we?"Save":"Add"})]})]})]}),ie&&(0,vm.jsxs)("div",{className:"home-detail-add-popup ".concat(oe?"closing":""),children:[(0,vm.jsx)("div",{className:"home-detail-popup-overlay",onClick:()=>{ae(!0),setTimeout(()=>{se(!1),ae(!1)},200)}}),(0,vm.jsx)("div",{className:"home-detail-tag-popup-content",children:(0,vm.jsx)("div",{className:"home-detail-tag-picker",children:jx.map(e=>(0,vm.jsx)("button",{className:"home-detail-tag-option ".concat(ne.includes(e)?"active":""),onClick:()=>{re(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e]),ae(!0),setTimeout(()=>{se(!1),ae(!1)},200)},children:e.toUpperCase()},e))})})]}),ke&&(0,vm.jsxs)("div",{className:"home-detail-delete-confirm ".concat(Ee?"closing":""),children:[(0,vm.jsx)("div",{className:"home-detail-delete-confirm-backdrop",onClick:()=>{Ce(!0),setTimeout(()=>{Se(!1),Ce(!1)},150)}}),(0,vm.jsxs)("div",{className:"home-detail-delete-confirm-box",children:[(0,vm.jsx)("p",{className:"home-detail-delete-confirm-title",children:"Delete Workout?"}),(0,vm.jsx)("p",{className:"home-detail-delete-confirm-msg",children:"This can't be undone."}),(0,vm.jsxs)("div",{className:"home-detail-delete-confirm-actions",children:[(0,vm.jsx)("button",{className:"home-detail-delete-confirm-cancel",onClick:()=>{Ce(!0),setTimeout(()=>{Se(!1),Ce(!1)},150)},children:"Cancel"}),(0,vm.jsx)("button",{className:"home-detail-delete-confirm-delete",onClick:()=>{Se(!1),Ce(!1),l(M.name),ot()},children:"Delete"})]})]})]})]})]})},Mx=async e=>{var t,n,r,i,s,o;const a=await tm(Hf(um,"users",e,"settings","preferences"));if(!a.exists())return{autoShare:null,activeColor:null,restColor:null,workoutOrder:null,sidePlankAlert:!0,prepTime:15,restTime:15,activeLastMinute:!0,selectedWorkout:null,showCardPhotos:!0,pinnedWorkouts:[],weeklySchedule:{0:null,1:null,2:null,3:null,4:null,5:null,6:null}};const l=a.data();return{autoShare:null!==(t=l.autoShare)&&void 0!==t?t:null,activeColor:l.activeColor||null,restColor:l.restColor||null,workoutOrder:l.workoutOrder||null,sidePlankAlert:null===(n=l.sidePlankAlert)||void 0===n||n,prepTime:null!==(r=l.prepTime)&&void 0!==r?r:15,restTime:null!==(i=l.restTime)&&void 0!==i?i:15,activeLastMinute:null===(s=l.activeLastMinute)||void 0===s||s,selectedWorkout:l.selectedWorkout||null,showCardPhotos:null===(o=l.showCardPhotos)||void 0===o||o,pinnedWorkouts:l.pinnedWorkouts||[],weeklySchedule:l.weeklySchedule||{0:null,1:null,2:null,3:null,4:null,5:null,6:null}}},Fx=async e=>{const t=await tm(Hf(um,"users",e,"settings","preferences"));return t.exists()&&t.data().workoutOrder||null},Ux=async(e,t)=>{await rm(Hf(um,"users",e,"settings","preferences"),{autoShare:t,updatedAt:Ip()},{merge:!0})},Bx=async(e,t)=>{await rm(Hf(um,"users",e,"settings","preferences"),{selectedWorkout:t,updatedAt:Ip()},{merge:!0})},Vx=async(e,t)=>{await rm(Hf(um,"users",e,"settings","preferences"),{workoutOrder:t,updatedAt:Ip()},{merge:!0})},zx=async(e,t)=>{await rm(Hf(um,"users",e,"settings","preferences"),{weeklySchedule:t,updatedAt:Ip()},{merge:!0})},Wx=async()=>(await nm(Wf(um,"userProfiles"))).docs.map(e=>d({id:e.id},e.data())),Hx=async e=>(await nm(Wf(um,"following",e,"userFollowing"))).docs.map(e=>e.id),qx=async e=>(await nm(Wf(um,"followers",e,"userFollowers"))).docs.map(e=>e.id),Gx=async e=>{if(!e||0===e.length)return[];return await Promise.all(e.map(async e=>{const t=await tm(Hf(um,"userProfiles",e));return t.exists()?d({uid:e},t.data()):{uid:e,displayName:"Unknown"}}))},Kx=async e=>{const t=await Hx(e);if(0===t.length)return[];const n={};return await Promise.all(t.map(async r=>{(await Hx(r)).forEach(r=>{r===e||t.includes(r)||(n[r]=(n[r]||0)+1)})})),Object.entries(n).map(e=>{let[t,n]=e;return{uid:t,mutualCount:n}}).sort((e,t)=>t.mutualCount-e.mutualCount)},Qx=async e=>(await nm(Wf(um,"users",e,"customWorkouts"))).docs.map(e=>d({id:e.id},e.data())),Yx=async(e,t)=>{var n,r;const i=Wf(um,"users",e,"customWorkouts"),s=(await nm(i)).docs.find(e=>{const n=e.data();return!n.deleted&&(n.name===t.name||t.defaultName&&n.defaultName===t.defaultName||n.defaultName===t.name)}),o={name:t.name,type:t.type,exercises:t.exercises,isDefault:t.isDefault||!1,isCustom:t.isCustom||!1,defaultName:t.defaultName||null,restTime:null!==(n=t.restTime)&&void 0!==n?n:null,isPublic:null!==(r=t.isPublic)&&void 0!==r&&r,tags:t.tags||null,creatorUid:t.creatorUid||null,creatorName:t.creatorName||null,creatorPhotoURL:t.creatorPhotoURL||null,updatedAt:Ip()};s?await rm(Hf(um,"users",e,"customWorkouts",s.id),o,{merge:!0}):await im(i,d(d({},o),{},{createdAt:Ip()}))},Jx=async e=>{const t=Op(Wf(um,"users",e,"history"),Vp("completedAt","desc"));return(await nm(t)).docs.map(e=>{var t,n,r,i;const s=e.data();return d(d({id:e.id},s),{},{completedAt:(null===(t=s.completedAt)||void 0===t||null===(n=t.toDate)||void 0===n?void 0:n.call(t))||null,date:(null===(r=s.date)||void 0===r||null===(i=r.toDate)||void 0===i?void 0:i.call(r))||null})})},$x=async(e,t,n)=>{const r=Wf(um,"users",e,"customWorkouts"),i=(await nm(r)).docs.find(e=>{const n=e.data();return!n.isCustom&&(n.name===t||n.defaultName===t)});var s;n?i?await rm(Hf(um,"users",e,"customWorkouts",i.id),{deleted:!0,defaultName:t,updatedAt:Ip()}):await im(r,{deleted:!0,defaultName:t,createdAt:Ip(),updatedAt:Ip()}):i&&await(s=Hf(um,"users",e,"customWorkouts",i.id),sm(Ys(s.firestore,Qf),[new Ec(s._key,dc.none())]))},Xx=async(e,t)=>{const n={workoutName:t.workoutName,workoutType:t.workoutType,date:Ip(),duration:t.duration,setCount:t.setCount,exercises:t.exercises,completedAt:Ip()};t.workoutId&&(n.workoutId=t.workoutId),await im(Wf(um,"users",e,"history"),n)},Zx=[{name:"The Devils 10",type:"timer",exercises:["Russian Twist","Seated in and outs","Boat hold","Jack knifes","Sit up twist","Leg raises","Chair sit ups","Plank knees to elbows","Side planks dips","Bicycle","Boat hold leg flutters"]},{name:"Abs 2",type:"timer",exercises:["Leg raises","Single leg raises","Chair crunches","In and outs","Sit ups","Planks","Bicycles","Russian twists"]},{name:"Core Blaster",type:"timer",exercises:["Mountain climbers","Plank to pushup","Dead bug","Hollow body hold","Side plank dips","Bicycle crunches","Leg raises","Russian twists","Plank jacks","Sit-up to stand"]},{name:"Leg Day Hell",type:"timer",exercises:["Squats","Jump squats","Lunges","Single leg deadlifts","Wall sits","Calf raises","Glute bridges","Side lunges","Pistol squats","Bulgarian split squats"]},{name:"Full Body Burn",type:"timer",exercises:["Burpees","Jumping jacks","High knees","Mountain climbers","Push-ups","Squats","Plank","Jump squats","Tricep dips","Lunges"]},{name:"Cardio Inferno",type:"timer",exercises:["Jumping jacks","High knees","Butt kicks","Mountain climbers","Burpees","Jump squats","Plank jacks","Star jumps","Skaters","Sprint in place"]}],ek=[{name:"Back & Bis",type:"stopwatch",exercises:["10 pull ups (or muscle ups)","Bent over one arm curls","Dead lift","10 pull ups","Bent over curls","Shrugs","Bicep curls","Concentrated curls","10 pull ups"]},{name:"Shoulders",type:"stopwatch",exercises:["Normal handstand hold","Handstand pushups (Max against wall)","Pike pushups","Shoulder flies outwards","Shoulder flies front","Bent over shoulder flies outwards","Parallets handstand hold","Parallets ground to handstand wall cheat","Handstand against wall 1 minute"]},{name:"Chest & Tris",type:"stopwatch",exercises:["Inclined press","Jumping pushups","Curl press","Close pushups","Flies","Dips","Close inclined press","Archer pushups","Bench dips"]},{name:"Legs & Glutes",type:"stopwatch",exercises:["Squats","Deadlifts","Lunges","Glute bridges","Calf raises","Wall sits","Single leg deadlifts","Bulgarian split squats","Hip thrusts"]},{name:"Upper Body Power",type:"stopwatch",exercises:["Pull-ups","Push-ups","Dips","Pike push-ups","Inverted rows","Diamond push-ups","Archer push-ups","Handstand push-ups","Muscle-ups"]},{name:"Strength & Endurance",type:"stopwatch",exercises:["Deadlifts","Squats","Pull-ups","Push-ups","Plank holds","Burpees","Mountain climbers","Jump squats","Dips"]}],tk=["S","M","T","W","T","F","S"],nk=e=>{let{user:t,history:n,loading:i,onLoginClick:s,timerWorkoutData:o=[],stopwatchWorkoutData:a=[],prepTime:l=15,globalRestTime:c=15,onStartWorkout:u,defaultWorkoutNames:h=[],followingIds:f=[],followerIds:p=[],pinnedWorkouts:m=[],onPinnedWorkoutsChange:g,onWorkoutAdded:v,onProfileClick:y,openProfilePopup:b,onProfilePopupOpened:w,onShareWorkout:x}=e;const k=(0,r.useRef)(null),[S,E]=(0,r.useState)((new Date).getFullYear()),[C,N]=(0,r.useState)(!1),I=(0,r.useRef)(null),[_,T]=(0,r.useState)(null),[A,D]=(0,r.useState)(null),P=(0,r.useRef)(null),[R,L]=(0,r.useState)(null),j=(0,r.useRef)(null),O=f,M=p,F=O.length,U=M.length,[B,V]=(0,r.useState)(null),[z,W]=(0,r.useState)([]),[H,q]=(0,r.useState)(!1),[G,K]=(0,r.useState)(!1),[Q,Y]=(0,r.useState)(""),J=(0,r.useRef)(null),[$,X]=(0,r.useState)(null),[Z,ee]=(0,r.useState)(null),[te,ne]=(0,r.useState)(null),re=(0,r.useRef)(null),ie=(0,r.useRef)({});(0,r.useEffect)(()=>{b&&(Xe(!0),w&&w())},[b,w]),(0,r.useEffect)(()=>{if(!C)return;const e=e=>{I.current&&!I.current.contains(e.target)&&N(!1)};return document.addEventListener("pointerdown",e),()=>document.removeEventListener("pointerdown",e)},[C]);const se=(0,r.useCallback)(e=>{const t=new Date,n=t.getDay(),r=new Date(t);r.setDate(t.getDate()-n);if(e==="".concat(r.getFullYear(),"-").concat(String(r.getMonth()+1).padStart(2,"0"),"-").concat(String(r.getDate()).padStart(2,"0")))T(null);else{const t=e.split("-");T(new Date(+t[0],+t[1]-1,+t[2]))}D(e),P.current&&clearTimeout(P.current),P.current=setTimeout(()=>D(null),300)},[]),oe=(0,r.useMemo)(()=>{const e={};return(n||[]).forEach(t=>{const n=t.completedAt||t.date;if(!n)return;const r="".concat(n.getFullYear(),"-").concat(String(n.getMonth()+1).padStart(2,"0"),"-").concat(String(n.getDate()).padStart(2,"0"));e[r]=(e[r]||0)+(t.duration||0)}),e},[n]),ae=(0,r.useMemo)(()=>{const e={};return(n||[]).forEach(t=>{const n=t.completedAt||t.date;if(!n||!t.workoutName)return;const r="".concat(n.getFullYear(),"-").concat(String(n.getMonth()+1).padStart(2,"0"),"-").concat(String(n.getDate()).padStart(2,"0"));e[r]||(e[r]=[]),e[r].push(t.workoutName)}),e},[n]),le=(0,r.useMemo)(()=>{const e=(new Date).getFullYear(),t=new Set([e]);return(n||[]).forEach(e=>{const n=e.completedAt||e.date;n&&t.add(n.getFullYear())}),[...t].sort((e,t)=>t-e)},[n]),ce=(0,r.useMemo)(()=>{const e=n||[],t=e.reduce((e,t)=>e+(t.duration||0),0),r=Math.floor(t/3600),i=Math.floor(t%3600/60),s={};return e.forEach(e=>{const t=e.completedAt||e.date;if(!t)return;const n="".concat(t.getFullYear(),"-").concat(String(t.getMonth()+1).padStart(2,"0"),"-").concat(String(t.getDate()).padStart(2,"0"));s[n]=(s[n]||0)+1}),{totalHours:r,totalMinutes:i,totalSeconds:t,totalWorkouts:e.length,dailyMap:s}},[n]),ue=(0,r.useMemo)(()=>{const e=new Date;let t;if(_)t=new Date(_);else{const n=e.getDay();t=new Date(e),t.setDate(e.getDate()-n)}const n=[];for(let r=0;r<7;r++){const i=new Date(t);i.setDate(t.getDate()+r);const s="".concat(i.getFullYear(),"-").concat(String(i.getMonth()+1).padStart(2,"0"),"-").concat(String(i.getDate()).padStart(2,"0")),o=i>e;n.push({label:tk[r],minutes:o?null:Math.round((oe[s]||0)/60),seconds:o?0:oe[s]||0,workouts:ae[s]||[],date:i,isToday:i.toDateString()===e.toDateString(),isFuture:o})}return n},[oe,ae,_]),{weekStreak:de,weekStreakRecord:he}=(0,r.useMemo)(()=>{const e=new Date,t=e.getDay(),n=new Date(e);n.setDate(e.getDate()-t),n.setHours(0,0,0,0);const r=e=>{for(let t=0;t<7;t++){const n=new Date(e);n.setDate(e.getDate()+t);const r="".concat(n.getFullYear(),"-").concat(String(n.getMonth()+1).padStart(2,"0"),"-").concat(String(n.getDate()).padStart(2,"0"));if(ce.dailyMap[r])return!0}return!1};let i=0,s=new Date(n);for(;r(s);)i++,s.setDate(s.getDate()-7);let o=i;const a=Object.keys(ce.dailyMap);if(a.length>0){const e=a.map(e=>new Date(e+"T00:00:00")),t=new Date(Math.min(...e)),i=new Date(t);i.setDate(i.getDate()-i.getDay());let s=new Date(i),l=0;for(;s<=n;)r(s)?(l++,l>o&&(o=l)):l=0,s.setDate(s.getDate()+7)}return{weekStreak:i,weekStreakRecord:o}},[ce.dailyMap]),fe=(0,r.useMemo)(()=>{const e=new Date,t=S,n=new Date(t,0,1),r=new Date(n);r.setDate(n.getDate()-n.getDay());const i=new Date(t,11,31),s=new Date(i);s.setDate(i.getDate()+(6-i.getDay()));const o=[],a=[];let l=new Date(r),c=0,u=0;for(;l<=s;){const t=[],n=new Date(l),r="".concat(n.getFullYear(),"-").concat(String(n.getMonth()+1).padStart(2,"0"),"-").concat(String(n.getDate()).padStart(2,"0"));for(let i=0;i<7;i++){if(l<=s){const n="".concat(l.getFullYear(),"-").concat(String(l.getMonth()+1).padStart(2,"0"),"-").concat(String(l.getDate()).padStart(2,"0")),s=l>e;l.toDateString()===e.toDateString()&&(u=c),t.push({date:n,count:ce.dailyMap[n]||0,isFuture:s,sundayKey:r}),l.getDate()<=7&&0===i&&a.push({weekIndex:c,label:l.toLocaleString("default",{month:"short"})})}l.setDate(l.getDate()+1)}o.push(t),c++}return{weeks:o,monthLabels:a,numWeeks:o.length,todayWeekIndex:u}},[ce.dailyMap,S]),pe=((0,r.useMemo)(()=>{const e=new Date,t=e.getDay(),n=new Date(e);n.setDate(e.getDate()-t),n.setHours(0,0,0,0);const r=new Date(n);r.setDate(r.getDate()-84);const i=new Date(n);i.setDate(i.getDate()+6);const s=[],o=[];let a=new Date(r),l=0;for(;a<=i;){const t=[];for(let n=0;n<7;n++){if(a<=i){const r="".concat(a.getFullYear(),"-").concat(String(a.getMonth()+1).padStart(2,"0"),"-").concat(String(a.getDate()).padStart(2,"0")),i=a>e;t.push({date:r,count:ce.dailyMap[r]||0,isFuture:i}),a.getDate()<=7&&0===n&&o.push({weekIndex:l,label:a.toLocaleString("default",{month:"short"})})}a.setDate(a.getDate()+1)}s.push(t),l++}return{weeks:s,monthLabels:o,numWeeks:s.length}},[ce.dailyMap]),(e,t)=>t||0===e?"var(--heat-empty)":1===e?"var(--heat-1)":2===e?"var(--heat-2)":3===e?"var(--heat-3)":"var(--heat-4)"),me=(0,r.useMemo)(()=>{const e={},t=new Date;let n=12345;const r=()=>(n=(16807*n+0)%2147483647,(n-1)/2147483646);for(let i=0;i<365;i++){const n=new Date(t);n.setDate(n.getDate()-i);const s="".concat(n.getFullYear(),"-").concat(String(n.getMonth()+1).padStart(2,"0"),"-").concat(String(n.getDate()).padStart(2,"0")),o=r();o<.18?e[s]=1:o<.27?e[s]=2:o<.32?e[s]=3:o<.35&&(e[s]=4)}return e},[]),ge=(0,r.useMemo)(()=>{const e=new Date,t=e.getFullYear(),n=new Date(t,0,1),r=new Date(n);r.setDate(n.getDate()-n.getDay());const i=new Date(t,11,31),s=new Date(i);s.setDate(i.getDate()+(6-i.getDay()));const o=[],a=[];let l=new Date(r),c=0,u=0;for(;l<=s;){const t=[];for(let n=0;n<7;n++){if(l<=s){const r="".concat(l.getFullYear(),"-").concat(String(l.getMonth()+1).padStart(2,"0"),"-").concat(String(l.getDate()).padStart(2,"0")),i=l>e;l.toDateString()===e.toDateString()&&(u=c),t.push({date:r,count:me[r]||0,isFuture:i}),l.getDate()<=7&&0===n&&a.push({weekIndex:c,label:l.toLocaleString("default",{month:"short"})})}l.setDate(l.getDate()+1)}o.push(t),c++}return{weeks:o,monthLabels:a,numWeeks:o.length,todayWeekIndex:u}},[me]),ve=t?ce:{totalHours:42,totalMinutes:15,totalWorkouts:156},ye=t?fe:ge,be=t?ue:[{label:"S",minutes:15,isToday:!1,isFuture:!1},{label:"M",minutes:22,isToday:!1,isFuture:!1},{label:"T",minutes:11,isToday:!1,isFuture:!1},{label:"W",minutes:0,isToday:!1,isFuture:!1},{label:"T",minutes:33,isToday:!1,isFuture:!1},{label:"F",minutes:11,isToday:!0,isFuture:!1},{label:"S",minutes:null,isToday:!1,isFuture:!0}],we=t?de:12,xe=t?he:12;(0,r.useEffect)(()=>{var e;const t=k.current;if(!t)return;const n=14*((null!==(e=ye.todayWeekIndex)&&void 0!==e?e:0)+1)-t.clientWidth;t.scrollLeft=Math.max(0,n)},[ye]);const ke=320,Se=126,Ee=be.filter(e=>null!==e.minutes),Ce=Math.max(...Ee.map(e=>e.minutes),1),Ne=e=>28+e/6*280,Ie=e=>98-e/Ce*86,_e=Ce<=5?Array.from({length:Ce+1},(e,t)=>t):[0,Math.round(Ce/2),Ce],Te=be.map((e,t)=>null!==e.minutes?d(d({x:Ne(t),y:Ie(e.minutes)},e),{},{i:t}):null).filter(Boolean),Ae=Te.length>1?Te.map((e,t)=>"".concat(0===t?"M":"L").concat(e.x,",").concat(e.y)).join(" "):"",De=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],Pe=(0,r.useCallback)(e=>{const t=j.current;if(!t)return null;const n=t.getBoundingClientRect(),r=(e-n.left)/n.width*ke;let i=0,s=1/0;for(let o=0;o<7;o++){const e=28+o/6*280,t=Math.abs(r-e);t<s&&(s=t,i=o)}return i},[ke,28,12]),Re=(0,r.useCallback)(e=>{L(Pe(e))},[Pe]),Le=(0,r.useCallback)(e=>{L(Pe(e))},[Pe]),je=(0,r.useCallback)(()=>{L(null)},[]),Oe=(0,r.useMemo)(()=>[...o,...a],[o,a]),Me=(0,r.useMemo)(()=>Oe.filter(e=>e.forked||!h.includes(e.name)),[Oe,h]),Fe=(0,r.useMemo)(()=>m.map(e=>Oe.find(t=>t.name===e)).filter(Boolean),[m,Oe]),[Ue,Be]=(0,r.useState)(!1),[Ve,ze]=(0,r.useState)(!1),[We,He]=(0,r.useState)(!1),[qe,Ge]=(0,r.useState)(!1),[Ke,Qe]=(0,r.useState)(!1),[Ye,Je]=(0,r.useState)(!1),[$e,Xe]=(0,r.useState)(!1),[Ze,et]=(0,r.useState)(!1),tt=(0,r.useRef)(null),[nt,rt]=(0,r.useState)(null),[it,st]=(0,r.useState)(0),[ot,at]=(0,r.useState)(0),[lt,ct]=(0,r.useState)(!1),[ut,dt]=(0,r.useState)(null),[ht,ft]=(0,r.useState)(null),[pt,mt]=(0,r.useState)([]),[gt,vt]=(0,r.useState)({}),[yt,bt]=(0,r.useState)(!1),[wt,xt]=(0,r.useState)({}),[kt,St]=(0,r.useState)({}),Et=(0,r.useRef)(null),Ct=(0,r.useRef)(null),Nt=(0,r.useRef)(null),It=(0,r.useRef)(!1),[_t,Tt]=(0,r.useState)(null),[At,Dt]=(0,r.useState)([]),[Pt,Rt]=(0,r.useState)(!1),[Lt,jt]=(0,r.useState)(!1),[Ot,Mt]=(0,r.useState)(""),Ft=(0,r.useRef)(null),Ut=(0,r.useCallback)(e=>n&&0!==n.length?n.filter(t=>t.workoutId?t.workoutId===e.id:!e.id&&t.workoutName===e.name).length:0,[n]),Bt=e=>{const t=Math.floor(e/60),n=e%60;return"".concat(t,":").concat(n.toString().padStart(2,"0"))},Vt=(0,r.useCallback)(e=>{const t=e.current;if(!t)return;const n=t.getBoundingClientRect().height;t.style.height="",t.style.minHeight="",t.style.transition="none";const r=t.scrollHeight;if(Math.abs(n-r)<2)return void(t.style.transition="");t.style.height=n+"px",t.style.overflow="hidden",t.offsetHeight,t.style.transition="height 0.3s ease",t.style.height=r+"px";const i=()=>{t.style.height="",t.style.overflow="",t.style.transition="",t.removeEventListener("transitionend",i)};t.addEventListener("transitionend",i)},[]);(0,r.useLayoutEffect)(()=>{const e=Ct.current,t=Nt.current;if(!e||!t||yt)return;const n=e.scrollHeight;if(Nt.current=null,Math.abs(t-n)<4)return;e.style.height=t+"px",e.style.overflow="hidden",e.style.transition="none",e.offsetHeight,e.style.transition="height 0.3s ease",e.style.height=n+"px";const r=()=>{e.style.height="",e.style.overflow="",e.style.transition="",e.removeEventListener("transitionend",r)};return e.addEventListener("transitionend",r),()=>e.removeEventListener("transitionend",r)},[yt,ht,pt]);const zt=async e=>{K(!1),Y("");try{const t="following"===e?O:M,n=await Gx(t);V(e),q(!1),W(n)}catch(t){console.error("Failed to load profiles:",t),V(e),q(!1),W([])}},Wt=async e=>{if(e===B)return;const t=J.current;t&&(t.style.height=t.getBoundingClientRect().height+"px",t.style.minHeight="",t.style.overflow="hidden",t.style.transition="none"),V(e),Y("");try{const t="following"===e?O:M,n=await Gx(t);W(n)}catch(n){console.error("Failed to load profiles:",n)}await new Promise(e=>requestAnimationFrame(e)),await new Promise(e=>requestAnimationFrame(e)),Vt(J)},Ht=()=>{K(!0),setTimeout(()=>{V(null),K(!1),W([]),Y("")},200)},qt=async e=>{const n=!!(B||_t||nt);if(It.current=n,V(null),K(!1),W([]),Tt(null),jt(!1),Dt([]),Xe(!1),et(!1),rt(e),st(0),at(0),dt(null),ft(null),mt([]),vt({}),e.uid!==(null===t||void 0===t?void 0:t.uid)){const t={};Oe.forEach(n=>{n.creatorUid===e.uid&&(t[n.name]=!0)}),xt(t)}else xt({});ct(!1),bt(!0);try{const[t,n,r,i,s]=await Promise.all([Hx(e.uid),qx(e.uid),Jx(e.uid),Qx(e.uid),Mx(e.uid)]);st(t.length),at(n.length);const o=r.reduce((e,t)=>e+(t.duration||0),0),a=Math.floor(o/3600),l=Math.floor(o%3600/60),c={};r.forEach(e=>{const t=e.completedAt||e.date;if(!t)return;const n="".concat(t.getFullYear(),"-").concat(String(t.getMonth()+1).padStart(2,"0"),"-").concat(String(t.getDate()).padStart(2,"0"));c[n]=(c[n]||0)+1}),dt({totalHours:a,totalMinutes:l,dailyMap:c});const u={};r.forEach(e=>{e.workoutName&&(u[e.workoutName]=(u[e.workoutName]||0)+1)}),vt(u),ft((e=>{const t=new Date,n=t.getFullYear(),r=new Date(n,0,1),i=new Date(r);i.setDate(r.getDate()-r.getDay());const s=new Date(n,11,31),o=new Date(s);o.setDate(s.getDate()+(6-s.getDay()));const a=[],l=[];let c=new Date(i),u=0,d=0;for(;c<=o;){const n=[];for(let r=0;r<7;r++){if(c<=o){const i="".concat(c.getFullYear(),"-").concat(String(c.getMonth()+1).padStart(2,"0"),"-").concat(String(c.getDate()).padStart(2,"0")),s=c>t;c.toDateString()===t.toDateString()&&(d=u),n.push({date:i,count:e[i]||0,isFuture:s}),c.getDate()<=7&&0===r&&l.push({weekIndex:u,label:c.toLocaleString("default",{month:"short"})})}c.setDate(c.getDate()+1)}a.push(n),u++}return{weeks:a,monthLabels:l,numWeeks:a.length,todayWeekIndex:d}})(c));const d=s.pinnedWorkouts||[];if(d.length>0){const e=[...Zx,...ek],t={};e.forEach(e=>{t[e.name]=e}),i.filter(e=>!e.deleted).forEach(e=>{t[e.name]=e}),mt(d.map(e=>t[e]).filter(Boolean))}}catch(r){console.error("Failed to load user profile:",r)}Ct.current&&(Nt.current=Ct.current.offsetHeight),bt(!1)},Gt=()=>{It.current=!1,ct(!0),Tt(null),Dt([]),setTimeout(()=>{rt(null),ct(!1),dt(null),ft(null),mt([])},260)},Kt=async e=>{if(nt){Tt(e),Rt(!0),jt(!1),Dt([]),Mt("");try{const t="following"===e?await Hx(nt.uid):await qx(nt.uid),n=await Gx(t),r=Ft.current;r&&(r.style.height=r.getBoundingClientRect().height+"px",r.style.overflow="hidden",r.style.transition="none"),Dt(n)}catch(t){console.error("Failed to load follow list:",t)}Rt(!1),requestAnimationFrame(()=>requestAnimationFrame(()=>Vt(Ft)))}},Qt=async e=>{if(e===_t||!nt)return;const t=Ft.current;t&&(t.style.height=t.getBoundingClientRect().height+"px",t.style.minHeight="",t.style.transition="none"),Tt(e),Mt("");try{const t="following"===e?await Hx(nt.uid):await qx(nt.uid),n=await Gx(t);Dt(n),requestAnimationFrame(()=>requestAnimationFrame(()=>Vt(Ft)))}catch(n){console.error("Failed to load follow list:",n)}},Yt=()=>{jt(!0),setTimeout(()=>{Tt(null),jt(!1),Dt([]),Mt("")},200)},Jt=async e=>{if(t&&!kt[e.name]){if(wt[e.name])return Xt(),Gt(),void(u&&u(e.name));St(t=>d(d({},t),{},{[e.name]:!0}));try{var n;await Yx(t.uid,{name:e.name,type:e.type,exercises:e.exercises,isCustom:!0,tags:e.tags||null,restTime:null!==(n=e.restTime)&&void 0!==n?n:null,creatorUid:(null===nt||void 0===nt?void 0:nt.uid)||null,creatorName:(null===nt||void 0===nt?void 0:nt.displayName)||null,creatorPhotoURL:(null===nt||void 0===nt?void 0:nt.photoURL)||null}),xt(t=>d(d({},t),{},{[e.name]:!0})),v&&v()}catch(r){console.error("Failed to take workout:",r)}finally{St(t=>d(d({},t),{},{[e.name]:!1}))}}},$t=(0,r.useCallback)(e=>{const t=ie.current[e.name],n=t?t.getBoundingClientRect():null;ne(n),X(e),ee("entering")},[]);(0,r.useLayoutEffect)(()=>{if("entering"!==Z||!re.current)return;if(!te)return void ee("open");const e=re.current,t=e.getBoundingClientRect(),n=te.left+te.width/2-(t.left+t.width/2),r=te.top+te.height/2-(t.top+t.height/2),i=te.width/t.width,s=te.height/t.height;e.style.transition="none",e.style.transform="translate(".concat(n,"px, ").concat(r,"px) scale(").concat(i,", ").concat(s,")"),e.style.borderRadius="14px",e.style.background="rgba(255, 59, 48, 0.1)",e.style.borderColor="rgba(255, 59, 48, 0.3)",e.offsetHeight,e.style.transition=["transform 0.38s cubic-bezier(0.32, 0.72, 0, 1)","border-radius 0.38s cubic-bezier(0.32, 0.72, 0, 1)","background 0.28s ease 0.1s","border-color 0.28s ease 0.1s"].join(", "),e.style.transform="none",e.style.borderRadius="",e.style.background="",e.style.borderColor="";const o=setTimeout(()=>{e.style.transition="",e.style.transform="",ee("open")},400);return()=>clearTimeout(o)},[Z,te]);const Xt=(0,r.useCallback)(()=>{if("leaving"===Z)return;const e=re.current;if(!e)return X(null),void ee(null);ee("leaving");const t=null!==$&&void 0!==$&&$.name?ie.current[$.name]:null,n=t?t.getBoundingClientRect():te;if(!n)return void setTimeout(()=>{X(null),ee(null)},230);const r=e.getBoundingClientRect(),i=n.left+n.width/2-(r.left+r.width/2),s=n.top+n.height/2-(r.top+r.height/2),o=n.width/r.width,a=n.height/r.height;e.style.transition=["transform 0.22s cubic-bezier(0.2, 0, 0.6, 1)","border-radius 0.22s cubic-bezier(0.2, 0, 0.6, 1)","background 0.15s ease","border-color 0.15s ease"].join(", "),e.style.transform="translate(".concat(i,"px, ").concat(s,"px) scale(").concat(o,", ").concat(a,")"),e.style.borderRadius="14px",e.style.background="rgba(255, 59, 48, 0.1)",e.style.borderColor="rgba(255, 59, 48, 0.3)",setTimeout(()=>{X(null),ee(null)},230)},[Z,$,te]),Zt=$&&"leaving"!==Z,en=()=>{Be(!0),ze(!1)},tn=()=>{ze(!0),setTimeout(()=>{Be(!1),ze(!1)},200)};(0,r.useEffect)(()=>{var e;if(!$e)return;const t=tt.current;if(!t)return;const n=14*((null!==(e=ye.todayWeekIndex)&&void 0!==e?e:0)+1)-t.clientWidth;t.scrollLeft=Math.max(0,n)},[$e,ye]),(0,r.useEffect)(()=>{var e;if(!nt||!ht)return;const t=Et.current;if(!t)return;const n=14*((null!==(e=ht.todayWeekIndex)&&void 0!==e?e:0)+1)-t.clientWidth;t.scrollLeft=Math.max(0,n)},[nt,ht]);const nn=e=>{const t=60*e.exercises.length+l,n=Ut(e);return(0,vm.jsxs)("div",{ref:t=>{ie.current[e.name]=t},className:"stats-workout-card",onClick:()=>$t(e),children:[(0,vm.jsxs)("div",{className:"stats-card-left",children:[(0,vm.jsxs)("div",{className:"stats-card-name-row",children:[(0,vm.jsx)("span",{className:"stats-card-name",children:e.name}),(e.tags||(e.tag?[e.tag]:[])).map(e=>(0,vm.jsx)("span",{className:"stats-card-tag",children:e.toUpperCase()},e))]}),(0,vm.jsxs)("div",{className:"stats-card-detail",children:[(0,vm.jsx)("span",{className:"stats-card-time",children:Bt(t)}),(0,vm.jsx)("span",{className:"stats-card-dot",children:"\xb7"}),(0,vm.jsxs)("span",{children:[e.exercises.length," exercises"]}),n>0&&(0,vm.jsxs)(vm.Fragment,{children:[(0,vm.jsx)("span",{className:"stats-card-dot",children:"\xb7"}),(0,vm.jsxs)("span",{className:"stats-card-completions",children:[n,"x"]})]})]})]}),(0,vm.jsx)("button",{className:"stats-card-action-btn",onClick:t=>{t.stopPropagation(),x(e)},children:(0,vm.jsxs)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,vm.jsx)("path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"}),(0,vm.jsx)("polyline",{points:"16 6 12 2 8 6"}),(0,vm.jsx)("line",{x1:"12",y1:"2",x2:"12",y2:"15"})]})})]},e.name)},rn=()=>(0,vm.jsxs)("div",{className:"stats-container ".concat(Zt?"stats-detail-open":""),children:[(0,vm.jsxs)("div",{className:"stats-profile-header",children:[(0,vm.jsxs)("div",{className:"stats-profile-left",children:[(0,vm.jsx)("div",{className:"stats-profile-pic-tap",onClick:()=>y&&y(),children:null!==t&&void 0!==t&&t.photoURL?(0,vm.jsx)("img",{src:t.photoURL,alt:"",className:"stats-profile-pic",referrerPolicy:"no-referrer"}):(0,vm.jsx)("div",{className:"stats-profile-pic stats-profile-pic-fallback",children:(0,vm.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:(0,vm.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"})})})}),(0,vm.jsxs)("div",{className:"stats-profile-info",children:[(0,vm.jsx)("span",{className:"stats-profile-name",children:(null===t||void 0===t?void 0:t.displayName)||"Guest"}),(0,vm.jsxs)("div",{className:"stats-follow-row",children:[(0,vm.jsxs)("button",{className:"stats-follow-stat",onClick:()=>zt("following"),children:[(0,vm.jsx)("span",{className:"stats-follow-num",children:F}),(0,vm.jsx)("span",{className:"stats-follow-label",children:"Following"})]}),(0,vm.jsxs)("button",{className:"stats-follow-stat",onClick:()=>zt("followers"),children:[(0,vm.jsx)("span",{className:"stats-follow-num",children:U}),(0,vm.jsx)("span",{className:"stats-follow-label",children:"Followers"})]})]})]})]}),(0,vm.jsxs)("div",{className:"stats-profile-right",children:[(0,vm.jsxs)("div",{className:"stats-profile-time",children:[ve.totalHours>0&&(0,vm.jsxs)(vm.Fragment,{children:[(0,vm.jsx)("span",{className:"stats-profile-time-value",children:ve.totalHours}),(0,vm.jsx)("span",{className:"stats-profile-time-unit",children:"h "})]}),(0,vm.jsx)("span",{className:"stats-profile-time-value",children:ve.totalMinutes}),(0,vm.jsx)("span",{className:"stats-profile-time-unit",children:"m"})]}),(0,vm.jsx)("div",{className:"stats-profile-time-label",children:"Time Training"})]})]}),(0,vm.jsx)("div",{className:"stats-scroll-body",children:(0,vm.jsxs)("div",{className:"stats-content",children:[(0,vm.jsxs)("div",{className:"stats-section",children:[(0,vm.jsxs)("h3",{className:"stats-section-title",children:["Activity",le.length<=1?(0,vm.jsx)("span",{className:"stats-year-label",children:S}):(0,vm.jsxs)("div",{className:"stats-year-dropdown",ref:I,children:[(0,vm.jsxs)("button",{className:"stats-year-toggle",onClick:()=>N(e=>!e),children:[S,(0,vm.jsx)("svg",{width:"10",height:"10",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:(0,vm.jsx)("polyline",{points:C?"18 15 12 9 6 15":"6 9 12 15 18 9"})})]}),C&&(0,vm.jsx)("div",{className:"stats-year-menu",children:le.map(e=>(0,vm.jsx)("button",{className:"stats-year-option ".concat(e===S?"active":""),onClick:()=>{E(e),N(!1)},children:e},e))})]})]}),(0,vm.jsx)("div",{className:"calendar-scroll",ref:k,children:(0,vm.jsxs)("div",{className:"calendar-grid",style:{minWidth:"".concat(14*ye.numWeeks,"px")},children:[(0,vm.jsx)("div",{className:"calendar-month-labels",style:{gridTemplateColumns:"repeat(".concat(ye.numWeeks,", 1fr)")},children:ye.monthLabels.map((e,t)=>(0,vm.jsx)("span",{className:"month-label ".concat(/^\d{4}$/.test(e.label)?"year-label":""),style:{gridColumnStart:e.weekIndex+1},children:e.label},t))}),(0,vm.jsx)("div",{className:"calendar-cells",children:ye.weeks.map((e,t)=>{var n;return(0,vm.jsx)("div",{className:"calendar-week ".concat((null===(n=e[0])||void 0===n?void 0:n.sundayKey)===A?"selected":""),onClick:()=>{var t;return(null===(t=e[0])||void 0===t?void 0:t.sundayKey)&&se(e[0].sundayKey)},children:e.map((e,t)=>(0,vm.jsx)("div",{className:"calendar-cell",style:{backgroundColor:pe(e.count,e.isFuture)},title:"".concat(e.date,": ").concat(e.count," workout").concat(1!==e.count?"s":"")},t))},t)})})]})}),(0,vm.jsxs)("div",{className:"stats-streak-sub",children:["Week Streak: ",we," \xb7 Best: ",xe]})]}),(0,vm.jsxs)("div",{className:"stats-section",children:[(0,vm.jsxs)("h3",{className:"stats-section-title",children:[null!==R?(e=>{const t=null===(e=be[R])||void 0===e?void 0:e.date;return t?t.toLocaleDateString("default",{weekday:"long",month:"short",day:"numeric"}):De[R]})():_?(()=>{const e=new Date(_);e.setDate(e.getDate()+6);const t=e=>e.toLocaleDateString("default",{month:"short",day:"numeric"});return"".concat(t(_)," \u2013 ").concat(t(e))})():"This Week",(0,vm.jsx)("span",{className:"stats-section-title-detail",children:(()=>{if(null!==R){var e,t;const n=null!==(e=null===(t=be[R])||void 0===t?void 0:t.minutes)&&void 0!==e?e:0;return"".concat(n,"m")}const n=be.reduce((e,t)=>e+(t.seconds||0),0);if(0===n)return"";const r=Math.floor(n/3600),i=Math.floor(n%3600/60);return r>0?"".concat(r,"h ").concat(i,"m"):"".concat(i,"m")})()})]}),(0,vm.jsx)("div",{className:"week-line-chart",ref:j,onTouchStart:e=>{e.preventDefault(),Re(e.touches[0].clientX)},onTouchMove:e=>{e.preventDefault(),Le(e.touches[0].clientX)},onTouchEnd:je,onMouseDown:e=>Re(e.clientX),onMouseMove:e=>{1===e.buttons&&Le(e.clientX)},onMouseUp:je,onMouseLeave:je,children:(0,vm.jsxs)("svg",{viewBox:"0 0 ".concat(ke," ").concat(Se),preserveAspectRatio:"xMidYMid meet",className:"week-line-svg",children:[_e.map(e=>(0,vm.jsxs)("g",{children:[(0,vm.jsx)("line",{x1:0,x2:ke,y1:Ie(e),y2:Ie(e),stroke:"rgba(255,255,255,0.15)",strokeWidth:"1"}),(0,vm.jsx)("text",{x:2,y:Ie(e)+1,textAnchor:"start",dominantBaseline:"middle",fill:"rgba(255,255,255,0.3)",fontSize:"9",children:e})]},e)),null!==R&&(0,vm.jsx)("line",{x1:Ne(R),x2:Ne(R),y1:12,y2:98,stroke:"rgba(255,255,255,0.4)",strokeWidth:"1",strokeDasharray:"3,3"}),Ae&&(0,vm.jsx)("path",{d:Ae,fill:"none",stroke:"#e74c3c",strokeWidth:"2",strokeLinejoin:"round",strokeLinecap:"round"}),Te.map(e=>(0,vm.jsx)("circle",{cx:e.x,cy:e.y,r:4,fill:e.minutes>0?"#e74c3c":"#333"},e.i)),be.map((e,t)=>(0,vm.jsx)("text",{x:Ne(t),y:124,textAnchor:"middle",fill:e.isToday?"#e74c3c":"rgba(255,255,255,0.3)",fontSize:"10",fontWeight:e.isToday?"600":"500",children:e.label},t))]})})]}),(0,vm.jsxs)("div",{className:"stats-section",children:[(0,vm.jsxs)("h3",{className:"stats-section-title",children:["Pinned Workouts ",(0,vm.jsxs)("span",{className:"stats-section-title-detail",children:[t?m.length:3,"/3"]})]}),(0,vm.jsxs)("div",{className:"stats-workout-cards",children:[(t?Fe:Zx.slice(0,3)).map(nn),(0,vm.jsxs)("div",{className:"stats-pin-add",onClick:en,children:[(0,vm.jsxs)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,vm.jsx)("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),(0,vm.jsx)("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),(0,vm.jsx)("span",{children:"Pin Workout"})]})]})]}),Ue&&(0,vm.jsx)("div",{className:"stats-pin-picker-overlay ".concat(Ve?"closing":""),onClick:e=>{e.target===e.currentTarget&&tn()},children:(0,vm.jsxs)("div",{className:"stats-pin-picker-panel",children:[(0,vm.jsxs)("div",{className:"stats-pin-picker-header",children:[(0,vm.jsxs)("span",{className:"stats-pin-picker-title",children:["Choose a Workout ",(0,vm.jsxs)("span",{className:"stats-pin-picker-count ".concat(We?"flash-red":""),children:[m.length,"/3"]})]}),(0,vm.jsx)("button",{className:"stats-pin-picker-close",onClick:tn,children:(0,vm.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,vm.jsx)("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),(0,vm.jsx)("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),(0,vm.jsx)("div",{className:"stats-pin-picker-list",children:Me.map(e=>{const t=m.includes(e.name);return(0,vm.jsxs)("button",{className:"stats-pin-picker-item ".concat(t?"pinned":"").concat(t&&qe?" pulse-hint":""),onClick:()=>(e=>{if(m.includes(e)){const t=m.filter(t=>t!==e);return void(g&&g(t))}if(m.length>=3)return He(!0),Ge(!0),void setTimeout(()=>{He(!1),Ge(!1)},600);const t=[...m,e];g&&g(t),tn()})(e.name),children:[(0,vm.jsx)("span",{className:"stats-pin-picker-item-name",children:e.name}),t&&(0,vm.jsx)("svg",{className:"stats-pin-picker-item-icon",width:"14",height:"14",viewBox:"0 0 24 24",fill:"currentColor",stroke:"none",children:(0,vm.jsx)("path",{d:"M16 12V4h1V2H7v2h1v8l-2 2v2h5.2v6h1.6v-6H18v-2z"})})]},e.name)})})]})})]})}),$&&(0,vm.jsx)("div",{className:"stats-detail-overlay ".concat("leaving"===Z?"closing":""),onClick:e=>{e.target===e.currentTarget&&Xt()},children:(0,vm.jsxs)("div",{className:"stats-detail-panel",ref:re,children:[(0,vm.jsxs)("div",{className:"stats-detail-header",children:[(0,vm.jsx)("div",{className:"stats-detail-creator",children:(()=>{const e=nt?nt.photoURL:$.creatorPhotoURL||(null===t||void 0===t?void 0:t.photoURL);return e?(0,vm.jsx)("img",{src:e,alt:"",className:"stats-detail-creator-icon",referrerPolicy:"no-referrer"}):(0,vm.jsx)("div",{className:"stats-detail-creator-icon stats-detail-user-icon",children:(0,vm.jsx)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"currentColor",children:(0,vm.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"})})})})()}),(0,vm.jsxs)("div",{className:"stats-detail-title-group ".concat(($.tags||($.tag?[$.tag]:[])).length>0?"has-tags":""),children:[(0,vm.jsx)("h2",{className:"stats-detail-name",children:$.name}),($.tags||($.tag?[$.tag]:[])).length>0&&(0,vm.jsx)("div",{className:"stats-detail-tags-row",children:($.tags||($.tag?[$.tag]:[])).map(e=>(0,vm.jsx)("span",{className:"stats-detail-tag-pill",children:e.toUpperCase()},e))})]}),(0,vm.jsxs)("div",{className:"stats-detail-header-actions",children:[nt&&nt.uid!==(null===t||void 0===t?void 0:t.uid)?(0,vm.jsx)("button",{className:"stats-detail-share-btn ".concat(wt[$.name]?"taken":""),onClick:()=>Jt($),children:kt[$.name]?(0,vm.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",className:"stats-take-spinner",children:(0,vm.jsx)("circle",{cx:"12",cy:"12",r:"9",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeDasharray:"42",strokeLinecap:"round"})}):wt[$.name]?(0,vm.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:(0,vm.jsx)("polyline",{points:"20 6 9 17 4 12"})}):(0,vm.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,vm.jsx)("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),(0,vm.jsx)("polyline",{points:"7 10 12 15 17 10"}),(0,vm.jsx)("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]})}):(0,vm.jsx)("button",{className:"stats-detail-share-btn",onClick:()=>x($),children:(0,vm.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,vm.jsx)("path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"}),(0,vm.jsx)("polyline",{points:"16 6 12 2 8 6"}),(0,vm.jsx)("line",{x1:"12",y1:"2",x2:"12",y2:"15"})]})}),(0,vm.jsx)("button",{className:"stats-detail-close-btn",onClick:Xt,children:(0,vm.jsxs)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,vm.jsx)("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),(0,vm.jsx)("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]})]}),(0,vm.jsxs)("div",{className:"stats-detail-meta-row",children:[(0,vm.jsxs)("div",{className:"stats-detail-meta-left",children:[(0,vm.jsxs)("div",{className:"stats-detail-meta",children:[(0,vm.jsx)("span",{children:Bt(60*$.exercises.length+l)}),(0,vm.jsx)("span",{className:"stats-detail-dot",children:"\xb7"}),(0,vm.jsxs)("span",{children:[$.exercises.length," exercises"]})]}),(0,vm.jsxs)("span",{className:"stats-detail-rest-display",children:[null!=$.restTime?$.restTime:c,"s rest between exercises"]})]}),(!nt||nt.uid===(null===t||void 0===t?void 0:t.uid))&&(0,vm.jsx)("button",{className:"stats-detail-unpin-btn",onClick:()=>Qe(!0),children:(0,vm.jsxs)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,vm.jsx)("line",{x1:"2",y1:"2",x2:"22",y2:"22"}),(0,vm.jsx)("path",{d:"M12 17v5"}),(0,vm.jsx)("path",{d:"M9 11.58V6l-1-1V4h10v1l-1 1v5.58"}),(0,vm.jsx)("path",{d:"M6 17h12"})]})})]}),(0,vm.jsx)("div",{className:"stats-detail-exercises",children:$.exercises.map((e,t)=>(0,vm.jsxs)("div",{className:"stats-detail-exercise",children:[(0,vm.jsx)("span",{className:"stats-detail-exercise-num",children:t+1}),(0,vm.jsx)("span",{className:"stats-detail-exercise-name",children:e})]},"".concat(e,"-").concat(t)))}),(0,vm.jsx)("button",{className:"stats-detail-start-btn",onClick:()=>{Xt(),u&&u($.name)},children:"Start Workout"}),Ke&&(0,vm.jsxs)("div",{className:"stats-unpin-confirm ".concat(Ye?"closing":""),children:[(0,vm.jsx)("div",{className:"stats-unpin-confirm-backdrop",onClick:()=>{Je(!0),setTimeout(()=>{Qe(!1),Je(!1)},150)}}),(0,vm.jsxs)("div",{className:"stats-unpin-confirm-box",children:[(0,vm.jsx)("p",{className:"stats-unpin-confirm-title",children:"Unpin Workout?"}),(0,vm.jsx)("p",{className:"stats-unpin-confirm-msg",children:"This workout will be removed from your pinned list."}),(0,vm.jsxs)("div",{className:"stats-unpin-confirm-actions",children:[(0,vm.jsx)("button",{className:"stats-unpin-confirm-cancel",onClick:()=>{Je(!0),setTimeout(()=>{Qe(!1),Je(!1)},150)},children:"Cancel"}),(0,vm.jsx)("button",{className:"stats-unpin-confirm-unpin",onClick:()=>{Qe(!1),Je(!1);const e=m.filter(e=>e!==$.name);g(e),Xt()},children:"Unpin"})]})]})]})]})}),B&&(0,vm.jsx)("div",{className:"stats-follow-overlay ".concat(G?"closing":""),onClick:e=>{e.target===e.currentTarget&&Ht()},children:(0,vm.jsxs)("div",{className:"stats-follow-panel",ref:J,children:[(0,vm.jsxs)("div",{className:"stats-follow-panel-header",children:[(0,vm.jsxs)("div",{className:"stats-follow-tabs",children:[(0,vm.jsx)("button",{className:"stats-follow-tab ".concat("following"===B?"active":""),onClick:()=>Wt("following"),children:"Following"}),(0,vm.jsx)("button",{className:"stats-follow-tab ".concat("followers"===B?"active":""),onClick:()=>Wt("followers"),children:"Followers"})]}),(0,vm.jsx)("button",{className:"stats-follow-panel-close",onClick:Ht,children:(0,vm.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,vm.jsx)("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),(0,vm.jsx)("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),(0,vm.jsx)("input",{className:"stats-follow-search",type:"text",placeholder:"Search...",value:Q,onChange:e=>{const t=e.target.value;if(!Q&&t){const e=J.current;e&&(e.style.minHeight=e.offsetHeight+"px")}else if(Q&&!t){const e=J.current;e&&(e.style.minHeight="")}Y(t)}}),(0,vm.jsx)("div",{className:"stats-follow-panel-list",children:H?(0,vm.jsx)("div",{className:"stats-follow-panel-empty",children:"Loading..."}):0===z.length?(0,vm.jsx)("div",{className:"stats-follow-panel-empty",children:"following"===B?"Not following anyone yet":"No followers yet"}):z.filter(e=>!Q||(e.displayName||"").toLowerCase().includes(Q.toLowerCase())).map((e,t)=>(0,vm.jsxs)("div",{className:"stats-follow-panel-item",style:{animationDelay:"".concat(40*t,"ms"),cursor:"pointer"},onClick:()=>qt(e),children:[(0,vm.jsx)("div",{className:"stats-follow-panel-avatar",children:e.photoURL?(0,vm.jsx)("img",{src:e.photoURL,alt:"",referrerPolicy:"no-referrer"}):(0,vm.jsx)("div",{className:"stats-follow-panel-avatar-placeholder",children:(e.displayName||"?")[0].toUpperCase()})}),(0,vm.jsx)("span",{className:"stats-follow-panel-name",children:e.displayName})]},e.uid))})]})}),nt&&(0,vm.jsx)("div",{className:"stats-user-pp-overlay ".concat(lt?"closing":It.current?"no-fade":""),onClick:e=>{e.target===e.currentTarget&&Gt()},children:(0,vm.jsxs)("div",{className:"stats-pp-panel",ref:Ct,children:[(0,vm.jsxs)("div",{className:"stats-pp-header",children:[(0,vm.jsxs)("div",{className:"stats-pp-header-left",children:[nt.photoURL?(0,vm.jsx)("img",{src:nt.photoURL,alt:"",className:"stats-pp-avatar",referrerPolicy:"no-referrer"}):(0,vm.jsx)("div",{className:"stats-pp-avatar stats-pp-avatar-fallback",children:(0,vm.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:(0,vm.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"})})}),(0,vm.jsxs)("div",{className:"stats-pp-header-info",children:[(0,vm.jsx)("span",{className:"stats-pp-name",children:nt.displayName||"Unknown"}),(0,vm.jsxs)("div",{className:"stats-pp-follow-row",children:[(0,vm.jsxs)("button",{className:"stats-pp-follow-btn",onClick:()=>Kt("following"),children:[(0,vm.jsx)("span",{className:"stats-pp-follow-num",children:it})," Following"]}),(0,vm.jsxs)("button",{className:"stats-pp-follow-btn",onClick:()=>Kt("followers"),children:[(0,vm.jsx)("span",{className:"stats-pp-follow-num",children:ot})," Followers"]})]})]})]}),(0,vm.jsx)("div",{className:"stats-pp-header-right",children:yt?(0,vm.jsx)("div",{className:"stats-pp-time",children:(0,vm.jsx)("span",{className:"stats-pp-time-value",style:{opacity:.3},children:"..."})}):ut?(0,vm.jsxs)("div",{className:"stats-pp-time",children:[ut.totalHours>0&&(0,vm.jsxs)(vm.Fragment,{children:[(0,vm.jsx)("span",{className:"stats-pp-time-value",children:ut.totalHours}),(0,vm.jsx)("span",{className:"stats-pp-time-unit",children:"h "})]}),(0,vm.jsx)("span",{className:"stats-pp-time-value",children:ut.totalMinutes}),(0,vm.jsx)("span",{className:"stats-pp-time-unit",children:"m"})]}):(0,vm.jsxs)("div",{className:"stats-pp-time",children:[(0,vm.jsx)("span",{className:"stats-pp-time-value",children:"0"}),(0,vm.jsx)("span",{className:"stats-pp-time-unit",children:"m"})]})})]}),yt?(0,vm.jsx)("div",{style:{padding:"20px 0",textAlign:"center",color:"rgba(255,255,255,0.3)",fontSize:"0.82rem"},children:"Loading..."}):(0,vm.jsxs)(vm.Fragment,{children:[ht&&(0,vm.jsx)("div",{className:"stats-pp-calendar-scroll",ref:Et,children:(0,vm.jsxs)("div",{className:"stats-pp-calendar",style:{minWidth:"".concat(14*ht.numWeeks,"px")},children:[(0,vm.jsx)("div",{className:"calendar-month-labels",style:{gridTemplateColumns:"repeat(".concat(ht.numWeeks,", 1fr)")},children:ht.monthLabels.map((e,t)=>(0,vm.jsx)("span",{className:"month-label",style:{gridColumnStart:e.weekIndex+1},children:e.label},t))}),(0,vm.jsx)("div",{className:"calendar-cells",children:ht.weeks.map((e,t)=>(0,vm.jsx)("div",{className:"calendar-week",style:{cursor:"default"},children:e.map((e,t)=>(0,vm.jsx)("div",{className:"calendar-cell",style:{backgroundColor:pe(e.count,e.isFuture),cursor:"default"}},t))},t))})]})}),pt.length>0&&(0,vm.jsx)("div",{className:"stats-pp-cards",children:pt.map((e,n)=>{const r=60*e.exercises.length+15,i=gt[e.name]||0;return(0,vm.jsxs)("div",{ref:t=>{ie.current[e.name]=t},className:"stats-workout-card stats-vp-card-fade",style:{animationDelay:"".concat(150+60*n,"ms")},onClick:()=>$t(e),children:[(0,vm.jsxs)("div",{className:"stats-card-left",children:[(0,vm.jsxs)("div",{className:"stats-card-name-row",children:[(0,vm.jsx)("span",{className:"stats-card-name",children:e.name}),(e.tags||(e.tag?[e.tag]:[])).map(e=>(0,vm.jsx)("span",{className:"stats-card-tag",children:e.toUpperCase()},e))]}),(0,vm.jsxs)("div",{className:"stats-card-detail",children:[(0,vm.jsx)("span",{className:"stats-card-time",children:Bt(r)}),(0,vm.jsx)("span",{className:"stats-card-dot",children:"\xb7"}),(0,vm.jsxs)("span",{children:[e.exercises.length," exercises"]}),i>0&&(0,vm.jsxs)(vm.Fragment,{children:[(0,vm.jsx)("span",{className:"stats-card-dot",children:"\xb7"}),(0,vm.jsxs)("span",{className:"stats-card-completions",children:[i,"x"]})]})]})]}),nt.uid!==(null===t||void 0===t?void 0:t.uid)?(0,vm.jsx)("button",{className:"stats-card-action-btn ".concat(wt[e.name]?"taken":""),onClick:t=>{t.stopPropagation(),Jt(e)},children:kt[e.name]?(0,vm.jsx)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",className:"stats-take-spinner",children:(0,vm.jsx)("circle",{cx:"12",cy:"12",r:"9",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeDasharray:"42",strokeLinecap:"round"})}):wt[e.name]?(0,vm.jsx)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:(0,vm.jsx)("polyline",{points:"20 6 9 17 4 12"})}):(0,vm.jsxs)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,vm.jsx)("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),(0,vm.jsx)("polyline",{points:"7 10 12 15 17 10"}),(0,vm.jsx)("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]})}):(0,vm.jsx)("button",{className:"stats-card-action-btn",onClick:t=>{t.stopPropagation(),x(e)},children:(0,vm.jsxs)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,vm.jsx)("path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"}),(0,vm.jsx)("polyline",{points:"16 6 12 2 8 6"}),(0,vm.jsx)("line",{x1:"12",y1:"2",x2:"12",y2:"15"})]})})]},e.name)})})]})]},nt.uid)}),_t&&(0,vm.jsx)("div",{className:"stats-follow-overlay ".concat(Lt?"closing":""),style:{zIndex:185},onClick:e=>{e.target===e.currentTarget&&Yt()},children:(0,vm.jsxs)("div",{className:"stats-follow-panel",ref:Ft,children:[(0,vm.jsxs)("div",{className:"stats-follow-panel-header",children:[(0,vm.jsxs)("div",{className:"stats-follow-tabs",children:[(0,vm.jsx)("button",{className:"stats-follow-tab ".concat("following"===_t?"active":""),onClick:()=>Qt("following"),children:"Following"}),(0,vm.jsx)("button",{className:"stats-follow-tab ".concat("followers"===_t?"active":""),onClick:()=>Qt("followers"),children:"Followers"})]}),(0,vm.jsx)("button",{className:"stats-follow-panel-close",onClick:Yt,children:(0,vm.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,vm.jsx)("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),(0,vm.jsx)("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),(0,vm.jsx)("input",{className:"stats-follow-search",type:"text",placeholder:"Search...",value:Ot,onChange:e=>{const t=e.target.value;if(!Ot&&t){const e=Ft.current;e&&(e.style.minHeight=e.offsetHeight+"px")}else if(Ot&&!t){const e=Ft.current;e&&(e.style.minHeight="")}Mt(t)}}),(0,vm.jsx)("div",{className:"stats-follow-panel-list",children:Pt?(0,vm.jsx)("div",{className:"stats-follow-panel-empty",children:"Loading..."}):0===At.length?(0,vm.jsx)("div",{className:"stats-follow-panel-empty",children:"following"===_t?"Not following anyone yet":"No followers yet"}):At.filter(e=>!Ot||(e.displayName||"").toLowerCase().includes(Ot.toLowerCase())).map((e,t)=>(0,vm.jsxs)("div",{className:"stats-follow-panel-item",style:{animationDelay:"".concat(40*t,"ms"),cursor:"pointer"},onClick:()=>{qt(e)},children:[(0,vm.jsx)("div",{className:"stats-follow-panel-avatar",children:e.photoURL?(0,vm.jsx)("img",{src:e.photoURL,alt:"",referrerPolicy:"no-referrer"}):(0,vm.jsx)("div",{className:"stats-follow-panel-avatar-placeholder",children:(e.displayName||"?")[0].toUpperCase()})}),(0,vm.jsx)("span",{className:"stats-follow-panel-name",children:e.displayName})]},e.uid))})]})}),$e&&(0,vm.jsx)("div",{className:"stats-pp-overlay ".concat(Ze?"closing":""),onClick:e=>{e.target===e.currentTarget&&(et(!0),setTimeout(()=>{Xe(!1),et(!1)},260))},children:(0,vm.jsxs)("div",{className:"stats-pp-panel",children:[(0,vm.jsxs)("div",{className:"stats-pp-header",children:[(0,vm.jsxs)("div",{className:"stats-pp-header-left",children:[null!==t&&void 0!==t&&t.photoURL?(0,vm.jsx)("img",{src:t.photoURL,alt:"",className:"stats-pp-avatar",referrerPolicy:"no-referrer"}):(0,vm.jsx)("div",{className:"stats-pp-avatar stats-pp-avatar-fallback",children:(0,vm.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:(0,vm.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"})})}),(0,vm.jsxs)("div",{className:"stats-pp-header-info",children:[(0,vm.jsx)("span",{className:"stats-pp-name",children:(null===t||void 0===t?void 0:t.displayName)||"Guest"}),(0,vm.jsxs)("div",{className:"stats-pp-follow-row",children:[(0,vm.jsxs)("button",{className:"stats-pp-follow-btn",onClick:()=>zt("following"),children:[(0,vm.jsx)("span",{className:"stats-pp-follow-num",children:F})," Following"]}),(0,vm.jsxs)("button",{className:"stats-pp-follow-btn",onClick:()=>zt("followers"),children:[(0,vm.jsx)("span",{className:"stats-pp-follow-num",children:U})," Followers"]})]})]})]}),(0,vm.jsx)("div",{className:"stats-pp-header-right",children:(0,vm.jsxs)("div",{className:"stats-pp-time",children:[ve.totalHours>0&&(0,vm.jsxs)(vm.Fragment,{children:[(0,vm.jsx)("span",{className:"stats-pp-time-value",children:ve.totalHours}),(0,vm.jsx)("span",{className:"stats-pp-time-unit",children:"h "})]}),(0,vm.jsx)("span",{className:"stats-pp-time-value",children:ve.totalMinutes}),(0,vm.jsx)("span",{className:"stats-pp-time-unit",children:"m"})]})})]}),(0,vm.jsx)("div",{className:"stats-pp-calendar-scroll",ref:tt,children:(0,vm.jsxs)("div",{className:"stats-pp-calendar",style:{minWidth:"".concat(14*ye.numWeeks,"px")},children:[(0,vm.jsx)("div",{className:"calendar-month-labels",style:{gridTemplateColumns:"repeat(".concat(ye.numWeeks,", 1fr)")},children:ye.monthLabels.map((e,t)=>(0,vm.jsx)("span",{className:"month-label",style:{gridColumnStart:e.weekIndex+1},children:e.label},t))}),(0,vm.jsx)("div",{className:"calendar-cells",children:ye.weeks.map((e,t)=>(0,vm.jsx)("div",{className:"calendar-week",style:{cursor:"default"},children:e.map((e,t)=>(0,vm.jsx)("div",{className:"calendar-cell",style:{backgroundColor:pe(e.count,e.isFuture),cursor:"default"}},t))},t))})]})}),Fe.length>0&&(0,vm.jsx)("div",{className:"stats-pp-cards",children:Fe.map(e=>{const t=60*e.exercises.length+l,n=Ut(e);return(0,vm.jsxs)("div",{ref:t=>{ie.current[e.name]=t},className:"stats-workout-card",onClick:()=>(e=>{$t(e)})(e),children:[(0,vm.jsxs)("div",{className:"stats-card-left",children:[(0,vm.jsxs)("div",{className:"stats-card-name-row",children:[(0,vm.jsx)("span",{className:"stats-card-name",children:e.name}),(e.tags||(e.tag?[e.tag]:[])).map(e=>(0,vm.jsx)("span",{className:"stats-card-tag",children:e.toUpperCase()},e))]}),(0,vm.jsxs)("div",{className:"stats-card-detail",children:[(0,vm.jsx)("span",{className:"stats-card-time",children:Bt(t)}),(0,vm.jsx)("span",{className:"stats-card-dot",children:"\xb7"}),(0,vm.jsxs)("span",{children:[e.exercises.length," exercises"]}),n>0&&(0,vm.jsxs)(vm.Fragment,{children:[(0,vm.jsx)("span",{className:"stats-card-dot",children:"\xb7"}),(0,vm.jsxs)("span",{className:"stats-card-completions",children:[n,"x"]})]})]})]}),(0,vm.jsx)("button",{className:"stats-card-action-btn",onClick:t=>{t.stopPropagation(),x(e)},children:(0,vm.jsxs)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,vm.jsx)("path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"}),(0,vm.jsx)("polyline",{points:"16 6 12 2 8 6"}),(0,vm.jsx)("line",{x1:"12",y1:"2",x2:"12",y2:"15"})]})})]},e.name)})})]})})]});return i?(0,vm.jsx)("div",{className:"stats-page",children:(0,vm.jsx)("div",{className:"stats-loading",children:"Loading..."})}):(0,vm.jsxs)("div",{className:"stats-page",children:[!t&&(0,vm.jsxs)(vm.Fragment,{children:[(0,vm.jsx)("div",{className:"stats-blur-wrapper",children:rn()}),(0,vm.jsx)("div",{className:"stats-signin-overlay",children:(0,vm.jsx)("button",{className:"stats-signin-btn",onClick:s,children:"Sign in to track your stats"})})]}),t&&rn()]})},rk=n.p+"static/media/Tab1.644705db5cadae3d7152.jpg",ik=n.p+"static/media/Tab2.9129897094ad3458e7fd.jpg",sk=n.p+"static/media/Tab4.3e48094e7240969b93d0.jpg",ok=e=>{let{activeTab:t,onTabChange:n}=e;const[i,s]=(0,r.useState)("portrait");return(0,r.useEffect)(()=>{const e=()=>{window.screen&&window.screen.orientation?s(window.screen.orientation.type):s(window.innerHeight>window.innerWidth?"portrait":"landscape")};return e(),window.addEventListener("orientationchange",e),window.addEventListener("resize",e),()=>{window.removeEventListener("orientationchange",e),window.removeEventListener("resize",e)}},[]),(0,vm.jsxs)("div",{className:"tab-bar ".concat(i),children:[(0,vm.jsxs)("button",{className:"tab-item ".concat("home"===t?"active":""),onClick:()=>n("home"),children:[(0,vm.jsx)("div",{className:"tab-icon",children:(0,vm.jsx)("img",{src:rk,alt:"Home"})}),(0,vm.jsx)("span",{className:"tab-label",children:"Home"})]}),(0,vm.jsxs)("button",{className:"tab-item ".concat("timer"===t?"active":""),onClick:()=>n("timer"),children:[(0,vm.jsx)("div",{className:"tab-icon",children:(0,vm.jsx)("img",{src:ik,alt:"Timer"})}),(0,vm.jsx)("span",{className:"tab-label",children:"Timer"})]}),(0,vm.jsxs)("button",{className:"tab-item ".concat("stats"===t?"active":""),onClick:()=>n("stats"),children:[(0,vm.jsx)("div",{className:"tab-icon",children:(0,vm.jsx)("img",{src:sk,alt:"Stats"})}),(0,vm.jsx)("span",{className:"tab-label",children:"Stats"})]})]})},ak=n.p+"static/media/Tab3.2dffe92ec627be42ba52.jpg",lk=e=>{let{type:t,level:n,workouts:i,selectedWorkout:s,onWorkoutSelect:o,onArrowClick:a,onBack:l,onNavigateToTab:c}=e;const[u,d]=(0,r.useState)(s);r.useEffect(()=>{d(s)},[s]);return(0,vm.jsxs)("div",{className:"edit-page-container",children:[(0,vm.jsxs)("div",{className:"edit-page-header",children:[(0,vm.jsx)("button",{className:"close-button",onClick:()=>{console.log("Back button clicked"),l()},children:(0,vm.jsx)("span",{className:"close-icon",children:"\xd7"})}),(0,vm.jsx)("h1",{className:"edit-page-title",children:"categories"===n?"timer"===t?"Timer":"Stopwatch":"Edit ".concat(s)}),(0,vm.jsx)("img",{src:"timer"===t?ik:ak,alt:"timer"===t?"Timer":"Stopwatch",className:"header-image",onClick:()=>{c&&c(t)}})]}),(0,vm.jsx)("div",{className:"workouts-list",children:i.map((e,t)=>(0,vm.jsxs)("div",{className:"workout-item ".concat(u===e?"selected":""),onClick:()=>(e=>{d(e),o(e)})(e),children:[(0,vm.jsx)("div",{className:"workout-number",children:t+1}),(0,vm.jsx)("div",{className:"workout-name",children:e}),(0,vm.jsx)("div",{className:"arrow-indicator",onClick:t=>((e,t)=>{t.stopPropagation(),a(e)})(e,t),children:"\u2192"})]},t))}),"exercises"===n&&(0,vm.jsx)("div",{className:"edit-page-footer",children:(0,vm.jsxs)("p",{children:["Selected: ",u||"None"]})})]})},ck=e=>{let{workoutName:t,exercises:n,onSave:i,onBack:s,workoutType:o,onStart:a}=e;const[l,c]=(0,r.useState)([...n]),[u,h]=(0,r.useState)(!1),[f,p]=(0,r.useState)(""),[m,g]=(0,r.useState)(!1),[v,y]=(0,r.useState)(!1),[b,w]=(0,r.useState)(t),[x,k]=(0,r.useState)([...n]),[S,E]=(0,r.useState)(t),C=(0,r.useRef)(null);(0,r.useEffect)(()=>{const e=JSON.stringify(l)!==JSON.stringify(x)||b!==S;g(e)},[l,x,b,S]),(0,r.useEffect)(()=>{const e=e=>{v&&C.current&&!C.current.contains(e.target)&&y(!1)};return v&&(document.addEventListener("mousedown",e),document.addEventListener("touchstart",e)),()=>{document.removeEventListener("mousedown",e),document.removeEventListener("touchstart",e)}},[v]);const N=()=>{f.trim()&&(c([...l,f.trim()]),p(""),h(!1))},I=()=>{p(""),h(!1)};return(0,vm.jsxs)("div",{className:"exercise-edit-container",children:[(0,vm.jsxs)("div",{className:"exercise-edit-header",children:[(0,vm.jsx)("button",{className:"close-button",onClick:s,children:(0,vm.jsx)("span",{className:"close-icon",children:"\xd7"})}),v?(0,vm.jsx)("input",{ref:C,type:"text",value:b,onChange:e=>{w(e.target.value)},onKeyDown:e=>{"Enter"===e.key?y(!1):"Escape"===e.key&&(w(t),y(!1))},onBlur:()=>{y(!1)},className:"exercise-edit-title-input",autoFocus:!0}):(0,vm.jsx)("h1",{className:"exercise-edit-title",onClick:e=>{("ontouchstart"in window||navigator.maxTouchPoints>0)&&y(!0)},onDoubleClick:()=>{y(!0)},children:b})]}),(0,vm.jsx)(Qw,{onDragEnd:e=>{if(!e.destination)return;const t=Array.from(l),[n]=t.splice(e.source.index,1);t.splice(e.destination.index,0,n),c(t)},children:(0,vm.jsx)(Rx,{droppableId:"exercises",direction:"vertical",children:(e,t)=>(0,vm.jsxs)("div",d(d({},e.droppableProps),{},{ref:e.innerRef,className:"exercises-list",children:[l.map((e,t)=>(0,vm.jsx)(Tx,{draggableId:"".concat(e,"-").concat(t),index:t,children:(n,r)=>(0,vm.jsxs)("div",d(d(d({ref:n.innerRef},n.draggableProps),n.dragHandleProps),{},{className:"exercise-item ".concat(r.isDragging?"dragging":""),style:d(d({},n.draggableProps.style),{},{opacity:r.isDragging?.8:1,margin:0,padding:0}),children:[(0,vm.jsx)("div",{className:"exercise-number",children:t+1}),(0,vm.jsx)("div",{className:"exercise-name",children:e}),(0,vm.jsx)("button",{className:"delete-exercise-btn",onClick:()=>(e=>{const t=l.filter((t,n)=>n!==e);c(t)})(t),children:"\xd7"})]}))},"".concat(e,"-").concat(t))),e.placeholder]}))})}),(0,vm.jsxs)("div",{className:"exercise-edit-actions",children:[(0,vm.jsx)("button",{className:"add-exercise-btn",onClick:()=>{h(!0)},children:"+ Add Exercise"}),(0,vm.jsx)("button",{className:"save-btn",onClick:()=>{m||b!==S?(m||b!==S)&&(i(l,b),k([...l]),E(b)):a&&a()},children:m?"Save Changes":"Start"})]}),u&&(0,vm.jsxs)("div",{className:"add-exercise-popup",children:[(0,vm.jsx)("div",{className:"popup-overlay",onClick:I}),(0,vm.jsxs)("div",{className:"popup-content",children:[(0,vm.jsx)("h3",{children:"Add New Exercise"}),(0,vm.jsx)("input",{type:"text",placeholder:"Enter exercise name...",value:f,onChange:e=>p(e.target.value),onKeyDown:e=>{"Enter"===e.key?N():"Escape"===e.key&&I()},autoFocus:!0,className:"exercise-name-input"}),(0,vm.jsxs)("div",{className:"popup-actions",children:[(0,vm.jsx)("button",{className:"popup-btn cancel-btn",onClick:I,children:"Cancel"}),(0,vm.jsx)("button",{className:"popup-btn confirm-btn",onClick:N,children:"Add"})]})]})]})]})};var uk,dk=Object.defineProperty,hk=Object.getOwnPropertySymbols,fk=Object.prototype.hasOwnProperty,pk=Object.prototype.propertyIsEnumerable,mk=(e,t,n)=>t in e?dk(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,gk=(e,t)=>{for(var n in t||(t={}))fk.call(t,n)&&mk(e,n,t[n]);if(hk)for(var n of hk(t))pk.call(t,n)&&mk(e,n,t[n]);return e},vk=(e,t)=>{var n={};for(var r in e)fk.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&hk)for(var r of hk(e))t.indexOf(r)<0&&pk.call(e,r)&&(n[r]=e[r]);return n};(e=>{const t=class t{constructor(e,n,r,s){if(this.version=e,this.errorCorrectionLevel=n,this.modules=[],this.isFunction=[],e<t.MIN_VERSION||e>t.MAX_VERSION)throw new RangeError("Version value out of range");if(s<-1||s>7)throw new RangeError("Mask value out of range");this.size=4*e+17;let o=[];for(let t=0;t<this.size;t++)o.push(!1);for(let t=0;t<this.size;t++)this.modules.push(o.slice()),this.isFunction.push(o.slice());this.drawFunctionPatterns();const a=this.addEccAndInterleave(r);if(this.drawCodewords(a),-1==s){let e=1e9;for(let t=0;t<8;t++){this.applyMask(t),this.drawFormatBits(t);const n=this.getPenaltyScore();n<e&&(s=t,e=n),this.applyMask(t)}}i(0<=s&&s<=7),this.mask=s,this.applyMask(s),this.drawFormatBits(s),this.isFunction=[]}static encodeText(n,r){const i=e.QrSegment.makeSegments(n);return t.encodeSegments(i,r)}static encodeBinary(n,r){const i=e.QrSegment.makeBytes(n);return t.encodeSegments([i],r)}static encodeSegments(e,r){let s,a,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:40,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1,d=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];if(!(t.MIN_VERSION<=l&&l<=c&&c<=t.MAX_VERSION)||u<-1||u>7)throw new RangeError("Invalid value");for(s=l;;s++){const n=8*t.getNumDataCodewords(s,r),i=o.getTotalBits(e,s);if(i<=n){a=i;break}if(s>=c)throw new RangeError("Data too long")}for(const n of[t.Ecc.MEDIUM,t.Ecc.QUARTILE,t.Ecc.HIGH])d&&a<=8*t.getNumDataCodewords(s,n)&&(r=n);let h=[];for(const t of e){n(t.mode.modeBits,4,h),n(t.numChars,t.mode.numCharCountBits(s),h);for(const e of t.getData())h.push(e)}i(h.length==a);const f=8*t.getNumDataCodewords(s,r);i(h.length<=f),n(0,Math.min(4,f-h.length),h),n(0,(8-h.length%8)%8,h),i(h.length%8==0);for(let t=236;h.length<f;t^=253)n(t,8,h);let p=[];for(;8*p.length<h.length;)p.push(0);return h.forEach((e,t)=>p[t>>>3]|=e<<7-(7&t)),new t(s,r,p,u)}getModule(e,t){return 0<=e&&e<this.size&&0<=t&&t<this.size&&this.modules[t][e]}getModules(){return this.modules}drawFunctionPatterns(){for(let n=0;n<this.size;n++)this.setFunctionModule(6,n,n%2==0),this.setFunctionModule(n,6,n%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const e=this.getAlignmentPatternPositions(),t=e.length;for(let n=0;n<t;n++)for(let r=0;r<t;r++)0==n&&0==r||0==n&&r==t-1||n==t-1&&0==r||this.drawAlignmentPattern(e[n],e[r]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(e){const t=this.errorCorrectionLevel.formatBits<<3|e;let n=t;for(let r=0;r<10;r++)n=n<<1^1335*(n>>>9);const s=21522^(t<<10|n);i(s>>>15==0);for(let i=0;i<=5;i++)this.setFunctionModule(8,i,r(s,i));this.setFunctionModule(8,7,r(s,6)),this.setFunctionModule(8,8,r(s,7)),this.setFunctionModule(7,8,r(s,8));for(let i=9;i<15;i++)this.setFunctionModule(14-i,8,r(s,i));for(let i=0;i<8;i++)this.setFunctionModule(this.size-1-i,8,r(s,i));for(let i=8;i<15;i++)this.setFunctionModule(8,this.size-15+i,r(s,i));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let e=this.version;for(let n=0;n<12;n++)e=e<<1^7973*(e>>>11);const t=this.version<<12|e;i(t>>>18==0);for(let n=0;n<18;n++){const e=r(t,n),i=this.size-11+n%3,s=Math.floor(n/3);this.setFunctionModule(i,s,e),this.setFunctionModule(s,i,e)}}drawFinderPattern(e,t){for(let n=-4;n<=4;n++)for(let r=-4;r<=4;r++){const i=Math.max(Math.abs(r),Math.abs(n)),s=e+r,o=t+n;0<=s&&s<this.size&&0<=o&&o<this.size&&this.setFunctionModule(s,o,2!=i&&4!=i)}}drawAlignmentPattern(e,t){for(let n=-2;n<=2;n++)for(let r=-2;r<=2;r++)this.setFunctionModule(e+r,t+n,1!=Math.max(Math.abs(r),Math.abs(n)))}setFunctionModule(e,t,n){this.modules[t][e]=n,this.isFunction[t][e]=!0}addEccAndInterleave(e){const n=this.version,r=this.errorCorrectionLevel;if(e.length!=t.getNumDataCodewords(n,r))throw new RangeError("Invalid argument");const s=t.NUM_ERROR_CORRECTION_BLOCKS[r.ordinal][n],o=t.ECC_CODEWORDS_PER_BLOCK[r.ordinal][n],a=Math.floor(t.getNumRawDataModules(n)/8),l=s-a%s,c=Math.floor(a/s);let u=[];const d=t.reedSolomonComputeDivisor(o);for(let i=0,f=0;i<s;i++){let n=e.slice(f,f+c-o+(i<l?0:1));f+=n.length;const r=t.reedSolomonComputeRemainder(n,d);i<l&&n.push(0),u.push(n.concat(r))}let h=[];for(let t=0;t<u[0].length;t++)u.forEach((e,n)=>{(t!=c-o||n>=l)&&h.push(e[t])});return i(h.length==a),h}drawCodewords(e){if(e.length!=Math.floor(t.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let n=0;for(let t=this.size-1;t>=1;t-=2){6==t&&(t=5);for(let i=0;i<this.size;i++)for(let s=0;s<2;s++){const o=t-s,a=0==(t+1&2)?this.size-1-i:i;!this.isFunction[a][o]&&n<8*e.length&&(this.modules[a][o]=r(e[n>>>3],7-(7&n)),n++)}}i(n==8*e.length)}applyMask(e){if(e<0||e>7)throw new RangeError("Mask value out of range");for(let t=0;t<this.size;t++)for(let n=0;n<this.size;n++){let r;switch(e){case 0:r=(n+t)%2==0;break;case 1:r=t%2==0;break;case 2:r=n%3==0;break;case 3:r=(n+t)%3==0;break;case 4:r=(Math.floor(n/3)+Math.floor(t/2))%2==0;break;case 5:r=n*t%2+n*t%3==0;break;case 6:r=(n*t%2+n*t%3)%2==0;break;case 7:r=((n+t)%2+n*t%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[t][n]&&r&&(this.modules[t][n]=!this.modules[t][n])}}getPenaltyScore(){let e=0;for(let i=0;i<this.size;i++){let n=!1,r=0,s=[0,0,0,0,0,0,0];for(let o=0;o<this.size;o++)this.modules[i][o]==n?(r++,5==r?e+=t.PENALTY_N1:r>5&&e++):(this.finderPenaltyAddHistory(r,s),n||(e+=this.finderPenaltyCountPatterns(s)*t.PENALTY_N3),n=this.modules[i][o],r=1);e+=this.finderPenaltyTerminateAndCount(n,r,s)*t.PENALTY_N3}for(let i=0;i<this.size;i++){let n=!1,r=0,s=[0,0,0,0,0,0,0];for(let o=0;o<this.size;o++)this.modules[o][i]==n?(r++,5==r?e+=t.PENALTY_N1:r>5&&e++):(this.finderPenaltyAddHistory(r,s),n||(e+=this.finderPenaltyCountPatterns(s)*t.PENALTY_N3),n=this.modules[o][i],r=1);e+=this.finderPenaltyTerminateAndCount(n,r,s)*t.PENALTY_N3}for(let i=0;i<this.size-1;i++)for(let n=0;n<this.size-1;n++){const r=this.modules[i][n];r==this.modules[i][n+1]&&r==this.modules[i+1][n]&&r==this.modules[i+1][n+1]&&(e+=t.PENALTY_N2)}let n=0;for(const t of this.modules)n=t.reduce((e,t)=>e+(t?1:0),n);const r=this.size*this.size,s=Math.ceil(Math.abs(20*n-10*r)/r)-1;return i(0<=s&&s<=9),e+=s*t.PENALTY_N4,i(0<=e&&e<=2568888),e}getAlignmentPatternPositions(){if(1==this.version)return[];{const e=Math.floor(this.version/7)+2,t=32==this.version?26:2*Math.ceil((4*this.version+4)/(2*e-2));let n=[6];for(let r=this.size-7;n.length<e;r-=t)n.splice(1,0,r);return n}}static getNumRawDataModules(e){if(e<t.MIN_VERSION||e>t.MAX_VERSION)throw new RangeError("Version number out of range");let n=(16*e+128)*e+64;if(e>=2){const t=Math.floor(e/7)+2;n-=(25*t-10)*t-55,e>=7&&(n-=36)}return i(208<=n&&n<=29648),n}static getNumDataCodewords(e,n){return Math.floor(t.getNumRawDataModules(e)/8)-t.ECC_CODEWORDS_PER_BLOCK[n.ordinal][e]*t.NUM_ERROR_CORRECTION_BLOCKS[n.ordinal][e]}static reedSolomonComputeDivisor(e){if(e<1||e>255)throw new RangeError("Degree out of range");let n=[];for(let t=0;t<e-1;t++)n.push(0);n.push(1);let r=1;for(let i=0;i<e;i++){for(let e=0;e<n.length;e++)n[e]=t.reedSolomonMultiply(n[e],r),e+1<n.length&&(n[e]^=n[e+1]);r=t.reedSolomonMultiply(r,2)}return n}static reedSolomonComputeRemainder(e,n){let r=n.map(e=>0);for(const i of e){const e=i^r.shift();r.push(0),n.forEach((n,i)=>r[i]^=t.reedSolomonMultiply(n,e))}return r}static reedSolomonMultiply(e,t){if(e>>>8!=0||t>>>8!=0)throw new RangeError("Byte out of range");let n=0;for(let r=7;r>=0;r--)n=n<<1^285*(n>>>7),n^=(t>>>r&1)*e;return i(n>>>8==0),n}finderPenaltyCountPatterns(e){const t=e[1];i(t<=3*this.size);const n=t>0&&e[2]==t&&e[3]==3*t&&e[4]==t&&e[5]==t;return(n&&e[0]>=4*t&&e[6]>=t?1:0)+(n&&e[6]>=4*t&&e[0]>=t?1:0)}finderPenaltyTerminateAndCount(e,t,n){return e&&(this.finderPenaltyAddHistory(t,n),t=0),t+=this.size,this.finderPenaltyAddHistory(t,n),this.finderPenaltyCountPatterns(n)}finderPenaltyAddHistory(e,t){0==t[0]&&(e+=this.size),t.pop(),t.unshift(e)}};t.MIN_VERSION=1,t.MAX_VERSION=40,t.PENALTY_N1=3,t.PENALTY_N2=3,t.PENALTY_N3=40,t.PENALTY_N4=10,t.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],t.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]];function n(e,t,n){if(t<0||t>31||e>>>t!=0)throw new RangeError("Value out of range");for(let r=t-1;r>=0;r--)n.push(e>>>r&1)}function r(e,t){return 0!=(e>>>t&1)}function i(e){if(!e)throw new Error("Assertion error")}e.QrCode=t;const s=class e{constructor(e,t,n){if(this.mode=e,this.numChars=t,this.bitData=n,t<0)throw new RangeError("Invalid argument");this.bitData=n.slice()}static makeBytes(t){let r=[];for(const e of t)n(e,8,r);return new e(e.Mode.BYTE,t.length,r)}static makeNumeric(t){if(!e.isNumeric(t))throw new RangeError("String contains non-numeric characters");let r=[];for(let e=0;e<t.length;){const i=Math.min(t.length-e,3);n(parseInt(t.substring(e,e+i),10),3*i+1,r),e+=i}return new e(e.Mode.NUMERIC,t.length,r)}static makeAlphanumeric(t){if(!e.isAlphanumeric(t))throw new RangeError("String contains unencodable characters in alphanumeric mode");let r,i=[];for(r=0;r+2<=t.length;r+=2){let s=45*e.ALPHANUMERIC_CHARSET.indexOf(t.charAt(r));s+=e.ALPHANUMERIC_CHARSET.indexOf(t.charAt(r+1)),n(s,11,i)}return r<t.length&&n(e.ALPHANUMERIC_CHARSET.indexOf(t.charAt(r)),6,i),new e(e.Mode.ALPHANUMERIC,t.length,i)}static makeSegments(t){return""==t?[]:e.isNumeric(t)?[e.makeNumeric(t)]:e.isAlphanumeric(t)?[e.makeAlphanumeric(t)]:[e.makeBytes(e.toUtf8ByteArray(t))]}static makeEci(t){let r=[];if(t<0)throw new RangeError("ECI assignment value out of range");if(t<128)n(t,8,r);else if(t<16384)n(2,2,r),n(t,14,r);else{if(!(t<1e6))throw new RangeError("ECI assignment value out of range");n(6,3,r),n(t,21,r)}return new e(e.Mode.ECI,0,r)}static isNumeric(t){return e.NUMERIC_REGEX.test(t)}static isAlphanumeric(t){return e.ALPHANUMERIC_REGEX.test(t)}getData(){return this.bitData.slice()}static getTotalBits(e,t){let n=0;for(const r of e){const e=r.mode.numCharCountBits(t);if(r.numChars>=1<<e)return 1/0;n+=4+e+r.bitData.length}return n}static toUtf8ByteArray(e){e=encodeURI(e);let t=[];for(let n=0;n<e.length;n++)"%"!=e.charAt(n)?t.push(e.charCodeAt(n)):(t.push(parseInt(e.substring(n+1,n+3),16)),n+=2);return t}};s.NUMERIC_REGEX=/^[0-9]*$/,s.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,s.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let o=s;e.QrSegment=s})(uk||(uk={})),(e=>{let t;(e=>{const t=class{constructor(e,t){this.ordinal=e,this.formatBits=t}};t.LOW=new t(0,1),t.MEDIUM=new t(1,0),t.QUARTILE=new t(2,3),t.HIGH=new t(3,2);e.Ecc=t})(t=e.QrCode||(e.QrCode={}))})(uk||(uk={})),(e=>{let t;(e=>{const t=class{constructor(e,t){this.modeBits=e,this.numBitsCharCount=t}numCharCountBits(e){return this.numBitsCharCount[Math.floor((e+7)/17)]}};t.NUMERIC=new t(1,[10,12,14]),t.ALPHANUMERIC=new t(2,[9,11,13]),t.BYTE=new t(4,[8,16,16]),t.KANJI=new t(8,[8,10,12]),t.ECI=new t(7,[0,0,0]);e.Mode=t})(t=e.QrSegment||(e.QrSegment={}))})(uk||(uk={}));var yk=uk,bk={L:yk.QrCode.Ecc.LOW,M:yk.QrCode.Ecc.MEDIUM,Q:yk.QrCode.Ecc.QUARTILE,H:yk.QrCode.Ecc.HIGH},wk=128,xk="L",kk="#FFFFFF",Sk="#000000",Ek=!1,Ck=1;function Nk(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=[];return e.forEach(function(e,r){let i=null;e.forEach(function(s,o){if(!s&&null!==i)return n.push("M".concat(i+t," ").concat(r+t,"h").concat(o-i,"v1H").concat(i+t,"z")),void(i=null);if(o!==e.length-1)s&&null===i&&(i=o);else{if(!s)return;null===i?n.push("M".concat(o+t,",").concat(r+t," h1v1H").concat(o+t,"z")):n.push("M".concat(i+t,",").concat(r+t," h").concat(o+1-i,"v1H").concat(i+t,"z"))}})}),n.join("")}function Ik(e,t){return e.slice().map((e,n)=>n<t.y||n>=t.y+t.h?e:e.map((e,n)=>(n<t.x||n>=t.x+t.w)&&e))}function _k(e){let{value:t,level:n,minVersion:i,includeMargin:s,marginSize:o,imageSettings:a,size:l,boostLevel:c}=e,u=r.useMemo(()=>{const e=(Array.isArray(t)?t:[t]).reduce((e,t)=>(e.push(...yk.QrSegment.makeSegments(t)),e),[]);return yk.QrCode.encodeSegments(e,bk[n],i,void 0,void 0,c)},[t,n,i,c]);const{cells:d,margin:h,numCells:f,calculatedImageSettings:p}=r.useMemo(()=>{let e=u.getModules();const t=function(e,t){return null!=t?Math.max(Math.floor(t),0):e?4:0}(s,o),n=e.length+2*t,r=function(e,t,n,r){if(null==r)return null;const i=e.length+2*n,s=Math.floor(.1*t),o=i/t,a=(r.width||s)*o,l=(r.height||s)*o,c=null==r.x?e.length/2-a/2:r.x*o,u=null==r.y?e.length/2-l/2:r.y*o,d=null==r.opacity?1:r.opacity;let h=null;if(r.excavate){let e=Math.floor(c),t=Math.floor(u);h={x:e,y:t,w:Math.ceil(a+c-e),h:Math.ceil(l+u-t)}}return{x:c,y:u,h:l,w:a,excavation:h,opacity:d,crossOrigin:r.crossOrigin}}(e,l,t,a);return{cells:e,margin:t,numCells:n,calculatedImageSettings:r}},[u,l,a,s,o]);return{qrcode:u,margin:h,cells:d,numCells:f,calculatedImageSettings:p}}var Tk=function(){try{(new Path2D).addPath(new Path2D)}catch(e){return!1}return!0}(),Ak=r.forwardRef(function(e,t){const n=e,{value:i,size:s=wk,level:o=xk,bgColor:a=kk,fgColor:l=Sk,includeMargin:c=Ek,minVersion:u=Ck,boostLevel:d,marginSize:h,imageSettings:f}=n,p=vk(n,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:m}=p,g=vk(p,["style"]),v=null==f?void 0:f.src,y=r.useRef(null),b=r.useRef(null),w=r.useCallback(e=>{y.current=e,"function"===typeof t?t(e):t&&(t.current=e)},[t]),[x,k]=r.useState(!1),{margin:S,cells:E,numCells:C,calculatedImageSettings:N}=_k({value:i,level:o,minVersion:u,boostLevel:d,includeMargin:c,marginSize:h,imageSettings:f,size:s});r.useEffect(()=>{if(null!=y.current){const e=y.current,t=e.getContext("2d");if(!t)return;let n=E;const r=b.current,i=null!=N&&null!==r&&r.complete&&0!==r.naturalHeight&&0!==r.naturalWidth;i&&null!=N.excavation&&(n=Ik(E,N.excavation));const o=window.devicePixelRatio||1;e.height=e.width=s*o;const c=s/C*o;t.scale(c,c),t.fillStyle=a,t.fillRect(0,0,C,C),t.fillStyle=l,Tk?t.fill(new Path2D(Nk(n,S))):E.forEach(function(e,n){e.forEach(function(e,r){e&&t.fillRect(r+S,n+S,1,1)})}),N&&(t.globalAlpha=N.opacity),i&&t.drawImage(r,N.x+S,N.y+S,N.w,N.h)}}),r.useEffect(()=>{k(!1)},[v]);const I=gk({height:s,width:s},m);let _=null;return null!=v&&(_=r.createElement("img",{src:v,key:v,style:{display:"none"},onLoad:()=>{k(!0)},ref:b,crossOrigin:null==N?void 0:N.crossOrigin})),r.createElement(r.Fragment,null,r.createElement("canvas",gk({style:I,height:s,width:s,ref:w,role:"img"},g)),_)});Ak.displayName="QRCodeCanvas";var Dk=r.forwardRef(function(e,t){const n=e,{value:i,size:s=wk,level:o=xk,bgColor:a=kk,fgColor:l=Sk,includeMargin:c=Ek,minVersion:u=Ck,boostLevel:d,title:h,marginSize:f,imageSettings:p}=n,m=vk(n,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:g,cells:v,numCells:y,calculatedImageSettings:b}=_k({value:i,level:o,minVersion:u,boostLevel:d,includeMargin:c,marginSize:f,imageSettings:p,size:s});let w=v,x=null;null!=p&&null!=b&&(null!=b.excavation&&(w=Ik(v,b.excavation)),x=r.createElement("image",{href:p.src,height:b.h,width:b.w,x:b.x+g,y:b.y+g,preserveAspectRatio:"none",opacity:b.opacity,crossOrigin:b.crossOrigin}));const k=Nk(w,g);return r.createElement("svg",gk({height:s,width:s,viewBox:"0 0 ".concat(y," ").concat(y),ref:t,role:"img"},m),!!h&&r.createElement("title",null,h),r.createElement("path",{fill:a,d:"M0,0 h".concat(y,"v").concat(y,"H0z"),shapeRendering:"crispEdges"}),r.createElement("path",{fill:l,d:k,shapeRendering:"crispEdges"}),x)});Dk.displayName="QRCodeSVG";const Pk="https://hiitem.com",Rk="Join me on HIITem \u2014 build and share custom HIIT workouts, follow friends, and track your progress! ".concat(Pk),Lk=e=>{let{isOpen:t,onClose:n,requestClose:i}=e;const{user:s}=wm(),[o,a]=(0,r.useState)("feed"),[l,c]=(0,r.useState)([]),[u,h]=(0,r.useState)([]),[f,p]=(0,r.useState)([]),[m,g]=(0,r.useState)({}),[v,y]=(0,r.useState)(!1),[b,w]=(0,r.useState)(!1),[x,k]=(0,r.useState)("suggested"),[S,E]=(0,r.useState)(""),[C,N]=(0,r.useState)([]),I=(0,r.useCallback)(async()=>{if(s){y(!0);try{const e=await async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30;const n=[e,...await Hx(e)];if(0===n.length)return[];const r=[];for(let s=0;s<n.length;s+=30)r.push(n.slice(s,s+30));let i=[];for(const s of r){const e=Op(Wf(um,"posts"),Fp("userId","in",s),Vp("createdAt","desc"),Wp(t)),n=(await nm(e)).docs.map(e=>{var t,n;const r=e.data();return d(d({id:e.id},r),{},{createdAt:(null===(t=r.createdAt)||void 0===t||null===(n=t.toDate)||void 0===n?void 0:n.call(t))||null})});i=i.concat(n)}return i.sort((e,t)=>(t.createdAt||0)-(e.createdAt||0)),i.slice(0,t)}(s.uid);if(c(e),e.length>0){const t=await(async(e,t)=>{if(0===e.length)return{};const n={};return await Promise.all(e.map(async e=>{const r=await tm(Hf(um,"posts",e,"likes",t));n[e]=r.exists()})),n})(e.map(e=>e.id),s.uid);g(t)}}catch(e){console.error("[Feed] Failed to load feed:",e.message,e)}finally{y(!1)}}},[s]),_=(0,r.useCallback)(async()=>{if(s){y(!0);try{const[e,t,n]=await Promise.all([Wx(),Hx(s.uid),Kx(s.uid)]);h(e.filter(e=>e.uid!==s.uid)),p(t),N(n)}catch(e){console.error("Failed to load people:",e)}finally{y(!1)}}},[s]);(0,r.useEffect)(()=>{t&&s&&("feed"===o?I():_())},[t,s,o,I,_]),(0,r.useEffect)(()=>{i&&t&&!b&&(w(!0),setTimeout(()=>{w(!1),n()},280))},[i,t,b,n]);const T=async e=>{if(s)try{await(async(e,t)=>{const n=am(um);n.set(Hf(um,"following",e,"userFollowing",t),{followedAt:Ip()}),n.set(Hf(um,"followers",t,"userFollowers",e),{followedAt:Ip()}),await n.commit()})(s.uid,e),p(t=>[...t,e])}catch(t){console.error("Failed to follow:",t)}},A=async e=>{if(s)try{await(async(e,t)=>{const n=am(um);n.delete(Hf(um,"following",e,"userFollowing",t)),n.delete(Hf(um,"followers",t,"userFollowers",e)),await n.commit()})(s.uid,e),p(t=>t.filter(t=>t!==e))}catch(t){console.error("Failed to unfollow:",t)}},D=async e=>{if(!s)return;const t=m[e];g(n=>d(d({},n),{},{[e]:!t})),c(n=>n.map(n=>n.id===e?d(d({},n),{},{likeCount:n.likeCount+(t?-1:1)}):n));try{await(async(e,t)=>{const n=Hf(um,"posts",e,"likes",t),r=Hf(um,"posts",e);if((await tm(n)).exists()){const e=am(um);return e.delete(n),e.set(r,{likeCount:_p(-1)},{merge:!0}),await e.commit(),!1}{const e=am(um);return e.set(n,{userId:t,createdAt:Ip()}),e.set(r,{likeCount:_p(1)},{merge:!0}),await e.commit(),!0}})(e,s.uid)}catch(n){g(n=>d(d({},n),{},{[e]:t})),c(n=>n.map(n=>n.id===e?d(d({},n),{},{likeCount:n.likeCount+(t?1:-1)}):n)),console.error("Failed to toggle like:",n)}},P=async()=>{if(navigator.share)try{await navigator.share({title:"HIITem",text:Rk,url:Pk})}catch(e){}else try{await navigator.clipboard.writeText(Rk),alert("Invite link copied!")}catch(t){window.prompt("Copy this invite link:",Rk)}},R=e=>{if(!e&&0!==e)return"0:00";const t=Math.floor(e/60),n=e%60;return"".concat(t,":").concat(n.toString().padStart(2,"0"))},L=e=>{if(!S.trim())return e;const t=S.toLowerCase();return e.filter(e=>(e.displayName||e.name||"").toLowerCase().includes(t))};if(!t)return null;const j=(()=>{const e={};C.forEach(t=>{e[t.uid]=t.mutualCount});const t=u.filter(e=>!f.includes(e.uid)),n=u.filter(e=>f.includes(e.uid));return t.sort((t,n)=>{const r=e[t.uid]||0;return(e[n.uid]||0)-r}),[...t,...n].map(t=>d(d({},t),{},{mutualCount:e[t.uid]||0,isFollowing:f.includes(t.uid)}))})();return(0,vm.jsxs)("div",{className:"feed-page ".concat(b?"feed-page-closing":""),children:[(0,vm.jsxs)("div",{className:"feed-header",children:[(0,vm.jsx)("button",{className:"feed-back-btn",onClick:()=>{w(!0),setTimeout(()=>{w(!1),n()},280)},children:(0,vm.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,vm.jsx)("polyline",{points:"15 18 9 12 15 6"})})}),(0,vm.jsx)("span",{className:"feed-header-title",children:"Activity"}),(0,vm.jsx)("div",{className:"feed-header-spacer"})]}),(0,vm.jsxs)("div",{className:"feed-tabs",children:[(0,vm.jsx)("button",{className:"feed-tab ".concat("feed"===o?"active":""),onClick:()=>a("feed"),children:"Feed"}),(0,vm.jsx)("button",{className:"feed-tab ".concat("people"===o?"active":""),onClick:()=>a("people"),children:"People"})]}),(0,vm.jsxs)("div",{className:"feed-content",children:[!s&&(0,vm.jsx)("div",{className:"feed-empty",children:(0,vm.jsx)("p",{children:"Sign in to see activity"})}),s&&v&&(0,vm.jsx)("div",{className:"feed-empty",children:(0,vm.jsx)("p",{children:"Loading..."})}),s&&!v&&"feed"===o&&(0,vm.jsx)(vm.Fragment,{children:0===l.length?(0,vm.jsxs)("div",{className:"feed-empty",children:[(0,vm.jsx)("p",{children:"No posts yet"}),(0,vm.jsx)("span",{children:"Complete a workout or follow people to see activity here"})]}):l.map(e=>(0,vm.jsx)("div",{className:"feed-post-card",children:(0,vm.jsxs)("div",{className:"feed-post-header",children:[(0,vm.jsx)("div",{className:"feed-post-avatar",children:e.photoURL?(0,vm.jsx)("img",{src:e.photoURL,alt:"",referrerPolicy:"no-referrer"}):(0,vm.jsx)("div",{className:"feed-post-avatar-placeholder",children:(e.displayName||"?")[0].toUpperCase()})}),(0,vm.jsxs)("div",{className:"feed-post-meta",children:[(0,vm.jsx)("span",{className:"feed-post-name",children:e.displayName}),(0,vm.jsxs)("span",{className:"feed-post-time",children:[e.createdAt?e.createdAt.toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"}):"",e.createdAt?" at ".concat(e.createdAt.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"})):""]}),(0,vm.jsxs)("span",{className:"feed-post-subtitle",children:[e.workoutName," \xb7 ",R(e.duration)," \xb7 ",e.exerciseCount," exercises"]})]}),(0,vm.jsxs)("button",{className:"feed-like-btn ".concat(m[e.id]?"liked":""),onClick:()=>D(e.id),children:[(0,vm.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:m[e.id]?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,vm.jsx)("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"})}),(0,vm.jsx)("span",{children:e.likeCount||0})]})]})},e.id))}),s&&!v&&"people"===o&&(0,vm.jsxs)(vm.Fragment,{children:[(0,vm.jsxs)("div",{className:"feed-search-wrap",children:[(0,vm.jsxs)("svg",{className:"feed-search-icon",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,vm.jsx)("circle",{cx:"11",cy:"11",r:"8"}),(0,vm.jsx)("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),(0,vm.jsx)("input",{className:"feed-search",type:"text",placeholder:"Search for people",value:S,onChange:e=>E(e.target.value)})]}),(0,vm.jsxs)("div",{className:"feed-subtabs",children:[(0,vm.jsxs)("button",{className:"feed-subtab ".concat("suggested"===x?"active":""),onClick:()=>k("suggested"),children:[(0,vm.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,vm.jsx)("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),(0,vm.jsx)("circle",{cx:"9",cy:"7",r:"4"}),(0,vm.jsx)("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87"}),(0,vm.jsx)("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),(0,vm.jsx)("span",{children:"Suggested"})]}),(0,vm.jsxs)("button",{className:"feed-subtab ".concat("contacts"===x?"active":""),onClick:()=>k("contacts"),children:[(0,vm.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,vm.jsx)("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),(0,vm.jsx)("circle",{cx:"12",cy:"7",r:"4"})]}),(0,vm.jsx)("span",{children:"Contacts"})]}),(0,vm.jsxs)("button",{className:"feed-subtab ".concat("qr"===x?"active":""),onClick:()=>k("qr"),children:[(0,vm.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,vm.jsx)("rect",{x:"2",y:"2",width:"8",height:"8",rx:"1"}),(0,vm.jsx)("rect",{x:"14",y:"2",width:"8",height:"8",rx:"1"}),(0,vm.jsx)("rect",{x:"2",y:"14",width:"8",height:"8",rx:"1"}),(0,vm.jsx)("rect",{x:"14",y:"14",width:"4",height:"4",rx:"0.5"}),(0,vm.jsx)("line",{x1:"22",y1:"14",x2:"22",y2:"22"}),(0,vm.jsx)("line",{x1:"18",y1:"22",x2:"22",y2:"22"})]}),(0,vm.jsx)("span",{children:"QR Code"})]})]}),"suggested"===x&&(0,vm.jsx)(vm.Fragment,{children:0===L(j).length?(0,vm.jsxs)("div",{className:"feed-empty",children:[(0,vm.jsx)("p",{children:S?"No results":"No users yet"}),(0,vm.jsx)("span",{children:S?"Try a different name":"Invite friends to join"})]}):L(j).map(e=>(0,vm.jsxs)("div",{className:"feed-person-card",children:[(0,vm.jsx)("div",{className:"feed-person-avatar",children:e.photoURL?(0,vm.jsx)("img",{src:e.photoURL,alt:"",referrerPolicy:"no-referrer"}):(0,vm.jsx)("div",{className:"feed-person-avatar-placeholder",children:(e.displayName||"?")[0].toUpperCase()})}),(0,vm.jsxs)("div",{className:"feed-person-info",children:[(0,vm.jsx)("span",{className:"feed-person-name",children:e.displayName}),(0,vm.jsx)("span",{className:"feed-person-stats",children:e.mutualCount>0?"".concat(e.mutualCount," mutual friend").concat(1!==e.mutualCount?"s":""):"".concat(e.workoutCount||0," workouts")})]}),(0,vm.jsx)("button",{className:"feed-follow-btn ".concat(e.isFollowing?"following":""),onClick:()=>e.isFollowing?A(e.uid):T(e.uid),children:e.isFollowing?"Following":"Follow"})]},e.uid))}),"contacts"===x&&(0,vm.jsx)("div",{className:"feed-contacts-invite",children:(0,vm.jsxs)("button",{className:"feed-bottom-invite-btn",onClick:P,children:[(0,vm.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,vm.jsx)("circle",{cx:"18",cy:"5",r:"3"}),(0,vm.jsx)("circle",{cx:"6",cy:"12",r:"3"}),(0,vm.jsx)("circle",{cx:"18",cy:"19",r:"3"}),(0,vm.jsx)("line",{x1:"8.59",y1:"13.51",x2:"15.42",y2:"17.49"}),(0,vm.jsx)("line",{x1:"15.41",y1:"6.51",x2:"8.59",y2:"10.49"})]}),"Invite Friends"]})}),"qr"===x&&(0,vm.jsxs)("div",{className:"feed-qr-container",children:[(0,vm.jsx)("div",{className:"feed-qr-card",children:(0,vm.jsx)(Dk,{value:Pk,size:180,bgColor:"#ffffff",fgColor:"#0a0a0c",level:"M"})}),(0,vm.jsx)("span",{className:"feed-qr-label",children:"Scan to join"})]}),(0,vm.jsx)("div",{className:"feed-bottom-invite",children:(0,vm.jsxs)("button",{className:"feed-bottom-invite-btn",onClick:P,children:[(0,vm.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,vm.jsx)("circle",{cx:"18",cy:"5",r:"3"}),(0,vm.jsx)("circle",{cx:"6",cy:"12",r:"3"}),(0,vm.jsx)("circle",{cx:"18",cy:"19",r:"3"}),(0,vm.jsx)("line",{x1:"8.59",y1:"13.51",x2:"15.42",y2:"17.49"}),(0,vm.jsx)("line",{x1:"15.41",y1:"6.51",x2:"8.59",y2:"10.49"})]}),"Invite Friends"]})})]})]})]})},jk="#ff3b30",Ok="#007aff",Mk=["#ff9500","#34c759","#af52de","#ff2d55","#5ac8fa","#30b0c7","#ffffff"],Fk=e=>{let{isOpen:t,onClose:n,requestClose:i,autoShareEnabled:s,onToggleAutoShare:o,sidePlankAlertEnabled:a,onToggleSidePlankAlert:l,prepTime:c,onPrepTimeChange:u,restTime:d,onRestTimeChange:h,activeLastMinute:f,onToggleActiveLastMinute:p,activeColor:m,restColor:g,onColorChange:v,showCardPhotos:y,onToggleShowCardPhotos:b,onOpenProfile:w}=e;const{user:x}=wm(),[k,S]=(0,r.useState)(!1),[E,C]=(0,r.useState)(null);(0,r.useEffect)(()=>{i&&t&&!k&&N()},[i,t,k]);const N=()=>{S(!0),setTimeout(()=>{S(!1),n()},280)};return t&&x?(0,vm.jsxs)("div",{className:"sidemenu-overlay ".concat(k?"sidemenu-overlay-closing":""),children:[(0,vm.jsxs)("div",{className:"sidemenu-panel ".concat(k?"sidemenu-panel-closing":""),children:[(0,vm.jsxs)("div",{className:"sidemenu-profile",onClick:()=>w&&w(),style:{cursor:"pointer"},children:[(0,vm.jsx)("div",{className:"sidemenu-avatar",children:x.photoURL?(0,vm.jsx)("img",{src:x.photoURL,alt:"",referrerPolicy:"no-referrer"}):(0,vm.jsx)("div",{className:"sidemenu-avatar-placeholder",children:(x.displayName||"?")[0].toUpperCase()})}),(0,vm.jsxs)("div",{className:"sidemenu-profile-info",children:[(0,vm.jsx)("span",{className:"sidemenu-profile-name",children:x.displayName}),(0,vm.jsx)("span",{className:"sidemenu-profile-email",children:x.email})]})]}),(0,vm.jsxs)("div",{className:"sidemenu-items",children:[(0,vm.jsxs)("div",{className:"sidemenu-item",onClick:async()=>{try{await mm(),N()}catch(e){console.error("Sign out error:",e)}},children:[(0,vm.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,vm.jsx)("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),(0,vm.jsx)("polyline",{points:"16 17 21 12 16 7"}),(0,vm.jsx)("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]}),(0,vm.jsx)("span",{className:"sidemenu-item-label",children:"Sign Out"})]}),(0,vm.jsx)("div",{className:"sidemenu-divider"}),(0,vm.jsxs)("div",{className:"sidemenu-item",onClick:o,children:[(0,vm.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,vm.jsx)("path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"}),(0,vm.jsx)("polyline",{points:"16 6 12 2 8 6"}),(0,vm.jsx)("line",{x1:"12",y1:"2",x2:"12",y2:"15"})]}),(0,vm.jsx)("span",{className:"sidemenu-item-label",children:"Auto-Share Workouts"}),(0,vm.jsx)("div",{className:"sidemenu-toggle ".concat(!0===s?"on":""),children:(0,vm.jsx)("div",{className:"sidemenu-toggle-knob"})})]}),(0,vm.jsx)("div",{className:"sidemenu-divider"}),(0,vm.jsxs)("div",{className:"sidemenu-item",onClick:l,children:[(0,vm.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:(0,vm.jsx)("path",{d:"M12 2v4M12 18v4M4.93 4.93l2.83 2.83M16.24 16.24l2.83 2.83M2 12h4M18 12h4M4.93 19.07l2.83-2.83M16.24 7.76l2.83-2.83"})}),(0,vm.jsx)("span",{className:"sidemenu-item-label",children:"Side plank switch side alert"}),(0,vm.jsx)("div",{className:"sidemenu-toggle ".concat(!0===a?"on":""),children:(0,vm.jsx)("div",{className:"sidemenu-toggle-knob"})})]}),(0,vm.jsx)("div",{className:"sidemenu-divider"}),(0,vm.jsxs)("div",{className:"sidemenu-item sidemenu-item-stepper",children:[(0,vm.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,vm.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,vm.jsx)("polyline",{points:"12 6 12 12 16 14"})]}),(0,vm.jsx)("span",{className:"sidemenu-item-label",children:"Prep time"}),(0,vm.jsxs)("div",{className:"sidemenu-stepper",children:[(0,vm.jsx)("button",{className:"sidemenu-stepper-btn",onClick:e=>{e.stopPropagation(),c>0&&u(c-5)},children:"\u2212"}),(0,vm.jsxs)("span",{className:"sidemenu-stepper-value",children:[c,"s"]}),(0,vm.jsx)("button",{className:"sidemenu-stepper-btn",onClick:e=>{e.stopPropagation(),c<30&&u(c+5)},children:"+"})]})]}),(0,vm.jsxs)("div",{className:"sidemenu-item sidemenu-item-stepper",children:[(0,vm.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,vm.jsx)("path",{d:"M18.36 5.64a9 9 0 1 1-12.73 0"}),(0,vm.jsx)("line",{x1:"12",y1:"2",x2:"12",y2:"12"})]}),(0,vm.jsx)("span",{className:"sidemenu-item-label",children:"Rest time"}),(0,vm.jsxs)("div",{className:"sidemenu-stepper",children:[(0,vm.jsx)("button",{className:"sidemenu-stepper-btn",onClick:e=>{e.stopPropagation(),d>0&&h(d-5)},children:"\u2212"}),(0,vm.jsxs)("span",{className:"sidemenu-stepper-value",children:[d,"s"]}),(0,vm.jsx)("button",{className:"sidemenu-stepper-btn",onClick:e=>{e.stopPropagation(),d<30&&h(d+5)},children:"+"})]})]}),(0,vm.jsx)("div",{className:"sidemenu-divider"}),(0,vm.jsxs)("div",{className:"sidemenu-item",onClick:p,children:[(0,vm.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:(0,vm.jsx)("polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"})}),(0,vm.jsx)("span",{className:"sidemenu-item-label",children:"Stay active last minute"}),(0,vm.jsx)("div",{className:"sidemenu-toggle ".concat(!0===f?"on":""),children:(0,vm.jsx)("div",{className:"sidemenu-toggle-knob"})})]}),(0,vm.jsx)("div",{className:"sidemenu-divider"}),(0,vm.jsxs)("div",{className:"sidemenu-item",onClick:b,children:[(0,vm.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,vm.jsx)("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),(0,vm.jsx)("circle",{cx:"12",cy:"12",r:"3"})]}),(0,vm.jsx)("span",{className:"sidemenu-item-label",children:"Show profile on cards"}),(0,vm.jsx)("div",{className:"sidemenu-toggle ".concat(!0===y?"on":""),children:(0,vm.jsx)("div",{className:"sidemenu-toggle-knob"})})]}),(0,vm.jsx)("div",{className:"sidemenu-divider"}),(0,vm.jsxs)("div",{className:"sidemenu-color-section",children:[(0,vm.jsx)("span",{className:"sidemenu-color-header",children:"Timer Colors"}),(0,vm.jsxs)("div",{className:"sidemenu-color-row",children:[(0,vm.jsx)("span",{className:"sidemenu-color-label",children:"Active"}),(0,vm.jsx)("div",{className:"sidemenu-color-preview",style:{background:m},onClick:()=>C("active"===E?null:"active")})]}),(0,vm.jsxs)("div",{className:"sidemenu-color-row",children:[(0,vm.jsx)("span",{className:"sidemenu-color-label",children:"Rest"}),(0,vm.jsx)("div",{className:"sidemenu-color-preview",style:{background:g},onClick:()=>C("rest"===E?null:"rest")})]})]})]})]}),E&&(0,vm.jsx)("div",{className:"sidemenu-color-popup-overlay",onClick:()=>C(null),children:(0,vm.jsx)("div",{className:"sidemenu-color-popup",onClick:e=>e.stopPropagation(),children:(0,vm.jsx)("div",{className:"sidemenu-color-popup-swatches",children:[..."active"===E?[jk,Ok]:[Ok,jk],...Mk].map(e=>(0,vm.jsx)("div",{className:"sidemenu-swatch ".concat(("active"===E?m:g)===e?"selected":""),style:{background:e},onClick:()=>{v(E,e),C(null)}},e))})})}),(0,vm.jsx)("div",{className:"sidemenu-backdrop",onClick:()=>{N()}})]}):null},Uk=e=>{let{isOpen:t,onClose:n,requestClose:i}=e;const[s,o]=(0,r.useState)("picker"),[a,l]=(0,r.useState)(!0),[c,u]=(0,r.useState)(""),[d,h]=(0,r.useState)(""),[f,p]=(0,r.useState)(""),[m,g]=(0,r.useState)(""),[v,y]=(0,r.useState)(!1),[b,w]=(0,r.useState)(!1);(0,r.useEffect)(()=>{t&&(o("picker"),l(!0),u(""),h(""),p(""),g(""),y(!1),w(!1))},[t]),(0,r.useEffect)(()=>{i&&t&&!b&&x()},[i,t,b]);const x=()=>{w(!0),setTimeout(()=>{w(!1),n()},280)},k=e=>{switch(e){case"auth/email-already-in-use":return"An account with this email already exists";case"auth/invalid-email":return"Invalid email address";case"auth/weak-password":return"Password must be at least 6 characters";case"auth/user-not-found":return"No account found with this email";case"auth/wrong-password":return"Incorrect password";case"auth/invalid-credential":return"Invalid email or password";case"auth/too-many-requests":return"Too many attempts. Try again later";default:return"Something went wrong. Please try again"}};return t?(0,vm.jsxs)("div",{className:"login-modal ".concat(b?"login-modal-closing":""),children:[(0,vm.jsxs)("div",{className:"login-header",children:["email"===s?(0,vm.jsx)("button",{className:"login-back-btn",onClick:()=>{o("picker"),g("")},children:(0,vm.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,vm.jsx)("polyline",{points:"15 18 9 12 15 6"})})}):(0,vm.jsx)("button",{className:"login-close-btn",onClick:x,children:(0,vm.jsxs)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,vm.jsx)("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),(0,vm.jsx)("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})}),(0,vm.jsx)("span",{className:"login-header-title",children:"Sign in"}),(0,vm.jsx)("div",{className:"login-header-spacer"})]}),(0,vm.jsxs)("div",{className:"login-content",children:["picker"===s&&(0,vm.jsxs)(vm.Fragment,{children:[(0,vm.jsxs)("div",{className:"login-picker-top",children:[(0,vm.jsx)("span",{className:"login-brand-title",children:"HIITem"}),(0,vm.jsxs)("button",{className:"login-method-btn login-google-btn",onClick:async()=>{try{g(""),await hm(),x()}catch(e){"auth/popup-closed-by-user"!==e.code&&g(k(e.code))}},children:[(0,vm.jsxs)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",children:[(0,vm.jsx)("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92a5.06 5.06 0 0 1-2.2 3.32v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.1z",fill:"#4285F4"}),(0,vm.jsx)("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),(0,vm.jsx)("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",fill:"#FBBC05"}),(0,vm.jsx)("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),"Continue with Google"]})]}),(0,vm.jsx)("div",{className:"login-divider",children:(0,vm.jsx)("span",{children:"or"})}),(0,vm.jsxs)("div",{className:"login-picker-bottom",children:[(0,vm.jsxs)("button",{className:"login-method-btn login-email-btn",onClick:()=>o("email"),children:[(0,vm.jsxs)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,vm.jsx)("path",{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"}),(0,vm.jsx)("polyline",{points:"22,6 12,13 2,6"})]}),"Continue with Email"]}),m&&(0,vm.jsx)("p",{className:"login-error",children:m})]})]}),"email"===s&&(0,vm.jsxs)("form",{className:"login-email-form",onSubmit:async e=>{e.preventDefault(),g(""),y(!0);try{a?await fm(d,f,c.trim()||"Anonymous"):await pm(d,f),x()}catch(t){g(k(t.code))}finally{y(!1)}},children:[(0,vm.jsxs)("div",{className:"login-mode-tabs",children:[(0,vm.jsx)("button",{type:"button",className:"login-mode-tab ".concat(a?"active":""),onClick:()=>{l(!0),g("")},children:"Sign Up"}),(0,vm.jsx)("button",{type:"button",className:"login-mode-tab ".concat(a?"":"active"),onClick:()=>{l(!1),g("")},children:"Sign In"})]}),a&&(0,vm.jsx)("input",{className:"login-input",type:"text",placeholder:"Display Name",value:c,onChange:e=>u(e.target.value),autoComplete:"name"}),(0,vm.jsx)("input",{className:"login-input",type:"email",placeholder:"Email",value:d,onChange:e=>h(e.target.value),required:!0,autoComplete:"email"}),(0,vm.jsx)("input",{className:"login-input",type:"password",placeholder:"Password",value:f,onChange:e=>p(e.target.value),required:!0,minLength:6,autoComplete:a?"new-password":"current-password"}),m&&(0,vm.jsx)("p",{className:"login-error",children:m}),(0,vm.jsx)("button",{className:"login-submit-btn",type:"submit",disabled:v,children:v?"Please wait...":a?"Sign Up":"Sign In"}),(0,vm.jsx)("p",{className:"login-toggle",onClick:()=>{l(!a),g("")},children:a?"Already have an account?":"Don't have an account?"})]})]})]}):null},Bk=e=>{let{onShare:t,onDismiss:n}=e;return(0,vm.jsx)("div",{className:"share-prompt-overlay",onClick:n,children:(0,vm.jsxs)("div",{className:"share-prompt-card",onClick:e=>e.stopPropagation(),children:[(0,vm.jsx)("div",{className:"share-prompt-icon",children:(0,vm.jsxs)("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,vm.jsx)("path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"}),(0,vm.jsx)("polyline",{points:"16 6 12 2 8 6"}),(0,vm.jsx)("line",{x1:"12",y1:"2",x2:"12",y2:"15"})]})}),(0,vm.jsx)("h3",{className:"share-prompt-title",children:"Share Your Workouts?"}),(0,vm.jsx)("p",{className:"share-prompt-text",children:"Automatically share completed workouts to the activity feed so friends can see your progress."}),(0,vm.jsxs)("div",{className:"share-prompt-buttons",children:[(0,vm.jsx)("button",{className:"share-prompt-btn share-prompt-btn-primary",onClick:t,children:"Share My Workouts"}),(0,vm.jsx)("button",{className:"share-prompt-btn share-prompt-btn-secondary",onClick:n,children:"Not Now"})]})]})})},Vk=e=>{if(!e||"string"!==typeof e||e.length<7)return"255, 59, 48";const t=parseInt(e.slice(1,3),16),n=parseInt(e.slice(3,5),16),r=parseInt(e.slice(5,7),16);return isNaN(t)||isNaN(n)||isNaN(r)?"255, 59, 48":"".concat(t,", ").concat(n,", ").concat(r)},zk=()=>{const[e,t]=(0,r.useState)("timer"),{user:n,loading:i}=wm(),[s,o]=(0,r.useState)(!0),[a,l]=(0,r.useState)(!1);(0,r.useEffect)(()=>{if(a)return;if(!i&&!n)return void l(!0);const e=setTimeout(()=>l(!0),2500);return()=>clearTimeout(e)},[i,n,a]);const[c,u]=(0,r.useState)(Zx),[h,f]=(0,r.useState)(ek),p=c.map(e=>e.name),m=h.map(e=>e.name),g=(0,r.useCallback)(e=>{if("New Workout"===e)return[];const t=[...c,...h].find(t=>t.name===e);return t?t.exercises:[]},[c,h]),[v,y]=(0,r.useState)(15),[b,w]=(0,r.useState)(15),[x,k]=(0,r.useState)(!0),S=(0,r.useCallback)(e=>60*g(e||"The Devils 10").length+v,[g,v]),[E,C]=(0,r.useState)(()=>{const e=60*Zx[0].exercises.length+15;return{timeLeft:e,isRunning:!1,targetTime:e,selectedWorkoutIndex:0}}),[N,I]=(0,r.useState)({time:0,isRunning:!1,laps:[]}),[_,T]=(0,r.useState)(!1),[A,D]=(0,r.useState)(!1),[P,R]=(0,r.useState)(0),[L,j]=(0,r.useState)(!1),[O,M]=(0,r.useState)(0),[F,U]=(0,r.useState)(-1),[B,V]=(0,r.useState)(null),[z,W]=(0,r.useState)("categories"),[H,q]=(0,r.useState)(null),[G,K]=(0,r.useState)("The Devils 10"),[Q,Y]=(0,r.useState)("Back & Bis"),[J,$]=(0,r.useState)([]),[X,Z]=(0,r.useState)(!1),[ee,te]=(0,r.useState)(!1),[ne,re]=(0,r.useState)(!1),[ie,se]=(0,r.useState)(!1),[oe,ae]=(0,r.useState)(!1),[le,ce]=(0,r.useState)(!1),[ue,de]=(0,r.useState)(null),[he,fe]=(0,r.useState)(null),[pe,me]=(0,r.useState)(!1),[ge,ve]=(0,r.useState)(!1),[ye,be]=(0,r.useState)(!1),[we,xe]=(0,r.useState)(!1),[ke,Se]=(0,r.useState)("#ff3b30"),[Ee,Ce]=(0,r.useState)("#007aff"),[Ne,Ie]=(0,r.useState)(!0),[_e,Te]=(0,r.useState)(!0),[Ae,De]=(0,r.useState)([]),[Pe,Re]=(0,r.useState)([]),[Le,je]=(0,r.useState)([]),[Oe,Me]=(0,r.useState)(null),[Fe,Ue]=(0,r.useState)(!1),[Be,Ve]=(0,r.useState)([]),[ze,We]=(0,r.useState)(""),[He,qe]=(0,r.useState)({}),Ge=(0,r.useRef)(null),[Ke,Qe]=(0,r.useState)({0:null,1:null,2:null,3:null,4:null,5:null,6:null}),[Ye,Je]=(0,r.useState)(null),[$e,Xe]=(0,r.useState)(!1),[Ze,et]=(0,r.useState)({}),tt=(0,r.useCallback)(e=>{Xe(!1),et(d({},Ke)),Je(e)},[Ke]),nt=(0,r.useCallback)(()=>{Xe(!0),setTimeout(()=>{Je(null),Xe(!1),et({})},200)},[]),rt=(0,r.useCallback)(e=>{Ye&&et(t=>{const n=d({},t);return n[e]===Ye.name?n[e]=null:n[e]=Ye.name,n})},[Ye]),it=(0,r.useCallback)(()=>{n&&(Qe(Ze),zx(n.uid,Ze).catch(e=>console.error("Failed to save schedule:",e)),nt())},[n,Ze,nt]),st=(0,r.useCallback)(async e=>{Ue(!1),We(""),qe({});try{const t=await Gx(Pe);Me(e),Ve(t)}catch(t){console.error("Failed to load following profiles:",t),Me(e),Ve([])}},[Pe]),ot=(0,r.useCallback)(()=>{Ue(!0),setTimeout(()=>{Me(null),Ue(!1),Ve([]),We(""),qe({})},200)},[]),at=(0,r.useCallback)(e=>{qe(t=>{const n=d({},t);return n[e.uid]?delete n[e.uid]:n[e.uid]=!0,n})},[]);(0,r.useEffect)(()=>{if(!n)return u(Zx),f(ek),$([]),fe(null),Se("#ff3b30"),Ce("#007aff"),Ie(!0),Te(!0),De([]),Re([]),je([]),y(15),w(15),k(!0),K("The Devils 10"),void Qe({0:null,1:null,2:null,3:null,4:null,5:null,6:null});let e=!1;return(async()=>{try{const[t,r]=await Promise.all([Qx(n.uid),Fx(n.uid)]);if(e)return;if(t.length>0){const e=lt(t);let n=e.timer;if(r&&r.length>0){const e=new Map(r.map((e,t)=>[e,t]));n=[...n].sort((t,n)=>(e.has(t.name)?e.get(t.name):r.length)-(e.has(n.name)?e.get(n.name):r.length))}u(n),f(e.stopwatch)}else if(r&&r.length>0){const e=new Map(r.map((e,t)=>[e,t]));u(t=>[...t].sort((t,n)=>(e.has(t.name)?e.get(t.name):r.length)-(e.has(n.name)?e.get(n.name):r.length)))}}catch(t){console.error("Failed to load workouts:",t)}})(),(async()=>{Z(!0);try{const t=await Jx(n.uid);e||$(t)}catch(t){console.error("Failed to load history:",t)}finally{e||Z(!1)}})(),(async()=>{try{await(async e=>{const t=Hf(um,"userProfiles",e.uid);(await tm(t)).exists()?await rm(t,{displayName:e.displayName||"Anonymous",photoURL:e.photoURL||null,updatedAt:Ip()},{merge:!0}):await rm(t,{uid:e.uid,displayName:e.displayName||"Anonymous",photoURL:e.photoURL||null,workoutCount:0,autoShare:null,createdAt:Ip(),updatedAt:Ip()})})(n)}catch(r){console.error("Failed to ensure user profile:",r)}try{var t;const r=await Mx(n.uid);if(e)return;fe(r.autoShare),r.activeColor&&Se(r.activeColor),r.restColor&&Ce(r.restColor),Ie(r.sidePlankAlert),Te(r.showCardPhotos),De(r.pinnedWorkouts||[]),y(r.prepTime),w(r.restTime),k(r.activeLastMinute),r.weeklySchedule&&Qe(r.weeklySchedule);const i=(new Date).getDay(),s=null===(t=r.weeklySchedule)||void 0===t?void 0:t[i];s?K(s):r.selectedWorkout&&K(r.selectedWorkout),l(!0),Promise.all([Hx(n.uid),qx(n.uid)]).then(t=>{let[n,r]=t;e||(Re(n),je(r))}).catch(e=>console.error("Failed to load follow data:",e))}catch(r){console.error("Failed to load settings:",r)}})(),()=>{e=!0}},[n]);const lt=e=>{const t=[...Zx],n=[...ek],r=e.filter(e=>e.deleted).map(e=>e.defaultName).filter(Boolean),i=t.filter(e=>!r.includes(e.name)).map(t=>{const n=e.find(e=>!e.deleted&&(e.defaultName===t.name||!e.defaultName&&e.name===t.name));return n?d(d(d({},t),n),{},{exercises:n.exercises}):t}),s=n.filter(e=>!r.includes(e.name)).map(t=>{const n=e.find(e=>!e.deleted&&(e.defaultName===t.name||!e.defaultName&&e.name===t.name));return n?d(d(d({},t),n),{},{exercises:n.exercises}):t}),o=[...t,...n].map(e=>e.name);return e.forEach(e=>{if(e.deleted)return;if(e.isCustom)return void("timer"===e.type?i.push(e):s.push(e));o.includes(e.name)||o.includes(e.defaultName)||("timer"===e.type?i.push(e):s.push(e))}),{timer:i,stopwatch:s}},ct=(0,r.useCallback)(async()=>{if(n)try{const[e,t]=await Promise.all([Qx(n.uid),Fx(n.uid)]);if(e.length>0){const n=lt(e);let r=n.timer;if(t&&t.length>0){const e=new Map(t.map((e,t)=>[e,t]));r=[...r].sort((n,r)=>(e.has(n.name)?e.get(n.name):t.length)-(e.has(r.name)?e.get(r.name):t.length))}u(r),f(n.stopwatch)}}catch(e){console.error("Failed to refresh workouts:",e)}},[n]),ut=(0,r.useCallback)(async e=>{if(n)try{await(async(e,t,n)=>{const r=await im(Wf(um,"posts"),{userId:e,displayName:n.displayName||"Anonymous",photoURL:n.photoURL||null,workoutName:t.workoutName,workoutType:t.workoutType,duration:t.duration,exerciseCount:t.exercises.length,exercises:t.exercises,likeCount:0,createdAt:Ip()});return await rm(Hf(um,"userProfiles",e),{workoutCount:_p(1),updatedAt:Ip()},{merge:!0}),r.id})(n.uid,e,{displayName:n.displayName,photoURL:n.photoURL})}catch(t){console.error("Failed to share workout:",t)}},[n]),dt=(0,r.useCallback)(async()=>{n&&(await Ux(n.uid,!0),fe(!0),ce(!1),ue&&(ut(ue),de(null)))},[n,ue,ut]),ht=(0,r.useCallback)(async()=>{if(!n)return;const e=!0!==he;fe(e),await Ux(n.uid,e)},[n,he]),ft=(0,r.useCallback)(async()=>{const e=!Ne;Ie(e),n&&(async(e,t)=>{await rm(Hf(um,"users",e,"settings","preferences"),{sidePlankAlert:t,updatedAt:Ip()},{merge:!0})})(n.uid,e).catch(e=>console.error("Failed to save side plank alert:",e))},[n,Ne]),pt=(0,r.useCallback)(async e=>{De(e),n&&(async(e,t)=>{await rm(Hf(um,"users",e,"settings","preferences"),{pinnedWorkouts:t,updatedAt:Ip()},{merge:!0})})(n.uid,e).catch(e=>console.error("Failed to save pinned workouts:",e))},[n]),mt=(0,r.useCallback)(async()=>{const e=!_e;Te(e),n&&(async(e,t)=>{await rm(Hf(um,"users",e,"settings","preferences"),{showCardPhotos:t,updatedAt:Ip()},{merge:!0})})(n.uid,e).catch(e=>console.error("Failed to save show card photos:",e))},[n,_e]),gt=(0,r.useCallback)(async e=>{y(e),n&&(async(e,t)=>{await rm(Hf(um,"users",e,"settings","preferences"),{prepTime:t,updatedAt:Ip()},{merge:!0})})(n.uid,e).catch(e=>console.error("Failed to save prep time:",e))},[n]),vt=(0,r.useCallback)(async()=>{const e=!x;k(e),n&&(async(e,t)=>{await rm(Hf(um,"users",e,"settings","preferences"),{activeLastMinute:t,updatedAt:Ip()},{merge:!0})})(n.uid,e).catch(e=>console.error("Failed to save active last minute:",e))},[n,x]),yt=(0,r.useCallback)(async e=>{w(e),n&&(async(e,t)=>{await rm(Hf(um,"users",e,"settings","preferences"),{restTime:t,updatedAt:Ip()},{merge:!0})})(n.uid,e).catch(e=>console.error("Failed to save rest time:",e))},[n]),bt=(0,r.useCallback)(async(e,t)=>{if("active"===e?Se(t):Ce(t),n){const r="active"===e?{activeColor:t,restColor:Ee}:{activeColor:ke,restColor:t};(async(e,t)=>{let{activeColor:n,restColor:r}=t;await rm(Hf(um,"users",e,"settings","preferences"),{activeColor:n,restColor:r,updatedAt:Ip()},{merge:!0})})(n.uid,r).catch(e=>console.error("Failed to save colors:",e))}},[n,ke,Ee]),wt=(0,r.useCallback)(async()=>{n&&(await Ux(n.uid,!1),fe(!1),ce(!1),de(null))},[n]);(0,r.useEffect)(()=>{const e=S(G);C(t=>d(d({},t),{},{timeLeft:e,targetTime:e}))},[G,S]);const xt=(0,r.useRef)(null),kt=(0,r.useRef)(null);(0,r.useEffect)(()=>(E.isRunning?xt.current=setInterval(()=>{C(e=>e.timeLeft<=1?d(d({},e),{},{timeLeft:0,isRunning:!1}):d(d({},e),{},{timeLeft:e.timeLeft-1}))},1e3):xt.current&&(clearInterval(xt.current),xt.current=null),()=>{xt.current&&clearInterval(xt.current)}),[E.isRunning]);const St=(0,r.useRef)(!1);(0,r.useEffect)(()=>{if(0===E.timeLeft&&!E.isRunning&&E.targetTime>0&&!St.current&&(St.current=!0,kt.current&&(kt.current.release(),kt.current=null),window.dataLayer&&window.dataLayer.push({event:"workout_complete",workout_duration:E.targetTime,workout_type:"ten_minutes_from_hell"}),n)){const e=g(G),t=c.find(e=>e.name===G),r={workoutName:G,workoutId:(null===t||void 0===t?void 0:t.id)||null,workoutType:"timer",duration:E.targetTime,setCount:e.length,exercises:e};Xx(n.uid,r).then(()=>{Jx(n.uid).then($).catch(e=>console.error("Failed to refresh history:",e))}).catch(e=>console.error("Failed to record history:",e)),!0===he?ut(r):null===he&&(de(r),ce(!0))}E.timeLeft>0&&(St.current=!1)},[E.timeLeft,E.isRunning,E.targetTime,n,G,g,he,ut]);const Et=(0,r.useRef)(null);(0,r.useEffect)(()=>(N.isRunning?Et.current=setInterval(()=>{I(e=>d(d({},e),{},{time:e.time+10}))},10):Et.current&&(clearInterval(Et.current),Et.current=null),()=>{Et.current&&clearInterval(Et.current)}),[N.isRunning]);const Ct=async()=>{try{"wakeLock"in navigator&&(kt.current=await navigator.wakeLock.request("screen"))}catch(e){console.log("Wake Lock not supported")}},Nt=async()=>{try{kt.current&&(await kt.current.release(),kt.current=null)}catch(e){console.log("Error releasing wake lock")}},It=()=>{"exercise-edit"===z?"home"===e?(V(null),W("categories"),q(null),t("home")):(W("categories"),q(null)):(V(null),W("categories"),q(null),t("home"))},_t=e=>{V(null),t(e)},Tt=(e,t)=>{if(e&&!B&&(V(e),W("categories")),"categories"===z){if("New Workout"===t)return W("exercise-edit"),void q("New Workout");"timer"===e?K(t):"stopwatch"===e&&Y(t),W("exercise-edit"),q(t)}else W("categories"),q(null)},At=(e,t)=>{"timer"===e?(K(t),n&&Bx(n.uid,t).catch(e=>console.error("Failed to save selected workout:",e))):"stopwatch"===e&&Y(t)},Dt=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const r=B,i=H,s="New Workout"===i,o=t||i;if(("timer"===r?u:f)(t=>s?[...t,{name:o,type:r,exercises:e}]:t.map(t=>t.name===i?d(d({},t),{},{name:o,exercises:e}):t)),t&&"New Workout"!==i&&("timer"===r&&G===i?K(o):"stopwatch"===r&&Q===i&&Y(o)),s&&("timer"===r?K(o):Y(o)),q(o),n){const s=[...Zx,...ek].map(e=>e.name).includes(i);Yx(n.uid,{name:o,type:r,exercises:e,isDefault:s,defaultName:s&&t?i:null,creatorUid:null,creatorName:null,creatorPhotoURL:null}).catch(e=>console.error("Failed to save workout:",e))}},Pt=(0,r.useCallback)(function(e,t,r,i,s){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const{isOwned:a=!0}=o,l=r||e,c=!e,h=s&&s.length>0?s:null;if(!a&&!c){const r={name:l,type:"timer",exercises:t,restTime:null!==i&&void 0!==i?i:null,tags:h,isCustom:!0,forked:!0};if(u(t=>t.map(t=>t.name===e?r:t)),K(l),n&&l){const t=[...Zx,...ek].map(e=>e.name);(async()=>{t.includes(e)&&await $x(n.uid,e,!0),await Yx(n.uid,d(d({},r),{},{isDefault:!1,defaultName:null,creatorUid:null,creatorName:null,creatorPhotoURL:null}))})().catch(e=>console.error("Failed to persist forked workout:",e))}return}if(c&&l?(u(e=>[...e,{name:l,type:"timer",exercises:t,restTime:null!==i&&void 0!==i?i:null,tags:h}]),K(l)):(u(n=>n.map(n=>n.name===e?d(d({},n),{},{name:l,exercises:t,restTime:null!==i&&void 0!==i?i:null,tags:h,creatorUid:null,creatorName:null,creatorPhotoURL:null}):n)),r&&r!==e&&G===e&&K(l)),n&&l){const s=[...Zx,...ek].map(e=>e.name).includes(e);Yx(n.uid,{name:l,type:"timer",exercises:t,isDefault:!c&&s,defaultName:s&&r?e:null,restTime:null!==i&&void 0!==i?i:null,tags:h,creatorUid:null,creatorName:null,creatorPhotoURL:null}).catch(e=>console.error("Failed to save workout:",e))}},[n,G]),Rt=(0,r.useCallback)(e=>{K(e),n&&Bx(n.uid,e).catch(e=>console.error("Failed to save selected workout:",e)),t("timer")},[n]),Lt=e=>{const t=Zx.map(e=>e.name).includes(e);u(t=>{const r=t.filter(t=>t.name!==e);return G===e&&r.length>0&&setTimeout(()=>K(r[0].name),0),n&&setTimeout(()=>{Vx(n.uid,r.map(e=>e.name)).catch(e=>console.error("Failed to save workout order:",e))},0),r});const r=Object.values(Ke).some(t=>t===e);if(r){const t=d({},Ke);for(const n in t)t[n]===e&&(t[n]=null);Qe(t),n&&zx(n.uid,t).catch(e=>console.error("Failed to clean schedule:",e))}n&&$x(n.uid,e,t).catch(e=>console.error("Failed to delete workout:",e))},jt=e=>{u(e),n&&Vx(n.uid,e.map(e=>e.name)).catch(e=>console.error("Failed to save workout order:",e))},Ot=()=>{let e=B;const n=H;!e&&n&&(p.includes(n)?e="timer":m.includes(n)&&(e="stopwatch")),!e||"timer"!==e&&"stopwatch"!==e?console.error("Invalid workout type:",e,"for workout:",n):("timer"===e?K(n):"stopwatch"===e&&Y(n),t(e),V(null),W("categories"),q(null))};return(0,vm.jsxs)("main",{className:"tab-content tab-".concat(e),style:{"--color-active":ke,"--color-active-rgb":Vk(ke),"--color-rest":Ee,"--color-rest-rgb":Vk(Ee)},children:[(0,vm.jsx)("div",{style:{display:"timer"!==e||B?"none":"block"},children:(0,vm.jsx)(Em,{timeLeft:E.timeLeft,isRunning:E.isRunning,targetTime:E.targetTime,selectedWorkoutIndex:E.selectedWorkoutIndex,onTimerStateChange:e=>{void 0!==e.isRunning?C(t=>(e.isRunning&&!t.isRunning?Ct():!e.isRunning&&t.isRunning&&Nt(),d(d({},t),e))):C(t=>d(d({},t),e))},workouts:g(G),selectedWorkoutName:G,activeColor:ke,restColor:Ee,sidePlankAlertEnabled:Ne,prepTime:v,restTime:(()=>{const e=c.find(e=>e.name===G);return null!=(null===e||void 0===e?void 0:e.restTime)?e.restTime:b})(),activeLastMinute:x,initialLoad:s,workoutReady:a,onInitialLoadDone:()=>o(!1),isVisible:"timer"===e&&!B})}),(()=>{if("timer"===e&&!B)return null;if("stats"===e&&!B)return(0,vm.jsx)(nk,{user:n,history:J,loading:X,onLoginClick:()=>me(!0),timerWorkoutData:c,stopwatchWorkoutData:h,prepTime:v,globalRestTime:b,onStartWorkout:Rt,defaultWorkoutNames:[...Zx,...ek].map(e=>e.name),followingIds:Pe,followerIds:Le,pinnedWorkouts:Ae,onPinnedWorkoutsChange:pt,onWorkoutAdded:ct,onProfileClick:()=>se(!0),openProfilePopup:we,onProfilePopupOpened:()=>xe(!1)});if("exercise-edit"===z&&H){const e=g(H);return(0,vm.jsx)(ck,{workoutName:H,exercises:e,onSave:Dt,onBack:It,workoutType:B,onStart:Ot})}if(B){const e="timer"===B?p:m,t="timer"===B?G:Q;return(0,vm.jsx)(lk,{type:B,level:z,workouts:e,selectedWorkout:t,onWorkoutSelect:e=>At(B,e),onArrowClick:e=>Tt(B,e),onBack:It,onNavigateToTab:_t})}switch(e){case"home":default:return(0,vm.jsx)(Ox,{timerWorkoutData:c,timerSelectedWorkout:G,workoutHistory:J,onWorkoutSelect:At,onArrowClick:Tt,onNavigateToTab:_t,onDeleteWorkout:Lt,onReorder:jt,onBellClick:()=>te(!0),onLoginClick:()=>me(!0),onProfileClick:()=>se(!0),prepTime:v,globalRestTime:b,onDetailSave:Pt,onStartWorkout:Rt,defaultWorkoutNames:[...Zx,...ek].map(e=>e.name),requestCloseDetail:ye,showCardPhotos:_e,onShareWorkout:st,onScheduleWorkout:tt,weeklySchedule:Ke});case"stats":return(0,vm.jsx)(nk,{user:n,history:J,loading:X,timerWorkoutData:c,stopwatchWorkoutData:h,prepTime:v,globalRestTime:b,onStartWorkout:Rt,defaultWorkoutNames:[...Zx,...ek].map(e=>e.name),pinnedWorkouts:Ae,onPinnedWorkoutsChange:pt,onWorkoutAdded:ct,onProfileClick:()=>se(!0),openProfilePopup:we,onProfilePopupOpened:()=>xe(!1),onShareWorkout:st})}})(),!B&&"exercise-edit"!==z&&(0,vm.jsx)(ok,{activeTab:e,onTabChange:n=>{"home"===n&&"home"===e&&(be(!0),setTimeout(()=>be(!1),50)),t(n),ee&&re(!0),ie&&ae(!0),pe&&ve(!0)}}),(0,vm.jsx)(Lk,{isOpen:ee,onClose:()=>{te(!1),re(!1)},requestClose:ne}),(0,vm.jsx)(Fk,{isOpen:ie,onClose:()=>{se(!1),ae(!1)},requestClose:oe,autoShareEnabled:he,onToggleAutoShare:ht,sidePlankAlertEnabled:Ne,onToggleSidePlankAlert:ft,prepTime:v,onPrepTimeChange:gt,restTime:b,onRestTimeChange:yt,activeLastMinute:x,onToggleActiveLastMinute:vt,activeColor:ke,restColor:Ee,onColorChange:bt,showCardPhotos:_e,onToggleShowCardPhotos:mt,onOpenProfile:()=>{ae(!0),t("stats"),xe(!0)}}),(0,vm.jsx)(Uk,{isOpen:pe,onClose:()=>{me(!1),ve(!1)},requestClose:ge}),le&&(0,vm.jsx)(Bk,{onShare:dt,onDismiss:wt}),Oe&&(0,vm.jsx)("div",{className:"stats-follow-overlay ".concat(Fe?"closing":""),style:{zIndex:200},onClick:e=>{e.target===e.currentTarget&&ot()},children:(0,vm.jsxs)("div",{className:"stats-follow-panel",ref:Ge,children:[(0,vm.jsxs)("div",{className:"stats-follow-panel-header",children:[(0,vm.jsx)("span",{className:"stats-send-title",children:"Send to"}),(0,vm.jsx)("button",{className:"stats-follow-panel-close",onClick:ot,children:(0,vm.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,vm.jsx)("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),(0,vm.jsx)("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),(0,vm.jsx)("input",{className:"stats-follow-search",type:"text",placeholder:"Search...",value:ze,onChange:e=>{const t=e.target.value;if(!ze&&t){const e=Ge.current;e&&(e.style.minHeight=e.offsetHeight+"px")}else if(ze&&!t){const e=Ge.current;e&&(e.style.minHeight="")}We(t)}}),(0,vm.jsx)("div",{className:"stats-follow-panel-list",children:0===Be.length?(0,vm.jsx)("div",{className:"stats-follow-panel-empty",children:"Not following anyone yet"}):Be.filter(e=>!ze||(e.displayName||"").toLowerCase().includes(ze.toLowerCase())).map((e,t)=>(0,vm.jsxs)("div",{className:"stats-follow-panel-item",style:{animationDelay:"".concat(40*t,"ms"),cursor:"pointer"},onClick:()=>at(e),children:[(0,vm.jsx)("div",{className:"stats-follow-panel-avatar",children:e.photoURL?(0,vm.jsx)("img",{src:e.photoURL,alt:"",referrerPolicy:"no-referrer"}):(0,vm.jsx)("div",{className:"stats-follow-panel-avatar-placeholder",children:(e.displayName||"?")[0].toUpperCase()})}),(0,vm.jsx)("span",{className:"stats-follow-panel-name",style:{flex:1},children:e.displayName}),(0,vm.jsx)("div",{className:"stats-send-check ".concat(He[e.uid]?"selected":""),children:He[e.uid]&&(0,vm.jsx)("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:(0,vm.jsx)("polyline",{points:"20 6 9 17 4 12"})})})]},e.uid))}),(0,vm.jsxs)("button",{className:"stats-send-submit ".concat(Object.keys(He).length>0?"":"disabled"),disabled:0===Object.keys(He).length,onClick:()=>{Object.keys(He).length>0&&ot()},children:["Send",Object.keys(He).length>0?" (".concat(Object.keys(He).length,")"):""]})]})}),Ye&&(0,vm.jsx)("div",{className:"schedule-overlay ".concat($e?"closing":""),onClick:e=>{e.target===e.currentTarget&&nt()},children:(0,vm.jsxs)("div",{className:"schedule-panel",children:[(0,vm.jsxs)("div",{className:"schedule-header",children:[(0,vm.jsxs)("div",{className:"schedule-title-group",children:[(0,vm.jsx)("span",{className:"schedule-label",children:"Schedule"}),(0,vm.jsx)("span",{className:"schedule-workout-name",children:Ye.name})]}),(0,vm.jsx)("button",{className:"schedule-close",onClick:nt,children:(0,vm.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,vm.jsx)("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),(0,vm.jsx)("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),(0,vm.jsx)("div",{className:"schedule-days-vertical",children:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"].map((e,t)=>{const n=Ze[t],r=n===Ye.name,i=t===(new Date).getDay();return(0,vm.jsxs)("button",{className:"schedule-row".concat(r?" active":"").concat(i?" today":""),onClick:()=>rt(t),children:[(0,vm.jsx)("span",{className:"schedule-row-day",children:e}),(0,vm.jsxs)("div",{className:"schedule-row-right",children:[n?(0,vm.jsx)("span",{className:"schedule-row-workout".concat(r?" current":""),children:n}):(0,vm.jsx)("span",{className:"schedule-row-rest",children:"Rest"}),(0,vm.jsx)("span",{className:"schedule-row-check".concat(r?" checked":""),children:r?(0,vm.jsx)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:(0,vm.jsx)("polyline",{points:"20 6 9 17 4 12"})}):(0,vm.jsx)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,vm.jsx)("circle",{cx:"12",cy:"12",r:"10"})})})]})]},t)})}),(0,vm.jsx)("button",{className:"schedule-save-btn".concat(JSON.stringify(Ze)===JSON.stringify(Ke)?" disabled":""),disabled:JSON.stringify(Ze)===JSON.stringify(Ke),onClick:it,children:"Save"})]})})]})};const Wk=function(){return(0,vm.jsx)(bm,{children:(0,vm.jsx)("div",{className:"App",children:(0,vm.jsx)(zk,{})})})};i.createRoot(document.getElementById("root")).render((0,vm.jsx)(Wk,{}))})();
//# sourceMappingURL=main.d245f822.js.map