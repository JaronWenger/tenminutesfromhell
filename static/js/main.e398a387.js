/*! For license information please see main.e398a387.js.LICENSE.txt */
(()=>{"use strict";var e={4:(e,t,n)=>{var r=n(853),i=n(43),o=n(950);function s(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function l(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function c(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function u(e){if(l(e)!==e)throw Error(s(188))}function d(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=d(e)))return t;e=e.sibling}return null}var h=Object.assign,f=Symbol.for("react.element"),p=Symbol.for("react.transitional.element"),m=Symbol.for("react.portal"),g=Symbol.for("react.fragment"),v=Symbol.for("react.strict_mode"),y=Symbol.for("react.profiler"),b=Symbol.for("react.provider"),w=Symbol.for("react.consumer"),k=Symbol.for("react.context"),S=Symbol.for("react.forward_ref"),x=Symbol.for("react.suspense"),E=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),I=Symbol.for("react.lazy");Symbol.for("react.scope");var _=Symbol.for("react.activity");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var T=Symbol.for("react.memo_cache_sentinel");Symbol.for("react.view_transition");var N=Symbol.iterator;function A(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=N&&e[N]||e["@@iterator"])?e:null}var D=Symbol.for("react.client.reference");function P(e){if(null==e)return null;if("function"===typeof e)return e.$$typeof===D?null:e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case g:return"Fragment";case y:return"Profiler";case v:return"StrictMode";case x:return"Suspense";case E:return"SuspenseList";case _:return"Activity"}if("object"===typeof e)switch(e.$$typeof){case m:return"Portal";case k:return(e.displayName||"Context")+".Provider";case w:return(e._context.displayName||"Context")+".Consumer";case S:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case C:return null!==(t=e.displayName||null)?t:P(e.type)||"Memo";case I:t=e._payload,e=e._init;try{return P(e(t))}catch(zo){}}return null}var R=Array.isArray,L=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,O=o.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,M={pending:!1,data:null,method:null,action:null},j=[],F=-1;function B(e){return{current:e}}function U(e){0>F||(e.current=j[F],j[F]=null,F--)}function V(e,t){F++,j[F]=e.current,e.current=t}var z=B(null),W=B(null),H=B(null),q=B(null);function G(e,t){switch(V(H,t),V(W,e),V(z,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?od(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=sd(t=od(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}U(z),V(z,e)}function K(){U(z),U(W),U(H)}function Q(e){null!==e.memoizedState&&V(q,e);var t=z.current,n=sd(t,e.type);t!==n&&(V(W,e),V(z,n))}function Y(e){W.current===e&&(U(z),U(W)),q.current===e&&(U(q),Yd._currentValue=M)}var $=Object.prototype.hasOwnProperty,X=r.unstable_scheduleCallback,J=r.unstable_cancelCallback,Z=r.unstable_shouldYield,ee=r.unstable_requestPaint,te=r.unstable_now,ne=r.unstable_getCurrentPriorityLevel,re=r.unstable_ImmediatePriority,ie=r.unstable_UserBlockingPriority,oe=r.unstable_NormalPriority,se=r.unstable_LowPriority,ae=r.unstable_IdlePriority,le=r.log,ce=r.unstable_setDisableYieldValue,ue=null,de=null;function he(e){if("function"===typeof le&&ce(e),de&&"function"===typeof de.setStrictMode)try{de.setStrictMode(ue,e)}catch(t){}}var fe=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(pe(e)/me|0)|0},pe=Math.log,me=Math.LN2;var ge=256,ve=4194304;function ye(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194048&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function be(e,t,n){var r=e.pendingLanes;if(0===r)return 0;var i=0,o=e.suspendedLanes,s=e.pingedLanes;e=e.warmLanes;var a=134217727&r;return 0!==a?0!==(r=a&~o)?i=ye(r):0!==(s&=a)?i=ye(s):n||0!==(n=a&~e)&&(i=ye(n)):0!==(a=r&~o)?i=ye(a):0!==s?i=ye(s):n||0!==(n=r&~e)&&(i=ye(n)),0===i?0:0!==t&&t!==i&&0===(t&o)&&((o=i&-i)>=(n=t&-t)||32===o&&0!==(4194048&n))?t:i}function we(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function ke(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function Se(){var e=ge;return 0===(4194048&(ge<<=1))&&(ge=256),e}function xe(){var e=ve;return 0===(62914560&(ve<<=1))&&(ve=4194304),e}function Ee(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Ce(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Ie(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-fe(t);e.entangledLanes|=t,e.entanglements[r]=1073741824|e.entanglements[r]|4194090&n}function _e(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-fe(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}function Te(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Ne(e){return 2<(e&=-e)?8<e?0!==(134217727&e)?32:268435456:8:2}function Ae(){var e=O.p;return 0!==e?e:void 0===(e=window.event)?32:uh(e.type)}var De=Math.random().toString(36).slice(2),Pe="__reactFiber$"+De,Re="__reactProps$"+De,Le="__reactContainer$"+De,Oe="__reactEvents$"+De,Me="__reactListeners$"+De,je="__reactHandles$"+De,Fe="__reactResources$"+De,Be="__reactMarker$"+De;function Ue(e){delete e[Pe],delete e[Re],delete e[Oe],delete e[Me],delete e[je]}function Ve(e){var t=e[Pe];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Le]||n[Pe]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=wd(e);null!==e;){if(n=e[Pe])return n;e=wd(e)}return t}n=(e=n).parentNode}return null}function ze(e){if(e=e[Pe]||e[Le]){var t=e.tag;if(5===t||6===t||13===t||26===t||27===t||3===t)return e}return null}function We(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(s(33))}function He(e){var t=e[Fe];return t||(t=e[Fe]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function qe(e){e[Be]=!0}var Ge=new Set,Ke={};function Qe(e,t){Ye(e,t),Ye(e+"Capture",t)}function Ye(e,t){for(Ke[e]=t,e=0;e<t.length;e++)Ge.add(t[e])}var $e,Xe,Je=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ze={},et={};function tt(e,t,n){if(i=t,$.call(et,i)||!$.call(Ze,i)&&(Je.test(i)?et[i]=!0:(Ze[i]=!0,0)))if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var r=t.toLowerCase().slice(0,5);if("data-"!==r&&"aria-"!==r)return void e.removeAttribute(t)}e.setAttribute(t,""+n)}var i}function nt(e,t,n){if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+n)}}function rt(e,t,n,r){if(null===r)e.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(n)}e.setAttributeNS(t,n,""+r)}}function it(e){if(void 0===$e)try{throw Error()}catch(zo){var t=zo.stack.trim().match(/\n( *(at )?)/);$e=t&&t[1]||"",Xe=-1<zo.stack.indexOf("\n    at")?" (<anonymous>)":-1<zo.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+$e+e+Xe}var ot=!1;function st(e,t){if(!e||ot)return"";ot=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(zo){var r=zo}Reflect.construct(e,[],n)}else{try{n.call()}catch(i){r=i}e.call(n.prototype)}}else{try{throw Error()}catch(o){r=o}(n=e())&&"function"===typeof n.catch&&n.catch(function(){})}}catch(s){if(s&&r&&"string"===typeof s.stack)return[s.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var i=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");i&&i.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var o=r.DetermineComponentFrameRoot(),s=o[0],a=o[1];if(s&&a){var l=s.split("\n"),c=a.split("\n");for(i=r=0;r<l.length&&!l[r].includes("DetermineComponentFrameRoot");)r++;for(;i<c.length&&!c[i].includes("DetermineComponentFrameRoot");)i++;if(r===l.length||i===c.length)for(r=l.length-1,i=c.length-1;1<=r&&0<=i&&l[r]!==c[i];)i--;for(;1<=r&&0<=i;r--,i--)if(l[r]!==c[i]){if(1!==r||1!==i)do{if(r--,0>--i||l[r]!==c[i]){var u="\n"+l[r].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=r&&0<=i);break}}}finally{ot=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?it(n):""}function at(e){switch(e.tag){case 26:case 27:case 5:return it(e.type);case 16:return it("Lazy");case 13:return it("Suspense");case 19:return it("SuspenseList");case 0:case 15:return st(e.type,!1);case 11:return st(e.type.render,!1);case 1:return st(e.type,!0);case 31:return it("Activity");default:return""}}function lt(e){try{var t="";do{t+=at(e),e=e.return}while(e);return t}catch(zo){return"\nError generating stack: "+zo.message+"\n"+zo.stack}}function ct(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function ut(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function dt(e){e._valueTracker||(e._valueTracker=function(e){var t=ut(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function ht(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=ut(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function ft(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var pt=/[\n"\\]/g;function mt(e){return e.replace(pt,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function gt(e,t,n,r,i,o,s,a){e.name="",null!=s&&"function"!==typeof s&&"symbol"!==typeof s&&"boolean"!==typeof s?e.type=s:e.removeAttribute("type"),null!=t?"number"===s?(0===t&&""===e.value||e.value!=t)&&(e.value=""+ct(t)):e.value!==""+ct(t)&&(e.value=""+ct(t)):"submit"!==s&&"reset"!==s||e.removeAttribute("value"),null!=t?yt(e,s,ct(t)):null!=n?yt(e,s,ct(n)):null!=r&&e.removeAttribute("value"),null==i&&null!=o&&(e.defaultChecked=!!o),null!=i&&(e.checked=i&&"function"!==typeof i&&"symbol"!==typeof i),null!=a&&"function"!==typeof a&&"symbol"!==typeof a&&"boolean"!==typeof a?e.name=""+ct(a):e.removeAttribute("name")}function vt(e,t,n,r,i,o,s,a){if(null!=o&&"function"!==typeof o&&"symbol"!==typeof o&&"boolean"!==typeof o&&(e.type=o),null!=t||null!=n){if(!("submit"!==o&&"reset"!==o||void 0!==t&&null!==t))return;n=null!=n?""+ct(n):"",t=null!=t?""+ct(t):n,a||t===e.value||(e.value=t),e.defaultValue=t}r="function"!==typeof(r=null!=r?r:i)&&"symbol"!==typeof r&&!!r,e.checked=a?e.checked:!!r,e.defaultChecked=!!r,null!=s&&"function"!==typeof s&&"symbol"!==typeof s&&"boolean"!==typeof s&&(e.name=s)}function yt(e,t,n){"number"===t&&ft(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function bt(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ct(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function wt(e,t,n){null==t||((t=""+ct(t))!==e.value&&(e.value=t),null!=n)?e.defaultValue=null!=n?""+ct(n):"":e.defaultValue!==t&&(e.defaultValue=t)}function kt(e,t,n,r){if(null==t){if(null!=r){if(null!=n)throw Error(s(92));if(R(r)){if(1<r.length)throw Error(s(93));r=r[0]}n=r}null==n&&(n=""),t=n}n=ct(t),e.defaultValue=n,(r=e.textContent)===n&&""!==r&&null!==r&&(e.value=r)}function St(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var xt=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Et(e,t,n){var r=0===t.indexOf("--");null==n||"boolean"===typeof n||""===n?r?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":r?e.setProperty(t,n):"number"!==typeof n||0===n||xt.has(t)?"float"===t?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function Ct(e,t,n){if(null!=t&&"object"!==typeof t)throw Error(s(62));if(e=e.style,null!=n){for(var r in n)!n.hasOwnProperty(r)||null!=t&&t.hasOwnProperty(r)||(0===r.indexOf("--")?e.setProperty(r,""):"float"===r?e.cssFloat="":e[r]="");for(var i in t)r=t[i],t.hasOwnProperty(i)&&n[i]!==r&&Et(e,i,r)}else for(var o in t)t.hasOwnProperty(o)&&Et(e,o,t[o])}function It(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _t=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Tt=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Nt(e){return Tt.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var At=null;function Dt(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Pt=null,Rt=null;function Lt(e){var t=ze(e);if(t&&(e=t.stateNode)){var n=e[Re]||null;e:switch(e=t.stateNode,t.type){case"input":if(gt(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+mt(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=r[Re]||null;if(!i)throw Error(s(90));gt(r,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name)}}for(t=0;t<n.length;t++)(r=n[t]).form===e.form&&ht(r)}break e;case"textarea":wt(e,n.value,n.defaultValue);break e;case"select":null!=(t=n.value)&&bt(e,!!n.multiple,t,!1)}}}var Ot=!1;function Mt(e,t,n){if(Ot)return e(t,n);Ot=!0;try{return e(t)}finally{if(Ot=!1,(null!==Pt||null!==Rt)&&(zc(),Pt&&(t=Pt,e=Rt,Rt=Pt=null,Lt(t),e)))for(t=0;t<e.length;t++)Lt(e[t])}}function jt(e,t){var n=e.stateNode;if(null===n)return null;var r=n[Re]||null;if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var Ft=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),Bt=!1;if(Ft)try{var Ut={};Object.defineProperty(Ut,"passive",{get:function(){Bt=!0}}),window.addEventListener("test",Ut,Ut),window.removeEventListener("test",Ut,Ut)}catch(Lh){Bt=!1}var Vt=null,zt=null,Wt=null;function Ht(){if(Wt)return Wt;var e,t,n=zt,r=n.length,i="value"in Vt?Vt.value:Vt.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var s=r-e;for(t=1;t<=s&&n[r-t]===i[o-t];t++);return Wt=i.slice(e,1<t?1-t:void 0)}function qt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Gt(){return!0}function Kt(){return!1}function Qt(e){function t(t,n,r,i,o){for(var s in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(s)&&(t=e[s],this[s]=t?t(i):i[s]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?Gt:Kt,this.isPropagationStopped=Kt,this}return h(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Gt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Gt)},persist:function(){},isPersistent:Gt}),t}var Yt,$t,Xt,Jt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zt=Qt(Jt),en=h({},Jt,{view:0,detail:0}),tn=Qt(en),nn=h({},en,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:pn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Xt&&(Xt&&"mousemove"===e.type?(Yt=e.screenX-Xt.screenX,$t=e.screenY-Xt.screenY):$t=Yt=0,Xt=e),Yt)},movementY:function(e){return"movementY"in e?e.movementY:$t}}),rn=Qt(nn),on=Qt(h({},nn,{dataTransfer:0})),sn=Qt(h({},en,{relatedTarget:0})),an=Qt(h({},Jt,{animationName:0,elapsedTime:0,pseudoElement:0})),ln=Qt(h({},Jt,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),cn=Qt(h({},Jt,{data:0})),un={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=hn[e])&&!!t[e]}function pn(){return fn}var mn=Qt(h({},en,{key:function(e){if(e.key){var t=un[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=qt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?dn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:pn,charCode:function(e){return"keypress"===e.type?qt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?qt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),gn=Qt(h({},nn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),vn=Qt(h({},en,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:pn})),yn=Qt(h({},Jt,{propertyName:0,elapsedTime:0,pseudoElement:0})),bn=Qt(h({},nn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),wn=Qt(h({},Jt,{newState:0,oldState:0})),kn=[9,13,27,32],Sn=Ft&&"CompositionEvent"in window,xn=null;Ft&&"documentMode"in document&&(xn=document.documentMode);var En=Ft&&"TextEvent"in window&&!xn,Cn=Ft&&(!Sn||xn&&8<xn&&11>=xn),In=String.fromCharCode(32),_n=!1;function Tn(e,t){switch(e){case"keyup":return-1!==kn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Nn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var An=!1;var Dn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Pn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Dn[e.type]:"textarea"===t}function Rn(e,t,n,r){Pt?Rt?Rt.push(r):Rt=[r]:Pt=r,0<(t=qu(t,"onChange")).length&&(n=new Zt("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Ln=null,On=null;function Mn(e){ju(e,0)}function jn(e){if(ht(We(e)))return e}function Fn(e,t){if("change"===e)return t}var Bn=!1;if(Ft){var Un;if(Ft){var Vn="oninput"in document;if(!Vn){var zn=document.createElement("div");zn.setAttribute("oninput","return;"),Vn="function"===typeof zn.oninput}Un=Vn}else Un=!1;Bn=Un&&(!document.documentMode||9<document.documentMode)}function Wn(){Ln&&(Ln.detachEvent("onpropertychange",Hn),On=Ln=null)}function Hn(e){if("value"===e.propertyName&&jn(On)){var t=[];Rn(t,On,e,Dt(e)),Mt(Mn,t)}}function qn(e,t,n){"focusin"===e?(Wn(),On=n,(Ln=t).attachEvent("onpropertychange",Hn)):"focusout"===e&&Wn()}function Gn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return jn(On)}function Kn(e,t){if("click"===e)return jn(t)}function Qn(e,t){if("input"===e||"change"===e)return jn(t)}var Yn="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function $n(e,t){if(Yn(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!$.call(t,i)||!Yn(e[i],t[i]))return!1}return!0}function Xn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Jn(e,t){var n,r=Xn(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Xn(r)}}function Zn(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?Zn(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function er(e){for(var t=ft((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=ft((e=t.contentWindow).document)}return t}function tr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var nr=Ft&&"documentMode"in document&&11>=document.documentMode,rr=null,ir=null,or=null,sr=!1;function ar(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;sr||null==rr||rr!==ft(r)||("selectionStart"in(r=rr)&&tr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},or&&$n(or,r)||(or=r,0<(r=qu(ir,"onSelect")).length&&(t=new Zt("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=rr)))}function lr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var cr={animationend:lr("Animation","AnimationEnd"),animationiteration:lr("Animation","AnimationIteration"),animationstart:lr("Animation","AnimationStart"),transitionrun:lr("Transition","TransitionRun"),transitionstart:lr("Transition","TransitionStart"),transitioncancel:lr("Transition","TransitionCancel"),transitionend:lr("Transition","TransitionEnd")},ur={},dr={};function hr(e){if(ur[e])return ur[e];if(!cr[e])return e;var t,n=cr[e];for(t in n)if(n.hasOwnProperty(t)&&t in dr)return ur[e]=n[t];return e}Ft&&(dr=document.createElement("div").style,"AnimationEvent"in window||(delete cr.animationend.animation,delete cr.animationiteration.animation,delete cr.animationstart.animation),"TransitionEvent"in window||delete cr.transitionend.transition);var fr=hr("animationend"),pr=hr("animationiteration"),mr=hr("animationstart"),gr=hr("transitionrun"),vr=hr("transitionstart"),yr=hr("transitioncancel"),br=hr("transitionend"),wr=new Map,kr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Sr(e,t){wr.set(e,t),Qe(t,[e])}kr.push("scrollEnd");var xr=new WeakMap;function Er(e,t){if("object"===typeof e&&null!==e){var n=xr.get(e);return void 0!==n?n:(t={value:e,source:t,stack:lt(t)},xr.set(e,t),t)}return{value:e,source:t,stack:lt(t)}}var Cr=[],Ir=0,_r=0;function Tr(){for(var e=Ir,t=_r=Ir=0;t<e;){var n=Cr[t];Cr[t++]=null;var r=Cr[t];Cr[t++]=null;var i=Cr[t];Cr[t++]=null;var o=Cr[t];if(Cr[t++]=null,null!==r&&null!==i){var s=r.pending;null===s?i.next=i:(i.next=s.next,s.next=i),r.pending=i}0!==o&&Pr(n,i,o)}}function Nr(e,t,n,r){Cr[Ir++]=e,Cr[Ir++]=t,Cr[Ir++]=n,Cr[Ir++]=r,_r|=r,e.lanes|=r,null!==(e=e.alternate)&&(e.lanes|=r)}function Ar(e,t,n,r){return Nr(e,t,n,r),Rr(e)}function Dr(e,t){return Nr(e,null,null,t),Rr(e)}function Pr(e,t,n){e.lanes|=n;var r=e.alternate;null!==r&&(r.lanes|=n);for(var i=!1,o=e.return;null!==o;)o.childLanes|=n,null!==(r=o.alternate)&&(r.childLanes|=n),22===o.tag&&(null===(e=o.stateNode)||1&e._visibility||(i=!0)),e=o,o=o.return;return 3===e.tag?(o=e.stateNode,i&&null!==t&&(i=31-fe(n),null===(r=(e=o.hiddenUpdates)[i])?e[i]=[t]:r.push(t),t.lane=536870912|n),o):null}function Rr(e){if(50<Rc)throw Rc=0,Lc=null,Error(s(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var Lr={};function Or(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mr(e,t,n,r){return new Or(e,t,n,r)}function jr(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Fr(e,t){var n=e.alternate;return null===n?((n=Mr(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=65011712&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Br(e,t){e.flags&=65011714;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Ur(e,t,n,r,i,o){var a=0;if(r=e,"function"===typeof e)jr(e)&&(a=1);else if("string"===typeof e)a=function(e,t,n){if(1===n||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!==typeof t.precedence||"string"!==typeof t.href||""===t.href)break;return!0;case"link":if("string"!==typeof t.rel||"string"!==typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"===typeof t.precedence&&null==e);case"script":if(t.async&&"function"!==typeof t.async&&"symbol"!==typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"===typeof t.src)return!0}return!1}(e,n,z.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case _:return(e=Mr(31,n,t,i)).elementType=_,e.lanes=o,e;case g:return Vr(n.children,i,o,t);case v:a=8,i|=24;break;case y:return(e=Mr(12,n,t,2|i)).elementType=y,e.lanes=o,e;case x:return(e=Mr(13,n,t,i)).elementType=x,e.lanes=o,e;case E:return(e=Mr(19,n,t,i)).elementType=E,e.lanes=o,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case b:case k:a=10;break e;case w:a=9;break e;case S:a=11;break e;case C:a=14;break e;case I:a=16,r=null;break e}a=29,n=Error(s(130,null===e?"null":typeof e,"")),r=null}return(t=Mr(a,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Vr(e,t,n,r){return(e=Mr(7,e,r,t)).lanes=n,e}function zr(e,t,n){return(e=Mr(6,e,null,t)).lanes=n,e}function Wr(e,t,n){return(t=Mr(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Hr=[],qr=0,Gr=null,Kr=0,Qr=[],Yr=0,$r=null,Xr=1,Jr="";function Zr(e,t){Hr[qr++]=Kr,Hr[qr++]=Gr,Gr=e,Kr=t}function ei(e,t,n){Qr[Yr++]=Xr,Qr[Yr++]=Jr,Qr[Yr++]=$r,$r=e;var r=Xr;e=Jr;var i=32-fe(r)-1;r&=~(1<<i),n+=1;var o=32-fe(t)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,Xr=1<<32-fe(t)+i|n<<i|r,Jr=o+e}else Xr=1<<o|n<<i|r,Jr=e}function ti(e){null!==e.return&&(Zr(e,1),ei(e,1,0))}function ni(e){for(;e===Gr;)Gr=Hr[--qr],Hr[qr]=null,Kr=Hr[--qr],Hr[qr]=null;for(;e===$r;)$r=Qr[--Yr],Qr[Yr]=null,Jr=Qr[--Yr],Qr[Yr]=null,Xr=Qr[--Yr],Qr[Yr]=null}var ri=null,ii=null,oi=!1,si=null,ai=!1,li=Error(s(519));function ci(e){throw mi(Er(Error(s(418,"")),e)),li}function ui(e){var t=e.stateNode,n=e.type,r=e.memoizedProps;switch(t[Pe]=e,t[Re]=r,n){case"dialog":Fu("cancel",t),Fu("close",t);break;case"iframe":case"object":case"embed":Fu("load",t);break;case"video":case"audio":for(n=0;n<Ou.length;n++)Fu(Ou[n],t);break;case"source":Fu("error",t);break;case"img":case"image":case"link":Fu("error",t),Fu("load",t);break;case"details":Fu("toggle",t);break;case"input":Fu("invalid",t),vt(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0),dt(t);break;case"select":Fu("invalid",t);break;case"textarea":Fu("invalid",t),kt(t,r.value,r.defaultValue,r.children),dt(t)}"string"!==typeof(n=r.children)&&"number"!==typeof n&&"bigint"!==typeof n||t.textContent===""+n||!0===r.suppressHydrationWarning||Xu(t.textContent,n)?(null!=r.popover&&(Fu("beforetoggle",t),Fu("toggle",t)),null!=r.onScroll&&Fu("scroll",t),null!=r.onScrollEnd&&Fu("scrollend",t),null!=r.onClick&&(t.onclick=Ju),t=!0):t=!1,t||ci(e)}function di(e){for(ri=e.return;ri;)switch(ri.tag){case 5:case 13:return void(ai=!1);case 27:case 3:return void(ai=!0);default:ri=ri.return}}function hi(e){if(e!==ri)return!1;if(!oi)return di(e),oi=!0,!1;var t,n=e.tag;if((t=3!==n&&27!==n)&&((t=5===n)&&(t=!("form"!==(t=e.type)&&"button"!==t)||ad(e.type,e.memoizedProps)),t=!t),t&&ii&&ci(e),di(e),13===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,n=0;e;){if(8===e.nodeType)if("/$"===(t=e.data)){if(0===n){ii=yd(e.nextSibling);break e}n--}else"$"!==t&&"$!"!==t&&"$?"!==t||n++;e=e.nextSibling}ii=null}}else 27===n?(n=ii,pd(e.type)?(e=bd,bd=null,ii=e):ii=n):ii=ri?yd(e.stateNode.nextSibling):null;return!0}function fi(){ii=ri=null,oi=!1}function pi(){var e=si;return null!==e&&(null===wc?wc=e:wc.push.apply(wc,e),si=null),e}function mi(e){null===si?si=[e]:si.push(e)}var gi=B(null),vi=null,yi=null;function bi(e,t,n){V(gi,t._currentValue),t._currentValue=n}function wi(e){e._currentValue=gi.current,U(gi)}function ki(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Si(e,t,n,r){var i=e.child;for(null!==i&&(i.return=e);null!==i;){var o=i.dependencies;if(null!==o){var a=i.child;o=o.firstContext;e:for(;null!==o;){var l=o;o=i;for(var c=0;c<t.length;c++)if(l.context===t[c]){o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),ki(o.return,n,e),r||(a=null);break e}o=l.next}}else if(18===i.tag){if(null===(a=i.return))throw Error(s(341));a.lanes|=n,null!==(o=a.alternate)&&(o.lanes|=n),ki(a,n,e),a=null}else a=i.child;if(null!==a)a.return=i;else for(a=i;null!==a;){if(a===e){a=null;break}if(null!==(i=a.sibling)){i.return=a.return,a=i;break}a=a.return}i=a}}function xi(e,t,n,r){e=null;for(var i=t,o=!1;null!==i;){if(!o)if(0!==(524288&i.flags))o=!0;else if(0!==(262144&i.flags))break;if(10===i.tag){var a=i.alternate;if(null===a)throw Error(s(387));if(null!==(a=a.memoizedProps)){var l=i.type;Yn(i.pendingProps.value,a.value)||(null!==e?e.push(l):e=[l])}}else if(i===q.current){if(null===(a=i.alternate))throw Error(s(387));a.memoizedState.memoizedState!==i.memoizedState.memoizedState&&(null!==e?e.push(Yd):e=[Yd])}i=i.return}null!==e&&Si(t,e,n,r),t.flags|=262144}function Ei(e){for(e=e.firstContext;null!==e;){if(!Yn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ci(e){vi=e,yi=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function Ii(e){return Ti(vi,e)}function _i(e,t){return null===vi&&Ci(e),Ti(e,t)}function Ti(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},null===yi){if(null===e)throw Error(s(308));yi=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else yi=yi.next=t;return n}var Ni="undefined"!==typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},Ai=r.unstable_scheduleCallback,Di=r.unstable_NormalPriority,Pi={$$typeof:k,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ri(){return{controller:new Ni,data:new Map,refCount:0}}function Li(e){e.refCount--,0===e.refCount&&Ai(Di,function(){e.controller.abort()})}var Oi=null,Mi=0,ji=0,Fi=null;function Bi(){if(0===--Mi&&null!==Oi){null!==Fi&&(Fi.status="fulfilled");var e=Oi;Oi=null,ji=0,Fi=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var Ui=L.S;L.S=function(e,t){"object"===typeof t&&null!==t&&"function"===typeof t.then&&function(e,t){if(null===Oi){var n=Oi=[];Mi=0,ji=Au(),Fi={status:"pending",value:void 0,then:function(e){n.push(e)}}}Mi++,t.then(Bi,Bi)}(0,t),null!==Ui&&Ui(e,t)};var Vi=B(null);function zi(){var e=Vi.current;return null!==e?e:ic.pooledCache}function Wi(e,t){V(Vi,null===t?Vi.current:t.pool)}function Hi(){var e=zi();return null===e?null:{parent:Pi._currentValue,pool:e}}var qi=Error(s(460)),Gi=Error(s(474)),Ki=Error(s(542)),Qi={then:function(){}};function Yi(e){return"fulfilled"===(e=e.status)||"rejected"===e}function $i(){}function Xi(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then($i,$i),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw eo(e=t.reason),e;default:if("string"===typeof t.status)t.then($i,$i);else{if(null!==(e=ic)&&100<e.shellSuspendCounter)throw Error(s(482));(e=t).status="pending",e.then(function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}},function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw eo(e=t.reason),e}throw Ji=t,qi}}var Ji=null;function Zi(){if(null===Ji)throw Error(s(459));var e=Ji;return Ji=null,e}function eo(e){if(e===qi||e===Ki)throw Error(s(483))}var to=!1;function no(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ro(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function io(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function oo(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&rc)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,t=Rr(e),Pr(e,null,n),t}return Nr(e,r,t,n),Rr(e)}function so(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194048&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,_e(e,n)}}function ao(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var s={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===o?i=o=s:o=o.next=s,n=n.next}while(null!==n);null===o?i=o=t:o=o.next=t}else i=o=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,callbacks:r.callbacks},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var lo=!1;function co(){if(lo){if(null!==Fi)throw Fi}}function uo(e,t,n,r){lo=!1;var i=e.updateQueue;to=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var l=a,c=l.next;l.next=null,null===s?o=c:s.next=c,s=l;var u=e.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==s&&(null===a?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(null!==o){var d=i.baseState;for(s=0,u=c=l=null,a=o;;){var f=-536870913&a.lane,p=f!==a.lane;if(p?(sc&f)===f:(r&f)===f){0!==f&&f===ji&&(lo=!0),null!==u&&(u=u.next={lane:0,tag:a.tag,payload:a.payload,callback:null,next:null});e:{var m=e,g=a;f=t;var v=n;switch(g.tag){case 1:if("function"===typeof(m=g.payload)){d=m.call(v,d,f);break e}d=m;break e;case 3:m.flags=-65537&m.flags|128;case 0:if(null===(f="function"===typeof(m=g.payload)?m.call(v,d,f):m)||void 0===f)break e;d=h({},d,f);break e;case 2:to=!0}}null!==(f=a.callback)&&(e.flags|=64,p&&(e.flags|=8192),null===(p=i.callbacks)?i.callbacks=[f]:p.push(f))}else p={lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(c=u=p,l=d):u=u.next=p,s|=f;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(p=a).next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}null===u&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null===o&&(i.shared.lanes=0),pc|=s,e.lanes=s,e.memoizedState=d}}function ho(e,t){if("function"!==typeof e)throw Error(s(191,e));e.call(t)}function fo(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)ho(n[e],t)}var po=B(null),mo=B(0);function go(e,t){V(mo,e=hc),V(po,t),hc=e|t.baseLanes}function vo(){V(mo,hc),V(po,po.current)}function yo(){hc=mo.current,U(po),U(mo)}var bo=0,wo=null,ko=null,So=null,xo=!1,Eo=!1,Co=!1,Io=0,_o=0,To=null,No=0;function Ao(){throw Error(s(321))}function Do(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Yn(e[n],t[n]))return!1;return!0}function Po(e,t,n,r,i,o){return bo=o,wo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,L.H=null===e||null===e.memoizedState?Ks:Qs,Co=!1,o=n(r,i),Co=!1,Eo&&(o=Lo(t,n,r,i)),Ro(e),o}function Ro(e){L.H=Gs;var t=null!==ko&&null!==ko.next;if(bo=0,So=ko=wo=null,xo=!1,_o=0,To=null,t)throw Error(s(300));null===e||Ta||null!==(e=e.dependencies)&&Ei(e)&&(Ta=!0)}function Lo(e,t,n,r){wo=e;var i=0;do{if(Eo&&(To=null),_o=0,Eo=!1,25<=i)throw Error(s(301));if(i+=1,So=ko=null,null!=e.updateQueue){var o=e.updateQueue;o.lastEffect=null,o.events=null,o.stores=null,null!=o.memoCache&&(o.memoCache.index=0)}L.H=Ys,o=t(n,r)}while(Eo);return o}function Oo(){var e=L.H,t=e.useState()[0];return t="function"===typeof t.then?Vo(t):t,e=e.useState()[0],(null!==ko?ko.memoizedState:null)!==e&&(wo.flags|=1024),t}function Mo(){var e=0!==Io;return Io=0,e}function jo(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function Fo(e){if(xo){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}xo=!1}bo=0,So=ko=wo=null,Eo=!1,_o=Io=0,To=null}function Bo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===So?wo.memoizedState=So=e:So=So.next=e,So}function Uo(){if(null===ko){var e=wo.alternate;e=null!==e?e.memoizedState:null}else e=ko.next;var t=null===So?wo.memoizedState:So.next;if(null!==t)So=t,ko=e;else{if(null===e){if(null===wo.alternate)throw Error(s(467));throw Error(s(310))}e={memoizedState:(ko=e).memoizedState,baseState:ko.baseState,baseQueue:ko.baseQueue,queue:ko.queue,next:null},null===So?wo.memoizedState=So=e:So=So.next=e}return So}function Vo(e){var t=_o;return _o+=1,null===To&&(To=[]),e=Xi(To,e,t),t=wo,null===(null===So?t.memoizedState:So.next)&&(t=t.alternate,L.H=null===t||null===t.memoizedState?Ks:Qs),e}function Wo(e){if(null!==e&&"object"===typeof e){if("function"===typeof e.then)return Vo(e);if(e.$$typeof===k)return Ii(e)}throw Error(s(438,String(e)))}function Ho(e){var t=null,n=wo.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var r=wo.alternate;null!==r&&(null!==(r=r.updateQueue)&&(null!=(r=r.memoCache)&&(t={data:r.data.map(function(e){return e.slice()}),index:0})))}if(null==t&&(t={data:[],index:0}),null===n&&(n={lastEffect:null,events:null,stores:null,memoCache:null},wo.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=T;return t.index++,n}function qo(e,t){return"function"===typeof t?t(e):t}function Go(e){return Ko(Uo(),ko,e)}function Ko(e,t,n){var r=e.queue;if(null===r)throw Error(s(311));r.lastRenderedReducer=n;var i=e.baseQueue,o=r.pending;if(null!==o){if(null!==i){var a=i.next;i.next=o.next,o.next=a}t.baseQueue=i=o,r.pending=null}if(o=e.baseState,null===i)e.memoizedState=o;else{var l=a=null,c=null,u=t=i.next,d=!1;do{var h=-536870913&u.lane;if(h!==u.lane?(sc&h)===h:(bo&h)===h){var f=u.revertLane;if(0===f)null!==c&&(c=c.next={lane:0,revertLane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),h===ji&&(d=!0);else{if((bo&f)===f){u=u.next,f===ji&&(d=!0);continue}h={lane:0,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=h,a=o):c=c.next=h,wo.lanes|=f,pc|=f}h=u.action,Co&&n(o,h),o=u.hasEagerState?u.eagerState:n(o,h)}else f={lane:h,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=f,a=o):c=c.next=f,wo.lanes|=h,pc|=h;u=u.next}while(null!==u&&u!==t);if(null===c?a=o:c.next=l,!Yn(o,e.memoizedState)&&(Ta=!0,d&&null!==(n=Fi)))throw n;e.memoizedState=o,e.baseState=a,e.baseQueue=c,r.lastRenderedState=o}return null===i&&(r.lanes=0),[e.memoizedState,r.dispatch]}function Qo(e){var t=Uo(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{o=e(o,a.action),a=a.next}while(a!==i);Yn(o,t.memoizedState)||(Ta=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Yo(e,t,n){var r=wo,i=Uo(),o=oi;if(o){if(void 0===n)throw Error(s(407));n=n()}else n=t();var a=!Yn((ko||i).memoizedState,n);if(a&&(i.memoizedState=n,Ta=!0),i=i.queue,ys(2048,8,Jo.bind(null,r,i,e),[e]),i.getSnapshot!==t||a||null!==So&&1&So.memoizedState.tag){if(r.flags|=2048,ms(9,{destroy:void 0,resource:void 0},Xo.bind(null,r,i,n,t),null),null===ic)throw Error(s(349));o||0!==(124&bo)||$o(r,t,n)}return n}function $o(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=wo.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},wo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Xo(e,t,n,r){t.value=n,t.getSnapshot=r,Zo(t)&&es(e)}function Jo(e,t,n){return n(function(){Zo(t)&&es(e)})}function Zo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Yn(e,n)}catch(r){return!0}}function es(e){var t=Dr(e,2);null!==t&&jc(t,e,2)}function ts(e){var t=Bo();if("function"===typeof e){var n=e;if(e=n(),Co){he(!0);try{n()}finally{he(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:qo,lastRenderedState:e},t}function ns(e,t,n,r){return e.baseState=n,Ko(e,ko,"function"===typeof r?r:qo)}function rs(e,t,n,r,i){if(Ws(e))throw Error(s(485));if(null!==(e=t.action)){var o={payload:i,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){o.listeners.push(e)}};null!==L.T?n(!0):o.isTransition=!1,r(o),null===(n=t.pending)?(o.next=t.pending=o,is(t,o)):(o.next=n.next,t.pending=n.next=o)}}function is(e,t){var n=t.action,r=t.payload,i=e.state;if(t.isTransition){var o=L.T,s={};L.T=s;try{var a=n(i,r),l=L.S;null!==l&&l(s,a),os(e,t,a)}catch(c){as(e,t,c)}finally{L.T=o}}else try{os(e,t,o=n(i,r))}catch(u){as(e,t,u)}}function os(e,t,n){null!==n&&"object"===typeof n&&"function"===typeof n.then?n.then(function(n){ss(e,t,n)},function(n){return as(e,t,n)}):ss(e,t,n)}function ss(e,t,n){t.status="fulfilled",t.value=n,ls(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,is(e,n)))}function as(e,t,n){var r=e.pending;if(e.pending=null,null!==r){r=r.next;do{t.status="rejected",t.reason=n,ls(t),t=t.next}while(t!==r)}e.action=null}function ls(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function cs(e,t){return t}function us(e,t){if(oi){var n=ic.formState;if(null!==n){e:{var r=wo;if(oi){if(ii){t:{for(var i=ii,o=ai;8!==i.nodeType;){if(!o){i=null;break t}if(null===(i=yd(i.nextSibling))){i=null;break t}}i="F!"===(o=i.data)||"F"===o?i:null}if(i){ii=yd(i.nextSibling),r="F!"===i.data;break e}}ci(r)}r=!1}r&&(t=n[0])}}return(n=Bo()).memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:cs,lastRenderedState:t},n.queue=r,n=Us.bind(null,wo,r),r.dispatch=n,r=ts(!1),o=zs.bind(null,wo,!1,r.queue),i={state:t,dispatch:null,action:e,pending:null},(r=Bo()).queue=i,n=rs.bind(null,wo,i,o,n),i.dispatch=n,r.memoizedState=e,[t,n,!1]}function ds(e){return hs(Uo(),ko,e)}function hs(e,t,n){if(t=Ko(e,t,cs)[0],e=Go(qo)[0],"object"===typeof t&&null!==t&&"function"===typeof t.then)try{var r=Vo(t)}catch(zo){if(zo===qi)throw Ki;throw zo}else r=t;var i=(t=Uo()).queue,o=i.dispatch;return n!==t.memoizedState&&(wo.flags|=2048,ms(9,{destroy:void 0,resource:void 0},fs.bind(null,i,n),null)),[r,o,e]}function fs(e,t){e.action=t}function ps(e){var t=Uo(),n=ko;if(null!==n)return hs(t,n,e);Uo(),t=t.memoizedState;var r=(n=Uo()).queue.dispatch;return n.memoizedState=e,[t,r,!1]}function ms(e,t,n,r){return e={tag:e,create:n,deps:r,inst:t,next:null},null===(t=wo.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},wo.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function gs(){return Uo().memoizedState}function vs(e,t,n,r){var i=Bo();r=void 0===r?null:r,wo.flags|=e,i.memoizedState=ms(1|t,{destroy:void 0,resource:void 0},n,r)}function ys(e,t,n,r){var i=Uo();r=void 0===r?null:r;var o=i.memoizedState.inst;null!==ko&&null!==r&&Do(r,ko.memoizedState.deps)?i.memoizedState=ms(t,o,n,r):(wo.flags|=e,i.memoizedState=ms(1|t,o,n,r))}function bs(e,t){vs(8390656,8,e,t)}function ws(e,t){ys(2048,8,e,t)}function ks(e,t){return ys(4,2,e,t)}function Ss(e,t){return ys(4,4,e,t)}function xs(e,t){if("function"===typeof t){e=e();var n=t(e);return function(){"function"===typeof n?n():t(null)}}if(null!==t&&void 0!==t)return e=e(),t.current=e,function(){t.current=null}}function Es(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,ys(4,4,xs.bind(null,t,e),n)}function Cs(){}function Is(e,t){var n=Uo();t=void 0===t?null:t;var r=n.memoizedState;return null!==t&&Do(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function _s(e,t){var n=Uo();t=void 0===t?null:t;var r=n.memoizedState;if(null!==t&&Do(t,r[1]))return r[0];if(r=e(),Co){he(!0);try{e()}finally{he(!1)}}return n.memoizedState=[r,t],r}function Ts(e,t,n){return void 0===n||0!==(1073741824&bo)?e.memoizedState=t:(e.memoizedState=n,e=Mc(),wo.lanes|=e,pc|=e,n)}function Ns(e,t,n,r){return Yn(n,t)?n:null!==po.current?(e=Ts(e,n,r),Yn(e,t)||(Ta=!0),e):0===(42&bo)?(Ta=!0,e.memoizedState=n):(e=Mc(),wo.lanes|=e,pc|=e,t)}function As(e,t,n,r,i){var o=O.p;O.p=0!==o&&8>o?o:8;var s=L.T,a={};L.T=a,zs(e,!1,t,n);try{var l=i(),c=L.S;if(null!==c&&c(a,l),null!==l&&"object"===typeof l&&"function"===typeof l.then){var u=function(e,t){var n=[],r={status:"pending",value:null,reason:null,then:function(e){n.push(e)}};return e.then(function(){r.status="fulfilled",r.value=t;for(var e=0;e<n.length;e++)(0,n[e])(t)},function(e){for(r.status="rejected",r.reason=e,e=0;e<n.length;e++)(0,n[e])(void 0)}),r}(l,r);Vs(e,t,u,Oc())}else Vs(e,t,r,Oc())}catch(d){Vs(e,t,{then:function(){},status:"rejected",reason:d},Oc())}finally{O.p=o,L.T=s}}function Ds(){}function Ps(e,t,n,r){if(5!==e.tag)throw Error(s(476));var i=Rs(e).queue;As(e,i,t,M,null===n?Ds:function(){return Ls(e),n(r)})}function Rs(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:M,baseState:M,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qo,lastRenderedState:M},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qo,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function Ls(e){Vs(e,Rs(e).next.queue,{},Oc())}function Os(){return Ii(Yd)}function Ms(){return Uo().memoizedState}function js(){return Uo().memoizedState}function Fs(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=Oc(),r=oo(t,e=io(n),n);return null!==r&&(jc(r,t,n),so(r,t,n)),t={cache:Ri()},void(e.payload=t)}t=t.return}}function Bs(e,t,n){var r=Oc();n={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},Ws(e)?Hs(t,n):null!==(n=Ar(e,t,n,r))&&(jc(n,e,r),qs(n,t,r))}function Us(e,t,n){Vs(e,t,n,Oc())}function Vs(e,t,n,r){var i={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ws(e))Hs(t,i);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var s=t.lastRenderedState,a=o(s,n);if(i.hasEagerState=!0,i.eagerState=a,Yn(a,s))return Nr(e,t,i,0),null===ic&&Tr(),!1}catch(l){}if(null!==(n=Ar(e,t,i,r)))return jc(n,e,r),qs(n,t,r),!0}return!1}function zs(e,t,n,r){if(r={lane:2,revertLane:Au(),action:r,hasEagerState:!1,eagerState:null,next:null},Ws(e)){if(t)throw Error(s(479))}else null!==(t=Ar(e,n,r,2))&&jc(t,e,2)}function Ws(e){var t=e.alternate;return e===wo||null!==t&&t===wo}function Hs(e,t){Eo=xo=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function qs(e,t,n){if(0!==(4194048&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,_e(e,n)}}var Gs={readContext:Ii,use:Wo,useCallback:Ao,useContext:Ao,useEffect:Ao,useImperativeHandle:Ao,useLayoutEffect:Ao,useInsertionEffect:Ao,useMemo:Ao,useReducer:Ao,useRef:Ao,useState:Ao,useDebugValue:Ao,useDeferredValue:Ao,useTransition:Ao,useSyncExternalStore:Ao,useId:Ao,useHostTransitionStatus:Ao,useFormState:Ao,useActionState:Ao,useOptimistic:Ao,useMemoCache:Ao,useCacheRefresh:Ao},Ks={readContext:Ii,use:Wo,useCallback:function(e,t){return Bo().memoizedState=[e,void 0===t?null:t],e},useContext:Ii,useEffect:bs,useImperativeHandle:function(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,vs(4194308,4,xs.bind(null,t,e),n)},useLayoutEffect:function(e,t){return vs(4194308,4,e,t)},useInsertionEffect:function(e,t){vs(4,2,e,t)},useMemo:function(e,t){var n=Bo();t=void 0===t?null:t;var r=e();if(Co){he(!0);try{e()}finally{he(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=Bo();if(void 0!==n){var i=n(t);if(Co){he(!0);try{n(t)}finally{he(!1)}}}else i=t;return r.memoizedState=r.baseState=i,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:i},r.queue=e,e=e.dispatch=Bs.bind(null,wo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Bo().memoizedState=e},useState:function(e){var t=(e=ts(e)).queue,n=Us.bind(null,wo,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Cs,useDeferredValue:function(e,t){return Ts(Bo(),e,t)},useTransition:function(){var e=ts(!1);return e=As.bind(null,wo,e.queue,!0,!1),Bo().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var r=wo,i=Bo();if(oi){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===ic)throw Error(s(349));0!==(124&sc)||$o(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,bs(Jo.bind(null,r,o,e),[e]),r.flags|=2048,ms(9,{destroy:void 0,resource:void 0},Xo.bind(null,r,o,n,t),null),n},useId:function(){var e=Bo(),t=ic.identifierPrefix;if(oi){var n=Jr;t="\xab"+t+"R"+(n=(Xr&~(1<<32-fe(Xr)-1)).toString(32)+n),0<(n=Io++)&&(t+="H"+n.toString(32)),t+="\xbb"}else t="\xab"+t+"r"+(n=No++).toString(32)+"\xbb";return e.memoizedState=t},useHostTransitionStatus:Os,useFormState:us,useActionState:us,useOptimistic:function(e){var t=Bo();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=zs.bind(null,wo,!0,n),n.dispatch=t,[e,t]},useMemoCache:Ho,useCacheRefresh:function(){return Bo().memoizedState=Fs.bind(null,wo)}},Qs={readContext:Ii,use:Wo,useCallback:Is,useContext:Ii,useEffect:ws,useImperativeHandle:Es,useInsertionEffect:ks,useLayoutEffect:Ss,useMemo:_s,useReducer:Go,useRef:gs,useState:function(){return Go(qo)},useDebugValue:Cs,useDeferredValue:function(e,t){return Ns(Uo(),ko.memoizedState,e,t)},useTransition:function(){var e=Go(qo)[0],t=Uo().memoizedState;return["boolean"===typeof e?e:Vo(e),t]},useSyncExternalStore:Yo,useId:Ms,useHostTransitionStatus:Os,useFormState:ds,useActionState:ds,useOptimistic:function(e,t){return ns(Uo(),0,e,t)},useMemoCache:Ho,useCacheRefresh:js},Ys={readContext:Ii,use:Wo,useCallback:Is,useContext:Ii,useEffect:ws,useImperativeHandle:Es,useInsertionEffect:ks,useLayoutEffect:Ss,useMemo:_s,useReducer:Qo,useRef:gs,useState:function(){return Qo(qo)},useDebugValue:Cs,useDeferredValue:function(e,t){var n=Uo();return null===ko?Ts(n,e,t):Ns(n,ko.memoizedState,e,t)},useTransition:function(){var e=Qo(qo)[0],t=Uo().memoizedState;return["boolean"===typeof e?e:Vo(e),t]},useSyncExternalStore:Yo,useId:Ms,useHostTransitionStatus:Os,useFormState:ps,useActionState:ps,useOptimistic:function(e,t){var n=Uo();return null!==ko?ns(n,0,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:Ho,useCacheRefresh:js},$s=null,Xs=0;function Js(e){var t=Xs;return Xs+=1,null===$s&&($s=[]),Xi($s,e,t)}function Zs(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function ea(e,t){if(t.$$typeof===f)throw Error(s(525));throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ta(e){return(0,e._init)(e._payload)}function na(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function i(e,t){return(e=Fr(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=67108866,n):r:(t.flags|=67108866,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=zr(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var o=n.type;return o===g?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===I&&ta(o)===t.type)?(Zs(t=i(t,n.props),n),t.return=e,t):(Zs(t=Ur(n.type,n.key,n.props,null,e.mode,r),n),t.return=e,t)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Wr(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,r,o){return null===t||7!==t.tag?((t=Vr(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t||"bigint"===typeof t)return(t=zr(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case p:return Zs(n=Ur(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case m:return(t=Wr(t,e.mode,n)).return=e,t;case I:return h(e,t=(0,t._init)(t._payload),n)}if(R(t)||A(t))return(t=Vr(t,e.mode,n,null)).return=e,t;if("function"===typeof t.then)return h(e,Js(t),n);if(t.$$typeof===k)return h(e,_i(e,t),n);ea(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n||"bigint"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case p:return n.key===i?c(e,t,n,r):null;case m:return n.key===i?u(e,t,n,r):null;case I:return f(e,t,n=(i=n._init)(n._payload),r)}if(R(n)||A(n))return null!==i?null:d(e,t,n,r,null);if("function"===typeof n.then)return f(e,t,Js(n),r);if(n.$$typeof===k)return f(e,t,_i(e,n),r);ea(e,n)}return null}function v(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r||"bigint"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case p:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case m:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case I:return v(e,t,n,r=(0,r._init)(r._payload),i)}if(R(r)||A(r))return d(t,e=e.get(n)||null,r,i,null);if("function"===typeof r.then)return v(e,t,n,Js(r),i);if(r.$$typeof===k)return v(e,t,n,_i(t,r),i);ea(t,r)}return null}function y(l,c,u,d){if("object"===typeof u&&null!==u&&u.type===g&&null===u.key&&(u=u.props.children),"object"===typeof u&&null!==u){switch(u.$$typeof){case p:e:{for(var b=u.key;null!==c;){if(c.key===b){if((b=u.type)===g){if(7===c.tag){n(l,c.sibling),(d=i(c,u.props.children)).return=l,l=d;break e}}else if(c.elementType===b||"object"===typeof b&&null!==b&&b.$$typeof===I&&ta(b)===c.type){n(l,c.sibling),Zs(d=i(c,u.props),u),d.return=l,l=d;break e}n(l,c);break}t(l,c),c=c.sibling}u.type===g?((d=Vr(u.props.children,l.mode,d,u.key)).return=l,l=d):(Zs(d=Ur(u.type,u.key,u.props,null,l.mode,d),u),d.return=l,l=d)}return a(l);case m:e:{for(b=u.key;null!==c;){if(c.key===b){if(4===c.tag&&c.stateNode.containerInfo===u.containerInfo&&c.stateNode.implementation===u.implementation){n(l,c.sibling),(d=i(c,u.children||[])).return=l,l=d;break e}n(l,c);break}t(l,c),c=c.sibling}(d=Wr(u,l.mode,d)).return=l,l=d}return a(l);case I:return y(l,c,u=(b=u._init)(u._payload),d)}if(R(u))return function(i,s,a,l){for(var c=null,u=null,d=s,p=s=0,m=null;null!==d&&p<a.length;p++){d.index>p?(m=d,d=null):m=d.sibling;var g=f(i,d,a[p],l);if(null===g){null===d&&(d=m);break}e&&d&&null===g.alternate&&t(i,d),s=o(g,s,p),null===u?c=g:u.sibling=g,u=g,d=m}if(p===a.length)return n(i,d),oi&&Zr(i,p),c;if(null===d){for(;p<a.length;p++)null!==(d=h(i,a[p],l))&&(s=o(d,s,p),null===u?c=d:u.sibling=d,u=d);return oi&&Zr(i,p),c}for(d=r(d);p<a.length;p++)null!==(m=v(d,i,p,a[p],l))&&(e&&null!==m.alternate&&d.delete(null===m.key?p:m.key),s=o(m,s,p),null===u?c=m:u.sibling=m,u=m);return e&&d.forEach(function(e){return t(i,e)}),oi&&Zr(i,p),c}(l,c,u,d);if(A(u)){if("function"!==typeof(b=A(u)))throw Error(s(150));return function(i,a,l,c){if(null==l)throw Error(s(151));for(var u=null,d=null,p=a,m=a=0,g=null,y=l.next();null!==p&&!y.done;m++,y=l.next()){p.index>m?(g=p,p=null):g=p.sibling;var b=f(i,p,y.value,c);if(null===b){null===p&&(p=g);break}e&&p&&null===b.alternate&&t(i,p),a=o(b,a,m),null===d?u=b:d.sibling=b,d=b,p=g}if(y.done)return n(i,p),oi&&Zr(i,m),u;if(null===p){for(;!y.done;m++,y=l.next())null!==(y=h(i,y.value,c))&&(a=o(y,a,m),null===d?u=y:d.sibling=y,d=y);return oi&&Zr(i,m),u}for(p=r(p);!y.done;m++,y=l.next())null!==(y=v(p,i,m,y.value,c))&&(e&&null!==y.alternate&&p.delete(null===y.key?m:y.key),a=o(y,a,m),null===d?u=y:d.sibling=y,d=y);return e&&p.forEach(function(e){return t(i,e)}),oi&&Zr(i,m),u}(l,c,u=b.call(u),d)}if("function"===typeof u.then)return y(l,c,Js(u),d);if(u.$$typeof===k)return y(l,c,_i(l,u),d);ea(l,u)}return"string"===typeof u&&""!==u||"number"===typeof u||"bigint"===typeof u?(u=""+u,null!==c&&6===c.tag?(n(l,c.sibling),(d=i(c,u)).return=l,l=d):(n(l,c),(d=zr(u,l.mode,d)).return=l,l=d),a(l)):n(l,c)}return function(e,t,n,r){try{Xs=0;var i=y(e,t,n,r);return $s=null,i}catch(zo){if(zo===qi||zo===Ki)throw zo;var o=Mr(29,zo,null,e.mode);return o.lanes=r,o.return=e,o}}}var ra=na(!0),ia=na(!1),oa=B(null),sa=null;function aa(e){var t=e.alternate;V(da,1&da.current),V(oa,e),null===sa&&(null===t||null!==po.current||null!==t.memoizedState)&&(sa=e)}function la(e){if(22===e.tag){if(V(da,da.current),V(oa,e),null===sa){var t=e.alternate;null!==t&&null!==t.memoizedState&&(sa=e)}}else ca()}function ca(){V(da,da.current),V(oa,oa.current)}function ua(e){U(oa),sa===e&&(sa=null),U(da)}var da=B(0);function ha(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||vd(n)))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function fa(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:h({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var pa={enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Oc(),i=io(r);i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=oo(e,i,r))&&(jc(t,e,r),so(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Oc(),i=io(r);i.tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=oo(e,i,r))&&(jc(t,e,r),so(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Oc(),r=io(n);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=oo(e,r,n))&&(jc(t,e,n),so(t,e,n))}};function ma(e,t,n,r,i,o,s){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,s):!t.prototype||!t.prototype.isPureReactComponent||(!$n(n,r)||!$n(i,o))}function ga(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&pa.enqueueReplaceState(t,t.state,null)}function va(e,t){var n=t;if("ref"in t)for(var r in n={},t)"ref"!==r&&(n[r]=t[r]);if(e=e.defaultProps)for(var i in n===t&&(n=h({},n)),e)void 0===n[i]&&(n[i]=e[i]);return n}var ya="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function ba(e){ya(e)}function wa(e){console.error(e)}function ka(e){ya(e)}function Sa(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(n){setTimeout(function(){throw n})}}function xa(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function Ea(e,t,n){return(n=io(n)).tag=3,n.payload={element:null},n.callback=function(){Sa(e,t)},n}function Ca(e){return(e=io(e)).tag=3,e}function Ia(e,t,n,r){var i=n.type.getDerivedStateFromError;if("function"===typeof i){var o=r.value;e.payload=function(){return i(o)},e.callback=function(){xa(t,n,r)}}var s=n.stateNode;null!==s&&"function"===typeof s.componentDidCatch&&(e.callback=function(){xa(t,n,r),"function"!==typeof i&&(null===Cc?Cc=new Set([this]):Cc.add(this));var e=r.stack;this.componentDidCatch(r.value,{componentStack:null!==e?e:""})})}var _a=Error(s(461)),Ta=!1;function Na(e,t,n,r){t.child=null===e?ia(t,null,n,r):ra(t,e.child,n,r)}function Aa(e,t,n,r,i){n=n.render;var o=t.ref;if("ref"in r){var s={};for(var a in r)"ref"!==a&&(s[a]=r[a])}else s=r;return Ci(t),r=Po(e,t,n,s,o,i),a=Mo(),null===e||Ta?(oi&&a&&ti(t),t.flags|=1,Na(e,t,r,i),t.child):(jo(e,t,i),$a(e,t,i))}function Da(e,t,n,r,i){if(null===e){var o=n.type;return"function"!==typeof o||jr(o)||void 0!==o.defaultProps||null!==n.compare?((e=Ur(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Pa(e,t,o,r,i))}if(o=e.child,!Xa(e,i)){var s=o.memoizedProps;if((n=null!==(n=n.compare)?n:$n)(s,r)&&e.ref===t.ref)return $a(e,t,i)}return t.flags|=1,(e=Fr(o,r)).ref=t.ref,e.return=t,t.child=e}function Pa(e,t,n,r,i){if(null!==e){var o=e.memoizedProps;if($n(o,r)&&e.ref===t.ref){if(Ta=!1,t.pendingProps=r=o,!Xa(e,i))return t.lanes=e.lanes,$a(e,t,i);0!==(131072&e.flags)&&(Ta=!0)}}return Ma(e,t,n,r,i)}function Ra(e,t,n){var r=t.pendingProps,i=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode){if(0!==(128&t.flags)){if(r=null!==o?o.baseLanes|n:n,null!==e){for(i=t.child=e.child,o=0;null!==i;)o=o|i.lanes|i.childLanes,i=i.sibling;t.childLanes=o&~r}else t.childLanes=0,t.child=null;return La(e,t,r,n)}if(0===(536870912&n))return t.lanes=t.childLanes=536870912,La(e,t,null!==o?o.baseLanes|n:n,n);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&Wi(0,null!==o?o.cachePool:null),null!==o?go(t,o):vo(),la(t)}else null!==o?(Wi(0,o.cachePool),go(t,o),ca(),t.memoizedState=null):(null!==e&&Wi(0,null),vo(),ca());return Na(e,t,i,n),t.child}function La(e,t,n,r){var i=zi();return i=null===i?null:{parent:Pi._currentValue,pool:i},t.memoizedState={baseLanes:n,cachePool:i},null!==e&&Wi(0,null),vo(),la(t),null!==e&&xi(e,t,r,!0),null}function Oa(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!==typeof n&&"object"!==typeof n)throw Error(s(284));null!==e&&e.ref===n||(t.flags|=4194816)}}function Ma(e,t,n,r,i){return Ci(t),n=Po(e,t,n,r,void 0,i),r=Mo(),null===e||Ta?(oi&&r&&ti(t),t.flags|=1,Na(e,t,n,i),t.child):(jo(e,t,i),$a(e,t,i))}function ja(e,t,n,r,i,o){return Ci(t),t.updateQueue=null,n=Lo(t,r,n,i),Ro(e),r=Mo(),null===e||Ta?(oi&&r&&ti(t),t.flags|=1,Na(e,t,n,o),t.child):(jo(e,t,o),$a(e,t,o))}function Fa(e,t,n,r,i){if(Ci(t),null===t.stateNode){var o=Lr,s=n.contextType;"object"===typeof s&&null!==s&&(o=Ii(s)),o=new n(r,o),t.memoizedState=null!==o.state&&void 0!==o.state?o.state:null,o.updater=pa,t.stateNode=o,o._reactInternals=t,(o=t.stateNode).props=r,o.state=t.memoizedState,o.refs={},no(t),s=n.contextType,o.context="object"===typeof s&&null!==s?Ii(s):Lr,o.state=t.memoizedState,"function"===typeof(s=n.getDerivedStateFromProps)&&(fa(t,n,s,r),o.state=t.memoizedState),"function"===typeof n.getDerivedStateFromProps||"function"===typeof o.getSnapshotBeforeUpdate||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||(s=o.state,"function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount(),s!==o.state&&pa.enqueueReplaceState(o,o.state,null),uo(t,r,o,i),co(),o.state=t.memoizedState),"function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!0}else if(null===e){o=t.stateNode;var a=t.memoizedProps,l=va(n,a);o.props=l;var c=o.context,u=n.contextType;s=Lr,"object"===typeof u&&null!==u&&(s=Ii(u));var d=n.getDerivedStateFromProps;u="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate,a=t.pendingProps!==a,u||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a||c!==s)&&ga(t,o,r,s),to=!1;var h=t.memoizedState;o.state=h,uo(t,r,o,i),co(),c=t.memoizedState,a||h!==c||to?("function"===typeof d&&(fa(t,n,d,r),c=t.memoizedState),(l=to||ma(t,n,l,r,h,c,s))?(u||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),o.props=r,o.state=c,o.context=s,r=l):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,ro(e,t),u=va(n,s=t.memoizedProps),o.props=u,d=t.pendingProps,h=o.context,c=n.contextType,l=Lr,"object"===typeof c&&null!==c&&(l=Ii(c)),(c="function"===typeof(a=n.getDerivedStateFromProps)||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==d||h!==l)&&ga(t,o,r,l),to=!1,h=t.memoizedState,o.state=h,uo(t,r,o,i),co();var f=t.memoizedState;s!==d||h!==f||to||null!==e&&null!==e.dependencies&&Ei(e.dependencies)?("function"===typeof a&&(fa(t,n,a,r),f=t.memoizedState),(u=to||ma(t,n,u,r,h,f,l)||null!==e&&null!==e.dependencies&&Ei(e.dependencies))?(c||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,f,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,f,l)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),o.props=r,o.state=f,o.context=l,r=u):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return o=r,Oa(e,t),r=0!==(128&t.flags),o||r?(o=t.stateNode,n=r&&"function"!==typeof n.getDerivedStateFromError?null:o.render(),t.flags|=1,null!==e&&r?(t.child=ra(t,e.child,null,i),t.child=ra(t,null,n,i)):Na(e,t,n,i),t.memoizedState=o.state,e=t.child):e=$a(e,t,i),e}function Ba(e,t,n,r){return fi(),t.flags|=256,Na(e,t,n,r),t.child}var Ua={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Va(e){return{baseLanes:e,cachePool:Hi()}}function za(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=vc),e}function Wa(e,t,n){var r,i=t.pendingProps,o=!1,a=0!==(128&t.flags);if((r=a)||(r=(null===e||null!==e.memoizedState)&&0!==(2&da.current)),r&&(o=!0,t.flags&=-129),r=0!==(32&t.flags),t.flags&=-33,null===e){if(oi){if(o?aa(t):ca(),oi){var l,c=ii;if(l=c){e:{for(l=c,c=ai;8!==l.nodeType;){if(!c){c=null;break e}if(null===(l=yd(l.nextSibling))){c=null;break e}}c=l}null!==c?(t.memoizedState={dehydrated:c,treeContext:null!==$r?{id:Xr,overflow:Jr}:null,retryLane:536870912,hydrationErrors:null},(l=Mr(18,null,null,0)).stateNode=c,l.return=t,t.child=l,ri=t,ii=null,l=!0):l=!1}l||ci(t)}if(null!==(c=t.memoizedState)&&null!==(c=c.dehydrated))return vd(c)?t.lanes=32:t.lanes=536870912,null;ua(t)}return c=i.children,i=i.fallback,o?(ca(),c=qa({mode:"hidden",children:c},o=t.mode),i=Vr(i,o,n,null),c.return=t,i.return=t,c.sibling=i,t.child=c,(o=t.child).memoizedState=Va(n),o.childLanes=za(e,r,n),t.memoizedState=Ua,i):(aa(t),Ha(t,c))}if(null!==(l=e.memoizedState)&&null!==(c=l.dehydrated)){if(a)256&t.flags?(aa(t),t.flags&=-257,t=Ga(e,t,n)):null!==t.memoizedState?(ca(),t.child=e.child,t.flags|=128,t=null):(ca(),o=i.fallback,c=t.mode,i=qa({mode:"visible",children:i.children},c),(o=Vr(o,c,n,null)).flags|=2,i.return=t,o.return=t,i.sibling=o,t.child=i,ra(t,e.child,null,n),(i=t.child).memoizedState=Va(n),i.childLanes=za(e,r,n),t.memoizedState=Ua,t=o);else if(aa(t),vd(c)){if(r=c.nextSibling&&c.nextSibling.dataset)var u=r.dgst;r=u,(i=Error(s(419))).stack="",i.digest=r,mi({value:i,source:null,stack:null}),t=Ga(e,t,n)}else if(Ta||xi(e,t,n,!1),r=0!==(n&e.childLanes),Ta||r){if(null!==(r=ic)&&(0!==(i=0!==((i=0!==(42&(i=n&-n))?1:Te(i))&(r.suspendedLanes|n))?0:i)&&i!==l.retryLane))throw l.retryLane=i,Dr(e,i),jc(r,e,i),_a;"$?"===c.data||Qc(),t=Ga(e,t,n)}else"$?"===c.data?(t.flags|=192,t.child=e.child,t=null):(e=l.treeContext,ii=yd(c.nextSibling),ri=t,oi=!0,si=null,ai=!1,null!==e&&(Qr[Yr++]=Xr,Qr[Yr++]=Jr,Qr[Yr++]=$r,Xr=e.id,Jr=e.overflow,$r=t),(t=Ha(t,i.children)).flags|=4096);return t}return o?(ca(),o=i.fallback,c=t.mode,u=(l=e.child).sibling,(i=Fr(l,{mode:"hidden",children:i.children})).subtreeFlags=65011712&l.subtreeFlags,null!==u?o=Fr(u,o):(o=Vr(o,c,n,null)).flags|=2,o.return=t,i.return=t,i.sibling=o,t.child=i,i=o,o=t.child,null===(c=e.child.memoizedState)?c=Va(n):(null!==(l=c.cachePool)?(u=Pi._currentValue,l=l.parent!==u?{parent:u,pool:u}:l):l=Hi(),c={baseLanes:c.baseLanes|n,cachePool:l}),o.memoizedState=c,o.childLanes=za(e,r,n),t.memoizedState=Ua,i):(aa(t),e=(n=e.child).sibling,(n=Fr(n,{mode:"visible",children:i.children})).return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n)}function Ha(e,t){return(t=qa({mode:"visible",children:t},e.mode)).return=e,e.child=t}function qa(e,t){return(e=Mr(22,e,null,t)).lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Ga(e,t,n){return ra(t,e.child,null,n),(e=Ha(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Ka(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),ki(e.return,t,n)}function Qa(e,t,n,r,i){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function Ya(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(Na(e,t,r.children,n),0!==(2&(r=da.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ka(e,n,t);else if(19===e.tag)Ka(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}switch(V(da,r),i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===ha(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Qa(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===ha(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Qa(t,!0,n,null,o);break;case"together":Qa(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function $a(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),pc|=t.lanes,0===(n&t.childLanes)){if(null===e)return null;if(xi(e,t,n,!1),0===(n&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Fr(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Fr(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Xa(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!Ei(e))}function Ja(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps)Ta=!0;else{if(!Xa(e,n)&&0===(128&t.flags))return Ta=!1,function(e,t,n){switch(t.tag){case 3:G(t,t.stateNode.containerInfo),bi(0,Pi,e.memoizedState.cache),fi();break;case 27:case 5:Q(t);break;case 4:G(t,t.stateNode.containerInfo);break;case 10:bi(0,t.type,t.memoizedProps.value);break;case 13:var r=t.memoizedState;if(null!==r)return null!==r.dehydrated?(aa(t),t.flags|=128,null):0!==(n&t.child.childLanes)?Wa(e,t,n):(aa(t),null!==(e=$a(e,t,n))?e.sibling:null);aa(t);break;case 19:var i=0!==(128&e.flags);if((r=0!==(n&t.childLanes))||(xi(e,t,n,!1),r=0!==(n&t.childLanes)),i){if(r)return Ya(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),V(da,da.current),r)break;return null;case 22:case 23:return t.lanes=0,Ra(e,t,n);case 24:bi(0,Pi,e.memoizedState.cache)}return $a(e,t,n)}(e,t,n);Ta=0!==(131072&e.flags)}else Ta=!1,oi&&0!==(1048576&t.flags)&&ei(t,Kr,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var r=t.elementType,i=r._init;if(r=i(r._payload),t.type=r,"function"!==typeof r){if(void 0!==r&&null!==r){if((i=r.$$typeof)===S){t.tag=11,t=Aa(null,t,r,e,n);break e}if(i===C){t.tag=14,t=Da(null,t,r,e,n);break e}}throw t=P(r)||r,Error(s(306,t,""))}jr(r)?(e=va(r,e),t.tag=1,t=Fa(null,t,r,e,n)):(t.tag=0,t=Ma(null,t,r,e,n))}return t;case 0:return Ma(e,t,t.type,t.pendingProps,n);case 1:return Fa(e,t,r=t.type,i=va(r,t.pendingProps),n);case 3:e:{if(G(t,t.stateNode.containerInfo),null===e)throw Error(s(387));r=t.pendingProps;var o=t.memoizedState;i=o.element,ro(e,t),uo(t,r,null,n);var a=t.memoizedState;if(r=a.cache,bi(0,Pi,r),r!==o.cache&&Si(t,[Pi],n,!0),co(),r=a.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:a.cache},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Ba(e,t,r,n);break e}if(r!==i){mi(i=Er(Error(s(424)),t)),t=Ba(e,t,r,n);break e}if(9===(e=t.stateNode.containerInfo).nodeType)e=e.body;else e="HTML"===e.nodeName?e.ownerDocument.body:e;for(ii=yd(e.firstChild),ri=t,oi=!0,si=null,ai=!0,n=ia(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fi(),r===i){t=$a(e,t,n);break e}Na(e,t,r,n)}t=t.child}return t;case 26:return Oa(e,t),null===e?(n=Nd(t.type,null,t.pendingProps,null))?t.memoizedState=n:oi||(n=t.type,e=t.pendingProps,(r=id(H.current).createElement(n))[Pe]=t,r[Re]=e,td(r,n,e),qe(r),t.stateNode=r):t.memoizedState=Nd(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Q(t),null===e&&oi&&(r=t.stateNode=kd(t.type,t.pendingProps,H.current),ri=t,ai=!0,i=ii,pd(t.type)?(bd=i,ii=yd(r.firstChild)):ii=i),Na(e,t,t.pendingProps.children,n),Oa(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&oi&&((i=r=ii)&&(null!==(r=function(e,t,n,r){for(;1===e.nodeType;){var i=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(r){if(!e[Be])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(o=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(o!==i.rel||e.getAttribute("href")!==(null==i.href||""===i.href?null:i.href)||e.getAttribute("crossorigin")!==(null==i.crossOrigin?null:i.crossOrigin)||e.getAttribute("title")!==(null==i.title?null:i.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((o=e.getAttribute("src"))!==(null==i.src?null:i.src)||e.getAttribute("type")!==(null==i.type?null:i.type)||e.getAttribute("crossorigin")!==(null==i.crossOrigin?null:i.crossOrigin))&&o&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var o=null==i.name?null:""+i.name;if("hidden"===i.type&&e.getAttribute("name")===o)return e}if(null===(e=yd(e.nextSibling)))break}return null}(r,t.type,t.pendingProps,ai))?(t.stateNode=r,ri=t,ii=yd(r.firstChild),ai=!1,i=!0):i=!1),i||ci(t)),Q(t),i=t.type,o=t.pendingProps,a=null!==e?e.memoizedProps:null,r=o.children,ad(i,o)?r=null:null!==a&&ad(i,a)&&(t.flags|=32),null!==t.memoizedState&&(i=Po(e,t,Oo,null,null,n),Yd._currentValue=i),Oa(e,t),Na(e,t,r,n),t.child;case 6:return null===e&&oi&&((e=n=ii)&&(null!==(n=function(e,t,n){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!n)return null;if(null===(e=yd(e.nextSibling)))return null}return e}(n,t.pendingProps,ai))?(t.stateNode=n,ri=t,ii=null,e=!0):e=!1),e||ci(t)),null;case 13:return Wa(e,t,n);case 4:return G(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=ra(t,null,r,n):Na(e,t,r,n),t.child;case 11:return Aa(e,t,t.type,t.pendingProps,n);case 7:return Na(e,t,t.pendingProps,n),t.child;case 8:case 12:return Na(e,t,t.pendingProps.children,n),t.child;case 10:return r=t.pendingProps,bi(0,t.type,r.value),Na(e,t,r.children,n),t.child;case 9:return i=t.type._context,r=t.pendingProps.children,Ci(t),r=r(i=Ii(i)),t.flags|=1,Na(e,t,r,n),t.child;case 14:return Da(e,t,t.type,t.pendingProps,n);case 15:return Pa(e,t,t.type,t.pendingProps,n);case 19:return Ya(e,t,n);case 31:return r=t.pendingProps,n=t.mode,r={mode:r.mode,children:r.children},null===e?((n=qa(r,n)).ref=t.ref,t.child=n,n.return=t,t=n):((n=Fr(e.child,r)).ref=t.ref,t.child=n,n.return=t,t=n),t;case 22:return Ra(e,t,n);case 24:return Ci(t),r=Ii(Pi),null===e?(null===(i=zi())&&(i=ic,o=Ri(),i.pooledCache=o,o.refCount++,null!==o&&(i.pooledCacheLanes|=n),i=o),t.memoizedState={parent:r,cache:i},no(t),bi(0,Pi,i)):(0!==(e.lanes&n)&&(ro(e,t),uo(t,null,null,n),co()),i=e.memoizedState,o=t.memoizedState,i.parent!==r?(i={parent:r,cache:r},t.memoizedState=i,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=i),bi(0,Pi,r)):(r=o.cache,bi(0,Pi,r),r!==i.cache&&Si(t,[Pi],n,!0))),Na(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(s(156,t.tag))}function Za(e){e.flags|=4}function el(e,t){if("stylesheet"!==t.type||0!==(4&t.state.loading))e.flags&=-16777217;else if(e.flags|=16777216,!zd(t)){if(null!==(t=oa.current)&&((4194048&sc)===sc?null!==sa:(62914560&sc)!==sc&&0===(536870912&sc)||t!==sa))throw Ji=Qi,Gi;e.flags|=8192}}function tl(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?xe():536870912,e.lanes|=t,yc|=t)}function nl(e,t){if(!oi)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function rl(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=65011712&i.subtreeFlags,r|=65011712&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function il(e,t,n){var r=t.pendingProps;switch(ni(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return rl(t),null;case 3:return n=t.stateNode,r=null,null!==e&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),wi(Pi),K(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(hi(t)?Za(t):null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,pi())),rl(t),null;case 26:return n=t.memoizedState,null===e?(Za(t),null!==n?(rl(t),el(t,n)):(rl(t),t.flags&=-16777217)):n?n!==e.memoizedState?(Za(t),rl(t),el(t,n)):(rl(t),t.flags&=-16777217):(e.memoizedProps!==r&&Za(t),rl(t),t.flags&=-16777217),null;case 27:Y(t),n=H.current;var i=t.type;if(null!==e&&null!=t.stateNode)e.memoizedProps!==r&&Za(t);else{if(!r){if(null===t.stateNode)throw Error(s(166));return rl(t),null}e=z.current,hi(t)?ui(t):(e=kd(i,r,n),t.stateNode=e,Za(t))}return rl(t),null;case 5:if(Y(t),n=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==r&&Za(t);else{if(!r){if(null===t.stateNode)throw Error(s(166));return rl(t),null}if(e=z.current,hi(t))ui(t);else{switch(i=id(H.current),e){case 1:e=i.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=i.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=i.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=i.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":(e=i.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e="string"===typeof r.is?i.createElement("select",{is:r.is}):i.createElement("select"),r.multiple?e.multiple=!0:r.size&&(e.size=r.size);break;default:e="string"===typeof r.is?i.createElement(n,{is:r.is}):i.createElement(n)}}e[Pe]=t,e[Re]=r;e:for(i=t.child;null!==i;){if(5===i.tag||6===i.tag)e.appendChild(i.stateNode);else if(4!==i.tag&&27!==i.tag&&null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;null===i.sibling;){if(null===i.return||i.return===t)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}t.stateNode=e;e:switch(td(e,n,r),n){case"button":case"input":case"select":case"textarea":e=!!r.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&Za(t)}}return rl(t),t.flags&=-16777217,null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==r&&Za(t);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));if(e=H.current,hi(t)){if(e=t.stateNode,n=t.memoizedProps,r=null,null!==(i=ri))switch(i.tag){case 27:case 5:r=i.memoizedProps}e[Pe]=t,(e=!!(e.nodeValue===n||null!==r&&!0===r.suppressHydrationWarning||Xu(e.nodeValue,n)))||ci(t)}else(e=id(e).createTextNode(r))[Pe]=t,t.stateNode=e}return rl(t),null;case 13:if(r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(i=hi(t),null!==r&&null!==r.dehydrated){if(null===e){if(!i)throw Error(s(318));if(!(i=null!==(i=t.memoizedState)?i.dehydrated:null))throw Error(s(317));i[Pe]=t}else fi(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;rl(t),i=!1}else i=pi(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=i),i=!0;if(!i)return 256&t.flags?(ua(t),t):(ua(t),null)}if(ua(t),0!==(128&t.flags))return t.lanes=n,t;if(n=null!==r,e=null!==e&&null!==e.memoizedState,n){i=null,null!==(r=t.child).alternate&&null!==r.alternate.memoizedState&&null!==r.alternate.memoizedState.cachePool&&(i=r.alternate.memoizedState.cachePool.pool);var o=null;null!==r.memoizedState&&null!==r.memoizedState.cachePool&&(o=r.memoizedState.cachePool.pool),o!==i&&(r.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),tl(t,t.updateQueue),rl(t),null;case 4:return K(),null===e&&Vu(t.stateNode.containerInfo),rl(t),null;case 10:return wi(t.type),rl(t),null;case 19:if(U(da),null===(i=t.memoizedState))return rl(t),null;if(r=0!==(128&t.flags),null===(o=i.rendering))if(r)nl(i,!1);else{if(0!==fc||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(o=ha(e))){for(t.flags|=128,nl(i,!1),e=o.updateQueue,t.updateQueue=e,tl(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)Br(n,e),n=n.sibling;return V(da,1&da.current|2),t.child}e=e.sibling}null!==i.tail&&te()>xc&&(t.flags|=128,r=!0,nl(i,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ha(o))){if(t.flags|=128,r=!0,e=e.updateQueue,t.updateQueue=e,tl(t,e),nl(i,!0),null===i.tail&&"hidden"===i.tailMode&&!o.alternate&&!oi)return rl(t),null}else 2*te()-i.renderingStartTime>xc&&536870912!==n&&(t.flags|=128,r=!0,nl(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(null!==(e=i.last)?e.sibling=o:t.child=o,i.last=o)}return null!==i.tail?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=te(),t.sibling=null,e=da.current,V(da,r?1&e|2:1&e),t):(rl(t),null);case 22:case 23:return ua(t),yo(),r=null!==t.memoizedState,null!==e?null!==e.memoizedState!==r&&(t.flags|=8192):r&&(t.flags|=8192),r?0!==(536870912&n)&&0===(128&t.flags)&&(rl(t),6&t.subtreeFlags&&(t.flags|=8192)):rl(t),null!==(n=t.updateQueue)&&tl(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),r=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(r=t.memoizedState.cachePool.pool),r!==n&&(t.flags|=2048),null!==e&&U(Vi),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),wi(Pi),rl(t),null;case 25:case 30:return null}throw Error(s(156,t.tag))}function ol(e,t){switch(ni(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return wi(Pi),K(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return Y(t),null;case 13:if(ua(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));fi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return U(da),null;case 4:return K(),null;case 10:return wi(t.type),null;case 22:case 23:return ua(t),yo(),null!==e&&U(Vi),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return wi(Pi),null;default:return null}}function sl(e,t){switch(ni(t),t.tag){case 3:wi(Pi),K();break;case 26:case 27:case 5:Y(t);break;case 4:K();break;case 13:ua(t);break;case 19:U(da);break;case 10:wi(t.type);break;case 22:case 23:ua(t),yo(),null!==e&&U(Vi);break;case 24:wi(Pi)}}function al(e,t){try{var n=t.updateQueue,r=null!==n?n.lastEffect:null;if(null!==r){var i=r.next;n=i;do{if((n.tag&e)===e){r=void 0;var o=n.create,s=n.inst;r=o(),s.destroy=r}n=n.next}while(n!==i)}}catch(a){du(t,t.return,a)}}function ll(e,t,n){try{var r=t.updateQueue,i=null!==r?r.lastEffect:null;if(null!==i){var o=i.next;r=o;do{if((r.tag&e)===e){var s=r.inst,a=s.destroy;if(void 0!==a){s.destroy=void 0,i=t;var l=n,c=a;try{c()}catch(u){du(i,l,u)}}}r=r.next}while(r!==o)}}catch(u){du(t,t.return,u)}}function cl(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{fo(t,n)}catch(r){du(e,e.return,r)}}}function ul(e,t,n){n.props=va(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(r){du(e,t,r)}}function dl(e,t){try{var n=e.ref;if(null!==n){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;default:r=e.stateNode}"function"===typeof n?e.refCleanup=n(r):n.current=r}}catch(i){du(e,t,i)}}function hl(e,t){var n=e.ref,r=e.refCleanup;if(null!==n)if("function"===typeof r)try{r()}catch(i){du(e,t,i)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"===typeof n)try{n(null)}catch(o){du(e,t,o)}else n.current=null}function fl(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&r.focus();break e;case"img":n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(i){du(e,e.return,i)}}function pl(e,t,n){try{var r=e.stateNode;!function(e,t,n,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var i=null,o=null,a=null,l=null,c=null,u=null,d=null;for(p in n){var h=n[p];if(n.hasOwnProperty(p)&&null!=h)switch(p){case"checked":case"value":break;case"defaultValue":c=h;default:r.hasOwnProperty(p)||Zu(e,t,p,null,r,h)}}for(var f in r){var p=r[f];if(h=n[f],r.hasOwnProperty(f)&&(null!=p||null!=h))switch(f){case"type":o=p;break;case"name":i=p;break;case"checked":u=p;break;case"defaultChecked":d=p;break;case"value":a=p;break;case"defaultValue":l=p;break;case"children":case"dangerouslySetInnerHTML":if(null!=p)throw Error(s(137,t));break;default:p!==h&&Zu(e,t,f,p,r,h)}}return void gt(e,a,l,c,u,d,o,i);case"select":for(o in p=a=l=f=null,n)if(c=n[o],n.hasOwnProperty(o)&&null!=c)switch(o){case"value":break;case"multiple":p=c;default:r.hasOwnProperty(o)||Zu(e,t,o,null,r,c)}for(i in r)if(o=r[i],c=n[i],r.hasOwnProperty(i)&&(null!=o||null!=c))switch(i){case"value":f=o;break;case"defaultValue":l=o;break;case"multiple":a=o;default:o!==c&&Zu(e,t,i,o,r,c)}return t=l,n=a,r=p,void(null!=f?bt(e,!!n,f,!1):!!r!==!!n&&(null!=t?bt(e,!!n,t,!0):bt(e,!!n,n?[]:"",!1)));case"textarea":for(l in p=f=null,n)if(i=n[l],n.hasOwnProperty(l)&&null!=i&&!r.hasOwnProperty(l))switch(l){case"value":case"children":break;default:Zu(e,t,l,null,r,i)}for(a in r)if(i=r[a],o=n[a],r.hasOwnProperty(a)&&(null!=i||null!=o))switch(a){case"value":f=i;break;case"defaultValue":p=i;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=i)throw Error(s(91));break;default:i!==o&&Zu(e,t,a,i,r,o)}return void wt(e,f,p);case"option":for(var m in n)if(f=n[m],n.hasOwnProperty(m)&&null!=f&&!r.hasOwnProperty(m))if("selected"===m)e.selected=!1;else Zu(e,t,m,null,r,f);for(c in r)if(f=r[c],p=n[c],r.hasOwnProperty(c)&&f!==p&&(null!=f||null!=p))if("selected"===c)e.selected=f&&"function"!==typeof f&&"symbol"!==typeof f;else Zu(e,t,c,f,r,p);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var g in n)f=n[g],n.hasOwnProperty(g)&&null!=f&&!r.hasOwnProperty(g)&&Zu(e,t,g,null,r,f);for(u in r)if(f=r[u],p=n[u],r.hasOwnProperty(u)&&f!==p&&(null!=f||null!=p))switch(u){case"children":case"dangerouslySetInnerHTML":if(null!=f)throw Error(s(137,t));break;default:Zu(e,t,u,f,r,p)}return;default:if(It(t)){for(var v in n)f=n[v],n.hasOwnProperty(v)&&void 0!==f&&!r.hasOwnProperty(v)&&ed(e,t,v,void 0,r,f);for(d in r)f=r[d],p=n[d],!r.hasOwnProperty(d)||f===p||void 0===f&&void 0===p||ed(e,t,d,f,r,p);return}}for(var y in n)f=n[y],n.hasOwnProperty(y)&&null!=f&&!r.hasOwnProperty(y)&&Zu(e,t,y,null,r,f);for(h in r)f=r[h],p=n[h],!r.hasOwnProperty(h)||f===p||null==f&&null==p||Zu(e,t,h,f,r,p)}(r,e.type,n,t),r[Re]=t}catch(i){du(e,e.return,i)}}function ml(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&pd(e.type)||4===e.tag}function gl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ml(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&pd(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function vl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?(9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).insertBefore(e,t):((t=9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Ju));else if(4!==r&&(27===r&&pd(e.type)&&(n=e.stateNode,t=null),null!==(e=e.child)))for(vl(e,t,n),e=e.sibling;null!==e;)vl(e,t,n),e=e.sibling}function yl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&(27===r&&pd(e.type)&&(n=e.stateNode),null!==(e=e.child)))for(yl(e,t,n),e=e.sibling;null!==e;)yl(e,t,n),e=e.sibling}function bl(e){var t=e.stateNode,n=e.memoizedProps;try{for(var r=e.type,i=t.attributes;i.length;)t.removeAttributeNode(i[0]);td(t,r,n),t[Pe]=e,t[Re]=n}catch(o){du(e,e.return,o)}}var wl=!1,kl=!1,Sl=!1,xl="function"===typeof WeakSet?WeakSet:Set,El=null;function Cl(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:Fl(e,n),4&r&&al(5,n);break;case 1:if(Fl(e,n),4&r)if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(s){du(n,n.return,s)}else{var i=va(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(i,t,e.__reactInternalSnapshotBeforeUpdate)}catch(a){du(n,n.return,a)}}64&r&&cl(n),512&r&&dl(n,n.return);break;case 3:if(Fl(e,n),64&r&&null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 27:case 5:case 1:t=n.child.stateNode}try{fo(e,t)}catch(s){du(n,n.return,s)}}break;case 27:null===t&&4&r&&bl(n);case 26:case 5:Fl(e,n),null===t&&4&r&&fl(n),512&r&&dl(n,n.return);break;case 12:Fl(e,n);break;case 13:Fl(e,n),4&r&&Dl(e,n),64&r&&(null!==(e=n.memoizedState)&&(null!==(e=e.dehydrated)&&function(e,t){var n=e.ownerDocument;if("$?"!==e.data||"complete"===n.readyState)t();else{var r=function(){t(),n.removeEventListener("DOMContentLoaded",r)};n.addEventListener("DOMContentLoaded",r),e._reactRetry=r}}(e,n=mu.bind(null,n))));break;case 22:if(!(r=null!==n.memoizedState||wl)){t=null!==t&&null!==t.memoizedState||kl,i=wl;var o=kl;wl=r,(kl=t)&&!o?Ul(e,n,0!==(8772&n.subtreeFlags)):Fl(e,n),wl=i,kl=o}break;case 30:break;default:Fl(e,n)}}function Il(e){var t=e.alternate;null!==t&&(e.alternate=null,Il(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&Ue(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var _l=null,Tl=!1;function Nl(e,t,n){for(n=n.child;null!==n;)Al(e,t,n),n=n.sibling}function Al(e,t,n){if(de&&"function"===typeof de.onCommitFiberUnmount)try{de.onCommitFiberUnmount(ue,n)}catch(o){}switch(n.tag){case 26:kl||hl(n,t),Nl(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode).parentNode.removeChild(n);break;case 27:kl||hl(n,t);var r=_l,i=Tl;pd(n.type)&&(_l=n.stateNode,Tl=!1),Nl(e,t,n),Sd(n.stateNode),_l=r,Tl=i;break;case 5:kl||hl(n,t);case 6:if(r=_l,i=Tl,_l=null,Nl(e,t,n),Tl=i,null!==(_l=r))if(Tl)try{(9===_l.nodeType?_l.body:"HTML"===_l.nodeName?_l.ownerDocument.body:_l).removeChild(n.stateNode)}catch(s){du(n,t,s)}else try{_l.removeChild(n.stateNode)}catch(s){du(n,t,s)}break;case 18:null!==_l&&(Tl?(md(9===(e=_l).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,n.stateNode),Th(e)):md(_l,n.stateNode));break;case 4:r=_l,i=Tl,_l=n.stateNode.containerInfo,Tl=!0,Nl(e,t,n),_l=r,Tl=i;break;case 0:case 11:case 14:case 15:kl||ll(2,n,t),kl||ll(4,n,t),Nl(e,t,n);break;case 1:kl||(hl(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount&&ul(n,t,r)),Nl(e,t,n);break;case 21:Nl(e,t,n);break;case 22:kl=(r=kl)||null!==n.memoizedState,Nl(e,t,n),kl=r;break;default:Nl(e,t,n)}}function Dl(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{Th(e)}catch(n){du(t,t.return,n)}}function Pl(e,t){var n=function(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new xl),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new xl),t;default:throw Error(s(435,e.tag))}}(e);t.forEach(function(t){var r=gu.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}function Rl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r],o=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 27:if(pd(l.type)){_l=l.stateNode,Tl=!1;break e}break;case 5:_l=l.stateNode,Tl=!1;break e;case 3:case 4:_l=l.stateNode.containerInfo,Tl=!0;break e}l=l.return}if(null===_l)throw Error(s(160));Al(o,a,i),_l=null,Tl=!1,null!==(o=i.alternate)&&(o.return=null),i.return=null}if(13878&t.subtreeFlags)for(t=t.child;null!==t;)Ol(t,e),t=t.sibling}var Ll=null;function Ol(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Rl(t,e),Ml(e),4&r&&(ll(3,e,e.return),al(3,e),ll(5,e,e.return));break;case 1:Rl(t,e),Ml(e),512&r&&(kl||null===n||hl(n,n.return)),64&r&&wl&&(null!==(e=e.updateQueue)&&(null!==(r=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?r:n.concat(r))));break;case 26:var i=Ll;if(Rl(t,e),Ml(e),512&r&&(kl||null===n||hl(n,n.return)),4&r){var o=null!==n?n.memoizedState:null;if(r=e.memoizedState,null===n)if(null===r)if(null===e.stateNode){e:{r=e.type,n=e.memoizedProps,i=i.ownerDocument||i;t:switch(r){case"title":(!(o=i.getElementsByTagName("title")[0])||o[Be]||o[Pe]||"http://www.w3.org/2000/svg"===o.namespaceURI||o.hasAttribute("itemprop"))&&(o=i.createElement(r),i.head.insertBefore(o,i.querySelector("head > title"))),td(o,r,n),o[Pe]=e,qe(o),r=o;break e;case"link":var a=Ud("link","href",i).get(r+(n.href||""));if(a)for(var l=0;l<a.length;l++)if((o=a[l]).getAttribute("href")===(null==n.href||""===n.href?null:n.href)&&o.getAttribute("rel")===(null==n.rel?null:n.rel)&&o.getAttribute("title")===(null==n.title?null:n.title)&&o.getAttribute("crossorigin")===(null==n.crossOrigin?null:n.crossOrigin)){a.splice(l,1);break t}td(o=i.createElement(r),r,n),i.head.appendChild(o);break;case"meta":if(a=Ud("meta","content",i).get(r+(n.content||"")))for(l=0;l<a.length;l++)if((o=a[l]).getAttribute("content")===(null==n.content?null:""+n.content)&&o.getAttribute("name")===(null==n.name?null:n.name)&&o.getAttribute("property")===(null==n.property?null:n.property)&&o.getAttribute("http-equiv")===(null==n.httpEquiv?null:n.httpEquiv)&&o.getAttribute("charset")===(null==n.charSet?null:n.charSet)){a.splice(l,1);break t}td(o=i.createElement(r),r,n),i.head.appendChild(o);break;default:throw Error(s(468,r))}o[Pe]=e,qe(o),r=o}e.stateNode=r}else Vd(i,e.type,e.stateNode);else e.stateNode=Od(i,r,e.memoizedProps);else o!==r?(null===o?null!==n.stateNode&&(n=n.stateNode).parentNode.removeChild(n):o.count--,null===r?Vd(i,e.type,e.stateNode):Od(i,r,e.memoizedProps)):null===r&&null!==e.stateNode&&pl(e,e.memoizedProps,n.memoizedProps)}break;case 27:Rl(t,e),Ml(e),512&r&&(kl||null===n||hl(n,n.return)),null!==n&&4&r&&pl(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Rl(t,e),Ml(e),512&r&&(kl||null===n||hl(n,n.return)),32&e.flags){i=e.stateNode;try{St(i,"")}catch(p){du(e,e.return,p)}}4&r&&null!=e.stateNode&&pl(e,i=e.memoizedProps,null!==n?n.memoizedProps:i),1024&r&&(Sl=!0);break;case 6:if(Rl(t,e),Ml(e),4&r){if(null===e.stateNode)throw Error(s(162));r=e.memoizedProps,n=e.stateNode;try{n.nodeValue=r}catch(p){du(e,e.return,p)}}break;case 3:if(Bd=null,i=Ll,Ll=Cd(t.containerInfo),Rl(t,e),Ll=i,Ml(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Th(t.containerInfo)}catch(p){du(e,e.return,p)}Sl&&(Sl=!1,jl(e));break;case 4:r=Ll,Ll=Cd(e.stateNode.containerInfo),Rl(t,e),Ml(e),Ll=r;break;case 12:default:Rl(t,e),Ml(e);break;case 13:Rl(t,e),Ml(e),8192&e.child.flags&&null!==e.memoizedState!==(null!==n&&null!==n.memoizedState)&&(Sc=te()),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,Pl(e,r)));break;case 22:i=null!==e.memoizedState;var c=null!==n&&null!==n.memoizedState,u=wl,d=kl;if(wl=u||i,kl=d||c,Rl(t,e),kl=d,wl=u,Ml(e),8192&r)e:for(t=e.stateNode,t._visibility=i?-2&t._visibility:1|t._visibility,i&&(null===n||c||wl||kl||Bl(e)),n=null,t=e;;){if(5===t.tag||26===t.tag){if(null===n){c=n=t;try{if(o=c.stateNode,i)"function"===typeof(a=o.style).setProperty?a.setProperty("display","none","important"):a.display="none";else{l=c.stateNode;var h=c.memoizedProps.style,f=void 0!==h&&null!==h&&h.hasOwnProperty("display")?h.display:null;l.style.display=null==f||"boolean"===typeof f?"":(""+f).trim()}}catch(p){du(c,c.return,p)}}}else if(6===t.tag){if(null===n){c=t;try{c.stateNode.nodeValue=i?"":c.memoizedProps}catch(p){du(c,c.return,p)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}4&r&&(null!==(r=e.updateQueue)&&(null!==(n=r.retryQueue)&&(r.retryQueue=null,Pl(e,n))));break;case 19:Rl(t,e),Ml(e),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,Pl(e,r)));case 30:case 21:}}function Ml(e){var t=e.flags;if(2&t){try{for(var n,r=e.return;null!==r;){if(ml(r)){n=r;break}r=r.return}if(null==n)throw Error(s(160));switch(n.tag){case 27:var i=n.stateNode;yl(e,gl(e),i);break;case 5:var o=n.stateNode;32&n.flags&&(St(o,""),n.flags&=-33),yl(e,gl(e),o);break;case 3:case 4:var a=n.stateNode.containerInfo;vl(e,gl(e),a);break;default:throw Error(s(161))}}catch(l){du(e,e.return,l)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function jl(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;jl(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function Fl(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)Cl(e,t.alternate,t),t=t.sibling}function Bl(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:ll(4,t,t.return),Bl(t);break;case 1:hl(t,t.return);var n=t.stateNode;"function"===typeof n.componentWillUnmount&&ul(t,t.return,n),Bl(t);break;case 27:Sd(t.stateNode);case 26:case 5:hl(t,t.return),Bl(t);break;case 22:null===t.memoizedState&&Bl(t);break;default:Bl(t)}e=e.sibling}}function Ul(e,t,n){for(n=n&&0!==(8772&t.subtreeFlags),t=t.child;null!==t;){var r=t.alternate,i=e,o=t,s=o.flags;switch(o.tag){case 0:case 11:case 15:Ul(i,o,n),al(4,o);break;case 1:if(Ul(i,o,n),"function"===typeof(i=(r=o).stateNode).componentDidMount)try{i.componentDidMount()}catch(c){du(r,r.return,c)}if(null!==(i=(r=o).updateQueue)){var a=r.stateNode;try{var l=i.shared.hiddenCallbacks;if(null!==l)for(i.shared.hiddenCallbacks=null,i=0;i<l.length;i++)ho(l[i],a)}catch(c){du(r,r.return,c)}}n&&64&s&&cl(o),dl(o,o.return);break;case 27:bl(o);case 26:case 5:Ul(i,o,n),n&&null===r&&4&s&&fl(o),dl(o,o.return);break;case 12:Ul(i,o,n);break;case 13:Ul(i,o,n),n&&4&s&&Dl(i,o);break;case 22:null===o.memoizedState&&Ul(i,o,n),dl(o,o.return);break;case 30:break;default:Ul(i,o,n)}t=t.sibling}}function Vl(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&Li(n))}function zl(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Li(e))}function Wl(e,t,n,r){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)Hl(e,t,n,r),t=t.sibling}function Hl(e,t,n,r){var i=t.flags;switch(t.tag){case 0:case 11:case 15:Wl(e,t,n,r),2048&i&&al(9,t);break;case 1:case 13:default:Wl(e,t,n,r);break;case 3:Wl(e,t,n,r),2048&i&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Li(e)));break;case 12:if(2048&i){Wl(e,t,n,r),e=t.stateNode;try{var o=t.memoizedProps,s=o.id,a=o.onPostCommit;"function"===typeof a&&a(s,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(l){du(t,t.return,l)}}else Wl(e,t,n,r);break;case 23:break;case 22:o=t.stateNode,s=t.alternate,null!==t.memoizedState?2&o._visibility?Wl(e,t,n,r):Gl(e,t):2&o._visibility?Wl(e,t,n,r):(o._visibility|=2,ql(e,t,n,r,0!==(10256&t.subtreeFlags))),2048&i&&Vl(s,t);break;case 24:Wl(e,t,n,r),2048&i&&zl(t.alternate,t)}}function ql(e,t,n,r,i){for(i=i&&0!==(10256&t.subtreeFlags),t=t.child;null!==t;){var o=e,s=t,a=n,l=r,c=s.flags;switch(s.tag){case 0:case 11:case 15:ql(o,s,a,l,i),al(8,s);break;case 23:break;case 22:var u=s.stateNode;null!==s.memoizedState?2&u._visibility?ql(o,s,a,l,i):Gl(o,s):(u._visibility|=2,ql(o,s,a,l,i)),i&&2048&c&&Vl(s.alternate,s);break;case 24:ql(o,s,a,l,i),i&&2048&c&&zl(s.alternate,s);break;default:ql(o,s,a,l,i)}t=t.sibling}}function Gl(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=e,r=t,i=r.flags;switch(r.tag){case 22:Gl(n,r),2048&i&&Vl(r.alternate,r);break;case 24:Gl(n,r),2048&i&&zl(r.alternate,r);break;default:Gl(n,r)}t=t.sibling}}var Kl=8192;function Ql(e){if(e.subtreeFlags&Kl)for(e=e.child;null!==e;)Yl(e),e=e.sibling}function Yl(e){switch(e.tag){case 26:Ql(e),e.flags&Kl&&null!==e.memoizedState&&function(e,t,n){if(null===Wd)throw Error(s(475));var r=Wd;if("stylesheet"===t.type&&("string"!==typeof n.media||!1!==matchMedia(n.media).matches)&&0===(4&t.state.loading)){if(null===t.instance){var i=Ad(n.href),o=e.querySelector(Dd(i));if(o)return null!==(e=o._p)&&"object"===typeof e&&"function"===typeof e.then&&(r.count++,r=qd.bind(r),e.then(r,r)),t.state.loading|=4,t.instance=o,void qe(o);o=e.ownerDocument||e,n=Pd(n),(i=xd.get(i))&&jd(n,i),qe(o=o.createElement("link"));var a=o;a._p=new Promise(function(e,t){a.onload=e,a.onerror=t}),td(o,"link",n),t.instance=o}null===r.stylesheets&&(r.stylesheets=new Map),r.stylesheets.set(t,e),(e=t.state.preload)&&0===(3&t.state.loading)&&(r.count++,t=qd.bind(r),e.addEventListener("load",t),e.addEventListener("error",t))}}(Ll,e.memoizedState,e.memoizedProps);break;case 5:default:Ql(e);break;case 3:case 4:var t=Ll;Ll=Cd(e.stateNode.containerInfo),Ql(e),Ll=t;break;case 22:null===e.memoizedState&&(null!==(t=e.alternate)&&null!==t.memoizedState?(t=Kl,Kl=16777216,Ql(e),Kl=t):Ql(e))}}function $l(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function Xl(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];El=r,ec(r,e)}$l(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)Jl(e),e=e.sibling}function Jl(e){switch(e.tag){case 0:case 11:case 15:Xl(e),2048&e.flags&&ll(9,e,e.return);break;case 3:case 12:default:Xl(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,Zl(e)):Xl(e)}}function Zl(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];El=r,ec(r,e)}$l(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:ll(8,t,t.return),Zl(t);break;case 22:2&(n=t.stateNode)._visibility&&(n._visibility&=-3,Zl(t));break;default:Zl(t)}e=e.sibling}}function ec(e,t){for(;null!==El;){var n=El;switch(n.tag){case 0:case 11:case 15:ll(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var r=n.memoizedState.cachePool.pool;null!=r&&r.refCount++}break;case 24:Li(n.memoizedState.cache)}if(null!==(r=n.child))r.return=n,El=r;else e:for(n=e;null!==El;){var i=(r=El).sibling,o=r.return;if(Il(r),r===n){El=null;break e}if(null!==i){i.return=o,El=i;break e}El=o}}}var tc={getCacheForType:function(e){var t=Ii(Pi),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n}},nc="function"===typeof WeakMap?WeakMap:Map,rc=0,ic=null,oc=null,sc=0,ac=0,lc=null,cc=!1,uc=!1,dc=!1,hc=0,fc=0,pc=0,mc=0,gc=0,vc=0,yc=0,bc=null,wc=null,kc=!1,Sc=0,xc=1/0,Ec=null,Cc=null,Ic=0,_c=null,Tc=null,Nc=0,Ac=0,Dc=null,Pc=null,Rc=0,Lc=null;function Oc(){if(0!==(2&rc)&&0!==sc)return sc&-sc;if(null!==L.T){return 0!==ji?ji:Au()}return Ae()}function Mc(){0===vc&&(vc=0===(536870912&sc)||oi?Se():536870912);var e=oa.current;return null!==e&&(e.flags|=32),vc}function jc(e,t,n){(e!==ic||2!==ac&&9!==ac)&&null===e.cancelPendingCommit||(Hc(e,0),Vc(e,sc,vc,!1)),Ce(e,n),0!==(2&rc)&&e===ic||(e===ic&&(0===(2&rc)&&(mc|=n),4===fc&&Vc(e,sc,vc,!1)),xu(e))}function Fc(e,t,n){if(0!==(6&rc))throw Error(s(327));for(var r=!n&&0===(124&t)&&0===(t&e.expiredLanes)||we(e,t),i=r?function(e,t){var n=rc;rc|=2;var r=Gc(),i=Kc();ic!==e||sc!==t?(Ec=null,xc=te()+500,Hc(e,t)):uc=we(e,t);e:for(;;)try{if(0!==ac&&null!==oc){t=oc;var o=lc;t:switch(ac){case 1:ac=0,lc=null,eu(e,t,o,1);break;case 2:case 9:if(Yi(o)){ac=0,lc=null,Zc(t);break}t=function(){2!==ac&&9!==ac||ic!==e||(ac=7),xu(e)},o.then(t,t);break e;case 3:ac=7;break e;case 4:ac=5;break e;case 7:Yi(o)?(ac=0,lc=null,Zc(t)):(ac=0,lc=null,eu(e,t,o,7));break;case 5:var a=null;switch(oc.tag){case 26:a=oc.memoizedState;case 5:case 27:var l=oc;if(!a||zd(a)){ac=0,lc=null;var c=l.sibling;if(null!==c)oc=c;else{var u=l.return;null!==u?(oc=u,tu(u)):oc=null}break t}}ac=0,lc=null,eu(e,t,o,5);break;case 6:ac=0,lc=null,eu(e,t,o,6);break;case 8:Wc(),fc=6;break e;default:throw Error(s(462))}}Xc();break}catch(d){qc(e,d)}return yi=vi=null,L.H=r,L.A=i,rc=n,null!==oc?0:(ic=null,sc=0,Tr(),fc)}(e,t):Yc(e,t,!0),o=r;;){if(0===i){uc&&!r&&Vc(e,t,0,!1);break}if(n=e.current.alternate,!o||Uc(n)){if(2===i){if(o=t,e.errorRecoveryDisabledLanes&o)var a=0;else a=0!==(a=-536870913&e.pendingLanes)?a:536870912&a?536870912:0;if(0!==a){t=a;e:{var l=e;i=bc;var c=l.current.memoizedState.isDehydrated;if(c&&(Hc(l,a).flags|=256),2!==(a=Yc(l,a,!1))){if(dc&&!c){l.errorRecoveryDisabledLanes|=o,mc|=o,i=4;break e}o=wc,wc=i,null!==o&&(null===wc?wc=o:wc.push.apply(wc,o))}i=a}if(o=!1,2!==i)continue}}if(1===i){Hc(e,0),Vc(e,t,0,!0);break}e:{switch(r=e,o=i){case 0:case 1:throw Error(s(345));case 4:if((4194048&t)!==t)break;case 6:Vc(r,t,vc,!cc);break e;case 2:wc=null;break;case 3:case 5:break;default:throw Error(s(329))}if((62914560&t)===t&&10<(i=Sc+300-te())){if(Vc(r,t,vc,!cc),0!==be(r,0,!0))break e;r.timeoutHandle=cd(Bc.bind(null,r,n,wc,Ec,kc,t,vc,mc,yc,cc,o,2,-0,0),i)}else Bc(r,n,wc,Ec,kc,t,vc,mc,yc,cc,o,0,-0,0)}break}i=Yc(e,t,!1),o=!1}xu(e)}function Bc(e,t,n,r,i,o,a,l,c,u,d,h,f,p){if(e.timeoutHandle=-1,(8192&(h=t.subtreeFlags)||16785408===(16785408&h))&&(Wd={stylesheets:null,count:0,unsuspend:Hd},Yl(t),null!==(h=function(){if(null===Wd)throw Error(s(475));var e=Wd;return e.stylesheets&&0===e.count&&Kd(e,e.stylesheets),0<e.count?function(t){var n=setTimeout(function(){if(e.stylesheets&&Kd(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}())))return e.cancelPendingCommit=h(ru.bind(null,e,t,o,n,r,i,a,l,c,d,1,f,p)),void Vc(e,o,a,!u);ru(e,t,o,n,r,i,a,l,c)}function Uc(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&(null!==(n=t.updateQueue)&&null!==(n=n.stores)))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!Yn(o(),i))return!1}catch(s){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Vc(e,t,n,r){t&=~gc,t&=~mc,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var i=t;0<i;){var o=31-fe(i),s=1<<o;r[o]=-1,i&=~s}0!==n&&Ie(e,n,t)}function zc(){return 0!==(6&rc)||(Eu(0,!1),!1)}function Wc(){if(null!==oc){if(0===ac)var e=oc.return;else yi=vi=null,Fo(e=oc),$s=null,Xs=0,e=oc;for(;null!==e;)sl(e.alternate,e),e=e.return;oc=null}}function Hc(e,t){var n=e.timeoutHandle;-1!==n&&(e.timeoutHandle=-1,ud(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),Wc(),ic=e,oc=n=Fr(e.current,null),sc=t,ac=0,lc=null,cc=!1,uc=we(e,t),dc=!1,yc=vc=gc=mc=pc=fc=0,wc=bc=null,kc=!1,0!==(8&t)&&(t|=32&t);var r=e.entangledLanes;if(0!==r)for(e=e.entanglements,r&=t;0<r;){var i=31-fe(r),o=1<<i;t|=e[i],r&=~o}return hc=t,Tr(),n}function qc(e,t){wo=null,L.H=Gs,t===qi||t===Ki?(t=Zi(),ac=3):t===Gi?(t=Zi(),ac=4):ac=t===_a?8:null!==t&&"object"===typeof t&&"function"===typeof t.then?6:1,lc=t,null===oc&&(fc=1,Sa(e,Er(t,e.current)))}function Gc(){var e=L.H;return L.H=Gs,null===e?Gs:e}function Kc(){var e=L.A;return L.A=tc,e}function Qc(){fc=4,cc||(4194048&sc)!==sc&&null!==oa.current||(uc=!0),0===(134217727&pc)&&0===(134217727&mc)||null===ic||Vc(ic,sc,vc,!1)}function Yc(e,t,n){var r=rc;rc|=2;var i=Gc(),o=Kc();ic===e&&sc===t||(Ec=null,Hc(e,t)),t=!1;var s=fc;e:for(;;)try{if(0!==ac&&null!==oc){var a=oc,l=lc;switch(ac){case 8:Wc(),s=6;break e;case 3:case 2:case 9:case 6:null===oa.current&&(t=!0);var c=ac;if(ac=0,lc=null,eu(e,a,l,c),n&&uc){s=0;break e}break;default:c=ac,ac=0,lc=null,eu(e,a,l,c)}}$c(),s=fc;break}catch(u){qc(e,u)}return t&&e.shellSuspendCounter++,yi=vi=null,rc=r,L.H=i,L.A=o,null===oc&&(ic=null,sc=0,Tr()),s}function $c(){for(;null!==oc;)Jc(oc)}function Xc(){for(;null!==oc&&!Z();)Jc(oc)}function Jc(e){var t=Ja(e.alternate,e,hc);e.memoizedProps=e.pendingProps,null===t?tu(e):oc=t}function Zc(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=ja(n,t,t.pendingProps,t.type,void 0,sc);break;case 11:t=ja(n,t,t.pendingProps,t.type.render,t.ref,sc);break;case 5:Fo(t);default:sl(n,t),t=Ja(n,t=oc=Br(t,hc),hc)}e.memoizedProps=e.pendingProps,null===t?tu(e):oc=t}function eu(e,t,n,r){yi=vi=null,Fo(t),$s=null,Xs=0;var i=t.return;try{if(function(e,t,n,r,i){if(n.flags|=32768,null!==r&&"object"===typeof r&&"function"===typeof r.then){if(null!==(t=n.alternate)&&xi(t,n,i,!0),null!==(n=oa.current)){switch(n.tag){case 13:return null===sa?Qc():null===n.alternate&&0===fc&&(fc=3),n.flags&=-257,n.flags|=65536,n.lanes=i,r===Qi?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([r]):t.add(r),hu(e,r,i)),!1;case 22:return n.flags|=65536,r===Qi?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([r]):n.add(r),hu(e,r,i)),!1}throw Error(s(435,n.tag))}return hu(e,r,i),Qc(),!1}if(oi)return null!==(t=oa.current)?(0===(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=i,r!==li&&mi(Er(e=Error(s(422),{cause:r}),n))):(r!==li&&mi(Er(t=Error(s(423),{cause:r}),n)),(e=e.current.alternate).flags|=65536,i&=-i,e.lanes|=i,r=Er(r,n),ao(e,i=Ea(e.stateNode,r,i)),4!==fc&&(fc=2)),!1;var o=Error(s(520),{cause:r});if(o=Er(o,n),null===bc?bc=[o]:bc.push(o),4!==fc&&(fc=2),null===t)return!0;r=Er(r,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=i&-i,n.lanes|=e,ao(n,e=Ea(n.stateNode,r,e)),!1;case 1:if(t=n.type,o=n.stateNode,0===(128&n.flags)&&("function"===typeof t.getDerivedStateFromError||null!==o&&"function"===typeof o.componentDidCatch&&(null===Cc||!Cc.has(o))))return n.flags|=65536,i&=-i,n.lanes|=i,Ia(i=Ca(i),e,n,r),ao(n,i),!1}n=n.return}while(null!==n);return!1}(e,i,t,n,sc))return fc=1,Sa(e,Er(n,e.current)),void(oc=null)}catch(o){if(null!==i)throw oc=i,o;return fc=1,Sa(e,Er(n,e.current)),void(oc=null)}32768&t.flags?(oi||1===r?e=!0:uc||0!==(536870912&sc)?e=!1:(cc=e=!0,(2===r||9===r||3===r||6===r)&&(null!==(r=oa.current)&&13===r.tag&&(r.flags|=16384))),nu(t,e)):tu(t)}function tu(e){var t=e;do{if(0!==(32768&t.flags))return void nu(t,cc);e=t.return;var n=il(t.alternate,t,hc);if(null!==n)return void(oc=n);if(null!==(t=t.sibling))return void(oc=t);oc=t=e}while(null!==t);0===fc&&(fc=5)}function nu(e,t){do{var n=ol(e.alternate,e);if(null!==n)return n.flags&=32767,void(oc=n);if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling))return void(oc=e);oc=e=n}while(null!==e);fc=6,oc=null}function ru(e,t,n,r,i,o,a,l,c){e.cancelPendingCommit=null;do{lu()}while(0!==Ic);if(0!==(6&rc))throw Error(s(327));if(null!==t){if(t===e.current)throw Error(s(177));if(o=t.lanes|t.childLanes,function(e,t,n,r,i,o){var s=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var a=e.entanglements,l=e.expirationTimes,c=e.hiddenUpdates;for(n=s&~n;0<n;){var u=31-fe(n),d=1<<u;a[u]=0,l[u]=-1;var h=c[u];if(null!==h)for(c[u]=null,u=0;u<h.length;u++){var f=h[u];null!==f&&(f.lane&=-536870913)}n&=~d}0!==r&&Ie(e,r,0),0!==o&&0===i&&0!==e.tag&&(e.suspendedLanes|=o&~(s&~t))}(e,n,o|=_r,a,l,c),e===ic&&(oc=ic=null,sc=0),Tc=t,_c=e,Nc=n,Ac=o,Dc=i,Pc=r,0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?(e.callbackNode=null,e.callbackPriority=0,X(oe,function(){return cu(),null})):(e.callbackNode=null,e.callbackPriority=0),r=0!==(13878&t.flags),0!==(13878&t.subtreeFlags)||r){r=L.T,L.T=null,i=O.p,O.p=2,a=rc,rc|=4;try{!function(e,t){if(e=e.containerInfo,nd=rh,tr(e=er(e))){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(g){n=null;break e}var a=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(l=a+i),h!==o||0!==r&&3!==h.nodeType||(c=a+r),3===h.nodeType&&(a+=h.nodeValue.length),null!==(p=h.firstChild);)f=h,h=p;for(;;){if(h===e)break t;if(f===n&&++u===i&&(l=a),f===o&&++d===r&&(c=a),null!==(p=h.nextSibling))break;f=(h=f).parentNode}h=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(rd={focusedElem:e,selectionRange:n},rh=!1,El=t;null!==El;)if(e=(t=El).child,0!==(1024&t.subtreeFlags)&&null!==e)e.return=t,El=e;else for(;null!==El;){switch(o=(t=El).alternate,e=t.flags,t.tag){case 0:case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(0!==(1024&e)&&null!==o){e=void 0,n=t,i=o.memoizedProps,o=o.memoizedState,r=n.stateNode;try{var m=va(n.type,i,(n.elementType,n.type));e=r.getSnapshotBeforeUpdate(m,o),r.__reactInternalSnapshotBeforeUpdate=e}catch(v){du(n,n.return,v)}}break;case 3:if(0!==(1024&e))if(9===(n=(e=t.stateNode.containerInfo).nodeType))gd(e);else if(1===n)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":gd(e);break;default:e.textContent=""}break;default:if(0!==(1024&e))throw Error(s(163))}if(null!==(e=t.sibling)){e.return=t.return,El=e;break}El=t.return}}(e,t)}finally{rc=a,O.p=i,L.T=r}}Ic=1,iu(),ou(),su()}}function iu(){if(1===Ic){Ic=0;var e=_c,t=Tc,n=0!==(13878&t.flags);if(0!==(13878&t.subtreeFlags)||n){n=L.T,L.T=null;var r=O.p;O.p=2;var i=rc;rc|=4;try{Ol(t,e);var o=rd,s=er(e.containerInfo),a=o.focusedElem,l=o.selectionRange;if(s!==a&&a&&a.ownerDocument&&Zn(a.ownerDocument.documentElement,a)){if(null!==l&&tr(a)){var c=l.start,u=l.end;if(void 0===u&&(u=c),"selectionStart"in a)a.selectionStart=c,a.selectionEnd=Math.min(u,a.value.length);else{var d=a.ownerDocument||document,h=d&&d.defaultView||window;if(h.getSelection){var f=h.getSelection(),p=a.textContent.length,m=Math.min(l.start,p),g=void 0===l.end?m:Math.min(l.end,p);!f.extend&&m>g&&(s=g,g=m,m=s);var v=Jn(a,m),y=Jn(a,g);if(v&&y&&(1!==f.rangeCount||f.anchorNode!==v.node||f.anchorOffset!==v.offset||f.focusNode!==y.node||f.focusOffset!==y.offset)){var b=d.createRange();b.setStart(v.node,v.offset),f.removeAllRanges(),m>g?(f.addRange(b),f.extend(y.node,y.offset)):(b.setEnd(y.node,y.offset),f.addRange(b))}}}}for(d=[],f=a;f=f.parentNode;)1===f.nodeType&&d.push({element:f,left:f.scrollLeft,top:f.scrollTop});for("function"===typeof a.focus&&a.focus(),a=0;a<d.length;a++){var w=d[a];w.element.scrollLeft=w.left,w.element.scrollTop=w.top}}rh=!!nd,rd=nd=null}finally{rc=i,O.p=r,L.T=n}}e.current=t,Ic=2}}function ou(){if(2===Ic){Ic=0;var e=_c,t=Tc,n=0!==(8772&t.flags);if(0!==(8772&t.subtreeFlags)||n){n=L.T,L.T=null;var r=O.p;O.p=2;var i=rc;rc|=4;try{Cl(e,t.alternate,t)}finally{rc=i,O.p=r,L.T=n}}Ic=3}}function su(){if(4===Ic||3===Ic){Ic=0,ee();var e=_c,t=Tc,n=Nc,r=Pc;0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?Ic=5:(Ic=0,Tc=_c=null,au(e,e.pendingLanes));var i=e.pendingLanes;if(0===i&&(Cc=null),Ne(n),t=t.stateNode,de&&"function"===typeof de.onCommitFiberRoot)try{de.onCommitFiberRoot(ue,t,void 0,128===(128&t.current.flags))}catch(l){}if(null!==r){t=L.T,i=O.p,O.p=2,L.T=null;try{for(var o=e.onRecoverableError,s=0;s<r.length;s++){var a=r[s];o(a.value,{componentStack:a.stack})}}finally{L.T=t,O.p=i}}0!==(3&Nc)&&lu(),xu(e),i=e.pendingLanes,0!==(4194090&n)&&0!==(42&i)?e===Lc?Rc++:(Rc=0,Lc=e):Rc=0,Eu(0,!1)}}function au(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,Li(t)))}function lu(e){return iu(),ou(),su(),cu()}function cu(){if(5!==Ic)return!1;var e=_c,t=Ac;Ac=0;var n=Ne(Nc),r=L.T,i=O.p;try{O.p=32>n?32:n,L.T=null,n=Dc,Dc=null;var o=_c,a=Nc;if(Ic=0,Tc=_c=null,Nc=0,0!==(6&rc))throw Error(s(331));var l=rc;if(rc|=4,Jl(o.current),Hl(o,o.current,a,n),rc=l,Eu(0,!1),de&&"function"===typeof de.onPostCommitFiberRoot)try{de.onPostCommitFiberRoot(ue,o)}catch(c){}return!0}finally{O.p=i,L.T=r,au(e,t)}}function uu(e,t,n){t=Er(n,t),null!==(e=oo(e,t=Ea(e.stateNode,t,2),2))&&(Ce(e,2),xu(e))}function du(e,t,n){if(3===e.tag)uu(e,e,n);else for(;null!==t;){if(3===t.tag){uu(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Cc||!Cc.has(r))){e=Er(n,e),null!==(r=oo(t,n=Ca(2),2))&&(Ia(n,r,t,e),Ce(r,2),xu(r));break}}t=t.return}}function hu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new nc;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(dc=!0,i.add(n),e=fu.bind(null,e,t,n),t.then(e,e))}function fu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,ic===e&&(sc&n)===n&&(4===fc||3===fc&&(62914560&sc)===sc&&300>te()-Sc?0===(2&rc)&&Hc(e,0):gc|=n,yc===sc&&(yc=0)),xu(e)}function pu(e,t){0===t&&(t=xe()),null!==(e=Dr(e,t))&&(Ce(e,t),xu(e))}function mu(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),pu(e,n)}function gu(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(s(314))}null!==r&&r.delete(t),pu(e,n)}var vu=null,yu=null,bu=!1,wu=!1,ku=!1,Su=0;function xu(e){e!==yu&&null===e.next&&(null===yu?vu=yu=e:yu=yu.next=e),wu=!0,bu||(bu=!0,hd(function(){0!==(6&rc)?X(re,Cu):Iu()}))}function Eu(e,t){if(!ku&&wu){ku=!0;do{for(var n=!1,r=vu;null!==r;){if(!t)if(0!==e){var i=r.pendingLanes;if(0===i)var o=0;else{var s=r.suspendedLanes,a=r.pingedLanes;o=(1<<31-fe(42|e)+1)-1,o=201326741&(o&=i&~(s&~a))?201326741&o|1:o?2|o:0}0!==o&&(n=!0,Nu(r,o))}else o=sc,0===(3&(o=be(r,r===ic?o:0,null!==r.cancelPendingCommit||-1!==r.timeoutHandle)))||we(r,o)||(n=!0,Nu(r,o));r=r.next}}while(n);ku=!1}}function Cu(){Iu()}function Iu(){wu=bu=!1;var e=0;0!==Su&&(function(){var e=window.event;if(e&&"popstate"===e.type)return e!==ld&&(ld=e,!0);return ld=null,!1}()&&(e=Su),Su=0);for(var t=te(),n=null,r=vu;null!==r;){var i=r.next,o=_u(r,t);0===o?(r.next=null,null===n?vu=i:n.next=i,null===i&&(yu=n)):(n=r,(0!==e||0!==(3&o))&&(wu=!0)),r=i}Eu(e,!1)}function _u(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=-62914561&e.pendingLanes;0<o;){var s=31-fe(o),a=1<<s,l=i[s];-1===l?0!==(a&n)&&0===(a&r)||(i[s]=ke(a,t)):l<=t&&(e.expiredLanes|=a),o&=~a}if(n=sc,n=be(e,e===(t=ic)?n:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),r=e.callbackNode,0===n||e===t&&(2===ac||9===ac)||null!==e.cancelPendingCommit)return null!==r&&null!==r&&J(r),e.callbackNode=null,e.callbackPriority=0;if(0===(3&n)||we(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==r&&J(r),Ne(n)){case 2:case 8:n=ie;break;case 32:default:n=oe;break;case 268435456:n=ae}return r=Tu.bind(null,e),n=X(n,r),e.callbackPriority=t,e.callbackNode=n,t}return null!==r&&null!==r&&J(r),e.callbackPriority=2,e.callbackNode=null,2}function Tu(e,t){if(0!==Ic&&5!==Ic)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(lu()&&e.callbackNode!==n)return null;var r=sc;return 0===(r=be(e,e===ic?r:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:(Fc(e,r,t),_u(e,te()),null!=e.callbackNode&&e.callbackNode===n?Tu.bind(null,e):null)}function Nu(e,t){if(lu())return null;Fc(e,t,!0)}function Au(){return 0===Su&&(Su=Se()),Su}function Du(e){return null==e||"symbol"===typeof e||"boolean"===typeof e?null:"function"===typeof e?e:Nt(""+e)}function Pu(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}for(var Ru=0;Ru<kr.length;Ru++){var Lu=kr[Ru];Sr(Lu.toLowerCase(),"on"+(Lu[0].toUpperCase()+Lu.slice(1)))}Sr(fr,"onAnimationEnd"),Sr(pr,"onAnimationIteration"),Sr(mr,"onAnimationStart"),Sr("dblclick","onDoubleClick"),Sr("focusin","onFocus"),Sr("focusout","onBlur"),Sr(gr,"onTransitionRun"),Sr(vr,"onTransitionStart"),Sr(yr,"onTransitionCancel"),Sr(br,"onTransitionEnd"),Ye("onMouseEnter",["mouseout","mouseover"]),Ye("onMouseLeave",["mouseout","mouseover"]),Ye("onPointerEnter",["pointerout","pointerover"]),Ye("onPointerLeave",["pointerout","pointerover"]),Qe("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Qe("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Qe("onBeforeInput",["compositionend","keypress","textInput","paste"]),Qe("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Qe("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Qe("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ou="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mu=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ou));function ju(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var s=r.length-1;0<=s;s--){var a=r[s],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==o&&i.isPropagationStopped())break e;o=a,i.currentTarget=c;try{o(i)}catch(u){ya(u)}i.currentTarget=null,o=l}else for(s=0;s<r.length;s++){if(l=(a=r[s]).instance,c=a.currentTarget,a=a.listener,l!==o&&i.isPropagationStopped())break e;o=a,i.currentTarget=c;try{o(i)}catch(u){ya(u)}i.currentTarget=null,o=l}}}}function Fu(e,t){var n=t[Oe];void 0===n&&(n=t[Oe]=new Set);var r=e+"__bubble";n.has(r)||(zu(t,e,2,!1),n.add(r))}function Bu(e,t,n){var r=0;t&&(r|=4),zu(n,e,r,t)}var Uu="_reactListening"+Math.random().toString(36).slice(2);function Vu(e){if(!e[Uu]){e[Uu]=!0,Ge.forEach(function(t){"selectionchange"!==t&&(Mu.has(t)||Bu(t,!1,e),Bu(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Uu]||(t[Uu]=!0,Bu("selectionchange",!1,t))}}function zu(e,t,n,r){switch(uh(t)){case 2:var i=ih;break;case 8:i=oh;break;default:i=sh}n=i.bind(null,t,n,e),i=void 0,!Bt||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Wu(e,t,n,r,i){var o=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var s=r.tag;if(3===s||4===s){var a=r.stateNode.containerInfo;if(a===i)break;if(4===s)for(s=r.return;null!==s;){var c=s.tag;if((3===c||4===c)&&s.stateNode.containerInfo===i)return;s=s.return}for(;null!==a;){if(null===(s=Ve(a)))return;if(5===(c=s.tag)||6===c||26===c||27===c){r=o=s;continue e}a=a.parentNode}}r=r.return}Mt(function(){var r=o,i=Dt(n),s=[];e:{var a=wr.get(e);if(void 0!==a){var c=Zt,u=e;switch(e){case"keypress":if(0===qt(n))break e;case"keydown":case"keyup":c=mn;break;case"focusin":u="focus",c=sn;break;case"focusout":u="blur",c=sn;break;case"beforeblur":case"afterblur":c=sn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=rn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=on;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=vn;break;case fr:case pr:case mr:c=an;break;case br:c=yn;break;case"scroll":case"scrollend":c=tn;break;case"wheel":c=bn;break;case"copy":case"cut":case"paste":c=ln;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=gn;break;case"toggle":case"beforetoggle":c=wn}var d=0!==(4&t),h=!d&&("scroll"===e||"scrollend"===e),f=d?null!==a?a+"Capture":null:a;d=[];for(var p,m=r;null!==m;){var g=m;if(p=g.stateNode,5!==(g=g.tag)&&26!==g&&27!==g||null===p||null===f||null!=(g=jt(m,f))&&d.push(Hu(m,g,p)),h)break;m=m.return}0<d.length&&(a=new c(a,u,null,n,i),s.push({event:a,listeners:d}))}}if(0===(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===At||!(u=n.relatedTarget||n.fromElement)||!Ve(u)&&!u[Le])&&(c||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,c?(c=r,null!==(u=(u=n.relatedTarget||n.toElement)?Ve(u):null)&&(h=l(u),d=u.tag,u!==h||5!==d&&27!==d&&6!==d)&&(u=null)):(c=null,u=r),c!==u)){if(d=rn,g="onMouseLeave",f="onMouseEnter",m="mouse","pointerout"!==e&&"pointerover"!==e||(d=gn,g="onPointerLeave",f="onPointerEnter",m="pointer"),h=null==c?a:We(c),p=null==u?a:We(u),(a=new d(g,m+"leave",c,n,i)).target=h,a.relatedTarget=p,g=null,Ve(i)===r&&((d=new d(f,m+"enter",u,n,i)).target=p,d.relatedTarget=h,g=d),h=g,c&&u)e:{for(f=u,m=0,p=d=c;p;p=Gu(p))m++;for(p=0,g=f;g;g=Gu(g))p++;for(;0<m-p;)d=Gu(d),m--;for(;0<p-m;)f=Gu(f),p--;for(;m--;){if(d===f||null!==f&&d===f.alternate)break e;d=Gu(d),f=Gu(f)}d=null}else d=null;null!==c&&Ku(s,a,c,d,!1),null!==u&&null!==h&&Ku(s,h,u,d,!0)}if("select"===(c=(a=r?We(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===c&&"file"===a.type)var v=Fn;else if(Pn(a))if(Bn)v=Qn;else{v=Gn;var y=qn}else!(c=a.nodeName)||"input"!==c.toLowerCase()||"checkbox"!==a.type&&"radio"!==a.type?r&&It(r.elementType)&&(v=Fn):v=Kn;switch(v&&(v=v(e,r))?Rn(s,v,n,i):(y&&y(e,a,r),"focusout"===e&&r&&"number"===a.type&&null!=r.memoizedProps.value&&yt(a,"number",a.value)),y=r?We(r):window,e){case"focusin":(Pn(y)||"true"===y.contentEditable)&&(rr=y,ir=r,or=null);break;case"focusout":or=ir=rr=null;break;case"mousedown":sr=!0;break;case"contextmenu":case"mouseup":case"dragend":sr=!1,ar(s,n,i);break;case"selectionchange":if(nr)break;case"keydown":case"keyup":ar(s,n,i)}var b;if(Sn)e:{switch(e){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else An?Tn(e,n)&&(w="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(w="onCompositionStart");w&&(Cn&&"ko"!==n.locale&&(An||"onCompositionStart"!==w?"onCompositionEnd"===w&&An&&(b=Ht()):(zt="value"in(Vt=i)?Vt.value:Vt.textContent,An=!0)),0<(y=qu(r,w)).length&&(w=new cn(w,e,null,n,i),s.push({event:w,listeners:y}),b?w.data=b:null!==(b=Nn(n))&&(w.data=b))),(b=En?function(e,t){switch(e){case"compositionend":return Nn(t);case"keypress":return 32!==t.which?null:(_n=!0,In);case"textInput":return(e=t.data)===In&&_n?null:e;default:return null}}(e,n):function(e,t){if(An)return"compositionend"===e||!Sn&&Tn(e,t)?(e=Ht(),Wt=zt=Vt=null,An=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Cn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(w=qu(r,"onBeforeInput")).length&&(y=new cn("onBeforeInput","beforeinput",null,n,i),s.push({event:y,listeners:w}),y.data=b)),function(e,t,n,r,i){if("submit"===t&&n&&n.stateNode===i){var o=Du((i[Re]||null).action),s=r.submitter;s&&null!==(t=(t=s[Re]||null)?Du(t.formAction):s.getAttribute("formAction"))&&(o=t,s=null);var a=new Zt("action","action",null,r,i);e.push({event:a,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(0!==Su){var e=s?Pu(i,s):new FormData(i);Ps(n,{pending:!0,data:e,method:i.method,action:o},null,e)}}else"function"===typeof o&&(a.preventDefault(),e=s?Pu(i,s):new FormData(i),Ps(n,{pending:!0,data:e,method:i.method,action:o},o,e))},currentTarget:i}]})}}(s,e,r,n,i)}ju(s,t)})}function Hu(e,t,n){return{instance:e,listener:t,currentTarget:n}}function qu(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,o=i.stateNode;if(5!==(i=i.tag)&&26!==i&&27!==i||null===o||(null!=(i=jt(e,n))&&r.unshift(Hu(e,i,o)),null!=(i=jt(e,t))&&r.push(Hu(e,i,o))),3===e.tag)return r;e=e.return}return[]}function Gu(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function Ku(e,t,n,r,i){for(var o=t._reactName,s=[];null!==n&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(a=a.tag,null!==l&&l===r)break;5!==a&&26!==a&&27!==a||null===c||(l=c,i?null!=(c=jt(n,o))&&s.unshift(Hu(n,c,l)):i||null!=(c=jt(n,o))&&s.push(Hu(n,c,l))),n=n.return}0!==s.length&&e.push({event:t,listeners:s})}var Qu=/\r\n?/g,Yu=/\u0000|\uFFFD/g;function $u(e){return("string"===typeof e?e:""+e).replace(Qu,"\n").replace(Yu,"")}function Xu(e,t){return t=$u(t),$u(e)===t}function Ju(){}function Zu(e,t,n,r,i,o){switch(n){case"children":"string"===typeof r?"body"===t||"textarea"===t&&""===r||St(e,r):("number"===typeof r||"bigint"===typeof r)&&"body"!==t&&St(e,""+r);break;case"className":nt(e,"class",r);break;case"tabIndex":nt(e,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":nt(e,n,r);break;case"style":Ct(e,r,o);break;case"data":if("object"!==t){nt(e,"data",r);break}case"src":case"href":if(""===r&&("a"!==t||"href"!==n)){e.removeAttribute(n);break}if(null==r||"function"===typeof r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=Nt(""+r),e.setAttribute(n,r);break;case"action":case"formAction":if("function"===typeof r){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"===typeof o&&("formAction"===n?("input"!==t&&Zu(e,t,"name",i.name,i,null),Zu(e,t,"formEncType",i.formEncType,i,null),Zu(e,t,"formMethod",i.formMethod,i,null),Zu(e,t,"formTarget",i.formTarget,i,null)):(Zu(e,t,"encType",i.encType,i,null),Zu(e,t,"method",i.method,i,null),Zu(e,t,"target",i.target,i,null))),null==r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=Nt(""+r),e.setAttribute(n,r);break;case"onClick":null!=r&&(e.onclick=Ju);break;case"onScroll":null!=r&&Fu("scroll",e);break;case"onScrollEnd":null!=r&&Fu("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(s(61));if(null!=(n=r.__html)){if(null!=i.children)throw Error(s(60));e.innerHTML=n}}break;case"multiple":e.multiple=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"muted":e.muted=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==r||"function"===typeof r||"boolean"===typeof r||"symbol"===typeof r){e.removeAttribute("xlink:href");break}n=Nt(""+r),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""+r):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":!0===r?e.setAttribute(n,""):!1!==r&&null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,r):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":null!=r&&"function"!==typeof r&&"symbol"!==typeof r&&!isNaN(r)&&1<=r?e.setAttribute(n,r):e.removeAttribute(n);break;case"rowSpan":case"start":null==r||"function"===typeof r||"symbol"===typeof r||isNaN(r)?e.removeAttribute(n):e.setAttribute(n,r);break;case"popover":Fu("beforetoggle",e),Fu("toggle",e),tt(e,"popover",r);break;case"xlinkActuate":rt(e,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":rt(e,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":rt(e,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":rt(e,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":rt(e,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":rt(e,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":rt(e,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":rt(e,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":rt(e,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":tt(e,"is",r);break;case"innerText":case"textContent":break;default:(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&tt(e,n=_t.get(n)||n,r)}}function ed(e,t,n,r,i,o){switch(n){case"style":Ct(e,r,o);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(s(61));if(null!=(n=r.__html)){if(null!=i.children)throw Error(s(60));e.innerHTML=n}}break;case"children":"string"===typeof r?St(e,r):("number"===typeof r||"bigint"===typeof r)&&St(e,""+r);break;case"onScroll":null!=r&&Fu("scroll",e);break;case"onScrollEnd":null!=r&&Fu("scrollend",e);break;case"onClick":null!=r&&(e.onclick=Ju);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:Ke.hasOwnProperty(n)||("o"!==n[0]||"n"!==n[1]||(i=n.endsWith("Capture"),t=n.slice(2,i?n.length-7:void 0),"function"===typeof(o=null!=(o=e[Re]||null)?o[n]:null)&&e.removeEventListener(t,o,i),"function"!==typeof r)?n in e?e[n]=r:!0===r?e.setAttribute(n,""):tt(e,n,r):("function"!==typeof o&&null!==o&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,r,i)))}}function td(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Fu("error",e),Fu("load",e);var r,i=!1,o=!1;for(r in n)if(n.hasOwnProperty(r)){var a=n[r];if(null!=a)switch(r){case"src":i=!0;break;case"srcSet":o=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,t));default:Zu(e,t,r,a,n,null)}}return o&&Zu(e,t,"srcSet",n.srcSet,n,null),void(i&&Zu(e,t,"src",n.src,n,null));case"input":Fu("invalid",e);var l=r=a=o=null,c=null,u=null;for(i in n)if(n.hasOwnProperty(i)){var d=n[i];if(null!=d)switch(i){case"name":o=d;break;case"type":a=d;break;case"checked":c=d;break;case"defaultChecked":u=d;break;case"value":r=d;break;case"defaultValue":l=d;break;case"children":case"dangerouslySetInnerHTML":if(null!=d)throw Error(s(137,t));break;default:Zu(e,t,i,d,n,null)}}return vt(e,r,l,c,u,a,o,!1),void dt(e);case"select":for(o in Fu("invalid",e),i=a=r=null,n)if(n.hasOwnProperty(o)&&null!=(l=n[o]))switch(o){case"value":r=l;break;case"defaultValue":a=l;break;case"multiple":i=l;default:Zu(e,t,o,l,n,null)}return t=r,n=a,e.multiple=!!i,void(null!=t?bt(e,!!i,t,!1):null!=n&&bt(e,!!i,n,!0));case"textarea":for(a in Fu("invalid",e),r=o=i=null,n)if(n.hasOwnProperty(a)&&null!=(l=n[a]))switch(a){case"value":i=l;break;case"defaultValue":o=l;break;case"children":r=l;break;case"dangerouslySetInnerHTML":if(null!=l)throw Error(s(91));break;default:Zu(e,t,a,l,n,null)}return kt(e,i,o,r),void dt(e);case"option":for(c in n)if(n.hasOwnProperty(c)&&null!=(i=n[c]))if("selected"===c)e.selected=i&&"function"!==typeof i&&"symbol"!==typeof i;else Zu(e,t,c,i,n,null);return;case"dialog":Fu("beforetoggle",e),Fu("toggle",e),Fu("cancel",e),Fu("close",e);break;case"iframe":case"object":Fu("load",e);break;case"video":case"audio":for(i=0;i<Ou.length;i++)Fu(Ou[i],e);break;case"image":Fu("error",e),Fu("load",e);break;case"details":Fu("toggle",e);break;case"embed":case"source":case"link":Fu("error",e),Fu("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(u in n)if(n.hasOwnProperty(u)&&null!=(i=n[u]))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,t));default:Zu(e,t,u,i,n,null)}return;default:if(It(t)){for(d in n)n.hasOwnProperty(d)&&(void 0!==(i=n[d])&&ed(e,t,d,i,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(null!=(i=n[l])&&Zu(e,t,l,i,n,null))}var nd=null,rd=null;function id(e){return 9===e.nodeType?e:e.ownerDocument}function od(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function sd(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function ad(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"bigint"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ld=null;var cd="function"===typeof setTimeout?setTimeout:void 0,ud="function"===typeof clearTimeout?clearTimeout:void 0,dd="function"===typeof Promise?Promise:void 0,hd="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof dd?function(e){return dd.resolve(null).then(e).catch(fd)}:cd;function fd(e){setTimeout(function(){throw e})}function pd(e){return"head"===e}function md(e,t){var n=t,r=0,i=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&8===o.nodeType)if("/$"===(n=o.data)){if(0<r&&8>r){n=r;var s=e.ownerDocument;if(1&n&&Sd(s.documentElement),2&n&&Sd(s.body),4&n)for(Sd(n=s.head),s=n.firstChild;s;){var a=s.nextSibling,l=s.nodeName;s[Be]||"SCRIPT"===l||"STYLE"===l||"LINK"===l&&"stylesheet"===s.rel.toLowerCase()||n.removeChild(s),s=a}}if(0===i)return e.removeChild(o),void Th(t);i--}else"$"===n||"$?"===n||"$!"===n?i++:r=n.charCodeAt(0)-48;else r=0;n=o}while(n);Th(t)}function gd(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":gd(n),Ue(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===n.rel.toLowerCase())continue}e.removeChild(n)}}function vd(e){return"$!"===e.data||"$?"===e.data&&"complete"===e.ownerDocument.readyState}function yd(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"F!"===t||"F"===t)break;if("/$"===t)return null}}return e}var bd=null;function wd(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}function kd(e,t,n){switch(t=id(n),e){case"html":if(!(e=t.documentElement))throw Error(s(452));return e;case"head":if(!(e=t.head))throw Error(s(453));return e;case"body":if(!(e=t.body))throw Error(s(454));return e;default:throw Error(s(451))}}function Sd(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Ue(e)}var xd=new Map,Ed=new Set;function Cd(e){return"function"===typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var Id=O.d;O.d={f:function(){var e=Id.f(),t=zc();return e||t},r:function(e){var t=ze(e);null!==t&&5===t.tag&&"form"===t.type?Ls(t):Id.r(e)},D:function(e){Id.D(e),Td("dns-prefetch",e,null)},C:function(e,t){Id.C(e,t),Td("preconnect",e,t)},L:function(e,t,n){Id.L(e,t,n);var r=_d;if(r&&e&&t){var i='link[rel="preload"][as="'+mt(t)+'"]';"image"===t&&n&&n.imageSrcSet?(i+='[imagesrcset="'+mt(n.imageSrcSet)+'"]',"string"===typeof n.imageSizes&&(i+='[imagesizes="'+mt(n.imageSizes)+'"]')):i+='[href="'+mt(e)+'"]';var o=i;switch(t){case"style":o=Ad(e);break;case"script":o=Rd(e)}xd.has(o)||(e=h({rel:"preload",href:"image"===t&&n&&n.imageSrcSet?void 0:e,as:t},n),xd.set(o,e),null!==r.querySelector(i)||"style"===t&&r.querySelector(Dd(o))||"script"===t&&r.querySelector(Ld(o))||(td(t=r.createElement("link"),"link",e),qe(t),r.head.appendChild(t)))}},m:function(e,t){Id.m(e,t);var n=_d;if(n&&e){var r=t&&"string"===typeof t.as?t.as:"script",i='link[rel="modulepreload"][as="'+mt(r)+'"][href="'+mt(e)+'"]',o=i;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":o=Rd(e)}if(!xd.has(o)&&(e=h({rel:"modulepreload",href:e},t),xd.set(o,e),null===n.querySelector(i))){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Ld(o)))return}td(r=n.createElement("link"),"link",e),qe(r),n.head.appendChild(r)}}},X:function(e,t){Id.X(e,t);var n=_d;if(n&&e){var r=He(n).hoistableScripts,i=Rd(e),o=r.get(i);o||((o=n.querySelector(Ld(i)))||(e=h({src:e,async:!0},t),(t=xd.get(i))&&Fd(e,t),qe(o=n.createElement("script")),td(o,"link",e),n.head.appendChild(o)),o={type:"script",instance:o,count:1,state:null},r.set(i,o))}},S:function(e,t,n){Id.S(e,t,n);var r=_d;if(r&&e){var i=He(r).hoistableStyles,o=Ad(e);t=t||"default";var s=i.get(o);if(!s){var a={loading:0,preload:null};if(s=r.querySelector(Dd(o)))a.loading=5;else{e=h({rel:"stylesheet",href:e,"data-precedence":t},n),(n=xd.get(o))&&jd(e,n);var l=s=r.createElement("link");qe(l),td(l,"link",e),l._p=new Promise(function(e,t){l.onload=e,l.onerror=t}),l.addEventListener("load",function(){a.loading|=1}),l.addEventListener("error",function(){a.loading|=2}),a.loading|=4,Md(s,t,r)}s={type:"stylesheet",instance:s,count:1,state:a},i.set(o,s)}}},M:function(e,t){Id.M(e,t);var n=_d;if(n&&e){var r=He(n).hoistableScripts,i=Rd(e),o=r.get(i);o||((o=n.querySelector(Ld(i)))||(e=h({src:e,async:!0,type:"module"},t),(t=xd.get(i))&&Fd(e,t),qe(o=n.createElement("script")),td(o,"link",e),n.head.appendChild(o)),o={type:"script",instance:o,count:1,state:null},r.set(i,o))}}};var _d="undefined"===typeof document?null:document;function Td(e,t,n){var r=_d;if(r&&"string"===typeof t&&t){var i=mt(t);i='link[rel="'+e+'"][href="'+i+'"]',"string"===typeof n&&(i+='[crossorigin="'+n+'"]'),Ed.has(i)||(Ed.add(i),e={rel:e,crossOrigin:n,href:t},null===r.querySelector(i)&&(td(t=r.createElement("link"),"link",e),qe(t),r.head.appendChild(t)))}}function Nd(e,t,n,r){var i,o,a,l,c=(c=H.current)?Cd(c):null;if(!c)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return"string"===typeof n.precedence&&"string"===typeof n.href?(t=Ad(n.href),(r=(n=He(c).hoistableStyles).get(t))||(r={type:"style",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===n.rel&&"string"===typeof n.href&&"string"===typeof n.precedence){e=Ad(n.href);var u=He(c).hoistableStyles,d=u.get(e);if(d||(c=c.ownerDocument||c,d={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(e,d),(u=c.querySelector(Dd(e)))&&!u._p&&(d.instance=u,d.state.loading=5),xd.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},xd.set(e,n),u||(i=c,o=e,a=n,l=d.state,i.querySelector('link[rel="preload"][as="style"]['+o+"]")?l.loading=1:(o=i.createElement("link"),l.preload=o,o.addEventListener("load",function(){return l.loading|=1}),o.addEventListener("error",function(){return l.loading|=2}),td(o,"link",a),qe(o),i.head.appendChild(o))))),t&&null===r)throw Error(s(528,""));return d}if(t&&null!==r)throw Error(s(529,""));return null;case"script":return t=n.async,"string"===typeof(n=n.src)&&t&&"function"!==typeof t&&"symbol"!==typeof t?(t=Rd(n),(r=(n=He(c).hoistableScripts).get(t))||(r={type:"script",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function Ad(e){return'href="'+mt(e)+'"'}function Dd(e){return'link[rel="stylesheet"]['+e+"]"}function Pd(e){return h({},e,{"data-precedence":e.precedence,precedence:null})}function Rd(e){return'[src="'+mt(e)+'"]'}function Ld(e){return"script[async]"+e}function Od(e,t,n){if(t.count++,null===t.instance)switch(t.type){case"style":var r=e.querySelector('style[data-href~="'+mt(n.href)+'"]');if(r)return t.instance=r,qe(r),r;var i=h({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return qe(r=(e.ownerDocument||e).createElement("style")),td(r,"style",i),Md(r,n.precedence,e),t.instance=r;case"stylesheet":i=Ad(n.href);var o=e.querySelector(Dd(i));if(o)return t.state.loading|=4,t.instance=o,qe(o),o;r=Pd(n),(i=xd.get(i))&&jd(r,i),qe(o=(e.ownerDocument||e).createElement("link"));var a=o;return a._p=new Promise(function(e,t){a.onload=e,a.onerror=t}),td(o,"link",r),t.state.loading|=4,Md(o,n.precedence,e),t.instance=o;case"script":return o=Rd(n.src),(i=e.querySelector(Ld(o)))?(t.instance=i,qe(i),i):(r=n,(i=xd.get(o))&&Fd(r=h({},n),i),qe(i=(e=e.ownerDocument||e).createElement("script")),td(i,"link",r),e.head.appendChild(i),t.instance=i);case"void":return null;default:throw Error(s(443,t.type))}else"stylesheet"===t.type&&0===(4&t.state.loading)&&(r=t.instance,t.state.loading|=4,Md(r,n.precedence,e));return t.instance}function Md(e,t,n){for(var r=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),i=r.length?r[r.length-1]:null,o=i,s=0;s<r.length;s++){var a=r[s];if(a.dataset.precedence===t)o=a;else if(o!==i)break}o?o.parentNode.insertBefore(e,o.nextSibling):(t=9===n.nodeType?n.head:n).insertBefore(e,t.firstChild)}function jd(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function Fd(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var Bd=null;function Ud(e,t,n){if(null===Bd){var r=new Map,i=Bd=new Map;i.set(n,r)}else(r=(i=Bd).get(n))||(r=new Map,i.set(n,r));if(r.has(e))return r;for(r.set(e,null),n=n.getElementsByTagName(e),i=0;i<n.length;i++){var o=n[i];if(!(o[Be]||o[Pe]||"link"===e&&"stylesheet"===o.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==o.namespaceURI){var s=o.getAttribute(t)||"";s=e+s;var a=r.get(s);a?a.push(o):r.set(s,[o])}}return r}function Vd(e,t,n){(e=e.ownerDocument||e).head.insertBefore(n,"title"===t?e.querySelector("head > title"):null)}function zd(e){return"stylesheet"!==e.type||0!==(3&e.state.loading)}var Wd=null;function Hd(){}function qd(){if(this.count--,0===this.count)if(this.stylesheets)Kd(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var Gd=null;function Kd(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,Gd=new Map,t.forEach(Qd,e),Gd=null,qd.call(e))}function Qd(e,t){if(!(4&t.state.loading)){var n=Gd.get(e);if(n)var r=n.get(null);else{n=new Map,Gd.set(e,n);for(var i=e.querySelectorAll("link[data-precedence],style[data-precedence]"),o=0;o<i.length;o++){var s=i[o];"LINK"!==s.nodeName&&"not all"===s.getAttribute("media")||(n.set(s.dataset.precedence,s),r=s)}r&&n.set(null,r)}s=(i=t.instance).getAttribute("data-precedence"),(o=n.get(s)||r)===r&&n.set(null,i),n.set(s,i),this.count++,r=qd.bind(this),i.addEventListener("load",r),i.addEventListener("error",r),o?o.parentNode.insertBefore(i,o.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(i,e.firstChild),t.state.loading|=4}}var Yd={$$typeof:k,Provider:null,Consumer:null,_currentValue:M,_currentValue2:M,_threadCount:0};function $d(e,t,n,r,i,o,s,a){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ee(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ee(0),this.hiddenUpdates=Ee(null),this.identifierPrefix=r,this.onUncaughtError=i,this.onCaughtError=o,this.onRecoverableError=s,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=a,this.incompleteTransitions=new Map}function Xd(e,t,n,r,i,o,s,a,l,c,u,d){return e=new $d(e,t,n,s,a,l,c,d),t=1,!0===o&&(t|=24),o=Mr(3,null,null,t),e.current=o,o.stateNode=e,(t=Ri()).refCount++,e.pooledCache=t,t.refCount++,o.memoizedState={element:r,isDehydrated:n,cache:t},no(o),e}function Jd(e){return e?e=Lr:Lr}function Zd(e,t,n,r,i,o){i=Jd(i),null===r.context?r.context=i:r.pendingContext=i,(r=io(t)).payload={element:n},null!==(o=void 0===o?null:o)&&(r.callback=o),null!==(n=oo(e,r,t))&&(jc(n,0,t),so(n,e,t))}function eh(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function th(e,t){eh(e,t),(e=e.alternate)&&eh(e,t)}function nh(e){if(13===e.tag){var t=Dr(e,67108864);null!==t&&jc(t,0,67108864),th(e,67108864)}}var rh=!0;function ih(e,t,n,r){var i=L.T;L.T=null;var o=O.p;try{O.p=2,sh(e,t,n,r)}finally{O.p=o,L.T=i}}function oh(e,t,n,r){var i=L.T;L.T=null;var o=O.p;try{O.p=8,sh(e,t,n,r)}finally{O.p=o,L.T=i}}function sh(e,t,n,r){if(rh){var i=ah(r);if(null===i)Wu(e,t,r,lh,n),bh(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return hh=wh(hh,e,t,n,r,i),!0;case"dragenter":return fh=wh(fh,e,t,n,r,i),!0;case"mouseover":return ph=wh(ph,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return mh.set(o,wh(mh.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,gh.set(o,wh(gh.get(o)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(bh(e,r),4&t&&-1<yh.indexOf(e)){for(;null!==i;){var o=ze(i);if(null!==o)switch(o.tag){case 3:if((o=o.stateNode).current.memoizedState.isDehydrated){var s=ye(o.pendingLanes);if(0!==s){var a=o;for(a.pendingLanes|=2,a.entangledLanes|=2;s;){var l=1<<31-fe(s);a.entanglements[1]|=l,s&=~l}xu(o),0===(6&rc)&&(xc=te()+500,Eu(0,!1))}}break;case 13:null!==(a=Dr(o,2))&&jc(a,0,2),zc(),th(o,2)}if(null===(o=ah(r))&&Wu(e,t,r,lh,n),o===i)break;i=o}null!==i&&r.stopPropagation()}else Wu(e,t,r,null,n)}}function ah(e){return ch(e=Dt(e))}var lh=null;function ch(e){if(lh=null,null!==(e=Ve(e))){var t=l(e);if(null===t)e=null;else{var n=t.tag;if(13===n){if(null!==(e=c(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return lh=e,null}function uh(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ne()){case re:return 2;case ie:return 8;case oe:case se:return 32;case ae:return 268435456;default:return 32}default:return 32}}var dh=!1,hh=null,fh=null,ph=null,mh=new Map,gh=new Map,vh=[],yh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function bh(e,t){switch(e){case"focusin":case"focusout":hh=null;break;case"dragenter":case"dragleave":fh=null;break;case"mouseover":case"mouseout":ph=null;break;case"pointerover":case"pointerout":mh.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":gh.delete(t.pointerId)}}function wh(e,t,n,r,i,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},null!==t&&(null!==(t=ze(t))&&nh(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function kh(e){var t=Ve(e.target);if(null!==t){var n=l(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=c(n)))return e.blockedOn=t,void function(e,t){var n=O.p;try{return O.p=e,t()}finally{O.p=n}}(e.priority,function(){if(13===n.tag){var e=Oc();e=Te(e);var t=Dr(n,e);null!==t&&jc(t,0,e),th(n,e)}})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Sh(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=ah(e.nativeEvent);if(null!==n)return null!==(t=ze(n))&&nh(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);At=r,n.target.dispatchEvent(r),At=null,t.shift()}return!0}function xh(e,t,n){Sh(e)&&n.delete(t)}function Eh(){dh=!1,null!==hh&&Sh(hh)&&(hh=null),null!==fh&&Sh(fh)&&(fh=null),null!==ph&&Sh(ph)&&(ph=null),mh.forEach(xh),gh.forEach(xh)}function Ch(e,t){e.blockedOn===t&&(e.blockedOn=null,dh||(dh=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Eh)))}var Ih=null;function _h(e){Ih!==e&&(Ih=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Ih===e&&(Ih=null);for(var t=0;t<e.length;t+=3){var n=e[t],r=e[t+1],i=e[t+2];if("function"!==typeof r){if(null===ch(r||n))continue;break}var o=ze(n);null!==o&&(e.splice(t,3),t-=3,Ps(o,{pending:!0,data:i,method:n.method,action:r},r,i))}}))}function Th(e){function t(t){return Ch(t,e)}null!==hh&&Ch(hh,e),null!==fh&&Ch(fh,e),null!==ph&&Ch(ph,e),mh.forEach(t),gh.forEach(t);for(var n=0;n<vh.length;n++){var r=vh[n];r.blockedOn===e&&(r.blockedOn=null)}for(;0<vh.length&&null===(n=vh[0]).blockedOn;)kh(n),null===n.blockedOn&&vh.shift();if(null!=(n=(e.ownerDocument||e).$$reactFormReplay))for(r=0;r<n.length;r+=3){var i=n[r],o=n[r+1],s=i[Re]||null;if("function"===typeof o)s||_h(n);else if(s){var a=null;if(o&&o.hasAttribute("formAction")){if(i=o,s=o[Re]||null)a=s.formAction;else if(null!==ch(i))continue}else a=s.action;"function"===typeof a?n[r+1]=a:(n.splice(r,3),r-=3),_h(n)}}}function Nh(e){this._internalRoot=e}function Ah(e){this._internalRoot=e}Ah.prototype.render=Nh.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));Zd(t.current,Oc(),e,t,null,null)},Ah.prototype.unmount=Nh.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;Zd(e.current,2,null,e,null,null),zc(),t[Le]=null}},Ah.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ae();e={blockedOn:null,target:e,priority:t};for(var n=0;n<vh.length&&0!==t&&t<vh[n].priority;n++);vh.splice(n,0,e),0===n&&kh(e)}};var Dh=i.version;if("19.1.1"!==Dh)throw Error(s(527,Dh,"19.1.1"));O.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=l(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return u(i),e;if(o===r)return u(i),t;o=o.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,c=i.child;c;){if(c===n){a=!0,n=i,r=o;break}if(c===r){a=!0,r=i,n=o;break}c=c.sibling}if(!a){for(c=o.child;c;){if(c===n){a=!0,n=o,r=i;break}if(c===r){a=!0,r=o,n=i;break}c=c.sibling}if(!a)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(t),e=null===(e=null!==e?d(e):null)?null:e.stateNode};var Ph={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:L,reconcilerVersion:"19.1.1"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Rh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Rh.isDisabled&&Rh.supportsFiber)try{ue=Rh.inject(Ph),de=Rh}catch(Oh){}}t.createRoot=function(e,t){if(!a(e))throw Error(s(299));var n=!1,r="",i=ba,o=wa,l=ka;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onUncaughtError&&(i=t.onUncaughtError),void 0!==t.onCaughtError&&(o=t.onCaughtError),void 0!==t.onRecoverableError&&(l=t.onRecoverableError),void 0!==t.unstable_transitionCallbacks&&t.unstable_transitionCallbacks),t=Xd(e,1,!1,null,0,n,r,i,o,l,0,null),e[Le]=t.current,Vu(e),new Nh(t)},t.hydrateRoot=function(e,t,n){if(!a(e))throw Error(s(299));var r=!1,i="",o=ba,l=wa,c=ka,u=null;return null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(i=n.identifierPrefix),void 0!==n.onUncaughtError&&(o=n.onUncaughtError),void 0!==n.onCaughtError&&(l=n.onCaughtError),void 0!==n.onRecoverableError&&(c=n.onRecoverableError),void 0!==n.unstable_transitionCallbacks&&n.unstable_transitionCallbacks,void 0!==n.formState&&(u=n.formState)),(t=Xd(e,1,!0,t,0,r,i,o,l,c,0,u)).context=Jd(null),n=t.current,(i=io(r=Te(r=Oc()))).callback=null,oo(n,i,r),n=r,t.current.lanes=n,Ce(t,n),xu(t),e[Le]=t.current,Vu(e),new Ah(t)},t.version="19.1.1"},43:(e,t,n)=>{e.exports=n(288)},82:(e,t)=>{var n=60103,r=60106,i=60107,o=60108,s=60114,a=60109,l=60110,c=60112,u=60113,d=60120,h=60115,f=60116,p=60121,m=60122,g=60117,v=60129,y=60131;if("function"===typeof Symbol&&Symbol.for){var b=Symbol.for;n=b("react.element"),r=b("react.portal"),i=b("react.fragment"),o=b("react.strict_mode"),s=b("react.profiler"),a=b("react.provider"),l=b("react.context"),c=b("react.forward_ref"),u=b("react.suspense"),d=b("react.suspense_list"),h=b("react.memo"),f=b("react.lazy"),p=b("react.block"),m=b("react.server.block"),g=b("react.fundamental"),v=b("react.debug_trace_mode"),y=b("react.legacy_hidden")}function w(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case i:case s:case o:case u:case d:return e;default:switch(e=e&&e.$$typeof){case l:case c:case f:case h:case a:return e;default:return t}}case r:return t}}}t.isContextConsumer=function(e){return w(e)===l}},86:(e,t,n)=>{e.exports=n(82)},219:(e,t,n)=>{var r=n(763),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},s={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},a={};function l(e){return r.isMemo(e)?s:a[e.$$typeof]||i}a[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},a[r.Memo]=s;var c=Object.defineProperty,u=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,f=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(p){var i=f(n);i&&i!==p&&e(t,i,r)}var s=u(n);d&&(s=s.concat(d(n)));for(var a=l(t),m=l(n),g=0;g<s.length;++g){var v=s[g];if(!o[v]&&(!r||!r[v])&&(!m||!m[v])&&(!a||!a[v])){var y=h(n,v);try{c(t,v,y)}catch(b){}}}}return t}},288:(e,t)=>{var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function y(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var w=b.prototype=new y;w.constructor=b,m(w,v.prototype),w.isPureReactComponent=!0;var k=Array.isArray,S={H:null,A:null,T:null,S:null,V:null},x=Object.prototype.hasOwnProperty;function E(e,t,r,i,o,s){return r=s.ref,{$$typeof:n,type:e,key:t,ref:void 0!==r?r:null,props:s}}function C(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var I=/\/+/g;function _(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function T(){}function N(e,t,i,o,s){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l,c,u=!1;if(null===e)u=!0;else switch(a){case"bigint":case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case r:u=!0;break;case h:return N((u=e._init)(e._payload),t,i,o,s)}}if(u)return s=s(e),u=""===o?"."+_(e,0):o,k(s)?(i="",null!=u&&(i=u.replace(I,"$&/")+"/"),N(s,t,i,"",function(e){return e})):null!=s&&(C(s)&&(l=s,c=i+(null==s.key||e&&e.key===s.key?"":(""+s.key).replace(I,"$&/")+"/")+u,s=E(l.type,c,void 0,0,0,l.props)),t.push(s)),1;u=0;var d,p=""===o?".":o+":";if(k(e))for(var m=0;m<e.length;m++)u+=N(o=e[m],t,i,a=p+_(o,m),s);else if("function"===typeof(m=null===(d=e)||"object"!==typeof d?null:"function"===typeof(d=f&&d[f]||d["@@iterator"])?d:null))for(e=m.call(e),m=0;!(o=e.next()).done;)u+=N(o=o.value,t,i,a=p+_(o,m++),s);else if("object"===a){if("function"===typeof e.then)return N(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"===typeof e.status?e.then(T,T):(e.status="pending",e.then(function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)},function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(e),t,i,o,s);throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return u}function A(e,t,n){if(null==e)return e;var r=[],i=0;return N(e,r,"","",function(e){return t.call(n,e,i++)}),r}function D(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var P="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function R(){}t.Children={map:A,forEach:function(e,t,n){A(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return A(e,function(){t++}),t},toArray:function(e){return A(e,function(e){return e})||[]},only:function(e){if(!C(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=i,t.Profiler=s,t.PureComponent=b,t.StrictMode=o,t.Suspense=u,t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=S,t.__COMPILER_RUNTIME={__proto__:null,c:function(e){return S.H.useMemoCache(e)}},t.cache=function(e){return function(){return e.apply(null,arguments)}},t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("The argument must be a React element, but you passed "+e+".");var r=m({},e.props),i=e.key;if(null!=t)for(o in void 0!==t.ref&&void 0,void 0!==t.key&&(i=""+t.key),t)!x.call(t,o)||"key"===o||"__self"===o||"__source"===o||"ref"===o&&void 0===t.ref||(r[o]=t[o]);var o=arguments.length-2;if(1===o)r.children=n;else if(1<o){for(var s=Array(o),a=0;a<o;a++)s[a]=arguments[a+2];r.children=s}return E(e.type,i,void 0,0,0,r)},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:a,_context:e},e},t.createElement=function(e,t,n){var r,i={},o=null;if(null!=t)for(r in void 0!==t.key&&(o=""+t.key),t)x.call(t,r)&&"key"!==r&&"__self"!==r&&"__source"!==r&&(i[r]=t[r]);var s=arguments.length-2;if(1===s)i.children=n;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+2];i.children=a}if(e&&e.defaultProps)for(r in s=e.defaultProps)void 0===i[r]&&(i[r]=s[r]);return E(e,o,void 0,0,0,i)},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=C,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:D}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=S.T,n={};S.T=n;try{var r=e(),i=S.S;null!==i&&i(n,r),"object"===typeof r&&null!==r&&"function"===typeof r.then&&r.then(R,P)}catch(o){P(o)}finally{S.T=t}},t.unstable_useCacheRefresh=function(){return S.H.useCacheRefresh()},t.use=function(e){return S.H.use(e)},t.useActionState=function(e,t,n){return S.H.useActionState(e,t,n)},t.useCallback=function(e,t){return S.H.useCallback(e,t)},t.useContext=function(e){return S.H.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e,t){return S.H.useDeferredValue(e,t)},t.useEffect=function(e,t,n){var r=S.H;if("function"===typeof n)throw Error("useEffect CRUD overload is not enabled in this build of React.");return r.useEffect(e,t)},t.useId=function(){return S.H.useId()},t.useImperativeHandle=function(e,t,n){return S.H.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return S.H.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return S.H.useLayoutEffect(e,t)},t.useMemo=function(e,t){return S.H.useMemo(e,t)},t.useOptimistic=function(e,t){return S.H.useOptimistic(e,t)},t.useReducer=function(e,t,n){return S.H.useReducer(e,t,n)},t.useRef=function(e){return S.H.useRef(e)},t.useState=function(e){return S.H.useState(e)},t.useSyncExternalStore=function(e,t,n){return S.H.useSyncExternalStore(e,t,n)},t.useTransition=function(){return S.H.useTransition()},t.version="19.1.1"},391:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4)},579:(e,t,n)=>{e.exports=n(799)},672:(e,t,n)=>{var r=n(43);function i(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(){}var s={d:{f:o,r:function(){throw Error(i(522))},D:o,C:o,L:o,m:o,X:o,S:o,M:o},p:0,findDOMNode:null},a=Symbol.for("react.portal");var l=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(e,t){return"font"===e?"":"string"===typeof t?"use-credentials"===t?t:"":void 0}t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)throw Error(i(299));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:a,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.flushSync=function(e){var t=l.T,n=s.p;try{if(l.T=null,s.p=2,e)return e()}finally{l.T=t,s.p=n,s.d.f()}},t.preconnect=function(e,t){"string"===typeof e&&(t?t="string"===typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:t=null,s.d.C(e,t))},t.prefetchDNS=function(e){"string"===typeof e&&s.d.D(e)},t.preinit=function(e,t){if("string"===typeof e&&t&&"string"===typeof t.as){var n=t.as,r=c(n,t.crossOrigin),i="string"===typeof t.integrity?t.integrity:void 0,o="string"===typeof t.fetchPriority?t.fetchPriority:void 0;"style"===n?s.d.S(e,"string"===typeof t.precedence?t.precedence:void 0,{crossOrigin:r,integrity:i,fetchPriority:o}):"script"===n&&s.d.X(e,{crossOrigin:r,integrity:i,fetchPriority:o,nonce:"string"===typeof t.nonce?t.nonce:void 0})}},t.preinitModule=function(e,t){if("string"===typeof e)if("object"===typeof t&&null!==t){if(null==t.as||"script"===t.as){var n=c(t.as,t.crossOrigin);s.d.M(e,{crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0})}}else null==t&&s.d.M(e)},t.preload=function(e,t){if("string"===typeof e&&"object"===typeof t&&null!==t&&"string"===typeof t.as){var n=t.as,r=c(n,t.crossOrigin);s.d.L(e,n,{crossOrigin:r,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0,type:"string"===typeof t.type?t.type:void 0,fetchPriority:"string"===typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"===typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"===typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"===typeof t.imageSizes?t.imageSizes:void 0,media:"string"===typeof t.media?t.media:void 0})}},t.preloadModule=function(e,t){if("string"===typeof e)if(t){var n=c(t.as,t.crossOrigin);s.d.m(e,{as:"string"===typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0})}else s.d.m(e)},t.requestFormReset=function(e){s.d.r(e)},t.unstable_batchedUpdates=function(e,t){return e(t)},t.useFormState=function(e,t,n){return l.H.useFormState(e,t,n)},t.useFormStatus=function(){return l.H.useHostTransitionStatus()},t.version="19.1.1"},763:(e,t,n)=>{e.exports=n(983)},799:(e,t)=>{var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function i(e,t,r){var i=null;if(void 0!==r&&(i=""+r),void 0!==t.key&&(i=""+t.key),"key"in t)for(var o in r={},t)"key"!==o&&(r[o]=t[o]);else r=t;return t=r.ref,{$$typeof:n,type:e,key:i,ref:void 0!==t?t:null,props:r}}t.Fragment=r,t.jsx=i,t.jsxs=i},853:(e,t,n)=>{e.exports=n(896)},896:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<o(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,s=i>>>1;r<s;){var a=2*(r+1)-1,l=e[a],c=a+1,u=e[c];if(0>o(l,n))c<i&&0>o(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[a]=n,r=a);else{if(!(c<i&&0>o(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function o(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(t.unstable_now=void 0,"object"===typeof performance&&"function"===typeof performance.now){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],d=1,h=null,f=3,p=!1,m=!1,g=!1,v=!1,y="function"===typeof setTimeout?setTimeout:null,b="function"===typeof clearTimeout?clearTimeout:null,w="undefined"!==typeof setImmediate?setImmediate:null;function k(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function S(e){if(g=!1,k(e),!m)if(null!==r(c))m=!0,E||(E=!0,x());else{var t=r(u);null!==t&&P(S,t.startTime-e)}}var x,E=!1,C=-1,I=5,_=-1;function T(){return!!v||!(t.unstable_now()-_<I)}function N(){if(v=!1,E){var e=t.unstable_now();_=e;var n=!0;try{e:{m=!1,g&&(g=!1,b(C),C=-1),p=!0;var o=f;try{t:{for(k(e),h=r(c);null!==h&&!(h.expirationTime>e&&T());){var s=h.callback;if("function"===typeof s){h.callback=null,f=h.priorityLevel;var a=s(h.expirationTime<=e);if(e=t.unstable_now(),"function"===typeof a){h.callback=a,k(e),n=!0;break t}h===r(c)&&i(c),k(e)}else i(c);h=r(c)}if(null!==h)n=!0;else{var l=r(u);null!==l&&P(S,l.startTime-e),n=!1}}break e}finally{h=null,f=o,p=!1}n=void 0}}finally{n?x():E=!1}}}if("function"===typeof w)x=function(){w(N)};else if("undefined"!==typeof MessageChannel){var A=new MessageChannel,D=A.port2;A.port1.onmessage=N,x=function(){D.postMessage(null)}}else x=function(){y(N,0)};function P(e,n){C=y(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_requestPaint=function(){v=!0},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,o){var s=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?s+o:s:o=s,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:d++,callback:i,priorityLevel:e,startTime:o,expirationTime:a=o+a,sortIndex:-1},o>s?(e.sortIndex=o,n(u,e),null===r(c)&&e===r(u)&&(g?(b(C),C=-1):g=!0,P(S,o-s))):(e.sortIndex=a,n(c,e),m||p||(m=!0,E||(E=!0,x()))),e},t.unstable_shouldYield=T,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},950:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(672)},983:(e,t)=>{var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,o=n?Symbol.for("react.fragment"):60107,s=n?Symbol.for("react.strict_mode"):60108,a=n?Symbol.for("react.profiler"):60114,l=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,u=n?Symbol.for("react.async_mode"):60111,d=n?Symbol.for("react.concurrent_mode"):60111,h=n?Symbol.for("react.forward_ref"):60112,f=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,m=n?Symbol.for("react.memo"):60115,g=n?Symbol.for("react.lazy"):60116,v=n?Symbol.for("react.block"):60121,y=n?Symbol.for("react.fundamental"):60117,b=n?Symbol.for("react.responder"):60118,w=n?Symbol.for("react.scope"):60119;function k(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case u:case d:case o:case a:case s:case f:return e;default:switch(e=e&&e.$$typeof){case c:case h:case g:case m:case l:return e;default:return t}}case i:return t}}}function S(e){return k(e)===d}t.AsyncMode=u,t.ConcurrentMode=d,t.ContextConsumer=c,t.ContextProvider=l,t.Element=r,t.ForwardRef=h,t.Fragment=o,t.Lazy=g,t.Memo=m,t.Portal=i,t.Profiler=a,t.StrictMode=s,t.Suspense=f,t.isAsyncMode=function(e){return S(e)||k(e)===u},t.isConcurrentMode=S,t.isContextConsumer=function(e){return k(e)===c},t.isContextProvider=function(e){return k(e)===l},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return k(e)===h},t.isFragment=function(e){return k(e)===o},t.isLazy=function(e){return k(e)===g},t.isMemo=function(e){return k(e)===m},t.isPortal=function(e){return k(e)===i},t.isProfiler=function(e){return k(e)===a},t.isStrictMode=function(e){return k(e)===s},t.isSuspense=function(e){return k(e)===f},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===o||e===d||e===a||e===s||e===f||e===p||"object"===typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===m||e.$$typeof===l||e.$$typeof===c||e.$$typeof===h||e.$$typeof===y||e.$$typeof===b||e.$$typeof===w||e.$$typeof===v)},t.typeOf=k}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.p="/";var r=n(43),i=n(391);function o(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}function s(e,t){if(null==e)return{};var n,r,i=o(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function l(e){var t=function(e,t){if("object"!=a(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==a(t)?t:t+""}function c(e,t,n){return(t=l(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach(function(t){c(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}const h=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},f={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],o=i+1<e.length,s=o?e[i+1]:0,a=i+2<e.length,l=a?e[i+2]:0,c=t>>2,u=(3&t)<<4|s>>4;let d=(15&s)<<2|l>>6,h=63&l;a||(h=64,o||(d=64)),r.push(n[c],n[u],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(h(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){const o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{const o=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0;++i;const s=i<e.length?n[e.charAt(i)]:64;++i;const a=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==o||null==s||null==a)throw new p;const l=t<<2|o>>4;if(r.push(l),64!==s){const e=o<<4&240|s>>2;if(r.push(e),64!==a){const e=s<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class p extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const m=function(e){return function(e){const t=h(e);return f.encodeByteArray(t,!0)}(e).replace(/\./g,"")},g=function(e){try{return f.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function v(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}const y=()=>{try{return v().__FIREBASE_DEFAULTS__||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyDQcOtn1iNoYtEezwMIpauCnZ3pdM2fyW0",REACT_APP_FIREBASE_AUTH_DOMAIN:"tenminutesfromhell.firebaseapp.com",REACT_APP_FIREBASE_PROJECT_ID:"tenminutesfromhell",REACT_APP_FIREBASE_STORAGE_BUCKET:"tenminutesfromhell.firebasestorage.app",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"24426608546",REACT_APP_FIREBASE_APP_ID:"1:24426608546:web:a38f1e008d0968d8c2a4fb"}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&g(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},b=e=>{var t;return null===(t=y())||void 0===t||null===(t=t.emulatorHosts)||void 0===t?void 0:t[e]},w=()=>{var e;return null===(e=y())||void 0===e?void 0:e.config},k=e=>{var t;return null===(t=y())||void 0===t?void 0:t["_".concat(e)]};class S{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function x(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch(t){return!1}}async function E(e){return(await fetch(e,{credentials:"include"})).ok}const C={};let I=!1;function _(e,t){if("undefined"===typeof window||"undefined"===typeof document||!x(window.location.host)||C[e]===t||C[e]||I)return;function n(e){return"__firebase__banner__".concat(e)}C[e]=t;const r="__firebase__banner",i=function(){const e={prod:[],emulator:[]};for(const t of Object.keys(C))C[t]?e.emulator.push(t):e.prod.push(t);return e}().prod.length>0;function o(){const e=document.createElement("span");return e.style.cursor="pointer",e.style.marginLeft="16px",e.style.fontSize="24px",e.innerHTML=" &times;",e.onclick=()=>{I=!0,function(){const e=document.getElementById(r);e&&e.remove()}()},e}function s(){const e=function(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}(r),t=n("text"),s=document.getElementById(t)||document.createElement("span"),a=n("learnmore"),l=document.getElementById(a)||document.createElement("a"),c=n("preprendIcon"),u=document.getElementById(c)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(e.created){const t=e.element;!function(e){e.style.display="flex",e.style.background="#7faaf0",e.style.position="fixed",e.style.bottom="5px",e.style.left="5px",e.style.padding=".5em",e.style.borderRadius="5px",e.style.alignItems="center"}(t),function(e,t){e.setAttribute("id",t),e.innerText="Learn more",e.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",e.setAttribute("target","__blank"),e.style.paddingLeft="5px",e.style.textDecoration="underline"}(l,a);const n=o();!function(e,t){e.setAttribute("width","24"),e.setAttribute("id",t),e.setAttribute("height","24"),e.setAttribute("viewBox","0 0 24 24"),e.setAttribute("fill","none"),e.style.marginLeft="-6px"}(u,c),t.append(u,s,l,n),document.body.appendChild(t)}i?(s.innerText="Preview backend disconnected.",u.innerHTML='<g clip-path="url(#clip0_6013_33858)">\n<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6013_33858">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>'):(u.innerHTML='<g clip-path="url(#clip0_6083_34804)">\n<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6083_34804">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>',s.innerText="Preview backend running in this workspace."),s.setAttribute("id",t)}"loading"===document.readyState?window.addEventListener("DOMContentLoaded",s):s()}function T(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function N(){var e;const t=null===(e=y())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}function A(){return!N()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function D(){try{return"object"===typeof indexedDB}catch(e){return!1}}class P extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,P.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,R.prototype.create)}}class R{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(L,(e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")})}(r,t):"Error",o="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new P(n,o,t)}}const L=/\{\$([^}]+)}/g;function O(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],o=t[i];if(M(n)&&M(o)){if(!O(n,o))return!1}else if(n!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function M(e){return null!==e&&"object"===typeof e}function j(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function F(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function B(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class U{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=V),void 0===r.error&&(r.error=V),void 0===r.complete&&(r.complete=V);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}}),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function V(){}function z(e){return e&&e._delegate?e._delegate:e}class W{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const H="[DEFAULT]";class q{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new S;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:H})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,o]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&o.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===H?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(o){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H;return this.component?this.component.multipleInstances?e:H:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class G{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new q(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const K=[];var Q;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Q||(Q={}));const Y={debug:Q.DEBUG,verbose:Q.VERBOSE,info:Q.INFO,warn:Q.WARN,error:Q.ERROR,silent:Q.SILENT},$=Q.INFO,X={[Q.DEBUG]:"log",[Q.VERBOSE]:"log",[Q.INFO]:"info",[Q.WARN]:"warn",[Q.ERROR]:"error"},J=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=X[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,o=new Array(i>2?i-2:0),s=2;s<i;s++)o[s-2]=arguments[s];console[r]("[".concat(n,"]  ").concat(e.name,":"),...o)};class Z{constructor(e){this.name=e,this._logLevel=$,this._logHandler=J,this._userLogHandler=null,K.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Q))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?Y[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Q.DEBUG,...t),this._logHandler(this,Q.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Q.VERBOSE,...t),this._logHandler(this,Q.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Q.INFO,...t),this._logHandler(this,Q.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Q.WARN,...t),this._logHandler(this,Q.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Q.ERROR,...t),this._logHandler(this,Q.ERROR,...t)}}let ee,te;const ne=new WeakMap,re=new WeakMap,ie=new WeakMap,oe=new WeakMap,se=new WeakMap;let ae={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return re.get(e);if("objectStoreNames"===t)return e.objectStoreNames||ie.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ue(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function le(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(te||(te=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(de(this),n),ue(ne.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return ue(e.apply(de(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const o=e.call(de(this),t,...r);return ie.set(o,t.sort?t.sort():[t]),ue(o)}}function ce(e){return"function"===typeof e?le(e):(e instanceof IDBTransaction&&function(e){if(re.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",o),e.removeEventListener("abort",o)},i=()=>{t(),r()},o=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",o),e.addEventListener("abort",o)});re.set(e,t)}(e),t=e,(ee||(ee=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,ae):e);var t}function ue(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",o)},i=()=>{t(ue(e.result)),r()},o=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",o)});return t.then(t=>{t instanceof IDBCursor&&ne.set(t,e)}).catch(()=>{}),se.set(t,e),t}(e);if(oe.has(e))return oe.get(e);const t=ce(e);return t!==e&&(oe.set(e,t),se.set(t,e)),t}const de=e=>se.get(e);const he=["get","getKey","getAll","getAllKeys","count"],fe=["put","add","delete","clear"],pe=new Map;function me(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(pe.get(t))return pe.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=fe.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!he.includes(n))return;const o=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let o=t.store;for(var s=arguments.length,a=new Array(s>1?s-1:0),l=1;l<s;l++)a[l-1]=arguments[l];return r&&(o=o.index(a.shift())),(await Promise.all([o[n](...a),i&&t.done]))[0]};return pe.set(t,o),o}ae=(e=>d(d({},e),{},{get:(t,n,r)=>me(t,n)||e.get(t,n,r),has:(t,n)=>!!me(t,n)||e.has(t,n)}))(ae);class ge{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null}).filter(e=>e).join(" ")}}const ve="@firebase/app",ye="0.14.8",be=new Z("@firebase/app"),we="@firebase/app-compat",ke="@firebase/analytics-compat",Se="@firebase/analytics",xe="@firebase/app-check-compat",Ee="@firebase/app-check",Ce="@firebase/auth",Ie="@firebase/auth-compat",_e="@firebase/database",Te="@firebase/data-connect",Ne="@firebase/database-compat",Ae="@firebase/functions",De="@firebase/functions-compat",Pe="@firebase/installations",Re="@firebase/installations-compat",Le="@firebase/messaging",Oe="@firebase/messaging-compat",Me="@firebase/performance",je="@firebase/performance-compat",Fe="@firebase/remote-config",Be="@firebase/remote-config-compat",Ue="@firebase/storage",Ve="@firebase/storage-compat",ze="@firebase/firestore",We="@firebase/ai",He="@firebase/firestore-compat",qe="firebase",Ge="[DEFAULT]",Ke={[ve]:"fire-core",[we]:"fire-core-compat",[Se]:"fire-analytics",[ke]:"fire-analytics-compat",[Ee]:"fire-app-check",[xe]:"fire-app-check-compat",[Ce]:"fire-auth",[Ie]:"fire-auth-compat",[_e]:"fire-rtdb",[Te]:"fire-data-connect",[Ne]:"fire-rtdb-compat",[Ae]:"fire-fn",[De]:"fire-fn-compat",[Pe]:"fire-iid",[Re]:"fire-iid-compat",[Le]:"fire-fcm",[Oe]:"fire-fcm-compat",[Me]:"fire-perf",[je]:"fire-perf-compat",[Fe]:"fire-rc",[Be]:"fire-rc-compat",[Ue]:"fire-gcs",[Ve]:"fire-gcs-compat",[ze]:"fire-fst",[He]:"fire-fst-compat",[We]:"fire-vertex","fire-js":"fire-js",[qe]:"fire-js-all"},Qe=new Map,Ye=new Map,$e=new Map;function Xe(e,t){try{e.container.addComponent(t)}catch(n){be.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function Je(e){const t=e.name;if($e.has(t))return be.debug("There were multiple attempts to register component ".concat(t,".")),!1;$e.set(t,e);for(const n of Qe.values())Xe(n,e);for(const n of Ye.values())Xe(n,e);return!0}function Ze(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function et(e){return null!==e&&void 0!==e&&void 0!==e.settings}const tt=new R("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class nt{constructor(e,t,n){this._isDeleted=!1,this._options=d({},e),this._config=d({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new W("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw tt.create("app-deleted",{appName:this._name})}}const rt="12.9.0";function it(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=d({name:Ge,automaticDataCollectionEnabled:!0},t),i=r.name;if("string"!==typeof i||!i)throw tt.create("bad-app-name",{appName:String(i)});if(n||(n=w()),!n)throw tt.create("no-options");const o=Qe.get(i);if(o){if(O(n,o.options)&&O(r,o.config))return o;throw tt.create("duplicate-app",{appName:i})}const s=new G(i);for(const l of $e.values())s.addComponent(l);const a=new nt(n,r,s);return Qe.set(i,a),a}function ot(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ge;const t=Qe.get(e);if(!t&&e===Ge&&w())return it();if(!t)throw tt.create("no-app",{appName:e});return t}function st(e,t,n){var r;let i=null!==(r=Ke[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));const o=i.match(/\s|\//),s=t.match(/\s|\//);if(o||s){const e=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return o&&e.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),o&&s&&e.push("and"),s&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void be.warn(e.join(" "))}Je(new W("".concat(i,"-version"),()=>({library:i,version:t}),"VERSION"))}const at="firebase-heartbeat-store";let lt=null;function ct(){return lt||(lt=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:o}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=indexedDB.open(e,t),a=ue(s);return r&&s.addEventListener("upgradeneeded",e=>{r(ue(s.result),e.oldVersion,e.newVersion,ue(s.transaction),e)}),n&&s.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),a.then(e=>{o&&e.addEventListener("close",()=>o()),i&&e.addEventListener("versionchange",e=>i(e.oldVersion,e.newVersion,e))}).catch(()=>{}),a}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(at)}catch(n){console.warn(n)}}}).catch(e=>{throw tt.create("idb-open",{originalErrorMessage:e.message})})),lt}async function ut(e,t){try{const n=(await ct()).transaction(at,"readwrite"),r=n.objectStore(at);await r.put(t,dt(e)),await n.done}catch(n){if(n instanceof P)be.warn(n.message);else{const e=tt.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});be.warn(e.message)}}}function dt(e){return"".concat(e.name,"!").concat(e.options.appId)}class ht{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new pt(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){try{var e;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=ft();var t;if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats))if(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(e=>e.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>30){const e=function(e){if(0===e.length)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){be.warn(n)}}async getHeartbeatsHeader(){try{var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=ft(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find(e=>e.agent===i.agent);if(e){if(e.dates.push(i.date),mt(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),mt(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=m(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(t){return be.warn(t),""}}}function ft(){return(new Date).toISOString().substring(0,10)}class pt{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!D()&&new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}}).then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await ct()).transaction(at),n=await t.objectStore(at).get(dt(e));return await t.done,n}catch(t){if(t instanceof P)be.warn(t.message);else{const e=tt.create("idb-get",{originalErrorMessage:null===t||void 0===t?void 0:t.message});be.warn(e.message)}}}(this.app);return null!==e&&void 0!==e&&e.heartbeats?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){var t;const n=await this.read();return ut(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){if(await this._canUseIndexedDBPromise){var t;const n=await this.read();return ut(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function mt(e){return m(JSON.stringify({version:2,heartbeats:e})).length}var gt;gt="",Je(new W("platform-logger",e=>new ge(e),"PRIVATE")),Je(new W("heartbeat",e=>new ht(e),"PRIVATE")),st(ve,ye,gt),st(ve,ye,"esm2020"),st("fire-js","");const vt=["providerId"],yt=["uid","auth","stsTokenManager"],bt=["providerId","signInMethod"];function wt(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const kt=wt,St=new R("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),xt=new Z("@firebase/auth");function Et(e){if(xt.logLevel<=Q.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];xt.error("Auth (".concat(rt,"): ").concat(e),...n)}}function Ct(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw At(e,...n)}function It(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return At(e,...n)}function _t(e,t,n){const r=d(d({},kt()),{},{[t]:n});return new R("auth","Firebase",r).create(t,{appName:e.name})}function Tt(e){return _t(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Nt(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&Ct(e,"argument-error"),_t(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function At(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return St.create(e,...n)}function Dt(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw At(t,...r)}}function Pt(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Et(t),new Error(t)}function Rt(e,t){e||Pt(t)}function Lt(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Ot(){return"http:"===Mt()||"https:"===Mt()}function Mt(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function jt(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Ot()||function(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}class Ft{constructor(e,t){this.shortDelay=e,this.longDelay=t,Rt(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(T())||"object"===typeof navigator&&"ReactNative"===navigator.product}get(){return jt()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Bt(e,t){Rt(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class Ut{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void Pt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void Pt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void Pt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Vt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},zt=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Wt=new Ft(3e4,6e4);function Ht(e,t){return e.tenantId&&!t.tenantId?d(d({},t),{},{tenantId:e.tenantId}):t}async function qt(e,t,n,r){return Gt(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},async()=>{let i={},o={};r&&("GET"===t?o=r:i={body:JSON.stringify(r)});const s=j(d({key:e.config.apiKey},o)).slice(1),a=await e._getAdditionalHeaders();a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode);const l=d({method:t,headers:a},i);return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||(l.referrerPolicy="no-referrer"),e.emulatorConfig&&x(e.emulatorConfig.host)&&(l.credentials="include"),Ut.fetch()(await Qt(e,e.config.apiHost,n,s),l)})}async function Gt(e,t,n){e._canInitEmulator=!1;const r=d(d({},Vt),t);try{const t=new $t(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Xt(e,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const t=i.ok?o.errorMessage:o.error.message,[n,s]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw Xt(e,"credential-already-in-use",o);if("EMAIL_EXISTS"===n)throw Xt(e,"email-already-in-use",o);if("USER_DISABLED"===n)throw Xt(e,"user-disabled",o);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(s)throw _t(e,a,s);Ct(e,a)}}catch(i){if(i instanceof P)throw i;Ct(e,"network-request-failed",{message:String(i)})}}async function Kt(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const o=await qt(e,t,n,r,i);return"mfaPendingCredential"in o&&Ct(e,"multi-factor-auth-required",{_serverResponse:o}),o}async function Qt(e,t,n,r){const i="".concat(t).concat(n,"?").concat(r),o=e,s=o.config.emulator?Bt(e.config,i):"".concat(e.config.apiScheme,"://").concat(i);if(zt.includes(n)&&(await o._persistenceManagerAvailable,"COOKIE"===o._getPersistenceType())){return o._getPersistence()._getFinalTarget(s).toString()}return s}function Yt(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class $t{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(It(this.auth,"network-request-failed")),Wt.get())})}}function Xt(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=It(e,t,r);return i.customData._tokenResponse=n,i}function Jt(e){return void 0!==e&&void 0!==e.enterprise}class Zt{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Yt(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function en(e,t){return qt(e,"GET","/v2/recaptchaConfig",Ht(e,t))}async function tn(e,t){return qt(e,"POST","/v1/accounts:lookup",t)}function nn(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function rn(e){return 1e3*Number(e)}function on(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return Et("JWT malformed, contained fewer than 3 sections"),null;try{const e=g(n);return e?JSON.parse(e):(Et("Failed to decode base64 JWT payload"),null)}catch(i){return Et("Caught error parsing JWT payload as JSON",null===i||void 0===i?void 0:i.toString()),null}}function sn(e){const t=on(e);return Dt(t,"internal-error"),Dt("undefined"!==typeof t.exp,"internal-error"),Dt("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function an(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(n){throw n instanceof P&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}class ln{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{var t;this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void((null===e||void 0===e?void 0:e.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class cn{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=nn(this.lastLoginAt),this.creationTime=nn(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function un(e){var t;const n=e.auth,r=await e.getIdToken(),i=await an(e,tn(n,{idToken:r}));Dt(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const o=i.users[0];e._notifyReloadListener(o);const s=null!==(t=o.providerUserInfo)&&void 0!==t&&t.length?dn(o.providerUserInfo):[],a=(l=e.providerData,c=s,[...l.filter(e=>!c.some(t=>t.providerId===e.providerId)),...c]);var l,c;const u=e.isAnonymous,d=!(e.email&&o.passwordHash)&&!(null!==a&&void 0!==a&&a.length),h=!!u&&d,f={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new cn(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(e,f)}function dn(e){return e.map(e=>{let{providerId:t}=e,n=s(e,vt);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}class hn{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Dt(e.idToken,"internal-error"),Dt("undefined"!==typeof e.idToken,"internal-error"),Dt("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):sn(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Dt(0!==e.length,"internal-error");const t=sn(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(Dt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await Gt(e,{},async()=>{const n=j({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,o=await Qt(e,r,"/v1/token","key=".concat(i)),s=await e._getAdditionalHeaders();s["Content-Type"]="application/x-www-form-urlencoded";const a={method:"POST",headers:s,body:n};return e.emulatorConfig&&x(e.emulatorConfig.host)&&(a.credentials="include"),Ut.fetch()(o,a)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,o=new hn;return n&&(Dt("string"===typeof n,"internal-error",{appName:e}),o.refreshToken=n),r&&(Dt("string"===typeof r,"internal-error",{appName:e}),o.accessToken=r),i&&(Dt("number"===typeof i,"internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new hn,this.toJSON())}_performRefresh(){return Pt("not implemented")}}function fn(e,t){Dt("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class pn{constructor(e){let{uid:t,auth:n,stsTokenManager:r}=e,i=s(e,yt);this.providerId="firebase",this.proactiveRefresh=new ln(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new cn(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await an(this,this.stsTokenManager.getToken(this.auth,e));return Dt(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=z(e),r=await n.getIdToken(t),i=on(r);Dt(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const o="object"===typeof i.firebase?i.firebase:void 0,s=null===o||void 0===o?void 0:o.sign_in_provider;return{claims:i,token:r,authTime:nn(rn(i.auth_time)),issuedAtTime:nn(rn(i.iat)),expirationTime:nn(rn(i.exp)),signInProvider:s||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=z(e);await un(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(Dt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>d({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new pn(d(d({},this),{},{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Dt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await un(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(et(this.auth.app))return Promise.reject(Tt(this.auth));const e=await this.getIdToken();return await an(this,async function(e,t){return qt(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return d(d({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>d({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{},{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,o,s,a,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,f=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,p=null!==(o=t.photoURL)&&void 0!==o?o:void 0,m=null!==(s=t.tenantId)&&void 0!==s?s:void 0,g=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,v=null!==(l=t.createdAt)&&void 0!==l?l:void 0,y=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:b,emailVerified:w,isAnonymous:k,providerData:S,stsTokenManager:x}=t;Dt(b&&x,e,"internal-error");const E=hn.fromJSON(this.name,x);Dt("string"===typeof b,e,"internal-error"),fn(u,e.name),fn(h,e.name),Dt("boolean"===typeof w,e,"internal-error"),Dt("boolean"===typeof k,e,"internal-error"),fn(f,e.name),fn(p,e.name),fn(m,e.name),fn(g,e.name),fn(v,e.name),fn(y,e.name);const C=new pn({uid:b,auth:e,email:h,emailVerified:w,displayName:u,isAnonymous:k,photoURL:p,phoneNumber:f,tenantId:m,stsTokenManager:E,createdAt:v,lastLoginAt:y});return S&&Array.isArray(S)&&(C.providerData=S.map(e=>d({},e))),g&&(C._redirectEventId=g),C}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new hn;r.updateFromServerResponse(t);const i=new pn({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await un(i),i}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];Dt(void 0!==r.localId,"internal-error");const i=void 0!==r.providerUserInfo?dn(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!(null!==i&&void 0!==i&&i.length),s=new hn;s.updateFromIdToken(n);const a=new pn({uid:r.localId,auth:e,stsTokenManager:s,isAnonymous:o}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new cn(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null!==i&&void 0!==i&&i.length)};return Object.assign(a,l),a}}const mn=new Map;function gn(e){Rt(e instanceof Function,"Expected a class definition");let t=mn.get(e);return t?(Rt(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,mn.set(e,t),t)}class vn{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}vn.type="NONE";const yn=vn;function bn(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class wn{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=bn(this.userKey,r.apiKey,i),this.fullPersistenceKey=bn("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if("string"===typeof e){const t=await tn(this.auth,{idToken:e}).catch(()=>{});return t?pn._fromGetAccountInfoResponse(this.auth,t,e):null}return pn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new wn(gn(yn),e,n);const r=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let i=r[0]||gn(yn);const o=bn(n,e.config.apiKey,e.name);let s=null;for(const c of t)try{const t=await c._get(o);if(t){let n;if("string"===typeof t){const r=await tn(e,{idToken:t}).catch(()=>{});if(!r)break;n=await pn._fromGetAccountInfoResponse(e,r,t)}else n=pn._fromJSON(e,t);c!==i&&(s=n),i=c;break}}catch(l){}const a=r.filter(e=>e._shouldAllowMigration);return i._shouldAllowMigration&&a.length?(i=a[0],s&&await i._set(o,s.toJSON()),await Promise.all(t.map(async e=>{if(e!==i)try{await e._remove(o)}catch(t){}})),new wn(i,e,n)):new wn(i,e,n)}}function kn(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Cn(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Sn(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(_n(t))return"Blackberry";if(Tn(t))return"Webos";if(xn(t))return"Safari";if((t.includes("chrome/")||En(t))&&!t.includes("edge/"))return"Chrome";if(In(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function Sn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T();return/firefox\//i.test(e)}function xn(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:T()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function En(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T();return/crios\//i.test(e)}function Cn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T();return/iemobile/i.test(e)}function In(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T();return/android/i.test(e)}function _n(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T();return/blackberry/i.test(e)}function Tn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T();return/webos/i.test(e)}function Nn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function An(){return function(){const e=T();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function Dn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T();return Nn(e)||In(e)||Tn(e)||_n(e)||/windows phone/i.test(e)||Cn(e)}function Pn(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=kn(T());break;case"Worker":t="".concat(kn(T()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(rt,"/").concat(r)}class Rn{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,r)=>{try{n(e(t))}catch(i){r(i)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const e of t)try{e()}catch(r){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===n||void 0===n?void 0:n.message})}}}class Ln{constructor(e){var t,n,r,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=o.minPasswordLength)&&void 0!==t?t:6,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),void 0!==o.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),void 0!==o.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),void 0!==o.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),void 0!==o.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(n=null===(r=e.allowedNonAlphanumericCharacters)||void 0===r?void 0:r.join(""))&&void 0!==n?n:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,o,s;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=null===(t=a.meetsMinPasswordLength)||void 0===t||t),a.isValid&&(a.isValid=null===(n=a.meetsMaxPasswordLength)||void 0===n||n),a.isValid&&(a.isValid=null===(r=a.containsLowercaseLetter)||void 0===r||r),a.isValid&&(a.isValid=null===(i=a.containsUppercaseLetter)||void 0===i||i),a.isValid&&(a.isValid=null===(o=a.containsNumericCharacter)||void 0===o||o),a.isValid&&(a.isValid=null===(s=a.containsNonAlphanumericCharacter)||void 0===s||s),a}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class On{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new jn(this),this.idTokenSubscription=new jn(this),this.beforeStateQueue=new Rn(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=St,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(e=>this._resolvePersistenceManagerAvailable=e)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=gn(t)),this._initializationPromise=this.queue(async()=>{var n,r,i;if(!this._deleted&&(this.persistenceManager=await wn.create(this,e),null===(n=this._resolvePersistenceManagerAvailable)||void 0===n||n.call(this),!this._deleted)){if(null!==(r=this._popupRedirectResolver)&&void 0!==r&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(o){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(i=this.currentUser)||void 0===i?void 0:i.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await tn(this,{idToken:e}),n=await pn._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(et(this.app)){const e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let n=t,r=!1;if(e&&this.config.authDomain){var i,o;await this.getOrInitRedirectPersistenceManager();const t=null===(i=this.redirectUser)||void 0===i?void 0:i._redirectEventId,s=null===(o=n)||void 0===o?void 0:o._redirectEventId,a=await this.tryRedirectSignIn(e);t&&t!==s||null===a||void 0===a||!a.user||(n=a.user,r=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(n)}catch(s){n=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return Dt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(n){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await un(e)}catch(t){if((null===t||void 0===t?void 0:t.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(et(this.app))return Promise.reject(Tt(this));const t=e?z(e):null;return t&&Dt(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&Dt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return et(this.app)?Promise.reject(Tt(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return et(this.app)?Promise.reject(Tt(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(gn(e))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return qt(e,"GET","/v2/passwordPolicy",Ht(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new Ln(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new R("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return qt(e,"POST","/v2/accounts:revokeToken",Ht(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&gn(e)||this._popupRedirectResolver;Dt(t,this,"argument-error"),this.redirectPersistenceManager=await wn.create(this,[gn(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(e=null===(t=this.currentUser)||void 0===t?void 0:t.uid)&&void 0!==e?e:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let o=!1;const s=this._isInitialized?Promise.resolve():this._initializationPromise;if(Dt(s,this,"internal-error"),s.then(()=>{o||i(this.currentUser)}),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{o=!0,i()}}{const n=e.addObserver(t);return()=>{o=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Dt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Pn(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;if(et(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return null!==t&&void 0!==t&&t.error&&function(e){if(xt.logLevel<=Q.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];xt.warn("Auth (".concat(rt,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function Mn(e){return z(e)}class jn{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new U(e,t);return n.subscribe.bind(n)}(e=>this.observer=e)}get next(){return Dt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Fn={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Bn(e){return Fn.loadJS(e)}function Un(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class Vn{constructor(){this.enterprise=new zn}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class zn{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const Wn="NO_RECAPTCHA";class Hn{constructor(e){this.type="recaptcha-enterprise",this.auth=Mn(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;Jt(i)?i.enterprise.ready(()=>{i.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n(Wn)})}):r(Error("No reCAPTCHA enterprise script loaded."))}if(this.auth.settings.appVerificationDisabledForTesting){return(new Vn).execute("siteKey",{action:"verify"})}return new Promise((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{en(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(r=>{if(void 0!==r.recaptchaKey){const n=new Zt(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))}).catch(e=>{n(e)})})})(this.auth).then(i=>{if(!t&&Jt(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=Fn.recaptchaEnterpriseScript;0!==t.length&&(t+=i),Bn(t).then(()=>{n(i,e,r)}).catch(e=>{r(e)})}}).catch(e=>{r(e)})})}}async function qn(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const o=new Hn(e);let s;if(i)s=Wn;else try{s=await o.verify(n)}catch(l){s=await o.verify(n,!0)}const a=d({},t);if("mfaSmsEnrollment"===n||"mfaSmsSignIn"===n){if("phoneEnrollmentInfo"in a){const e=a.phoneEnrollmentInfo.phoneNumber,t=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:t,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const e=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Gn(e,t,n,r,i){if("EMAIL_PASSWORD_PROVIDER"===i){var o;if(null!==(o=e._getRecaptchaConfig())&&void 0!==o&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await qn(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch(async i=>{if(i.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const i=await qn(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)})}if("PHONE_PROVIDER"===i){var s;if(null!==(s=e._getRecaptchaConfig())&&void 0!==s&&s.isProviderEnabled("PHONE_PROVIDER")){const i=await qn(e,t,n);return r(e,i).catch(async i=>{var o;if("AUDIT"===(null===(o=e._getRecaptchaConfig())||void 0===o?void 0:o.getProviderEnforcementState("PHONE_PROVIDER"))&&(i.code==="auth/".concat("missing-recaptcha-token")||i.code==="auth/".concat("invalid-app-credential"))){console.log("Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ".concat(n," flow."));const i=await qn(e,t,n,!1,!0);return r(e,i)}return Promise.reject(i)})}{const i=await qn(e,t,n,!1,!0);return r(e,i)}}return Promise.reject(i+" provider is not supported.")}async function Kn(e){const t=Mn(e),n=await en(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new Zt(n);if(null==t.tenantId?t._agentRecaptchaConfig=r:t._tenantRecaptchaConfigs[t.tenantId]=r,r.isAnyProviderEnabled()){new Hn(t).verify()}}function Qn(e,t,n){const r=Mn(e);Dt(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!(null===n||void 0===n||!n.disableWarnings),o=Yn(t),{host:s,port:a}=function(e){const t=Yn(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:$n(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:$n(t)}}}(t),l=null===a?"":":".concat(a),c={url:"".concat(o,"//").concat(s).concat(l,"/")},u=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator)return Dt(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),void Dt(O(c,r.config.emulator)&&O(u,r.emulatorConfig),r,"emulator-config-failed");r.config.emulator=c,r.emulatorConfig=u,r.settings.appVerificationDisabledForTesting=!0,x(s)?(E("".concat(o,"//").concat(s).concat(l)),_("Auth",!0)):i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Yn(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function $n(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Xn{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Pt("not implemented")}_getIdTokenResponse(e){return Pt("not implemented")}_linkToIdToken(e,t){return Pt("not implemented")}_getReauthenticationResolver(e){return Pt("not implemented")}}async function Jn(e,t){return qt(e,"POST","/v1/accounts:signUp",t)}async function Zn(e,t){return Kt(e,"POST","/v1/accounts:signInWithPassword",Ht(e,t))}class er extends Xn{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new er(e,t,"password")}static _fromEmailAndCode(e,t){return new er(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if(null!==t&&void 0!==t&&t.email&&null!==t&&void 0!==t&&t.password){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return Gn(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Zn,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return Kt(e,"POST","/v1/accounts:signInWithEmailLink",Ht(e,t))}(e,{email:this._email,oobCode:this._password});default:Ct(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return Gn(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Jn,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return Kt(e,"POST","/v1/accounts:signInWithEmailLink",Ht(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:Ct(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function tr(e,t){return Kt(e,"POST","/v1/accounts:signInWithIdp",Ht(e,t))}class nr extends Xn{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new nr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Ct("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=s(t,bt);if(!n||!r)return null;const o=new nr(n,r);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){return tr(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,tr(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,tr(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=j(t)}return e}}async function rr(e,t){return qt(e,"POST","/v1/accounts:sendVerificationCode",Ht(e,t))}const ir={USER_NOT_FOUND:"user-not-found"};class or extends Xn{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new or({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new or({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return Kt(e,"POST","/v1/accounts:signInWithPhoneNumber",Ht(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await Kt(e,"POST","/v1/accounts:signInWithPhoneNumber",Ht(e,t));if(n.temporaryProof)throw Xt(e,"account-exists-with-different-credential",n);return n}(e,d({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return Kt(e,"POST","/v1/accounts:signInWithPhoneNumber",Ht(e,d(d({},t),{},{operation:"REAUTH"})),ir)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new or({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class sr{constructor(e){var t,n,r,i,o,s;const a=F(B(e)),l=null!==(t=a.apiKey)&&void 0!==t?t:null,c=null!==(n=a.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=a.mode)&&void 0!==r?r:null);Dt(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(i=a.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(o=a.lang)&&void 0!==o?o:null,this.tenantId=null!==(s=a.tenantId)&&void 0!==s?s:null}static parseLink(e){const t=function(e){const t=F(B(e)).link,n=t?F(B(t)).deep_link_id:null,r=F(B(e)).deep_link_id;return(r?F(B(r)).link:null)||r||n||t||e}(e);try{return new sr(t)}catch(n){return null}}}class ar{constructor(){this.providerId=ar.PROVIDER_ID}static credential(e,t){return er._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=sr.parseLink(t);return Dt(n,"argument-error"),er._fromEmailAndCode(e,n.code,n.tenantId)}}ar.PROVIDER_ID="password",ar.EMAIL_PASSWORD_SIGN_IN_METHOD="password",ar.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class lr{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class cr extends lr{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class ur extends cr{constructor(){super("facebook.com")}static credential(e){return nr._fromParams({providerId:ur.PROVIDER_ID,signInMethod:ur.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ur.credentialFromTaggedObject(e)}static credentialFromError(e){return ur.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return ur.credential(t.oauthAccessToken)}catch(n){return null}}}ur.FACEBOOK_SIGN_IN_METHOD="facebook.com",ur.PROVIDER_ID="facebook.com";class dr extends cr{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return nr._fromParams({providerId:dr.PROVIDER_ID,signInMethod:dr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return dr.credentialFromTaggedObject(e)}static credentialFromError(e){return dr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return dr.credential(n,r)}catch(i){return null}}}dr.GOOGLE_SIGN_IN_METHOD="google.com",dr.PROVIDER_ID="google.com";class hr extends cr{constructor(){super("github.com")}static credential(e){return nr._fromParams({providerId:hr.PROVIDER_ID,signInMethod:hr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return hr.credentialFromTaggedObject(e)}static credentialFromError(e){return hr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return hr.credential(t.oauthAccessToken)}catch(n){return null}}}hr.GITHUB_SIGN_IN_METHOD="github.com",hr.PROVIDER_ID="github.com";class fr extends cr{constructor(){super("twitter.com")}static credential(e,t){return nr._fromParams({providerId:fr.PROVIDER_ID,signInMethod:fr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return fr.credentialFromTaggedObject(e)}static credentialFromError(e){return fr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return fr.credential(n,r)}catch(i){return null}}}async function pr(e,t){return Kt(e,"POST","/v1/accounts:signUp",Ht(e,t))}fr.TWITTER_SIGN_IN_METHOD="twitter.com",fr.PROVIDER_ID="twitter.com";class mr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await pn._fromIdTokenResponse(e,n,r),o=gr(n);return new mr({user:i,providerId:o,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=gr(n);return new mr({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function gr(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class vr extends P{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,vr.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new vr(e,t,n,r)}}function yr(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw vr._fromErrorAndOperation(e,n,t,r);throw n})}async function br(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await an(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return mr._forOperation(e,"link",r)}async function wr(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if(et(r.app))return Promise.reject(Tt(r));const i="reauthenticate";try{const o=await an(e,yr(r,i,t,e),n);Dt(o.idToken,r,"internal-error");const s=on(o.idToken);Dt(s,r,"internal-error");const{sub:a}=s;return Dt(e.uid===a,r,"user-mismatch"),mr._forOperation(e,i,o)}catch(o){throw(null===o||void 0===o?void 0:o.code)==="auth/".concat("user-not-found")&&Ct(r,"user-mismatch"),o}}async function kr(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(et(e.app))return Promise.reject(Tt(e));const r="signIn",i=await yr(e,r,t),o=await mr._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(o.user),o}async function Sr(e,t){return kr(Mn(e),t)}async function xr(e){const t=Mn(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function Er(e,t){let{displayName:n,photoURL:r}=t;if(void 0===n&&void 0===r)return;const i=z(e),o={idToken:await i.getIdToken(),displayName:n,photoUrl:r,returnSecureToken:!0},s=await an(i,async function(e,t){return qt(e,"POST","/v1/accounts:update",t)}(i.auth,o));i.displayName=s.displayName||null,i.photoURL=s.photoUrl||null;const a=i.providerData.find(e=>{let{providerId:t}=e;return"password"===t});a&&(a.displayName=i.displayName,a.photoURL=i.photoURL),await i._updateTokensIfNecessary(s)}function Cr(e,t){return qt(e,"POST","/v2/accounts/mfaEnrollment:start",Ht(e,t))}new WeakMap;const Ir="__sak";class _r{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Ir,"1"),this.storage.removeItem(Ir),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class Tr extends _r{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Dn(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);An()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Tr.type="LOCAL";const Nr=Tr;function Ar(e){var t,n;const r=e.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),i=RegExp("".concat(r,"=([^;]+)"));return null!==(t=null===(n=document.cookie.match(i))||void 0===n?void 0:n[1])&&void 0!==t?t:null}function Dr(e){const t="http:"===window.location.protocol;return"".concat(t?"__dev_":"__HOST-","FIREBASE_").concat(e.split(":")[3])}class Pr{constructor(){this.type="COOKIE",this.listenerUnsubscribes=new Map}_getFinalTarget(e){if(void 0===typeof window)return e;const t=new URL("".concat(window.location.origin,"/__cookies__"));return t.searchParams.set("finalTarget",e),t}async _isAvailable(){var e;return!("boolean"===typeof isSecureContext&&!isSecureContext)&&("undefined"!==typeof navigator&&"undefined"!==typeof document&&(null===(e=navigator.cookieEnabled)||void 0===e||e))}async _set(e,t){}async _get(e){if(!this._isAvailable())return null;const t=Dr(e);if(window.cookieStore){const e=await window.cookieStore.get(t);return null===e||void 0===e?void 0:e.value}return Ar(t)}async _remove(e){if(!this._isAvailable())return;if(!await this._get(e))return;const t=Dr(e);document.cookie="".concat(t,"=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High"),await fetch("/__cookies__",{method:"DELETE"}).catch(()=>{})}_addListener(e,t){if(!this._isAvailable())return;const n=Dr(e);if(window.cookieStore){const e=e=>{const r=e.changed.find(e=>e.name===n);r&&t(r.value);e.deleted.find(e=>e.name===n)&&t(null)},r=()=>window.cookieStore.removeEventListener("change",e);return this.listenerUnsubscribes.set(t,r),window.cookieStore.addEventListener("change",e)}let r=Ar(n);const i=setInterval(()=>{const e=Ar(n);e!==r&&(t(e),r=e)},1e3);this.listenerUnsubscribes.set(t,()=>clearInterval(i))}_removeListener(e,t){const n=this.listenerUnsubscribes.get(t);n&&(n(),this.listenerUnsubscribes.delete(t))}}Pr.type="COOKIE";class Rr extends _r{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Rr.type="SESSION";const Lr=Rr;class Or{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const n=new Or(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,o=this.handlersMap[r];if(null===o||void 0===o||!o.size)return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const s=Array.from(o).map(async e=>e(t.origin,i)),a=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}(s);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Mr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Or.receivers=[];class jr{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,o;return new Promise((s,a)=>{const l=Mr("",20);r.port1.start();const c=setTimeout(()=>{a(new Error("unsupported_event"))},n);o={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),i=setTimeout(()=>{a(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),s(t.data.response);break;default:clearTimeout(c),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}function Fr(){return window}function Br(){return"undefined"!==typeof Fr().WorkerGlobalScope&&"function"===typeof Fr().importScripts}const Ur="firebaseLocalStorageDb",Vr="firebaseLocalStorage",zr="fbase_key";class Wr{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Hr(e,t){return e.transaction([Vr],t?"readwrite":"readonly").objectStore(Vr)}function qr(){const e=indexedDB.open(Ur,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(Vr,{keyPath:zr})}catch(r){n(r)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(Vr)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(Ur);return new Wr(e).toPromise()}(),t(await qr()))})})}async function Gr(e,t,n){const r=Hr(e,!0).put({[zr]:t,value:n});return new Wr(r).toPromise()}function Kr(e,t){const n=Hr(e,!0).delete(t);return new Wr(n).toPromise()}class Qr{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await qr()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(n){if(t++>3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Br()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Or._getInstance(Br()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){var e;if(null===(e=navigator)||void 0===e||!e.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch(t){return null}}(),!this.activeServiceWorker)return;this.sender=new jr(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&null!==(e=n[0])&&void 0!==e&&e.fulfilled&&null!==(t=n[0])&&void 0!==t&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=navigator)||void 0===e||null===(e=e.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await qr();return await Gr(e,Ir,"1"),await Kr(e,Ir),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Gr(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const n=Hr(e,!1).get(t),r=await new Wr(n).toPromise();return void 0===r?null:r.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Kr(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=Hr(e,!1).getAll();return new Wr(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Qr.type="LOCAL";const Yr=Qr;function $r(e,t){return qt(e,"POST","/v2/accounts/mfaSignIn:start",Ht(e,t))}Un("rcb"),new Ft(3e4,6e4);const Xr="recaptcha";async function Jr(e,t,n){if(!e._getRecaptchaConfig())try{await Kn(e)}catch(i){console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let i;if(i="string"===typeof t?{phoneNumber:t}:t,"session"in i){const t=i.session;if("phoneNumber"in i){Dt("enroll"===t.type,e,"internal-error");const r={idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"}},o=Gn(e,r,"mfaSmsEnrollment",async(e,t)=>{if(t.phoneEnrollmentInfo.captchaResponse===Wn){Dt((null===n||void 0===n?void 0:n.type)===Xr,e,"argument-error");return Cr(e,await Zr(e,t,n))}return Cr(e,t)},"PHONE_PROVIDER"),s=await o.catch(e=>Promise.reject(e));return s.phoneSessionInfo.sessionInfo}{var r;Dt("signin"===t.type,e,"internal-error");const o=(null===(r=i.multiFactorHint)||void 0===r?void 0:r.uid)||i.multiFactorUid;Dt(o,e,"missing-multi-factor-info");const s={mfaPendingCredential:t.credential,mfaEnrollmentId:o,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}},a=Gn(e,s,"mfaSmsSignIn",async(e,t)=>{if(t.phoneSignInInfo.captchaResponse===Wn){Dt((null===n||void 0===n?void 0:n.type)===Xr,e,"argument-error");return $r(e,await Zr(e,t,n))}return $r(e,t)},"PHONE_PROVIDER"),l=await a.catch(e=>Promise.reject(e));return l.phoneResponseInfo.sessionInfo}}{const t={phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"},r=Gn(e,t,"sendVerificationCode",async(e,t)=>{if(t.captchaResponse===Wn){Dt((null===n||void 0===n?void 0:n.type)===Xr,e,"argument-error");return rr(e,await Zr(e,t,n))}return rr(e,t)},"PHONE_PROVIDER"),o=await r.catch(e=>Promise.reject(e));return o.sessionInfo}}finally{null===n||void 0===n||n._reset()}}async function Zr(e,t,n){Dt(n.type===Xr,e,"argument-error");const r=await n.verify();Dt("string"===typeof r,e,"argument-error");const i=d({},t);if("phoneEnrollmentInfo"in i){const e=i.phoneEnrollmentInfo.phoneNumber,t=i.phoneEnrollmentInfo.captchaResponse,n=i.phoneEnrollmentInfo.clientType,o=i.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(i,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:r,captchaResponse:t,clientType:n,recaptchaVersion:o}}),i}if("phoneSignInInfo"in i){const e=i.phoneSignInInfo.captchaResponse,t=i.phoneSignInInfo.clientType,n=i.phoneSignInInfo.recaptchaVersion;return Object.assign(i,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:e,clientType:t,recaptchaVersion:n}}),i}return Object.assign(i,{recaptchaToken:r}),i}class ei{constructor(e){this.providerId=ei.PROVIDER_ID,this.auth=Mn(e)}verifyPhoneNumber(e,t){return Jr(this.auth,e,z(t))}static credential(e,t){return or._fromVerification(e,t)}static credentialFromResult(e){const t=e;return ei.credentialFromTaggedObject(t)}static credentialFromError(e){return ei.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?or._fromTokenResponse(n,r):null}}function ti(e,t){return t?gn(t):(Dt(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}ei.PROVIDER_ID="phone",ei.PHONE_SIGN_IN_METHOD="phone";class ni extends Xn{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return tr(e,this._buildIdpRequest())}_linkToIdToken(e,t){return tr(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return tr(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function ri(e){return kr(e.auth,new ni(e),e.bypassAuthState)}function ii(e){const{auth:t,user:n}=e;return Dt(n,t,"internal-error"),wr(n,new ni(e),e.bypassAuthState)}async function oi(e){const{auth:t,user:n}=e;return Dt(n,t,"internal-error"),br(n,new ni(e),e.bypassAuthState)}class si{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:o,type:s}=e;if(o)return void this.reject(o);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(s)(a))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return ri;case"linkViaPopup":case"linkViaRedirect":return oi;case"reauthViaPopup":case"reauthViaRedirect":return ii;default:Ct(this.auth,"internal-error")}}resolve(e){Rt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Rt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const ai=new Ft(2e3,1e4);class li extends si{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,li.currentPopupAction&&li.currentPopupAction.cancel(),li.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Dt(e,this.auth,"internal-error"),e}async onExecution(){Rt(1===this.filter.length,"Popup operations only handle one event");const e=Mr();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(It(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(It(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,li.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t;null!==(t=this.authWindow)&&void 0!==t&&null!==(t=t.window)&&void 0!==t&&t.closed?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(It(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,ai.get())};e()}}li.currentPopupAction=null;const ci=new Map;class ui extends si{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=ci.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=fi(t),r=hi(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}ci.set(this.auth._key(),e)}return this.bypassAuthState||ci.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function di(e,t){ci.set(e._key(),t)}function hi(e){return gn(e._redirectPersistence)}function fi(e){return bn("pendingRedirect",e.config.apiKey,e.name)}async function pi(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(et(e.app))return Promise.reject(Tt(e));const r=Mn(e),i=ti(r,t),o=new ui(r,i,n),s=await o.execute();return s&&!n&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,t)),s}class mi{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return vi(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!vi(e)){var n;const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(It(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(gi(e))}saveEventToCache(e){this.cachedEventUids.add(gi(e)),this.lastProcessedEventTime=Date.now()}}function gi(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function vi(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}const yi=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,bi=/^https?/;async function wi(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return qt(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(ki(r))return}catch(n){}Ct(e,"unauthorized-domain")}function ki(e){const t=Lt(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!bi.test(n))return!1;if(yi.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const Si=new Ft(3e4,6e4);function xi(){const e=Fr().___jsl;if(null!==e&&void 0!==e&&e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function Ei(e){return new Promise((t,n)=>{var r,i;function o(){xi(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{xi(),n(It(e,"network-request-failed"))},timeout:Si.get()})}if(null!==(r=Fr().gapi)&&void 0!==r&&null!==(r=r.iframes)&&void 0!==r&&r.Iframe)t(gapi.iframes.getContext());else{if(null===(i=Fr().gapi)||void 0===i||!i.load){const t=Un("iframefcb");return Fr()[t]=()=>{gapi.load?o():n(It(e,"network-request-failed"))},Bn("".concat(Fn.gapiScript,"?onload=").concat(t)).catch(e=>n(e))}o()}}).catch(e=>{throw Ci=null,e})}let Ci=null;const Ii=new Ft(5e3,15e3),_i={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ti=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ni(e){const t=e.config;Dt(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Bt(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:rt},i=Ti.get(e.config.apiHost);i&&(r.eid=i);const o=e._getFrameworks();return o.length&&(r.fw=o.join(",")),"".concat(n,"?").concat(j(r).slice(1))}async function Ai(e){const t=await function(e){return Ci=Ci||Ei(e),Ci}(e),n=Fr().gapi;return Dt(n,e,"internal-error"),t.open({where:document.body,url:Ni(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:_i,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=It(e,"network-request-failed"),o=Fr().setTimeout(()=>{r(i)},Ii.get());function s(){Fr().clearTimeout(o),n(t)}t.ping(s).then(s,()=>{r(i)})}))}const Di={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Pi{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function Ri(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=d(d({},Di),{},{width:r.toString(),height:i.toString(),top:o,left:s}),c=T().toLowerCase();n&&(a=En(c)?"_blank":n),Sn(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")},"");if(function(){var e;return Nn(arguments.length>0&&void 0!==arguments[0]?arguments[0]:T())&&!(null===(e=window.navigator)||void 0===e||!e.standalone)}(c)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",a),new Pi(null);const h=window.open(t||"",a,u);Dt(h,e,"popup-blocked");try{h.focus()}catch(f){}return new Pi(h)}const Li="__/auth/handler",Oi="emulator/auth/handler",Mi=encodeURIComponent("fac");async function ji(e,t,n,r,i,o){Dt(e.config.authDomain,e,"auth-domain-config-required"),Dt(e.config.apiKey,e,"invalid-api-key");const s={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:rt,eventId:i};if(t instanceof lr){t.setDefaultLanguage(e.languageCode),s.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(s.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(o||{}))s[e]=t}if(t instanceof cr){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(s.scopes=e.join(","))}e.tenantId&&(s.tid=e.tenantId);const a=s;for(const u of Object.keys(a))void 0===a[u]&&delete a[u];const l=await e._getAppCheckToken(),c=l?"#".concat(Mi,"=").concat(encodeURIComponent(l)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(Li);return Bt(t,Oi)}(e),"?").concat(j(a).slice(1)).concat(c)}const Fi="webStorageSupport";const Bi=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Lr,this._completeRedirectFn=pi,this._overrideRedirectResult=di}async _openPopup(e,t,n,r){var i;Rt(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return Ri(e,await ji(e,t,n,Lt(),r),Mr())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){Fr().location.href=e}(await ji(e,t,n,Lt(),r)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(Rt(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await Ai(e),n=new mi(e);return t.register("authEvent",t=>{Dt(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Fi,{type:Fi},n=>{var r;const i=null===n||void 0===n||null===(r=n[0])||void 0===r?void 0:r[Fi];void 0!==i&&t(!!i),Ct(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=wi(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Dn()||xn()||Nn()}};var Ui="@firebase/auth",Vi="1.12.0";class zi{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Dt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Wi=k("authIdTokenMaxAge")||300;let Hi=null;var qi,Gi;qi={loadJS:e=>new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=It("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(e=null===(t=document.getElementsByTagName("head"))||void 0===t?void 0:t[0])&&void 0!==e?e:document}().appendChild(r)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},Fn=qi,Gi="Browser",Je(new W("auth",(e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;Dt(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:s,authDomain:a,clientPlatform:Gi,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Pn(Gi)},c=new On(r,i,o,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(gn);null!==t&&void 0!==t&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),Je(new W("auth-internal",e=>(e=>new zi(e))(Mn(e.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),st(Ui,Vi,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(Gi)),st(Ui,Vi,"esm2020");st("firebase","12.9.0","app");var Ki,Qi,Yi="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},$i={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}function n(e,t,n){n||(n=0);const r=Array(16);if("string"===typeof t)for(var i=0;i<16;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;i<16;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];let o,s=e.g[3];o=t+(s^n&(i^s))+r[0]+3614090360&4294967295,o=s+(i^(t=n+(o<<7&4294967295|o>>>25))&(n^i))+r[1]+3905402710&4294967295,s=t+(o<<12&4294967295|o>>>20),o=i+(n^s&(t^n))+r[2]+606105819&4294967295,o=n+(t^(i=s+(o<<17&4294967295|o>>>15))&(s^t))+r[3]+3250441966&4294967295,o=t+(s^(n=i+(o<<22&4294967295|o>>>10))&(i^s))+r[4]+4118548399&4294967295,o=s+(i^(t=n+(o<<7&4294967295|o>>>25))&(n^i))+r[5]+1200080426&4294967295,s=t+(o<<12&4294967295|o>>>20),o=i+(n^s&(t^n))+r[6]+2821735955&4294967295,o=n+(t^(i=s+(o<<17&4294967295|o>>>15))&(s^t))+r[7]+4249261313&4294967295,o=t+(s^(n=i+(o<<22&4294967295|o>>>10))&(i^s))+r[8]+1770035416&4294967295,o=s+(i^(t=n+(o<<7&4294967295|o>>>25))&(n^i))+r[9]+2336552879&4294967295,s=t+(o<<12&4294967295|o>>>20),o=i+(n^s&(t^n))+r[10]+4294925233&4294967295,o=n+(t^(i=s+(o<<17&4294967295|o>>>15))&(s^t))+r[11]+2304563134&4294967295,o=t+(s^(n=i+(o<<22&4294967295|o>>>10))&(i^s))+r[12]+1804603682&4294967295,o=s+(i^(t=n+(o<<7&4294967295|o>>>25))&(n^i))+r[13]+4254626195&4294967295,s=t+(o<<12&4294967295|o>>>20),o=i+(n^s&(t^n))+r[14]+2792965006&4294967295,o=n+(t^(i=s+(o<<17&4294967295|o>>>15))&(s^t))+r[15]+1236535329&4294967295,o=t+(i^s&((n=i+(o<<22&4294967295|o>>>10))^i))+r[1]+4129170786&4294967295,o=s+(n^i&((t=n+(o<<5&4294967295|o>>>27))^n))+r[6]+3225465664&4294967295,s=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(s^t))+r[11]+643717713&4294967295,o=n+(s^t&((i=s+(o<<14&4294967295|o>>>18))^s))+r[0]+3921069994&4294967295,o=t+(i^s&((n=i+(o<<20&4294967295|o>>>12))^i))+r[5]+3593408605&4294967295,o=s+(n^i&((t=n+(o<<5&4294967295|o>>>27))^n))+r[10]+38016083&4294967295,s=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(s^t))+r[15]+3634488961&4294967295,o=n+(s^t&((i=s+(o<<14&4294967295|o>>>18))^s))+r[4]+3889429448&4294967295,o=t+(i^s&((n=i+(o<<20&4294967295|o>>>12))^i))+r[9]+568446438&4294967295,o=s+(n^i&((t=n+(o<<5&4294967295|o>>>27))^n))+r[14]+3275163606&4294967295,s=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(s^t))+r[3]+4107603335&4294967295,o=n+(s^t&((i=s+(o<<14&4294967295|o>>>18))^s))+r[8]+1163531501&4294967295,o=t+(i^s&((n=i+(o<<20&4294967295|o>>>12))^i))+r[13]+2850285829&4294967295,o=s+(n^i&((t=n+(o<<5&4294967295|o>>>27))^n))+r[2]+4243563512&4294967295,s=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(s^t))+r[7]+1735328473&4294967295,o=n+(s^t&((i=s+(o<<14&4294967295|o>>>18))^s))+r[12]+2368359562&4294967295,o=t+((n=i+(o<<20&4294967295|o>>>12))^i^s)+r[5]+4294588738&4294967295,o=s+((t=n+(o<<4&4294967295|o>>>28))^n^i)+r[8]+2272392833&4294967295,s=t+(o<<11&4294967295|o>>>21),o=i+(s^t^n)+r[11]+1839030562&4294967295,o=n+((i=s+(o<<16&4294967295|o>>>16))^s^t)+r[14]+4259657740&4294967295,o=t+((n=i+(o<<23&4294967295|o>>>9))^i^s)+r[1]+2763975236&4294967295,o=s+((t=n+(o<<4&4294967295|o>>>28))^n^i)+r[4]+1272893353&4294967295,s=t+(o<<11&4294967295|o>>>21),o=i+(s^t^n)+r[7]+4139469664&4294967295,o=n+((i=s+(o<<16&4294967295|o>>>16))^s^t)+r[10]+3200236656&4294967295,o=t+((n=i+(o<<23&4294967295|o>>>9))^i^s)+r[13]+681279174&4294967295,o=s+((t=n+(o<<4&4294967295|o>>>28))^n^i)+r[0]+3936430074&4294967295,s=t+(o<<11&4294967295|o>>>21),o=i+(s^t^n)+r[3]+3572445317&4294967295,o=n+((i=s+(o<<16&4294967295|o>>>16))^s^t)+r[6]+76029189&4294967295,o=t+((n=i+(o<<23&4294967295|o>>>9))^i^s)+r[9]+3654602809&4294967295,o=s+((t=n+(o<<4&4294967295|o>>>28))^n^i)+r[12]+3873151461&4294967295,s=t+(o<<11&4294967295|o>>>21),o=i+(s^t^n)+r[15]+530742520&4294967295,o=n+((i=s+(o<<16&4294967295|o>>>16))^s^t)+r[2]+3299628645&4294967295,o=t+(i^((n=i+(o<<23&4294967295|o>>>9))|~s))+r[0]+4096336452&4294967295,o=s+(n^((t=n+(o<<6&4294967295|o>>>26))|~i))+r[7]+1126891415&4294967295,s=t+(o<<10&4294967295|o>>>22),o=i+(t^(s|~n))+r[14]+2878612391&4294967295,o=n+(s^((i=s+(o<<15&4294967295|o>>>17))|~t))+r[5]+4237533241&4294967295,o=t+(i^((n=i+(o<<21&4294967295|o>>>11))|~s))+r[12]+1700485571&4294967295,o=s+(n^((t=n+(o<<6&4294967295|o>>>26))|~i))+r[3]+2399980690&4294967295,s=t+(o<<10&4294967295|o>>>22),o=i+(t^(s|~n))+r[10]+4293915773&4294967295,o=n+(s^((i=s+(o<<15&4294967295|o>>>17))|~t))+r[1]+2240044497&4294967295,o=t+(i^((n=i+(o<<21&4294967295|o>>>11))|~s))+r[8]+1873313359&4294967295,o=s+(n^((t=n+(o<<6&4294967295|o>>>26))|~i))+r[15]+4264355552&4294967295,s=t+(o<<10&4294967295|o>>>22),o=i+(t^(s|~n))+r[6]+2734768916&4294967295,o=n+(s^((i=s+(o<<15&4294967295|o>>>17))|~t))+r[13]+1309151649&4294967295,o=t+(i^((n=i+(o<<21&4294967295|o>>>11))|~s))+r[4]+4149444226&4294967295,o=s+(n^((t=n+(o<<6&4294967295|o>>>26))|~i))+r[11]+3174756917&4294967295,s=t+(o<<10&4294967295|o>>>22),o=i+(t^(s|~n))+r[2]+718787259&4294967295,o=n+(s^((i=s+(o<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}function r(e,t){this.h=t;const n=[];let r=!0;for(let i=e.length-1;i>=0;i--){const o=0|e[i];r&&o==t||(n[i]=o,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.F=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.D=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}(t,function(){this.blockSize=-1}),t.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.v=function(e,t){void 0===t&&(t=e.length);const r=t-this.blockSize,i=this.C;let o=this.h,s=0;for(;s<t;){if(0==o)for(;s<=r;)n(this,e,s),s+=this.blockSize;if("string"===typeof e){for(;s<t;)if(i[o++]=e.charCodeAt(s++),o==this.blockSize){n(this,i),o=0;break}}else for(;s<t;)if(i[o++]=e[s++],o==this.blockSize){n(this,i),o=0;break}}this.h=o,this.o+=t},t.prototype.A=function(){var e=Array((this.h<56?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;t=8*this.o;for(var n=e.length-8;n<e.length;++n)e[n]=255&t,t/=256;for(this.v(e),e=Array(16),t=0,n=0;n<4;++n)for(let r=0;r<32;r+=8)e[t++]=this.g[n]>>>r&255;return e};var i={};function o(e){return-128<=e&&e<128?function(e,t){var n=i;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(e){return new r([0|e],e<0?-1:0)}):new r([0|e],e<0?-1:0)}function s(e){if(isNaN(e)||!isFinite(e))return a;if(e<0)return h(s(-e));const t=[];let n=1;for(let r=0;e>=n;r++)t[r]=e/n|0,n*=4294967296;return new r(t,0)}var a=o(0),l=o(1),c=o(16777216);function u(e){if(0!=e.h)return!1;for(let t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function d(e){return-1==e.h}function h(e){const t=e.g.length,n=[];for(let r=0;r<t;r++)n[r]=~e.g[r];return new r(n,~e.h).add(l)}function f(e,t){return e.add(h(t))}function p(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function m(e,t){this.g=e,this.h=t}function g(e,t){if(u(t))throw Error("division by zero");if(u(e))return new m(a,a);if(d(e))return t=g(h(e),t),new m(h(t.g),h(t.h));if(d(t))return t=g(e,h(t)),new m(h(t.g),t.h);if(e.g.length>30){if(d(e)||d(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,r=t;r.l(e)<=0;)n=v(n),r=v(r);var i=y(n,1),o=y(r,1);for(r=y(r,2),n=y(n,2);!u(r);){var c=o.add(r);c.l(e)<=0&&(i=i.add(n),o=c),r=y(r,1),n=y(n,1)}return t=f(e,i.j(t)),new m(i,t)}for(i=a;e.l(t)>=0;){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=(r=Math.ceil(Math.log(n)/Math.LN2))<=48?1:Math.pow(2,r-48),c=(o=s(n)).j(t);d(c)||c.l(e)>0;)c=(o=s(n-=r)).j(t);u(o)&&(o=l),i=i.add(o),e=f(e,c)}return new m(i,e)}function v(e){const t=e.g.length+1,n=[];for(let r=0;r<t;r++)n[r]=e.i(r)<<1|e.i(r-1)>>>31;return new r(n,e.h)}function y(e,t){const n=t>>5;t%=32;const i=e.g.length-n,o=[];for(let r=0;r<i;r++)o[r]=t>0?e.i(r+n)>>>t|e.i(r+n+1)<<32-t:e.i(r+n);return new r(o,e.h)}(e=r.prototype).m=function(){if(d(this))return-h(this).m();let e=0,t=1;for(let n=0;n<this.g.length;n++){const r=this.i(n);e+=(r>=0?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if((e=e||10)<2||36<e)throw Error("radix out of range: "+e);if(u(this))return"0";if(d(this))return"-"+h(this).toString(e);const t=s(Math.pow(e,6));var n=this;let r="";for(;;){const i=g(n,t).g;let o=(((n=f(n,i.j(t))).g.length>0?n.g[0]:n.h)>>>0).toString(e);if(u(n=i))return o+r;for(;o.length<6;)o="0"+o;r=o+r}},e.i=function(e){return e<0?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return d(e=f(this,e))?-1:u(e)?0:1},e.abs=function(){return d(this)?h(this):this},e.add=function(e){const t=Math.max(this.g.length,e.g.length),n=[];let i=0;for(let r=0;r<=t;r++){let t=i+(65535&this.i(r))+(65535&e.i(r)),o=(t>>>16)+(this.i(r)>>>16)+(e.i(r)>>>16);i=o>>>16,t&=65535,o&=65535,n[r]=o<<16|t}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(u(this)||u(e))return a;if(d(this))return d(e)?h(this).j(h(e)):h(h(this).j(e));if(d(e))return h(this.j(h(e)));if(this.l(c)<0&&e.l(c)<0)return s(this.m()*e.m());const t=this.g.length+e.g.length,n=[];for(var i=0;i<2*t;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(let t=0;t<e.g.length;t++){const r=this.i(i)>>>16,o=65535&this.i(i),s=e.i(t)>>>16,a=65535&e.i(t);n[2*i+2*t]+=o*a,p(n,2*i+2*t),n[2*i+2*t+1]+=r*a,p(n,2*i+2*t+1),n[2*i+2*t+1]+=o*s,p(n,2*i+2*t+1),n[2*i+2*t+2]+=r*s,p(n,2*i+2*t+2)}for(e=0;e<t;e++)n[e]=n[2*e+1]<<16|n[2*e];for(e=t;e<2*t;e++)n[e]=0;return new r(n,0)},e.B=function(e){return g(this,e).h},e.and=function(e){const t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)&e.i(r);return new r(n,this.h&e.h)},e.or=function(e){const t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)|e.i(r);return new r(n,this.h|e.h)},e.xor=function(e){const t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)^e.i(r);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.A,t.prototype.reset=t.prototype.u,t.prototype.update=t.prototype.v,Qi=$i.Md5=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.B,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=s,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if((n=n||10)<2||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return h(e(t.substring(1),n));if(t.indexOf("-")>=0)throw Error('number format error: interior "-" character');const r=s(Math.pow(n,8));let i=a;for(let a=0;a<t.length;a+=8){var o=Math.min(8,t.length-a);const e=parseInt(t.substring(a,a+o),n);o<8?(o=s(Math.pow(n,o)),i=i.j(o).add(s(e))):(i=i.j(r),i=i.add(s(e)))}return i},Ki=$i.Integer=r}).apply("undefined"!==typeof Yi?Yi:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var Xi,Ji,Zi,eo,to,no,ro,io,oo="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},so={};(function(){var e,t=Object.defineProperty;var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof oo&&oo];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);function r(e,r){if(r)e:{var i=n;e=e.split(".");for(var o=0;o<e.length-1;o++){var s=e[o];if(!(s in i))break e;i=i[s]}(r=r(o=i[e=e[e.length-1]]))!=o&&null!=r&&t(i,e,{configurable:!0,writable:!0,value:r})}}r("Symbol.dispose",function(e){return e||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(e){return e||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(e){return e||function(e){var t,n=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.push([t,e[t]]);return n}});var i=i||{},o=this||self;function s(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function a(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){return(l=a).apply(null,arguments)}function c(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function u(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Ob=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}var d="undefined"!==typeof AsyncContext&&"function"===typeof AsyncContext.Snapshot?e=>e&&AsyncContext.Snapshot.wrap(e):e=>e;function h(e){const t=e.length;if(t>0){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function f(e,t){for(let r=1;r<arguments.length;r++){const t=arguments[r];var n=typeof t;if("array"==(n="object"!=n?n:t?Array.isArray(t)?"array":n:"null")||"object"==n&&"number"==typeof t.length){n=e.length||0;const r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function p(e){o.setTimeout(()=>{throw e},0)}function m(){var e=w;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var g=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return this.h>0?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new v,e=>e.reset());class v{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let y,b=!1,w=new class{constructor(){this.h=this.g=null}add(e,t){const n=g.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},k=()=>{const e=Promise.resolve(void 0);y=()=>{e.then(S)}};function S(){for(var e;e=m();){try{e.h.call(e.g)}catch(n){p(n)}var t=g;t.j(e),t.h<100&&(t.h++,e.next=t.g,t.g=e)}b=!1}function x(){this.u=this.u,this.C=this.C}function E(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}x.prototype.u=!1,x.prototype.dispose=function(){this.u||(this.u=!0,this.N())},x.prototype[Symbol.dispose]=function(){this.dispose()},x.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},E.prototype.h=function(){this.defaultPrevented=!0};var C=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};o.addEventListener("test",e,t),o.removeEventListener("test",e,t)}catch(n){}return e}();function I(e){return/^[\s\xa0]*$/.test(e)}function _(e,t){E.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e&&this.init(e,t)}u(_,E),_.prototype.init=function(e,t){const n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;this.target=e.target||e.srcElement,this.g=t,(t=e.relatedTarget)||("mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement)),this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=e.pointerType,this.state=e.state,this.i=e,e.defaultPrevented&&_.Z.h.call(this)},_.prototype.h=function(){_.Z.h.call(this);const e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var T="closure_listenable_"+(1e6*Math.random()|0),N=0;function A(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++N,this.da=this.fa=!1}function D(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function P(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function R(e){const t={};for(const n in e)t[n]=e[n];return t}const L="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function O(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<L.length;t++)n=L[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function M(e){this.src=e,this.g={},this.h=0}function j(e,t){const n=t.type;if(n in e.g){var r,i=e.g[n],o=Array.prototype.indexOf.call(i,t,void 0);(r=o>=0)&&Array.prototype.splice.call(i,o,1),r&&(D(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function F(e,t,n,r){for(let i=0;i<e.length;++i){const o=e[i];if(!o.da&&o.listener==t&&o.capture==!!n&&o.ha==r)return i}return-1}M.prototype.add=function(e,t,n,r,i){const o=e.toString();(e=this.g[o])||(e=this.g[o]=[],this.h++);const s=F(e,t,r,i);return s>-1?(t=e[s],n||(t.fa=!1)):((t=new A(t,this.src,o,!!r,i)).fa=n,e.push(t)),t};var B="closure_lm_"+(1e6*Math.random()|0),U={};function V(e,t,n,r,i){if(r&&r.once)return W(e,t,n,r,i);if(Array.isArray(t)){for(let o=0;o<t.length;o++)V(e,t[o],n,r,i);return null}return n=$(n),e&&e[T]?e.J(t,n,s(r)?!!r.capture:!!r,i):z(e,t,n,!1,r,i)}function z(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");const a=s(i)?!!i.capture:!!i;let l=Q(e);if(l||(e[B]=l=new M(e)),(n=l.add(t,n,r,a,o)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=K;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)C||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(G(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function W(e,t,n,r,i){if(Array.isArray(t)){for(let o=0;o<t.length;o++)W(e,t[o],n,r,i);return null}return n=$(n),e&&e[T]?e.K(t,n,s(r)?!!r.capture:!!r,i):z(e,t,n,!0,r,i)}function H(e,t,n,r,i){if(Array.isArray(t))for(var o=0;o<t.length;o++)H(e,t[o],n,r,i);else r=s(r)?!!r.capture:!!r,n=$(n),e&&e[T]?(e=e.i,(o=String(t).toString())in e.g&&((n=F(t=e.g[o],n,r,i))>-1&&(D(t[n]),Array.prototype.splice.call(t,n,1),0==t.length&&(delete e.g[o],e.h--)))):e&&(e=Q(e))&&(t=e.g[t.toString()],e=-1,t&&(e=F(t,n,r,i)),(n=e>-1?t[e]:null)&&q(n))}function q(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[T])j(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(G(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Q(t))?(j(n,e),0==n.h&&(n.src=null,t[B]=null)):D(e)}}}function G(e){return e in U?U[e]:U[e]="on"+e}function K(e,t){if(e.da)e=!0;else{t=new _(t,this);const n=e.listener,r=e.ha||e.src;e.fa&&q(e),e=n.call(r,t)}return e}function Q(e){return(e=e[B])instanceof M?e:null}var Y="__closure_events_fn_"+(1e9*Math.random()>>>0);function $(e){return"function"===typeof e?e:(e[Y]||(e[Y]=function(t){return e.handleEvent(t)}),e[Y])}function X(){x.call(this),this.i=new M(this),this.M=this,this.G=null}function J(e,t){var n,r=e.G;if(r)for(n=[];r;r=r.G)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new E(t,e);else if(t instanceof E)t.target=t.target||e;else{var i=t;O(t=new E(r,e),i)}let o,s;if(i=!0,n)for(s=n.length-1;s>=0;s--)o=t.g=n[s],i=Z(o,r,!0,t)&&i;if(o=t.g=e,i=Z(o,r,!0,t)&&i,i=Z(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)o=t.g=n[s],i=Z(o,r,!1,t)&&i}function Z(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();let i=!0;for(let o=0;o<t.length;++o){const s=t[o];if(s&&!s.da&&s.capture==n){const t=s.listener,n=s.ha||s.src;s.fa&&j(e.i,s),i=!1!==t.call(n,r)&&i}}return i&&!r.defaultPrevented}function ee(e){e.g=function(e,t){if("function"!==typeof e){if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=l(e.handleEvent,e)}return Number(t)>2147483647?-1:o.setTimeout(e,t||0)}(()=>{e.g=null,e.i&&(e.i=!1,ee(e))},e.l);const t=e.h;e.h=null,e.m.apply(null,t)}u(X,x),X.prototype[T]=!0,X.prototype.removeEventListener=function(e,t,n,r){H(this,e,t,n,r)},X.prototype.N=function(){if(X.Z.N.call(this),this.i){var e=this.i;for(const t in e.g){const n=e.g[t];for(let e=0;e<n.length;e++)D(n[e]);delete e.g[t],e.h--}}this.G=null},X.prototype.J=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},X.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class te extends x{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:ee(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ne(e){x.call(this),this.h=e,this.g={}}u(ne,x);var re=[];function ie(e){P(e.g,function(e,t){this.g.hasOwnProperty(t)&&q(e)},e),e.g={}}ne.prototype.N=function(){ne.Z.N.call(this),ie(this)},ne.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var oe=o.JSON.stringify,se=o.JSON.parse,ae=class{stringify(e){return o.JSON.stringify(e,void 0)}parse(e){return o.JSON.parse(e,void 0)}};function le(){}function ce(){}var ue={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function de(){E.call(this,"d")}function he(){E.call(this,"c")}u(de,E),u(he,E);var fe={},pe=null;function me(){return pe=pe||new X}function ge(e){E.call(this,fe.Ia,e)}function ve(e){const t=me();J(t,new ge(t))}function ye(e,t){E.call(this,fe.STAT_EVENT,e),this.stat=t}function be(e){const t=me();J(t,new ye(t,e))}function we(e,t){E.call(this,fe.Ja,e),this.size=t}function ke(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){e()},t)}function Se(){this.g=!0}function xe(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{const o=JSON.parse(t);if(o)for(e=0;e<o.length;e++)if(Array.isArray(o[e])){var n=o[e];if(!(n.length<2)){var r=n[1];if(Array.isArray(r)&&!(r.length<1)){var i=r[0];if("noop"!=i&&"stop"!=i&&"close"!=i)for(let e=1;e<r.length;e++)r[e]=""}}}return oe(o)}catch(o){return t}}(e,n)+(r?" "+r:"")})}fe.Ia="serverreachability",u(ge,E),fe.STAT_EVENT="statevent",u(ye,E),fe.Ja="timingevent",u(we,E),Se.prototype.ua=function(){this.g=!1},Se.prototype.info=function(){};var Ee,Ce={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ie={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"};function _e(){}function Te(e){return encodeURIComponent(String(e))}function Ne(e){var t=1;e=e.split(":");const n=[];for(;t>0&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function Ae(e,t,n,r){this.j=e,this.i=t,this.l=n,this.S=r||1,this.V=new ne(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new De}function De(){this.i=null,this.g="",this.h=!1}u(_e,le),_e.prototype.g=function(){return new XMLHttpRequest},Ee=new _e;var Pe={},Re={};function Le(e,t,n){e.M=1,e.A=ot(et(t)),e.u=n,e.R=!0,Oe(e,null)}function Oe(e,t){e.F=Date.now(),Fe(e),e.B=et(e.A);var n=e.B,r=e.S;Array.isArray(r)||(r=[String(r)]),bt(n.i,"t",r),e.C=0,n=e.j.L,e.h=new De,e.g=sn(e.j,n?t:null,!e.u),e.P>0&&(e.O=new te(l(e.Y,e,e.g),e.P)),t=e.V,n=e.g,r=e.ba;var i="readystatechange";Array.isArray(i)||(i&&(re[0]=i.toString()),i=re);for(let o=0;o<i.length;o++){const e=V(n,i[o],r||t.handleEvent,!1,t.h||t);if(!e)break;t.g[e.key]=e}t=e.J?R(e.J):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.B,e.v,e.u,t)):(e.v="GET",e.g.ea(e.B,e.v,null,t)),ve(),function(e,t,n,r,i,o){e.info(function(){if(e.g)if(o){var s="",a=o.split("&");for(let e=0;e<a.length;e++){var l=a[e].split("=");if(l.length>1){const e=l[0];l=l[1];const t=e.split("_");s=t.length>=2&&"type"==t[1]?s+(e+"=")+l+"&":s+(e+"=redacted&")}}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+s})}(e.i,e.v,e.B,e.l,e.S,e.u)}function Me(e){return!!e.g&&("GET"==e.v&&2!=e.M&&e.j.Aa)}function je(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Re:(n=Number(t.substring(n,r)),isNaN(n)?Pe:(r+=1)+n>t.length?Re:(t=t.slice(r,r+n),e.C=r+n,t))}function Fe(e){e.T=Date.now()+e.H,Be(e,e.H)}function Be(e,t){if(null!=e.D)throw Error("WatchDog timer not null");e.D=ke(l(e.aa,e),t)}function Ue(e){e.D&&(o.clearTimeout(e.D),e.D=null)}function Ve(e){0==e.j.I||e.K||en(e.j,e)}function ze(e){Ue(e);var t=e.O;t&&"function"==typeof t.dispose&&t.dispose(),e.O=null,ie(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.dispose())}function We(e,t){try{var n=e.j;if(0!=n.I&&(n.g==e||Qe(n.h,e)))if(!e.L&&Qe(n.h,e)&&3==n.I){try{var r=n.Ba.g.parse(t)}catch(u){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.v){if(n.g){if(!(n.g.F+3e3<e.F))break e;Zt(n),Wt(n)}$t(n),be(18)}}else n.xa=i[1],0<n.xa-n.K&&i[2]<37500&&n.F&&0==n.A&&!n.C&&(n.C=ke(l(n.Va,n),6e3));Ke(n.h)<=1&&n.ta&&(n.ta=void 0)}else nn(n,11)}else if((e.L||n.g==e)&&Zt(n),!I(t))for(i=n.Ba.g.parse(t),t=0;t<i.length;t++){let l=i[t];const u=l[0];if(!(u<=n.K))if(n.K=u,l=l[1],2==n.I)if("c"==l[0]){n.M=l[1],n.ba=l[2];const t=l[3];null!=t&&(n.ka=t,n.j.info("VER="+n.ka));const i=l[4];null!=i&&(n.za=i,n.j.info("SVER="+n.za));const u=l[5];null!=u&&"number"===typeof u&&u>0&&(r=1.5*u,n.O=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const d=e.g;if(d){const e=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var o=r.h;o.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(o.j=o.l,o.g=new Set,o.h&&(Ye(o,o.h),o.h=null))}if(r.G){const e=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.wa=e,it(r.J,r.G,e))}}n.I=3,n.l&&n.l.ra(),n.aa&&(n.T=Date.now()-e.F,n.j.info("Handshake RTT: "+n.T+"ms"));var s=e;if((r=n).na=on(r,r.L?r.ba:null,r.W),s.L){$e(r.h,s);var a=s,c=r.O;c&&(a.H=c),a.D&&(Ue(a),Fe(a)),r.g=s}else Yt(r);n.i.length>0&&qt(n)}else"stop"!=l[0]&&"close"!=l[0]||nn(n,7);else 3==n.I&&("stop"==l[0]||"close"==l[0]?"stop"==l[0]?nn(n,7):zt(n):"noop"!=l[0]&&n.l&&n.l.qa(l),n.A=0)}ve()}catch(u){}}Ae.prototype.ba=function(e){e=e.target;const t=this.O;t&&3==Ft(e)?t.j():this.Y(e)},Ae.prototype.Y=function(e){try{if(e==this.g)e:{const l=Ft(this.g),c=this.g.ya();this.g.ca();if(!(l<3)&&(3!=l||this.g&&(this.h.h||this.g.la()||Bt(this.g)))){this.K||4!=l||7==c||ve(),Ue(this);var t=this.g.ca();this.X=t;var n=function(e){if(!Me(e))return e.g.la();const t=Bt(e.g);if(""===t)return"";let n="";const r=t.length,i=4==Ft(e.g);if(!e.h.i){if("undefined"===typeof TextDecoder)return ze(e),Ve(e),"";e.h.i=new o.TextDecoder}for(let o=0;o<r;o++)e.h.h=!0,n+=e.h.i.decode(t[o],{stream:!(i&&o==r-1)});return t.length=0,e.h.g+=n,e.C=0,e.h.g}(this);if(this.o=200==t,function(e,t,n,r,i,o,s){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+o+" "+s})}(this.i,this.v,this.B,this.l,this.S,l,t),this.o){if(this.U&&!this.L){t:{if(this.g){var r,i=this.g;if((r=i.g?i.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(r)){var s=r;break t}}s=null}if(!(e=s)){this.o=!1,this.m=3,be(12),ze(this),Ve(this);break e}xe(this.i,this.l,e,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,We(this,e)}if(this.R){let t;for(e=!0;!this.K&&this.C<n.length;){if(t=je(this,n),t==Re){4==l&&(this.m=4,be(14),e=!1),xe(this.i,this.l,null,"[Incomplete Response]");break}if(t==Pe){this.m=4,be(15),xe(this.i,this.l,n,"[Invalid Chunk]"),e=!1;break}xe(this.i,this.l,t,null),We(this,t)}if(Me(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=l||0!=n.length||this.h.h||(this.m=1,be(16),e=!1),this.o=this.o&&e,e){if(n.length>0&&!this.W){this.W=!0;var a=this.j;a.g==this&&a.aa&&!a.P&&(a.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),Xt(a),a.P=!0,be(11))}}else xe(this.i,this.l,n,"[Invalid Chunked Response]"),ze(this),Ve(this)}else xe(this.i,this.l,n,null),We(this,n);4==l&&ze(this),this.o&&!this.K&&(4==l?en(this.j,this):(this.o=!1,Fe(this)))}else(function(e){const t={};e=(e.g&&Ft(e)>=2&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(I(e[r]))continue;var n=Ne(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const o=t[i]||[];t[i]=o,o.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==t&&n.indexOf("Unknown SID")>0?(this.m=3,be(12)):(this.m=0,be(13)),ze(this),Ve(this)}}}catch(l){}},Ae.prototype.cancel=function(){this.K=!0,ze(this)},Ae.prototype.aa=function(){this.D=null;const e=Date.now();e-this.T>=0?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.i,this.B),2!=this.M&&(ve(),be(17)),ze(this),this.m=2,Ve(this)):Be(this,this.T-e)};var He=class{constructor(e,t){this.g=e,this.map=t}};function qe(e){this.l=e||10,o.PerformanceNavigationTiming?e=(e=o.performance.getEntriesByType("navigation")).length>0&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ge(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Ke(e){return e.h?1:e.g?e.g.size:0}function Qe(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Ye(e,t){e.g?e.g.add(t):e.h=t}function $e(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Xe(e){if(null!=e.h)return e.i.concat(e.h.G);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.G);return t}return h(e.i)}qe.prototype.cancel=function(){if(this.i=Xe(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var Je=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ze(e){let t;this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1,e instanceof Ze?(this.l=e.l,tt(this,e.j),this.o=e.o,this.g=e.g,nt(this,e.u),this.h=e.h,rt(this,wt(e.i)),this.m=e.m):e&&(t=String(e).match(Je))?(this.l=!1,tt(this,t[1]||"",!0),this.o=st(t[2]||""),this.g=st(t[3]||"",!0),nt(this,t[4]),this.h=st(t[5]||"",!0),rt(this,t[6]||"",!0),this.m=st(t[7]||"")):(this.l=!1,this.i=new pt(null,this.l))}function et(e){return new Ze(e)}function tt(e,t,n){e.j=n?st(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function nt(e,t){if(t){if(t=Number(t),isNaN(t)||t<0)throw Error("Bad port number "+t);e.u=t}else e.u=null}function rt(e,t,n){t instanceof pt?(e.i=t,function(e,t){t&&!e.j&&(mt(e),e.i=null,e.g.forEach(function(e,t){const n=t.toLowerCase();t!=n&&(gt(this,t),bt(this,n,e))},e)),e.j=t}(e.i,e.l)):(n||(t=at(t,ht)),e.i=new pt(t,e.l))}function it(e,t,n){e.i.set(t,n)}function ot(e){return it(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function st(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function at(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,lt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function lt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Ze.prototype.toString=function(){const e=[];var t=this.j;t&&e.push(at(t,ct,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(at(t,ct,!0),"@"),e.push(Te(n).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.u)&&e.push(":",String(n))),(n=this.h)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(at(n,"/"==n.charAt(0)?dt:ut,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",at(n,ft)),e.join("")},Ze.prototype.resolve=function(e){const t=et(this);let n=!!e.j;n?tt(t,e.j):n=!!e.o,n?t.o=e.o:n=!!e.g,n?t.g=e.g:n=null!=e.u;var r=e.h;if(n)nt(t,e.u);else if(n=!!e.h){if("/"!=r.charAt(0))if(this.g&&!this.h)r="/"+r;else{var i=t.h.lastIndexOf("/");-1!=i&&(r=t.h.slice(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(-1!=i.indexOf("./")||-1!=i.indexOf("/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");const e=[];for(let t=0;t<i.length;){const n=i[t++];"."==n?r&&t==i.length&&e.push(""):".."==n?((e.length>1||1==e.length&&""!=e[0])&&e.pop(),r&&t==i.length&&e.push("")):(e.push(n),r=!0)}r=e.join("/")}else r=i}return n?t.h=r:n=""!==e.i.toString(),n?rt(t,wt(e.i)):n=!!e.m,n&&(t.m=e.m),t};var ct=/[#\/\?@]/g,ut=/[#\?:]/g,dt=/[#\?]/g,ht=/[#\?@]/g,ft=/#/g;function pt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function mt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(let n=0;n<e.length;n++){const r=e[n].indexOf("=");let i,o=null;r>=0?(i=e[n].substring(0,r),o=e[n].substring(r+1)):i=e[n],t(i,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function gt(e,t){mt(e),t=kt(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function vt(e,t){return mt(e),t=kt(e,t),e.g.has(t)}function yt(e,t){mt(e);let n=[];if("string"===typeof t)vt(e,t)&&(n=n.concat(e.g.get(kt(e,t))));else for(e=Array.from(e.g.values()),t=0;t<e.length;t++)n=n.concat(e[t]);return n}function bt(e,t,n){gt(e,t),n.length>0&&(e.i=null,e.g.set(kt(e,t),h(n)),e.h+=n.length)}function wt(e){const t=new pt;return t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),t}function kt(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function St(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch(o){}}function xt(){this.g=new ae}function Et(e){this.i=e.Sb||null,this.h=e.ab||!1}function Ct(e,t){X.call(this),this.H=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}function It(e){e.j.read().then(e.Ma.bind(e)).catch(e.ga.bind(e))}function _t(e){e.readyState=4,e.l=null,e.j=null,e.B=null,Tt(e)}function Tt(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Nt(e){let t="";return P(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function At(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Nt(n),"string"===typeof e?null!=n&&Te(n):it(e,t,n))}function Dt(e){X.call(this),this.headers=new Map,this.L=e||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}(e=pt.prototype).add=function(e,t){mt(this),this.i=null,e=kt(this,e);let n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){mt(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)},e.set=function(e,t){return mt(this),this.i=null,vt(this,e=kt(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&(e=yt(this,e)).length>0?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(let r=0;r<t.length;r++){var n=t[r];const i=Te(n);n=yt(this,n);for(let t=0;t<n.length;t++){let r=i;""!==n[t]&&(r+="="+Te(n[t])),e.push(r)}}return this.i=e.join("&")},u(Et,le),Et.prototype.g=function(){return new Ct(this.i,this.h)},u(Ct,X),(e=Ct.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.F=e,this.D=t,this.readyState=1,Tt(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const t={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};e&&(t.body=e),(this.H||o).fetch(new Request(this.D,t)).then(this.Pa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&4!=this.readyState&&(this.g=!1,_t(this)),this.readyState=0},e.Pa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Tt(this)),this.g&&(this.readyState=3,Tt(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if("undefined"!==typeof o.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;It(this)}else e.text().then(this.Oa.bind(this),this.ga.bind(this))},e.Ma=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.B.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?_t(this):Tt(this),3==this.readyState&&It(this)}},e.Oa=function(e){this.g&&(this.response=this.responseText=e,_t(this))},e.Na=function(e){this.g&&(this.response=e,_t(this))},e.ga=function(){this.g&&_t(this)},e.setRequestHeader=function(e,t){this.A.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Ct.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),u(Dt,X);var Pt=/^https?$/i,Rt=["POST","PUT"];function Lt(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.o=5,Ot(e),jt(e)}function Ot(e){e.A||(e.A=!0,J(e,"complete"),J(e,"error"))}function Mt(e){if(e.h&&"undefined"!=typeof i)if(e.v&&4==Ft(e))setTimeout(e.Ca.bind(e),0);else if(J(e,"readystatechange"),4==Ft(e)){e.h=!1;try{const i=e.ca();e:switch(i){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===i){let t=String(e.D).match(Je)[1]||null;!t&&o.self&&o.self.location&&(t=o.self.location.protocol.slice(0,-1)),r=!Pt.test(t?t.toLowerCase():"")}n=r}if(n)J(e,"complete"),J(e,"success");else{e.o=6;try{var s=Ft(e)>2?e.g.statusText:""}catch(a){s=""}e.l=s+" ["+e.ca()+"]",Ot(e)}}finally{jt(e)}}}function jt(e,t){if(e.g){e.m&&(clearTimeout(e.m),e.m=null);const r=e.g;e.g=null,t||J(e,"ready");try{r.onreadystatechange=null}catch(n){}}}function Ft(e){return e.g?e.g.readyState:0}function Bt(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.F){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Ut(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Vt(e){this.za=0,this.i=[],this.j=new Se,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ut("failFast",!1,e),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ut("baseRetryDelayMs",5e3,e),this.Za=Ut("retryDelaySeedMs",1e4,e),this.Ta=Ut("forwardChannelMaxRetries",2,e),this.va=Ut("forwardChannelRequestTimeoutMs",2e4,e),this.ma=e&&e.xmlHttpFactory||void 0,this.Ua=e&&e.Rb||void 0,this.Aa=e&&e.useFetchStreams||!1,this.O=void 0,this.L=e&&e.supportsCrossDomainXhr||!1,this.M="",this.h=new qe(e&&e.concurrentRequestLimit),this.Ba=new xt,this.S=e&&e.fastHandshake||!1,this.R=e&&e.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=e&&e.Pb||!1,e&&e.ua&&this.j.ua(),e&&e.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&e&&e.detectBufferingProxy||!1,this.ia=void 0,e&&e.longPollingTimeout&&e.longPollingTimeout>0&&(this.ia=e.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}function zt(e){if(Ht(e),3==e.I){var t=e.V++,n=et(e.J);if(it(n,"SID",e.M),it(n,"RID",t),it(n,"TYPE","terminate"),Kt(e,n),(t=new Ae(e,e.j,t)).M=2,t.A=ot(et(n)),n=!1,o.navigator&&o.navigator.sendBeacon)try{n=o.navigator.sendBeacon(t.A.toString(),"")}catch(r){}!n&&o.Image&&((new Image).src=t.A,n=!0),n||(t.g=sn(t.j,null),t.g.ea(t.A)),t.F=Date.now(),Fe(t)}rn(e)}function Wt(e){e.g&&(Xt(e),e.g.cancel(),e.g=null)}function Ht(e){Wt(e),e.v&&(o.clearTimeout(e.v),e.v=null),Zt(e),e.h.cancel(),e.m&&("number"===typeof e.m&&o.clearTimeout(e.m),e.m=null)}function qt(e){if(!Ge(e.h)&&!e.m){e.m=!0;var t=e.Ea;y||k(),b||(y(),b=!0),w.add(t,e),e.D=0}}function Gt(e,t){var n;n=t?t.l:e.V++;const r=et(e.J);it(r,"SID",e.M),it(r,"RID",n),it(r,"AID",e.K),Kt(e,r),e.u&&e.o&&At(r,e.u,e.o),n=new Ae(e,e.j,n,e.D+1),null===e.u&&(n.J=e.o),t&&(e.i=t.G.concat(e.i)),t=Qt(e,n,1e3),n.H=Math.round(.5*e.va)+Math.round(.5*e.va*Math.random()),Ye(e.h,n),Le(n,r,t)}function Kt(e,t){e.H&&P(e.H,function(e,n){it(t,n,e)}),e.l&&P({},function(e,n){it(t,n,e)})}function Qt(e,t,n){n=Math.min(e.i.length,n);const r=e.l?l(e.l.Ka,e.l,e):null;e:{var i=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?n>0?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let l=!0;for(let c=0;c<n;c++){var o=i[c].g;const n=i[c].map;if((o-=t)<0)t=Math.max(0,i[c].g-100),l=!1;else try{o="req"+o+"_"||0;try{var a=n instanceof Map?n:Object.entries(n);for(const[t,n]of a){let r=n;s(n)&&(r=oe(n)),e.push(o+t+"="+encodeURIComponent(r))}}catch(Bo){throw e.push(o+"type="+encodeURIComponent("_badmap")),Bo}}catch(Bo){r&&r(n)}}if(l){a=e.join("&");break e}}a=void 0}return e=e.i.splice(0,n),t.G=e,a}function Yt(e){if(!e.g&&!e.v){e.Y=1;var t=e.Da;y||k(),b||(y(),b=!0),w.add(t,e),e.A=0}}function $t(e){return!(e.g||e.v||e.A>=3)&&(e.Y++,e.v=ke(l(e.Da,e),tn(e,e.A)),e.A++,!0)}function Xt(e){null!=e.B&&(o.clearTimeout(e.B),e.B=null)}function Jt(e){e.g=new Ae(e,e.j,"rpc",e.Y),null===e.u&&(e.g.J=e.o),e.g.P=0;var t=et(e.na);it(t,"RID","rpc"),it(t,"SID",e.M),it(t,"AID",e.K),it(t,"CI",e.F?"0":"1"),!e.F&&e.ia&&it(t,"TO",e.ia),it(t,"TYPE","xmlhttp"),Kt(e,t),e.u&&e.o&&At(t,e.u,e.o),e.O&&(e.g.H=e.O);var n=e.g;e=e.ba,n.M=1,n.A=ot(et(t)),n.u=null,n.R=!0,Oe(n,e)}function Zt(e){null!=e.C&&(o.clearTimeout(e.C),e.C=null)}function en(e,t){var n=null;if(e.g==t){Zt(e),Xt(e),e.g=null;var r=2}else{if(!Qe(e.h,t))return;n=t.G,$e(e.h,t),r=1}if(0!=e.I)if(t.o)if(1==r){n=t.u?t.u.length:0,t=Date.now()-t.F;var i=e.D;J(r=me(),new we(r,n)),qt(e)}else Yt(e);else if(3==(i=t.m)||0==i&&t.X>0||!(1==r&&function(e,t){return!(Ke(e.h)>=e.h.j-(e.m?1:0))&&(e.m?(e.i=t.G.concat(e.i),!0):!(1==e.I||2==e.I||e.D>=(e.Sa?0:e.Ta))&&(e.m=ke(l(e.Ea,e,t),tn(e,e.D)),e.D++,!0))}(e,t)||2==r&&$t(e)))switch(n&&n.length>0&&(t=e.h,t.i=t.i.concat(n)),i){case 1:nn(e,5);break;case 4:nn(e,10);break;case 3:nn(e,6);break;default:nn(e,2)}}function tn(e,t){let n=e.Qa+Math.floor(Math.random()*e.Za);return e.isActive()||(n*=2),n*t}function nn(e,t){if(e.j.info("Error code "+t),2==t){var n=l(e.bb,e),r=e.Ua;const t=!r;r=new Ze(r||"//www.google.com/images/cleardot.gif"),o.location&&"http"==o.location.protocol||tt(r,"https"),ot(r),t?function(e,t){const n=new Se;if(o.Image){const r=new Image;r.onload=c(St,n,"TestLoadImage: loaded",!0,t,r),r.onerror=c(St,n,"TestLoadImage: error",!1,t,r),r.onabort=c(St,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=c(St,n,"TestLoadImage: timeout",!1,t,r),o.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new Se;const n=new AbortController,r=setTimeout(()=>{n.abort(),St(0,0,!1,t)},1e4);fetch(e,{signal:n.signal}).then(e=>{clearTimeout(r),e.ok?St(0,0,!0,t):St(0,0,!1,t)}).catch(()=>{clearTimeout(r),St(0,0,!1,t)})}(r.toString(),n)}else be(2);e.I=0,e.l&&e.l.pa(t),rn(e),Ht(e)}function rn(e){if(e.I=0,e.ja=[],e.l){const t=Xe(e.h);0==t.length&&0==e.i.length||(f(e.ja,t),f(e.ja,e.i),e.h.i.length=0,h(e.i),e.i.length=0),e.l.oa()}}function on(e,t,n){var r=n instanceof Ze?et(n):new Ze(n);if(""!=r.g)t&&(r.g=t+"."+r.g),nt(r,r.u);else{var i=o.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;const e=new Ze(null);r&&tt(e,r),t&&(e.g=t),i&&nt(e,i),n&&(e.h=n),r=e}return n=e.G,t=e.wa,n&&t&&it(r,n,t),it(r,"VER",e.ka),Kt(e,r),r}function sn(e,t,n){if(t&&!e.L)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Aa&&!e.ma?new Dt(new Et({ab:n})):new Dt(e.ma)).Fa(e.L),t}function an(){}function ln(){}function cn(e,t){X.call(this),this.g=new Vt(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.sa&&(e?e["X-WebChannel-Client-Profile"]=t.sa:e={"X-WebChannel-Client-Profile":t.sa}),this.g.U=e,(e=t&&t.Qb)&&!I(e)&&(this.g.u=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!I(t)&&(this.g.G=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new hn(this)}function un(e){de.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function dn(){he.call(this),this.status=1}function hn(e){this.g=e}(e=Dt.prototype).Fa=function(e){this.H=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ee.g(),this.g.onreadystatechange=d(l(this.Ca,this));try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(s){return void Lt(this,s)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),i=o.FormData&&e instanceof o.FormData,!(Array.prototype.indexOf.call(Rt,t,void 0)>=0)||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,a]of n)this.g.setRequestHeader(o,a);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(e),this.v=!1}catch(s){Lt(this,s)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=e||7,J(this,"complete"),J(this,"abort"),jt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),jt(this,!0)),Dt.Z.N.call(this)},e.Ca=function(){this.u||(this.B||this.v||this.j?Mt(this):this.Xa())},e.Xa=function(){Mt(this)},e.isActive=function(){return!!this.g},e.ca=function(){try{return Ft(this)>2?this.g.status:-1}catch(e){return-1}},e.la=function(){try{return this.g?this.g.responseText:""}catch(e){return""}},e.La=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),se(t)}},e.ya=function(){return this.o},e.Ha=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=Vt.prototype).ka=8,e.I=1,e.connect=function(e,t,n,r){be(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.J=on(this,null,this.W),qt(this)},e.Ea=function(e){if(this.m)if(this.m=null,1==this.I){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;const i=new Ae(this,this.j,e);let o=this.o;if(this.U&&(o?(o=R(o),O(o,this.U)):o=this.U),null!==this.u||this.R||(i.J=o,o=null),this.S)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if((t+=r)>4096){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=Qt(this,i,t),it(n=et(this.J),"RID",e),it(n,"CVER",22),this.G&&it(n,"X-HTTP-Session-Id",this.G),Kt(this,n),o&&(this.R?t="headers="+Te(Nt(o))+"&"+t:this.u&&At(n,this.u,o)),Ye(this.h,i),this.Ra&&it(n,"TYPE","init"),this.S?(it(n,"$req",t),it(n,"SID","null"),i.U=!0,Le(i,n,null)):Le(i,n,t),this.I=2}}else 3==this.I&&(e?Gt(this,e):0==this.i.length||Ge(this.h)||Gt(this))},e.Da=function(){if(this.v=null,Jt(this),this.aa&&!(this.P||null==this.g||this.T<=0)){var e=4*this.T;this.j.info("BP detection timer enabled: "+e),this.B=ke(l(this.Wa,this),e)}},e.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,be(10),Wt(this),Jt(this))},e.Va=function(){null!=this.C&&(this.C=null,Wt(this),$t(this),be(19))},e.bb=function(e){e?(this.j.info("Successfully pinged google.com"),be(2)):(this.j.info("Failed to ping google.com"),be(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=an.prototype).ra=function(){},e.qa=function(){},e.pa=function(){},e.oa=function(){},e.isActive=function(){return!0},e.Ka=function(){},ln.prototype.g=function(e,t){return new cn(e,t)},u(cn,X),cn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},cn.prototype.close=function(){zt(this.g)},cn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=oe(e),e=n);t.i.push(new He(t.Ya++,e)),3==t.I&&qt(t)},cn.prototype.N=function(){this.g.l=null,delete this.j,zt(this.g),delete this.g,cn.Z.N.call(this)},u(un,de),u(dn,he),u(hn,an),hn.prototype.ra=function(){J(this.g,"a")},hn.prototype.qa=function(e){J(this.g,new un(e))},hn.prototype.pa=function(e){J(this.g,new dn)},hn.prototype.oa=function(){J(this.g,"b")},ln.prototype.createWebChannel=ln.prototype.g,cn.prototype.send=cn.prototype.o,cn.prototype.open=cn.prototype.m,cn.prototype.close=cn.prototype.close,io=so.createWebChannelTransport=function(){return new ln},ro=so.getStatEventTarget=function(){return me()},no=so.Event=fe,to=so.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ce.NO_ERROR=0,Ce.TIMEOUT=8,Ce.HTTP_ERROR=6,eo=so.ErrorCode=Ce,Ie.COMPLETE="complete",Zi=so.EventType=Ie,ce.EventType=ue,ue.OPEN="a",ue.CLOSE="b",ue.ERROR="c",ue.MESSAGE="d",X.prototype.listen=X.prototype.J,Ji=so.WebChannel=ce,so.FetchXmlHttpFactory=Et,Dt.prototype.listenOnce=Dt.prototype.K,Dt.prototype.getLastError=Dt.prototype.Ha,Dt.prototype.getLastErrorCode=Dt.prototype.ya,Dt.prototype.getStatus=Dt.prototype.ca,Dt.prototype.getResponseJson=Dt.prototype.La,Dt.prototype.getResponseText=Dt.prototype.la,Dt.prototype.send=Dt.prototype.ea,Dt.prototype.setWithCredentials=Dt.prototype.Fa,Xi=so.XhrIo=Dt}).apply("undefined"!==typeof oo?oo:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});class ao{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ao.UNAUTHENTICATED=new ao(null),ao.GOOGLE_CREDENTIALS=new ao("google-credentials-uid"),ao.FIRST_PARTY=new ao("first-party-uid"),ao.MOCK_USER=new ao("mock-user");let lo="12.9.0";const co=new Z("@firebase/firestore");function uo(){return co.logLevel}function ho(e){if(co.logLevel<=Q.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(mo);co.debug("Firestore (".concat(lo,"): ").concat(e),...i)}}function fo(e){if(co.logLevel<=Q.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(mo);co.error("Firestore (".concat(lo,"): ").concat(e),...i)}}function po(e){if(co.logLevel<=Q.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(mo);co.warn("Firestore (".concat(lo,"): ").concat(e),...i)}}function mo(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function go(e,t,n){let r="Unexpected state";"string"==typeof t?r=t:n=t,vo(e,r,n)}function vo(e,t,n){let r="FIRESTORE (".concat(lo,") INTERNAL ASSERTION FAILED: ").concat(t," (ID: ").concat(e.toString(16),")");if(void 0!==n)try{r+=" CONTEXT: "+JSON.stringify(n)}catch(e){r+=" CONTEXT: "+n}throw fo(r),new Error(r)}function yo(e,t,n,r){let i="Unexpected state";"string"==typeof n?i=n:r=n,e||vo(t,i,r)}function bo(e,t){return e}const wo={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ko extends P{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class So{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class xo{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class Eo{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ao.UNAUTHENTICATED))}shutdown(){}}class Co{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Io{constructor(e){this.t=e,this.currentUser=ao.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){yo(void 0===this.o,42304);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new So;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new So,e.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const t=i;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},s=e=>{ho("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(e=>s(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?s(e):(ho("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new So)}},0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(ho("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(yo("string"==typeof t.accessToken,31837,{l:t}),new xo(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return yo(null===e||"string"==typeof e,2055,{h:e}),new ao(e)}}class _o{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=ao.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class To{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new _o(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(ao.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class No{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Ao{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,et(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){yo(void 0===this.o,3512);const n=e=>{null!=e.error&&ho("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.m;return this.m=e.token,ho("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const r=e=>{ho("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){const e=this.V.getImmediate({optional:!0});e?r(e):ho("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new No(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(yo("string"==typeof e.token,44558,{tokenResult:e}),this.m=e.token,new No(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function Do(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class Po{static newId(){const e=62*Math.floor(256/62);let t="";for(;t.length<20;){const n=Do(40);for(let r=0;r<n.length;++r)t.length<20&&n[r]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[r]%62))}return t}}function Ro(e,t){return e<t?-1:e>t?1:0}function Lo(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.charAt(r),i=t.charAt(r);if(n!==i)return jo(n)===jo(i)?Ro(n,i):jo(n)?1:-1}return Ro(e.length,t.length)}const Oo=55296,Mo=57343;function jo(e){const t=e.charCodeAt(0);return t>=Oo&&t<=Mo}function Fo(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}const Bo="__name__";class Uo{constructor(e,t,n){void 0===t?t=0:t>e.length&&go(637,{offset:t,range:e.length}),void 0===n?n=e.length-t:n>e.length-t&&go(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===Uo.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Uo?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=Uo.compareSegments(e.get(r),t.get(r));if(0!==n)return n}return Ro(e.length,t.length)}static compareSegments(e,t){const n=Uo.isNumericId(e),r=Uo.isNumericId(t);return n&&!r?-1:!n&&r?1:n&&r?Uo.extractNumericId(e).compare(Uo.extractNumericId(t)):Lo(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ki.fromString(e.substring(4,e.length-2))}}class Vo extends Uo{construct(e,t,n){return new Vo(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new ko(wo.INVALID_ARGUMENT,"Invalid segment (".concat(i,"). Paths must not contain // in them."));e.push(...i.split("/").filter(e=>e.length>0))}return new Vo(e)}static emptyPath(){return new Vo([])}}const zo=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Wo extends Uo{construct(e,t,n){return new Wo(e,t,n)}static isValidIdentifier(e){return zo.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Wo.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===Bo}static keyField(){return new Wo([Bo])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new ko(wo.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let o=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new ko(wo.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new ko(wo.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(o=!o,r++):"."!==t||o?(n+=t,r++):(i(),r++)}if(i(),o)throw new ko(wo.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Wo(t)}static emptyPath(){return new Wo([])}}class Ho{constructor(e){this.path=e}static fromPath(e){return new Ho(Vo.fromString(e))}static fromName(e){return new Ho(Vo.fromString(e).popFirst(5))}static empty(){return new Ho(Vo.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Vo.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Vo.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ho(new Vo(e.slice()))}}function qo(e,t,n){if(!n)throw new ko(wo.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function Go(e){if(!Ho.isDocumentKey(e))throw new ko(wo.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function Ko(e){if(Ho.isDocumentKey(e))throw new ko(wo.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function Qo(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}function Yo(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":go(12329,{type:typeof e})}function $o(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new ko(wo.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Yo(e);throw new ko(wo.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}function Xo(e,t){const n={typeString:e};return t&&(n.value=t),n}function Jo(e,t){if(!Qo(e))throw new ko(wo.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in t)if(t[r]){const i=t[r].typeString,o="value"in t[r]?{value:t[r].value}:void 0;if(!(r in e)){n="JSON missing required field: '".concat(r,"'");break}const s=e[r];if(i&&typeof s!==i){n="JSON field '".concat(r,"' must be a ").concat(i,".");break}if(void 0!==o&&s!==o.value){n="Expected '".concat(r,"' field to equal '").concat(o.value,"'");break}}if(n)throw new ko(wo.INVALID_ARGUMENT,n);return!0}const Zo=-62135596800,es=1e6;class ts{static now(){return ts.fromMillis(Date.now())}static fromDate(e){return ts.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*es);return new ts(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ko(wo.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ko(wo.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Zo)throw new ko(wo.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ko(wo.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/es}_compareTo(e){return this.seconds===e.seconds?Ro(this.nanoseconds,e.nanoseconds):Ro(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ts._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Jo(e,ts._jsonSchema))return new ts(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Zo;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ts._jsonSchemaVersion="firestore/timestamp/1.0",ts._jsonSchema={type:Xo("string",ts._jsonSchemaVersion),seconds:Xo("number"),nanoseconds:Xo("number")};class ns{static fromTimestamp(e){return new ns(e)}static min(){return new ns(new ts(0,0))}static max(){return new ns(new ts(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const rs=-1;class is{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}is.UNKNOWN_ID=-1;function os(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=ns.fromTimestamp(1e9===r?new ts(n+1,0):new ts(n,r));return new as(i,Ho.empty(),t)}function ss(e){return new as(e.readTime,e.key,rs)}class as{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new as(ns.min(),Ho.empty(),rs)}static max(){return new as(ns.max(),Ho.empty(),rs)}}function ls(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=Ho.comparator(e.documentKey,t.documentKey),0!==n?n:Ro(e.largestBatchId,t.largestBatchId))}const cs="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class us{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function ds(e){if(e.code!==wo.FAILED_PRECONDITION||e.message!==cs)throw e;ho("LocalStore","Unexpectedly lost primary lease")}class hs{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&go(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new hs((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof hs?t:hs.resolve(t)}catch(e){return hs.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):hs.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):hs.reject(t)}static resolve(e){return new hs((t,n)=>{t(e)})}static reject(e){return new hs((t,n)=>{n(e)})}static waitFor(e){return new hs((t,n)=>{let r=0,i=0,o=!1;e.forEach(e=>{++r,e.next(()=>{++i,o&&i===r&&t()},e=>n(e))}),o=!0,i===r&&t()})}static or(e){let t=hs.resolve(!1);for(const n of e)t=t.next(e=>e?hs.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}static mapArray(e,t){return new hs((n,r)=>{const i=e.length,o=new Array(i);let s=0;for(let a=0;a<i;a++){const l=a;t(e[l]).next(e=>{o[l]=e,++s,s===i&&n(o)},e=>r(e))}})}static doWhile(e,t){return new hs((n,r)=>{const i=()=>{!0===e()?t().next(()=>{i()},r):n()};i()})}}function fs(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ps(e){return"IndexedDbTransactionError"===e.name}class ms{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ae(e),this.ue=e=>t.writeSequenceNumber(e))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}ms.ce=-1;const gs=-1;function vs(e){return null==e}function ys(e){return 0===e&&1/e==-1/0}function bs(e){return"number"==typeof e&&Number.isInteger(e)&&!ys(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}const ws="\x01";function ks(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=xs(t)),t=Ss(e.get(n),t);return xs(t)}function Ss(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case ws:n+="\x01\x11";break;default:n+=t}}return n}function xs(e){return e+ws+"\x01"}const Es="remoteDocuments",Cs="owner",Is="mutationQueues",_s="mutations";const Ts="documentMutations",Ns="remoteDocumentsV14",As="remoteDocumentGlobal",Ds="targets",Ps="targetDocuments",Rs="targetGlobal",Ls="collectionParents",Os="clientMetadata",Ms="bundles",js="namedQueries",Fs="indexConfiguration",Bs="indexState",Us="indexEntries",Vs="documentOverlays",zs="globals",Ws=[Is,_s,Ts,Es,Ds,Cs,Rs,Ps,Os,As,Ls,Ms,js],Hs=[Is,_s,Ts,Ns,Ds,Cs,Rs,Ps,Os,As,Ls,Ms,js,Vs],qs=Hs,Gs=[...qs,Fs,Bs,Us];function Ks(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Qs(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Ys(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class $s{constructor(e,t){this.comparator=e,this.root=t||Js.EMPTY}insert(e,t){return new $s(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Js.BLACK,null,null))}remove(e){return new $s(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Js.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push("".concat(t,":").concat(n)),!1)),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Xs(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Xs(this.root,e,this.comparator,!1)}getReverseIterator(){return new Xs(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Xs(this.root,e,this.comparator,!0)}}class Xs{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Js{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:Js.RED,this.left=null!=r?r:Js.EMPTY,this.right=null!=i?i:Js.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new Js(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Js.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return Js.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Js.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Js.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw go(43730,{key:this.key,value:this.value});if(this.right.isRed())throw go(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw go(27949);return e+(this.isRed()?0:1)}}Js.EMPTY=null,Js.RED=!0,Js.BLACK=!1,Js.EMPTY=new class{constructor(){this.size=0}get key(){throw go(57766)}get value(){throw go(16141)}get color(){throw go(16727)}get left(){throw go(29726)}get right(){throw go(36894)}copy(e,t,n,r,i){return this}insert(e,t,n){return new Js(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Zs{constructor(e){this.comparator=e,this.data=new $s(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new ea(this.data.getIterator())}getIteratorFrom(e){return new ea(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof Zs))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Zs(this.comparator);return t.data=e,t}}class ea{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class ta{constructor(e){this.fields=e,e.sort(Wo.comparator)}static empty(){return new ta([])}unionWith(e){let t=new Zs(Wo.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new ta(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Fo(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class na extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class ra{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new na("Invalid base64 string: "+e):e}}(e);return new ra(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new ra(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ro(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ra.EMPTY_BYTE_STRING=new ra("");const ia=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function oa(e){if(yo(!!e,39018),"string"==typeof e){let t=0;const n=ia.exec(e);if(yo(!!n,46558,{timestamp:e}),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:sa(e.seconds),nanos:sa(e.nanos)}}function sa(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function aa(e){return"string"==typeof e?ra.fromBase64String(e):ra.fromUint8Array(e)}const la="server_timestamp",ca="__type__",ua="__previous_value__",da="__local_write_time__";function ha(e){var t,n;return(null===(t=((null===e||void 0===e||null===(n=e.mapValue)||void 0===n?void 0:n.fields)||{})[ca])||void 0===t?void 0:t.stringValue)===la}function fa(e){const t=e.mapValue.fields[ua];return ha(t)?fa(t):t}function pa(e){const t=oa(e.mapValue.fields[da].timestampValue);return new ts(t.seconds,t.nanos)}class ma{constructor(e,t,n,r,i,o,s,a,l,c,u){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.longPollingOptions=a,this.useFetchStreams=l,this.isUsingEmulator=c,this.apiKey=u}}const ga="(default)";class va{constructor(e,t){this.projectId=e,this.database=t||ga}static empty(){return new va("","")}get isDefaultDatabase(){return this.database===ga}isEqual(e){return e instanceof va&&e.projectId===this.projectId&&e.database===this.database}}const ya="__type__",ba="__max__",wa={mapValue:{fields:{__type__:{stringValue:ba}}}},ka="__vector__",Sa="value";function xa(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?ha(e)?4:Ua(e)?9007199254740991:Fa(e)?10:11:go(28295,{value:e})}function Ea(e,t){if(e===t)return!0;const n=xa(e);if(n!==xa(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return pa(e).isEqual(pa(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=oa(e.timestampValue),r=oa(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return aa(e.bytesValue).isEqual(aa(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return sa(e.geoPointValue.latitude)===sa(t.geoPointValue.latitude)&&sa(e.geoPointValue.longitude)===sa(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return sa(e.integerValue)===sa(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=sa(e.doubleValue),r=sa(t.doubleValue);return n===r?ys(n)===ys(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Fo(e.arrayValue.values||[],t.arrayValue.values||[],Ea);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Ks(n)!==Ks(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Ea(n[i],r[i])))return!1;return!0}(e,t);default:return go(52216,{left:e})}}function Ca(e,t){return void 0!==(e.values||[]).find(e=>Ea(e,t))}function Ia(e,t){if(e===t)return 0;const n=xa(e),r=xa(t);if(n!==r)return Ro(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ro(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=sa(e.integerValue||e.doubleValue),r=sa(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return _a(e.timestampValue,t.timestampValue);case 4:return _a(pa(e),pa(t));case 5:return Lo(e.stringValue,t.stringValue);case 6:return function(e,t){const n=aa(e),r=aa(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=Ro(n[i],r[i]);if(0!==e)return e}return Ro(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Ro(sa(e.latitude),sa(t.latitude));return 0!==n?n:Ro(sa(e.longitude),sa(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return Ta(e.arrayValue,t.arrayValue);case 10:return function(e,t,n,r,i,o){const s=e.fields||{},a=t.fields||{},l=null===(n=s[Sa])||void 0===n?void 0:n.arrayValue,c=null===(r=a[Sa])||void 0===r?void 0:r.arrayValue,u=Ro((null===l||void 0===l||null===(i=l.values)||void 0===i?void 0:i.length)||0,(null===c||void 0===c||null===(o=c.values)||void 0===o?void 0:o.length)||0);return 0!==u?u:Ta(l,c)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===wa.mapValue&&t===wa.mapValue)return 0;if(e===wa.mapValue)return 1;if(t===wa.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},o=Object.keys(i);r.sort(),o.sort();for(let s=0;s<r.length&&s<o.length;++s){const e=Lo(r[s],o[s]);if(0!==e)return e;const t=Ia(n[r[s]],i[o[s]]);if(0!==t)return t}return Ro(r.length,o.length)}(e.mapValue,t.mapValue);default:throw go(23264,{he:n})}}function _a(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Ro(e,t);const n=oa(e),r=oa(t),i=Ro(n.seconds,r.seconds);return 0!==i?i:Ro(n.nanos,r.nanos)}function Ta(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=Ia(n[i],r[i]);if(e)return e}return Ro(n.length,r.length)}function Na(e){return Aa(e)}function Aa(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=oa(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return aa(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return Ho.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Aa(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+="".concat(i,":").concat(Aa(e.fields[i]));return n+"}"}(e.mapValue):go(61005,{value:e})}function Da(e){switch(xa(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=fa(e);return t?16+Da(t):16;case 5:return 2*e.stringValue.length;case 6:return aa(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(e){return(e.values||[]).reduce((e,t)=>e+Da(t),0)}(e.arrayValue);case 10:case 11:return function(e){let t=0;return Qs(e.fields,(e,n)=>{t+=e.length+Da(n)}),t}(e.mapValue);default:throw go(13486,{value:e})}}function Pa(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Ra(e){return!!e&&"integerValue"in e}function La(e){return!!e&&"arrayValue"in e}function Oa(e){return!!e&&"nullValue"in e}function Ma(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function ja(e){return!!e&&"mapValue"in e}function Fa(e){var t,n;return(null===(t=((null===e||void 0===e||null===(n=e.mapValue)||void 0===n?void 0:n.fields)||{})[ya])||void 0===t?void 0:t.stringValue)===ka}function Ba(e){if(e.geoPointValue)return{geoPointValue:d({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:d({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Qs(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=Ba(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Ba(e.arrayValue.values[n]);return t}return d({},e)}function Ua(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===ba}class Va{constructor(e){this.value=e}static empty(){return new Va({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!ja(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ba(t)}setAll(e){let t=Wo.emptyPath(),n={},r=[];e.forEach((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=Ba(e):r.push(i.lastSegment())});const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());ja(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ea(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];ja(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Qs(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new Va(Ba(this.value))}}function za(e){const t=[];return Qs(e.fields,(e,n)=>{const r=new Wo([e]);if(ja(n)){const e=za(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new ta(t)}class Wa{constructor(e,t,n,r,i,o,s){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=o,this.documentState=s}static newInvalidDocument(e){return new Wa(e,0,ns.min(),ns.min(),ns.min(),Va.empty(),0)}static newFoundDocument(e,t,n,r){return new Wa(e,1,t,ns.min(),n,r,0)}static newNoDocument(e,t){return new Wa(e,2,t,ns.min(),ns.min(),Va.empty(),0)}static newUnknownDocument(e,t){return new Wa(e,3,t,ns.min(),ns.min(),Va.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ns.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Va.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Va.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ns.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Wa&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Wa(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class Ha{constructor(e,t){this.position=e,this.inclusive=t}}function qa(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const o=t[i],s=e.position[i];if(r=o.field.isKeyField()?Ho.comparator(Ho.fromName(s.referenceValue),n.key):Ia(s,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return r}function Ga(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Ea(e.position[n],t.position[n]))return!1;return!0}class Ka{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function Qa(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class Ya{}class $a extends Ya{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new il(e,t,n):"array-contains"===t?new ll(e,n):"in"===t?new cl(e,n):"not-in"===t?new ul(e,n):"array-contains-any"===t?new dl(e,n):new $a(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new ol(e,n):new sl(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&void 0===t.nullValue&&this.matchesComparison(Ia(t,this.value)):null!==t&&xa(this.value)===xa(t)&&this.matchesComparison(Ia(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return go(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Xa extends Ya{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Xa(e,t)}matches(e){return Ja(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.Pe||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Ja(e){return"and"===e.op}function Za(e){return el(e)&&Ja(e)}function el(e){for(const t of e.filters)if(t instanceof Xa)return!1;return!0}function tl(e){if(e instanceof $a)return e.field.canonicalString()+e.op.toString()+Na(e.value);if(Za(e))return e.filters.map(e=>tl(e)).join(",");{const t=e.filters.map(e=>tl(e)).join(",");return"".concat(e.op,"(").concat(t,")")}}function nl(e,t){return e instanceof $a?function(e,t){return t instanceof $a&&e.op===t.op&&e.field.isEqual(t.field)&&Ea(e.value,t.value)}(e,t):e instanceof Xa?function(e,t){return t instanceof Xa&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,r)=>e&&nl(n,t.filters[r]),!0)}(e,t):void go(19439)}function rl(e){return e instanceof $a?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(Na(e.value))}(e):e instanceof Xa?function(e){return e.op.toString()+" {"+e.getFilters().map(rl).join(" ,")+"}"}(e):"Filter"}class il extends $a{constructor(e,t,n){super(e,t,n),this.key=Ho.fromName(n.referenceValue)}matches(e){const t=Ho.comparator(e.key,this.key);return this.matchesComparison(t)}}class ol extends $a{constructor(e,t){super(e,"in",t),this.keys=al("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class sl extends $a{constructor(e,t){super(e,"not-in",t),this.keys=al("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function al(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>Ho.fromName(e.referenceValue))}class ll extends $a{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return La(t)&&Ca(t.arrayValue,this.value)}}class cl extends $a{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Ca(this.value.arrayValue,t)}}class ul extends $a{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ca(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&void 0===t.nullValue&&!Ca(this.value.arrayValue,t)}}class dl extends $a{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!La(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>Ca(this.value.arrayValue,e))}}class hl{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.Te=null}}function fl(e){return new hl(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function pl(e){const t=bo(e);if(null===t.Te){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>tl(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),vs(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>Na(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>Na(e)).join(",")),t.Te=e}return t.Te}function ml(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Qa(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!nl(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Ga(e.startAt,t.startAt)&&Ga(e.endAt,t.endAt)}function gl(e){return Ho.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class vl{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function yl(e,t,n,r,i,o,s,a){return new vl(e,t,n,r,i,o,s,a)}function bl(e){return new vl(e)}function wl(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function kl(e){return null!==e.collectionGroup}function Sl(e){const t=bo(e);if(null===t.Ie){t.Ie=[];const e=new Set;for(const i of t.explicitOrderBy)t.Ie.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new Zs(Wo.comparator);return e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t}(t);r.forEach(r=>{e.has(r.canonicalString())||r.isKeyField()||t.Ie.push(new Ka(r,n))}),e.has(Wo.keyField().canonicalString())||t.Ie.push(new Ka(Wo.keyField(),n))}return t.Ie}function xl(e){const t=bo(e);return t.Ee||(t.Ee=El(t,Sl(e))),t.Ee}function El(e,t){if("F"===e.limitType)return fl(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{const t="desc"===e.dir?"asc":"desc";return new Ka(e.field,t)});const n=e.endAt?new Ha(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Ha(e.startAt.position,e.startAt.inclusive):null;return fl(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Cl(e,t){const n=e.filters.concat([t]);return new vl(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Il(e,t,n){return new vl(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function _l(e,t){return ml(xl(e),xl(t))&&e.limitType===t.limitType}function Tl(e){return"".concat(pl(xl(e)),"|lt:").concat(e.limitType)}function Nl(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map(e=>rl(e)).join(", "),"]")),vs(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map(e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>Na(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>Na(e)).join(",")),"Target(".concat(t,")")}(xl(e)),"; limitType=").concat(e.limitType,")")}function Al(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Ho.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of Sl(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=qa(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Sl(e),t))&&!(e.endAt&&!function(e,t,n){const r=qa(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Sl(e),t))}(e,t)}function Dl(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Pl(e){return(t,n)=>{let r=!1;for(const i of Sl(e)){const e=Rl(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function Rl(e,t,n){const r=e.field.isKeyField()?Ho.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Ia(r,i):go(42886)}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return go(19790,{direction:e.dir})}}class Ll{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Qs(this.inner,(t,n)=>{for(const[r,i]of n)e(r,i)})}isEmpty(){return Ys(this.inner)}size(){return this.innerSize}}const Ol=new $s(Ho.comparator);function Ml(){return Ol}const jl=new $s(Ho.comparator);function Fl(){let e=jl;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function Bl(e){let t=jl;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function Ul(){return zl()}function Vl(){return zl()}function zl(){return new Ll(e=>e.toString(),(e,t)=>e.isEqual(t))}const Wl=new $s(Ho.comparator),Hl=new Zs(Ho.comparator);function ql(){let e=Hl;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const Gl=new Zs(Ro);function Kl(){return Gl}function Ql(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ys(t)?"-0":t}}function Yl(e){return{integerValue:""+e}}function $l(e,t){return bs(t)?Yl(t):Ql(e,t)}class Xl{constructor(){this._=void 0}}function Jl(e,t,n){return e instanceof tc?function(e,t){const n={fields:{[ca]:{stringValue:la},[da]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&ha(t)&&(t=fa(t)),t&&(n.fields[ua]=t),{mapValue:n}}(n,t):e instanceof nc?rc(e,t):e instanceof ic?oc(e,t):function(e,t){const n=ec(e,t),r=ac(n)+ac(e.Ae);return Ra(n)&&Ra(e.Ae)?Yl(r):Ql(e.serializer,r)}(e,t)}function Zl(e,t,n){return e instanceof nc?rc(e,t):e instanceof ic?oc(e,t):n}function ec(e,t){return e instanceof sc?function(e){return Ra(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class tc extends Xl{}class nc extends Xl{constructor(e){super(),this.elements=e}}function rc(e,t){const n=lc(t);for(const r of e.elements)n.some(e=>Ea(e,r))||n.push(r);return{arrayValue:{values:n}}}class ic extends Xl{constructor(e){super(),this.elements=e}}function oc(e,t){let n=lc(t);for(const r of e.elements)n=n.filter(e=>!Ea(e,r));return{arrayValue:{values:n}}}class sc extends Xl{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function ac(e){return sa(e.integerValue||e.doubleValue)}function lc(e){return La(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class cc{constructor(e,t){this.field=e,this.transform=t}}class uc{constructor(e,t){this.version=e,this.transformResults=t}}class dc{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new dc}static exists(e){return new dc(void 0,e)}static updateTime(e){return new dc(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function hc(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class fc{}function pc(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Ec(e.key,dc.none()):new bc(e.key,e.data,dc.none());{const n=e.data,r=Va.empty();let i=new Zs(Wo.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new wc(e.key,r,new ta(i.toArray()),dc.none())}}function mc(e,t,n){e instanceof bc?function(e,t,n){const r=e.value.clone(),i=Sc(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof wc?function(e,t,n){if(!hc(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Sc(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(kc(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function gc(e,t,n,r){return e instanceof bc?function(e,t,n,r){if(!hc(e.precondition,t))return n;const i=e.value.clone(),o=xc(e.fieldTransforms,r,t);return i.setAll(o),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof wc?function(e,t,n,r){if(!hc(e.precondition,t))return n;const i=xc(e.fieldTransforms,r,t),o=t.data;return o.setAll(kc(e)),o.setAll(i),t.convertToFoundDocument(t.version,o).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,r):function(e,t,n){return hc(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function vc(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=ec(r.transform,e||null);null!=i&&(null===n&&(n=Va.empty()),n.set(r.field,i))}return n||null}function yc(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Fo(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof nc&&t instanceof nc||e instanceof ic&&t instanceof ic?Fo(e.elements,t.elements,Ea):e instanceof sc&&t instanceof sc?Ea(e.Ae,t.Ae):e instanceof tc&&t instanceof tc}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class bc extends fc{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class wc extends fc{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function kc(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function Sc(e,t,n){const r=new Map;yo(e.length===n.length,32656,{Ve:n.length,de:e.length});for(let i=0;i<n.length;i++){const o=e[i],s=o.transform,a=t.data.field(o.field);r.set(o.field,Zl(s,a,n[i]))}return r}function xc(e,t,n){const r=new Map;for(const i of e){const e=i.transform,o=n.data.field(i.field);r.set(i.field,Jl(e,o,t))}return r}class Ec extends fc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Cc extends fc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Ic{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&mc(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=gc(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=gc(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=Vl();return this.mutations.forEach(r=>{const i=e.get(r.key),o=i.overlayedDocument;let s=this.applyToLocalView(o,i.mutatedFields);s=t.has(r.key)?null:s;const a=pc(o,s);null!==a&&n.set(r.key,a),o.isValidDocument()||o.convertToNoDocument(ns.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ql())}isEqual(e){return this.batchId===e.batchId&&Fo(this.mutations,e.mutations,(e,t)=>yc(e,t))&&Fo(this.baseMutations,e.baseMutations,(e,t)=>yc(e,t))}}class _c{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){yo(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let r=Wl;const i=e.mutations;for(let o=0;o<i.length;o++)r=r.insert(i[o].key,n[o].version);return new _c(e,t,n,r)}}class Tc{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class Nc{constructor(e,t){this.count=e,this.unchangedNames=t}}var Ac,Dc;function Pc(e){switch(e){case wo.OK:return go(64938);case wo.CANCELLED:case wo.UNKNOWN:case wo.DEADLINE_EXCEEDED:case wo.RESOURCE_EXHAUSTED:case wo.INTERNAL:case wo.UNAVAILABLE:case wo.UNAUTHENTICATED:return!1;case wo.INVALID_ARGUMENT:case wo.NOT_FOUND:case wo.ALREADY_EXISTS:case wo.PERMISSION_DENIED:case wo.FAILED_PRECONDITION:case wo.ABORTED:case wo.OUT_OF_RANGE:case wo.UNIMPLEMENTED:case wo.DATA_LOSS:return!0;default:return go(15467,{code:e})}}function Rc(e){if(void 0===e)return fo("GRPC error has no .code"),wo.UNKNOWN;switch(e){case Ac.OK:return wo.OK;case Ac.CANCELLED:return wo.CANCELLED;case Ac.UNKNOWN:return wo.UNKNOWN;case Ac.DEADLINE_EXCEEDED:return wo.DEADLINE_EXCEEDED;case Ac.RESOURCE_EXHAUSTED:return wo.RESOURCE_EXHAUSTED;case Ac.INTERNAL:return wo.INTERNAL;case Ac.UNAVAILABLE:return wo.UNAVAILABLE;case Ac.UNAUTHENTICATED:return wo.UNAUTHENTICATED;case Ac.INVALID_ARGUMENT:return wo.INVALID_ARGUMENT;case Ac.NOT_FOUND:return wo.NOT_FOUND;case Ac.ALREADY_EXISTS:return wo.ALREADY_EXISTS;case Ac.PERMISSION_DENIED:return wo.PERMISSION_DENIED;case Ac.FAILED_PRECONDITION:return wo.FAILED_PRECONDITION;case Ac.ABORTED:return wo.ABORTED;case Ac.OUT_OF_RANGE:return wo.OUT_OF_RANGE;case Ac.UNIMPLEMENTED:return wo.UNIMPLEMENTED;case Ac.DATA_LOSS:return wo.DATA_LOSS;default:return go(39323,{code:e})}}(Dc=Ac||(Ac={}))[Dc.OK=0]="OK",Dc[Dc.CANCELLED=1]="CANCELLED",Dc[Dc.UNKNOWN=2]="UNKNOWN",Dc[Dc.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Dc[Dc.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Dc[Dc.NOT_FOUND=5]="NOT_FOUND",Dc[Dc.ALREADY_EXISTS=6]="ALREADY_EXISTS",Dc[Dc.PERMISSION_DENIED=7]="PERMISSION_DENIED",Dc[Dc.UNAUTHENTICATED=16]="UNAUTHENTICATED",Dc[Dc.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Dc[Dc.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Dc[Dc.ABORTED=10]="ABORTED",Dc[Dc.OUT_OF_RANGE=11]="OUT_OF_RANGE",Dc[Dc.UNIMPLEMENTED=12]="UNIMPLEMENTED",Dc[Dc.INTERNAL=13]="INTERNAL",Dc[Dc.UNAVAILABLE=14]="UNAVAILABLE",Dc[Dc.DATA_LOSS=15]="DATA_LOSS";let Lc=null;function Oc(){return new TextEncoder}const Mc=new Ki([4294967295,4294967295],0);function jc(e){const t=Oc().encode(e),n=new Qi;return n.update(t),new Uint8Array(n.digest())}function Fc(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),o=t.getUint32(12,!0);return[new Ki([n,r],0),new Ki([i,o],0)]}class Bc{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new Uc("Invalid padding: ".concat(t));if(n<0)throw new Uc("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new Uc("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new Uc("Invalid padding when bitmap length is 0: ".concat(t));this.ge=8*e.length-t,this.pe=Ki.fromNumber(this.ge)}ye(e,t,n){let r=e.add(t.multiply(Ki.fromNumber(n)));return 1===r.compare(Mc)&&(r=new Ki([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.ge)return!1;const t=jc(e),[n,r]=Fc(t);for(let i=0;i<this.hashCount;i++){const e=this.ye(n,r,i);if(!this.we(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Bc(i,r,t);return n.forEach(e=>o.insert(e)),o}insert(e){if(0===this.ge)return;const t=jc(e),[n,r]=Fc(t);for(let i=0;i<this.hashCount;i++){const e=this.ye(n,r,i);this.be(e)}}be(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class Uc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Vc{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,zc.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new Vc(ns.min(),r,new $s(Ro),Ml(),ql())}}class zc{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new zc(n,t,ql(),ql(),ql())}}class Wc{constructor(e,t,n,r){this.Se=e,this.removedTargetIds=t,this.key=n,this.De=r}}class Hc{constructor(e,t){this.targetId=e,this.Ce=t}}class qc{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ra.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class Gc{constructor(){this.ve=0,this.Fe=Yc(),this.Me=ra.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return 0!==this.ve}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ql(),t=ql(),n=ql();return this.Fe.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:go(38017,{changeType:i})}}),new zc(this.Me,this.xe,e,t,n)}Ke(){this.Oe=!1,this.Fe=Yc()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,yo(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class Kc{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ml(),this.He=Qc(),this.Je=Qc(),this.Ze=new $s(Ro)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{const n=this.nt(t);switch(e.state){case 0:this.rt(t)&&n.Le(e.resumeToken);break;case 1:n.We(),n.Ne||n.Ke(),n.Le(e.resumeToken);break;case 2:n.We(),n.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(n.Qe(),n.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),n.Le(e.resumeToken));break;default:go(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((e,n)=>{this.rt(n)&&t(n)})}st(e){const t=e.targetId,n=e.Ce.count,r=this.ot(t);if(r){const o=r.target;if(gl(o))if(0===n){const e=new Ho(o.path);this.et(t,e,Wa.newNoDocument(e,ns.min()))}else yo(1===n,20013,{expectedCount:n});else{const r=this._t(t);if(r!==n){var i;const n=this.ut(e),o=n?this.ct(n,e,r):1;if(0!==o){this.it(t);const e=2===o?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,e)}null===(i=Lc)||void 0===i||i.lt(function(e,t,n,r,i,o,s,a,l,c){const u={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},d=t.unchangedNames;return d&&(u.bloomFilter={applied:0===i,hashCount:null!==(o=null===d||void 0===d?void 0:d.hashCount)&&void 0!==o?o:0,bitmapLength:null!==(s=null===d||void 0===d||null===(a=d.bits)||void 0===a||null===(a=a.bitmap)||void 0===a?void 0:a.length)&&void 0!==s?s:0,padding:null!==(l=null===d||void 0===d||null===(c=d.bits)||void 0===c?void 0:c.padding)&&void 0!==l?l:0,mightContain:e=>{var t;return null!==(t=null===r||void 0===r?void 0:r.mightContain(e))&&void 0!==t&&t}}),u}(r,e.Ce,this.Ge.ht(),n,o))}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let o,s;try{o=aa(n).toUint8Array()}catch(e){if(e instanceof na)return po("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{s=new Bc(o,r,i)}catch(e){return po(e instanceof Uc?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===s.ge?null:s}ct(e,t,n){return t.Ce.count===n-this.Pt(e,t.targetId)?0:2}Pt(e,t){const n=this.Ge.getRemoteKeysForTarget(t);let r=0;return n.forEach(n=>{const i=this.Ge.ht(),o="projects/".concat(i.projectId,"/databases/").concat(i.database,"/documents/").concat(n.path.canonicalString());e.mightContain(o)||(this.et(t,n,null),r++)}),r}Tt(e){const t=new Map;this.ze.forEach((n,r)=>{const i=this.ot(r);if(i){if(n.current&&gl(i.target)){const t=new Ho(i.target.path);this.It(t).has(r)||this.Et(r,t)||this.et(r,t,Wa.newNoDocument(t,e))}n.Be&&(t.set(r,n.ke()),n.Ke())}});let n=ql();this.Je.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this.ot(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))}),this.je.forEach((t,n)=>n.setReadTime(e));const r=new Vc(e,t,this.Ze,this.je,n);return this.je=Ml(),this.He=Qc(),this.Je=Qc(),this.Ze=new $s(Ro),r}Ye(e,t){if(!this.rt(e))return;const n=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,n),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,n){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,t)?r.qe(t,1):r.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),n&&(this.je=this.je.insert(t,n))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new Gc,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new Zs(Ro),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new Zs(Ro),this.He=this.He.insert(e,t)),t}rt(e){const t=null!==this.ot(e);return t||ho("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Gc),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Qc(){return new $s(Ho.comparator)}function Yc(){return new $s(Ho.comparator)}const $c={asc:"ASCENDING",desc:"DESCENDING"},Xc={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Jc={and:"AND",or:"OR"};class Zc{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function eu(e,t){return e.useProto3Json||vs(t)?t:{value:t}}function tu(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function nu(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function ru(e,t){return tu(e,t.toTimestamp())}function iu(e){return yo(!!e,49232),ns.fromTimestamp(function(e){const t=oa(e);return new ts(t.seconds,t.nanos)}(e))}function ou(e,t){return su(e,t).canonicalString()}function su(e,t){const n=function(e){return new Vo(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function au(e){const t=Vo.fromString(e);return yo(_u(t),10190,{key:t.toString()}),t}function lu(e,t){return ou(e.databaseId,t.path)}function cu(e,t){const n=au(t);if(n.get(1)!==e.databaseId.projectId)throw new ko(wo.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new ko(wo.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Ho(fu(n))}function uu(e,t){return ou(e.databaseId,t)}function du(e){const t=au(e);return 4===t.length?Vo.emptyPath():fu(t)}function hu(e){return new Vo(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function fu(e){return yo(e.length>4&&"documents"===e.get(4),29091,{key:e.toString()}),e.popFirst(5)}function pu(e,t,n){return{name:lu(e,t),fields:n.value.mapValue.fields}}function mu(e,t){let n;if(t instanceof bc)n={update:pu(e,t.key,t.value)};else if(t instanceof Ec)n={delete:lu(e,t.key)};else if(t instanceof wc)n={update:pu(e,t.key,t.data),updateMask:Iu(t.fieldMask)};else{if(!(t instanceof Cc))return go(16599,{dt:t.type});n={verify:lu(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof tc)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof nc)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof ic)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof sc)return{fieldPath:t.field.canonicalString(),increment:n.Ae};throw go(20930,{transform:t.transform})}(0,e))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:ru(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:go(27497)}(e,t.precondition)),n}function gu(e,t){return{documents:[uu(e,t.path)]}}function vu(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=uu(e,i);const o=function(e){if(0!==e.length)return Cu(Xa.create(e,"and"))}(t.filters);o&&(n.structuredQuery.where=o);const s=function(e){if(0!==e.length)return e.map(e=>function(e){return{field:xu(e.field),direction:wu(e.dir)}}(e))}(t.orderBy);s&&(n.structuredQuery.orderBy=s);const a=eu(e,t.limit);return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{ft:n,parent:i}}function yu(e){let t=du(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){yo(1===r,65062);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let o=[];n.where&&(o=function(e){const t=bu(e);return t instanceof Xa&&Za(t)?t.getFilters():[t]}(n.where));let s=[];n.orderBy&&(s=function(e){return e.map(e=>function(e){return new Ka(Eu(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))}(n.orderBy));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,vs(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new Ha(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new Ha(n,t)}(n.endAt)),yl(t,i,s,o,a,"F",l,c)}function bu(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Eu(e.unaryFilter.field);return $a.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Eu(e.unaryFilter.field);return $a.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Eu(e.unaryFilter.field);return $a.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Eu(e.unaryFilter.field);return $a.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return go(61313);default:return go(60726)}}(e):void 0!==e.fieldFilter?function(e){return $a.create(Eu(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return go(58110);default:return go(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Xa.create(e.compositeFilter.filters.map(e=>bu(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return go(1026)}}(e.compositeFilter.op))}(e):go(30097,{filter:e})}function wu(e){return $c[e]}function ku(e){return Xc[e]}function Su(e){return Jc[e]}function xu(e){return{fieldPath:e.canonicalString()}}function Eu(e){return Wo.fromServerFormat(e.fieldPath)}function Cu(e){return e instanceof $a?function(e){if("=="===e.op){if(Ma(e.value))return{unaryFilter:{field:xu(e.field),op:"IS_NAN"}};if(Oa(e.value))return{unaryFilter:{field:xu(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Ma(e.value))return{unaryFilter:{field:xu(e.field),op:"IS_NOT_NAN"}};if(Oa(e.value))return{unaryFilter:{field:xu(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:xu(e.field),op:ku(e.op),value:e.value}}}(e):e instanceof Xa?function(e){const t=e.getFilters().map(e=>Cu(e));return 1===t.length?t[0]:{compositeFilter:{op:Su(e.op),filters:t}}}(e):go(54877,{filter:e})}function Iu(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function _u(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function Tu(e){return!!e&&"function"==typeof e._toProto&&"ProtoValue"===e._protoValueType}class Nu{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:ns.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:ns.min(),s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:ra.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s,this.expectedCount=a}withSequenceNumber(e){return new Nu(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Nu(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Nu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Nu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Au{constructor(e){this.yt=e}}function Du(e){const t=yu({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Il(t,t.limit,"L"):t}class Pu{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(sa(e.integerValue));else if("doubleValue"in e){const n=sa(e.doubleValue);isNaN(n)?this.Ft(t,13):(this.Ft(t,15),ys(n)?t.Mt(0):t.Mt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Ft(t,20),"string"==typeof n&&(n=oa(n)),t.xt("".concat(n.seconds||"")),t.Mt(n.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(aa(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Ft(t,45),t.Mt(n.latitude||0),t.Mt(n.longitude||0)}else"mapValue"in e?Ua(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):Fa(e)?this.kt(e.mapValue,t):(this.Kt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Nt(t)):go(19022,{Ut:e})}Ot(e,t){this.Ft(t,25),this.$t(e,t)}$t(e,t){t.xt(e)}Kt(e,t){const n=e.fields||{};this.Ft(t,55);for(const r of Object.keys(n))this.Ot(r,t),this.Ct(n[r],t)}kt(e,t){var n;const r=e.fields||{};this.Ft(t,53);const i=Sa,o=(null===(n=r[i].arrayValue)||void 0===n||null===(n=n.values)||void 0===n?void 0:n.length)||0;this.Ft(t,15),t.Mt(sa(o)),this.Ot(i,t),this.Ct(r[i],t)}qt(e,t){const n=e.values||[];this.Ft(t,50);for(const r of n)this.Ct(r,t)}Lt(e,t){this.Ft(t,37),Ho.fromName(e).path.forEach(e=>{this.Ft(t,60),this.$t(e,t)})}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}Pu.Wt=new Pu;class Ru{constructor(){this.Sn=new Lu}addToCollectionParentIndex(e,t){return this.Sn.add(t),hs.resolve()}getCollectionParents(e,t){return hs.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return hs.resolve()}deleteFieldIndex(e,t){return hs.resolve()}deleteAllFieldIndexes(e){return hs.resolve()}createTargetIndexes(e,t){return hs.resolve()}getDocumentsMatchingTarget(e,t){return hs.resolve(null)}getIndexType(e,t){return hs.resolve(0)}getFieldIndexes(e,t){return hs.resolve([])}getNextCollectionGroupToUpdate(e){return hs.resolve(null)}getMinOffset(e,t){return hs.resolve(as.min())}getMinOffsetFromCollectionGroup(e,t){return hs.resolve(as.min())}updateCollectionGroup(e,t,n){return hs.resolve()}updateIndexEntries(e,t){return hs.resolve()}}class Lu{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Zs(Vo.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Zs(Vo.comparator)).toArray()}}new Uint8Array(0);const Ou={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Mu=41943040;class ju{static withCacheSize(e){return new ju(e,ju.DEFAULT_COLLECTION_PERCENTILE,ju.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}ju.DEFAULT_COLLECTION_PERCENTILE=10,ju.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ju.DEFAULT=new ju(Mu,ju.DEFAULT_COLLECTION_PERCENTILE,ju.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ju.DISABLED=new ju(-1,0,0);class Fu{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Fu(0)}static ar(){return new Fu(-1)}}const Bu="LruGarbageCollector",Uu=1048576;function Vu(e,t){let[n,r]=e,[i,o]=t;const s=Ro(n,i);return 0===s?Ro(r,o):s}class zu{constructor(e){this.Pr=e,this.buffer=new Zs(Vu),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();Vu(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Wu{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Rr=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return null!==this.Rr}Ar(e){ho(Bu,"Garbage collection scheduled in ".concat(e,"ms")),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){ps(e)?ho(Bu,"Ignoring IndexedDB error during garbage collection: ",e):await ds(e)}await this.Ar(3e5)})}}class Hu{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next(e=>Math.floor(t/100*e))}nthSequenceNumber(e,t){if(0===t)return hs.resolve(ms.ce);const n=new zu(t);return this.Vr.forEachTarget(e,e=>n.Er(e.sequenceNumber)).next(()=>this.Vr.mr(e,e=>n.Er(e))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.Vr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(ho("LruGarbageCollector","Garbage collection skipped; disabled"),hs.resolve(Ou)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(ho("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(n," is lower than threshold ").concat(this.params.cacheSizeCollectionThreshold)),Ou):this.gr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let n,r,i,o,s,a,l;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(t=>(t>this.params.maximumSequenceNumbersToCollect?(ho("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(this.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=this.params.maximumSequenceNumbersToCollect):r=t,o=Date.now(),this.nthSequenceNumber(e,r))).next(r=>(n=r,s=Date.now(),this.removeTargets(e,n,t))).next(t=>(i=t,a=Date.now(),this.removeOrphanedDocuments(e,n))).next(e=>(l=Date.now(),uo()<=Q.DEBUG&&ho("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(o-c,"ms\n\tDetermined least recently used ").concat(r," in ")+(s-o)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(a-s)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(l-a)+"ms\n"+"Total Duration: ".concat(l-c,"ms")),hs.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})))}}function qu(e,t){return new Hu(e,t)}class Gu{constructor(){this.changes=new Ll(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Wa.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?hs.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Ku{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Qu{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&gc(n.mutation,e,ta.empty(),ts.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,ql()).next(()=>t))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ql();const r=Ul();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(e=>{let t=Fl();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=Ul();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,ql()))}populateOverlays(e,t,n){const r=[];return n.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,r){let i=Ml();const o=zl(),s=zl();return t.forEach((e,t)=>{const s=n.get(t.key);r.has(t.key)&&(void 0===s||s.mutation instanceof wc)?i=i.insert(t.key,t):void 0!==s?(o.set(t.key,s.mutation.getFieldMask()),gc(s.mutation,t,s.mutation.getFieldMask(),ts.now())):o.set(t.key,ta.empty())}),this.recalculateAndSaveOverlays(e,i).next(e=>(e.forEach((e,t)=>o.set(e,t)),t.forEach((e,t)=>{var n;return s.set(e,new Ku(t,null!==(n=o.get(e))&&void 0!==n?n:null))}),s))}recalculateAndSaveOverlays(e,t){const n=zl();let r=new $s((e,t)=>e-t),i=ql();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const i of e)i.keys().forEach(e=>{const o=t.get(e);if(null===o)return;let s=n.get(e)||ta.empty();s=i.applyToLocalView(o,s),n.set(e,s);const a=(r.get(i.batchId)||ql()).add(e);r=r.insert(i.batchId,a)})}).next(()=>{const o=[],s=r.getReverseIterator();for(;s.hasNext();){const r=s.getNext(),a=r.key,l=r.value,c=Vl();l.forEach(e=>{if(!i.has(e)){const r=pc(t.get(e),n.get(e));null!==r&&c.set(e,r),i=i.add(e)}}),o.push(this.documentOverlayCache.saveOverlays(e,a,c))}return hs.waitFor(o)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return Ho.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):kl(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(i=>{const o=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):hs.resolve(Ul());let s=rs,a=i;return o.next(t=>hs.forEach(t,(t,n)=>(s<n.largestBatchId&&(s=n.largestBatchId),i.get(t)?hs.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{a=a.insert(t,e)}))).next(()=>this.populateOverlays(e,t,i)).next(()=>this.computeViews(e,a,t,ql())).next(e=>({batchId:s,changes:Bl(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ho(t)).next(e=>{let t=Fl();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let o=Fl();return this.indexManager.getCollectionParents(e,i).next(s=>hs.forEach(s,s=>{const a=function(e,t){return new vl(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,s.child(i));return this.getDocumentsMatchingCollectionQuery(e,a,n,r).next(e=>{e.forEach((e,t)=>{o=o.insert(e,t)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r))).next(e=>{i.forEach((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,Wa.newInvalidDocument(r)))});let n=Fl();return e.forEach((e,r)=>{const o=i.get(e);void 0!==o&&gc(o.mutation,r,ta.empty(),ts.now()),Al(t,r)&&(n=n.insert(e,r))}),n})}}class Yu{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return hs.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:iu(e.createTime)}}(t)),hs.resolve()}getNamedQuery(e,t){return hs.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,function(e){return{name:e.name,query:Du(e.bundledQuery),readTime:iu(e.readTime)}}(t)),hs.resolve()}}class $u{constructor(){this.overlays=new $s(Ho.comparator),this.Lr=new Map}getOverlay(e,t){return hs.resolve(this.overlays.get(t))}getOverlays(e,t){const n=Ul();return hs.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,r)=>{this.bt(e,t,r)}),hs.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.Lr.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.Lr.delete(n)),hs.resolve()}getOverlaysForCollection(e,t,n){const r=Ul(),i=t.length+1,o=new Ho(t.child("")),s=this.overlays.getIteratorFrom(o);for(;s.hasNext();){const e=s.getNext().value,o=e.getKey();if(!t.isPrefixOf(o.path))break;o.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return hs.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new $s((e,t)=>e-t);const o=this.overlays.getIterator();for(;o.hasNext();){const e=o.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=Ul(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const s=Ul(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach((e,t)=>s.set(e,t)),!(s.size()>=r)););return hs.resolve(s)}bt(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.Lr.get(r.largestBatchId).delete(n.key);this.Lr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Tc(t,n));let i=this.Lr.get(t);void 0===i&&(i=ql(),this.Lr.set(t,i)),this.Lr.set(t,i.add(n.key))}}class Xu{constructor(){this.sessionToken=ra.EMPTY_BYTE_STRING}getSessionToken(e){return hs.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,hs.resolve()}}class Ju{constructor(){this.kr=new Zs(Zu.Kr),this.qr=new Zs(Zu.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const n=new Zu(e,t);this.kr=this.kr.add(n),this.qr=this.qr.add(n)}$r(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.Wr(new Zu(e,t))}Qr(e,t){e.forEach(e=>this.removeReference(e,t))}Gr(e){const t=new Ho(new Vo([])),n=new Zu(t,e),r=new Zu(t,e+1),i=[];return this.qr.forEachInRange([n,r],e=>{this.Wr(e),i.push(e.key)}),i}zr(){this.kr.forEach(e=>this.Wr(e))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new Ho(new Vo([])),n=new Zu(t,e),r=new Zu(t,e+1);let i=ql();return this.qr.forEachInRange([n,r],e=>{i=i.add(e.key)}),i}containsKey(e){const t=new Zu(e,0),n=this.kr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class Zu{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return Ho.comparator(e.key,t.key)||Ro(e.Hr,t.Hr)}static Ur(e,t){return Ro(e.Hr,t.Hr)||Ho.comparator(e.key,t.key)}}class ed{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new Zs(Zu.Kr)}checkEmpty(e){return hs.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Ic(i,t,n,r);this.mutationQueue.push(o);for(const s of r)this.Jr=this.Jr.add(new Zu(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast());return hs.resolve(o)}lookupMutationBatch(e,t){return hs.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.Xr(n),i=r<0?0:r;return hs.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return hs.resolve(0===this.mutationQueue.length?gs:this.Yn-1)}getAllMutationBatches(e){return hs.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Zu(t,0),r=new Zu(t,Number.POSITIVE_INFINITY),i=[];return this.Jr.forEachInRange([n,r],e=>{const t=this.Zr(e.Hr);i.push(t)}),hs.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Zs(Ro);return t.forEach(e=>{const t=new Zu(e,0),r=new Zu(e,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([t,r],e=>{n=n.add(e.Hr)})}),hs.resolve(this.Yr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;Ho.isDocumentKey(i)||(i=i.child(""));const o=new Zu(new Ho(i),0);let s=new Zs(Ro);return this.Jr.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(s=s.add(e.Hr)),!0)},o),hs.resolve(this.Yr(s))}Yr(e){const t=[];return e.forEach(e=>{const n=this.Zr(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){yo(0===this.ei(t.batchId,"removed"),55003),this.mutationQueue.shift();let n=this.Jr;return hs.forEach(t.mutations,r=>{const i=new Zu(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Jr=n})}nr(e){}containsKey(e,t){const n=new Zu(t,0),r=this.Jr.firstAfterOrEqual(n);return hs.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,hs.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class td{constructor(e){this.ti=e,this.docs=new $s(Ho.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,o=this.ti(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return hs.resolve(n?n.document.mutableCopy():Wa.newInvalidDocument(t))}getEntries(e,t){let n=Ml();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Wa.newInvalidDocument(e))}),hs.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=Ml();const o=t.path,s=new Ho(o.child("__id-9223372036854775808__")),a=this.docs.getIteratorFrom(s);for(;a.hasNext();){const{key:e,value:{document:s}}=a.getNext();if(!o.isPrefixOf(e.path))break;e.path.length>o.length+1||ls(ss(s),n)<=0||(r.has(s.key)||Al(t,s))&&(i=i.insert(s.key,s.mutableCopy()))}return hs.resolve(i)}getAllFromCollectionGroup(e,t,n,r){go(9500)}ni(e,t){return hs.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new nd(this)}getSize(e){return hs.resolve(this.size)}}class nd extends Gu{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.Mr.addEntry(e,r)):this.Mr.removeEntry(n)}),hs.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}class rd{constructor(e){this.persistence=e,this.ri=new Ll(e=>pl(e),ml),this.lastRemoteSnapshotVersion=ns.min(),this.highestTargetId=0,this.ii=0,this.si=new Ju,this.targetCount=0,this.oi=Fu._r()}forEachTarget(e,t){return this.ri.forEach((e,n)=>t(n)),hs.resolve()}getLastRemoteSnapshotVersion(e){return hs.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return hs.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),hs.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.ii&&(this.ii=t),hs.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new Fu(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,hs.resolve()}updateTargetData(e,t){return this.lr(t),hs.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,hs.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.ri.forEach((o,s)=>{s.sequenceNumber<=t&&null===n.get(s.targetId)&&(this.ri.delete(o),i.push(this.removeMatchingKeysForTargetId(e,s.targetId)),r++)}),hs.waitFor(i).next(()=>r)}getTargetCount(e){return hs.resolve(this.targetCount)}getTargetData(e,t){const n=this.ri.get(t)||null;return hs.resolve(n)}addMatchingKeys(e,t,n){return this.si.$r(t,n),hs.resolve()}removeMatchingKeys(e,t,n){this.si.Qr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(t=>{i.push(r.markPotentiallyOrphaned(e,t))}),hs.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),hs.resolve()}getMatchingKeysForTargetId(e,t){const n=this.si.jr(t);return hs.resolve(n)}containsKey(e,t){return hs.resolve(this.si.containsKey(t))}}class id{constructor(e,t){this._i={},this.overlays={},this.ai=new ms(0),this.ui=!1,this.ui=!0,this.ci=new Xu,this.referenceDelegate=e(this),this.li=new rd(this),this.indexManager=new Ru,this.remoteDocumentCache=function(e){return new td(e)}(e=>this.referenceDelegate.hi(e)),this.serializer=new Au(t),this.Pi=new Yu(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new $u,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this._i[e.toKey()];return n||(n=new ed(t,this.referenceDelegate),this._i[e.toKey()]=n),n}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,n){ho("MemoryPersistence","Starting transaction:",e);const r=new od(this.ai.next());return this.referenceDelegate.Ti(),n(r).next(e=>this.referenceDelegate.Ii(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Ei(e,t){return hs.or(Object.values(this._i).map(n=>()=>n.containsKey(e,t)))}}class od extends us{constructor(e){super(),this.currentSequenceNumber=e}}class sd{constructor(e){this.persistence=e,this.Ri=new Ju,this.Ai=null}static Vi(e){return new sd(e)}get di(){if(this.Ai)return this.Ai;throw go(60996)}addReference(e,t,n){return this.Ri.addReference(n,t),this.di.delete(n.toString()),hs.resolve()}removeReference(e,t,n){return this.Ri.removeReference(n,t),this.di.add(n.toString()),hs.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),hs.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach(e=>this.di.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.di.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return hs.forEach(this.di,n=>{const r=Ho.fromPath(n);return this.mi(e,r).next(e=>{e||t.removeEntry(r,ns.min())})}).next(()=>(this.Ai=null,t.apply(e)))}updateLimboDocument(e,t){return this.mi(e,t).next(e=>{e?this.di.delete(t.toString()):this.di.add(t.toString())})}hi(e){return 0}mi(e,t){return hs.or([()=>hs.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class ad{constructor(e,t){this.persistence=e,this.fi=new Ll(e=>ks(e.path),(e,t)=>e.isEqual(t)),this.garbageCollector=qu(this,t)}static Vi(e,t){return new ad(e,t)}Ti(){}Ii(e){return hs.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}pr(e){let t=0;return this.mr(e,e=>{t++}).next(()=>t)}mr(e,t){return hs.forEach(this.fi,(n,r)=>this.wr(e,n,r).next(e=>e?hs.resolve():t(r)))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.ni(e,r=>this.wr(e,r,t).next(e=>{e||(n++,i.removeEntry(r,ns.min()))})).next(()=>i.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),hs.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.fi.set(n,e.currentSequenceNumber),hs.resolve()}removeReference(e,t,n){return this.fi.set(n,e.currentSequenceNumber),hs.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),hs.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Da(e.data.value)),t}wr(e,t,n){return hs.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const e=this.fi.get(t);return hs.resolve(void 0!==e&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class ld{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Ts=n,this.Is=r}static Es(e,t){let n=ql(),r=ql();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new ld(e,t.fromCache,n,r)}}class cd{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class ud{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=A()?8:fs(T())>0?6:4}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.gs(e,t).next(e=>{i.result=e}).next(()=>{if(!i.result)return this.ps(e,t,r,n).next(e=>{i.result=e})}).next(()=>{if(i.result)return;const n=new cd;return this.ys(e,t,n).next(r=>{if(i.result=r,this.As)return this.ws(e,t,n,r.size)})}).next(()=>i.result)}ws(e,t,n,r){return n.documentReadCount<this.Vs?(uo()<=Q.DEBUG&&ho("QueryEngine","SDK will not create cache indexes for query:",Nl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),hs.resolve()):(uo()<=Q.DEBUG&&ho("QueryEngine","Query:",Nl(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.ds*r?(uo()<=Q.DEBUG&&ho("QueryEngine","The SDK decides to create cache indexes for query:",Nl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,xl(t))):hs.resolve())}gs(e,t){if(wl(t))return hs.resolve(null);let n=xl(t);return this.indexManager.getIndexType(e,n).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=Il(t,null,"F"),n=xl(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(r=>{const i=ql(...r);return this.fs.getDocuments(e,i).next(r=>this.indexManager.getMinOffset(e,n).next(n=>{const o=this.bs(t,r);return this.Ss(t,o,i,n.readTime)?this.gs(e,Il(t,null,"F")):this.Ds(e,o,t,n)}))})))}ps(e,t,n,r){return wl(t)||r.isEqual(ns.min())?hs.resolve(null):this.fs.getDocuments(e,n).next(i=>{const o=this.bs(t,i);return this.Ss(t,o,n,r)?hs.resolve(null):(uo()<=Q.DEBUG&&ho("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Nl(t)),this.Ds(e,o,t,os(r,rs)).next(e=>e))})}bs(e,t){let n=new Zs(Pl(e));return t.forEach((t,r)=>{Al(e,r)&&(n=n.add(r))}),n}Ss(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}ys(e,t,n){return uo()<=Q.DEBUG&&ho("QueryEngine","Using full collection scan to execute query:",Nl(t)),this.fs.getDocumentsMatchingQuery(e,t,as.min(),n)}Ds(e,t,n,r){return this.fs.getDocumentsMatchingQuery(e,n,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}const dd="LocalStore";class hd{constructor(e,t,n,r){this.persistence=e,this.Cs=t,this.serializer=r,this.vs=new $s(Ro),this.Fs=new Ll(e=>pl(e),ml),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(n)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Qu(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.vs))}}function fd(e,t,n,r){return new hd(e,t,n,r)}async function pd(e,t){const n=bo(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next(i=>(r=i,n.Os(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const i=[],o=[];let s=ql();for(const e of r){i.push(e.batchId);for(const t of e.mutations)s=s.add(t.key)}for(const e of t){o.push(e.batchId);for(const t of e.mutations)s=s.add(t.key)}return n.localDocuments.getDocuments(e,s).next(e=>({Ns:e,removedBatchIds:i,addedBatchIds:o}))})})}function md(e){const t=bo(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.li.getLastRemoteSnapshotVersion(e))}function gd(e,t,n){let r=ql(),i=ql();return n.forEach(e=>r=r.add(e)),t.getEntries(e,r).next(e=>{let r=Ml();return n.forEach((n,o)=>{const s=e.get(n);o.isFoundDocument()!==s.isFoundDocument()&&(i=i.add(n)),o.isNoDocument()&&o.version.isEqual(ns.min())?(t.removeEntry(n,o.readTime),r=r.insert(n,o)):!s.isValidDocument()||o.version.compareTo(s.version)>0||0===o.version.compareTo(s.version)&&s.hasPendingWrites?(t.addEntry(o),r=r.insert(n,o)):ho(dd,"Ignoring outdated watch update for ",n,". Current version:",s.version," Watch version:",o.version)}),{Bs:r,Ls:i}})}function vd(e,t){const n=bo(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=gs),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}function yd(e,t){const n=bo(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.li.getTargetData(e,t).next(i=>i?(r=i,hs.resolve(r)):n.li.allocateTargetId(e).next(i=>(r=new Nu(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.li.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.vs.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.vs=n.vs.insert(e.targetId,e),n.Fs.set(t,e.targetId)),e})}async function bd(e,t,n){const r=bo(e),i=r.vs.get(t),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,e=>r.persistence.referenceDelegate.removeTarget(e,i))}catch(e){if(!ps(e))throw e;ho(dd,"Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.vs=r.vs.remove(t),r.Fs.delete(i.target)}function wd(e,t,n){const r=bo(e);let i=ns.min(),o=ql();return r.persistence.runTransaction("Execute query","readwrite",e=>function(e,t,n){const r=bo(e),i=r.Fs.get(n);return void 0!==i?hs.resolve(r.vs.get(i)):r.li.getTargetData(t,n)}(r,e,xl(t)).next(t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(e,t.targetId).next(e=>{o=e})}).next(()=>r.Cs.getDocumentsMatchingQuery(e,t,n?i:ns.min(),n?o:ql())).next(e=>(kd(r,Dl(t),e),{documents:e,ks:o})))}function kd(e,t,n){let r=e.Ms.get(t)||ns.min();n.forEach((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)}),e.Ms.set(t,r)}class Sd{constructor(){this.activeTargetIds=Kl()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class xd{constructor(){this.vo=new Sd,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,n){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new Sd,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Ed{Mo(e){}shutdown(){}}const Cd="ConnectivityMonitor";class Id{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){ho(Cd,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){ho(Cd,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let _d=null;function Td(){return null===_d?_d=268435456+Math.round(2147483648*Math.random()):_d++,"0x"+_d.toString(16)}const Nd="RestConnection",Ad={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class Dd{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo="projects/".concat(n,"/databases/").concat(r),this.$o=this.databaseId.database===ga?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}Wo(e,t,n,r,i){const o=Td(),s=this.Qo(e,t.toUriEncodedString());ho(Nd,"Sending RPC '".concat(e,"' ").concat(o,":"),s,n);const a={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(a,r,i);const{host:l}=new URL(s),c=x(l);return this.zo(e,s,a,n,c).then(t=>(ho(Nd,"Received RPC '".concat(e,"' ").concat(o,": "),t),t),t=>{throw po(Nd,"RPC '".concat(e,"' ").concat(o," failed with error: "),t,"url: ",s,"request:",n),t})}jo(e,t,n,r,i,o){return this.Wo(e,t,n,r,i)}Go(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+lo,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}Qo(e,t){const n=Ad[e];let r="".concat(this.qo,"/v1/").concat(t,":").concat(n);return this.databaseInfo.apiKey&&(r="".concat(r,"?key=").concat(encodeURIComponent(this.databaseInfo.apiKey))),r}terminate(){}}class Pd{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}const Rd="WebChannelConnection",Ld=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};class Od extends Dd{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Od.c_){const e=ro();Ld(e,no.STAT_EVENT,e=>{e.stat===to.PROXY?ho(Rd,"STAT_EVENT: detected buffering proxy"):e.stat===to.NOPROXY&&ho(Rd,"STAT_EVENT: detected no buffering proxy")}),Od.c_=!0}}zo(e,t,n,r,i){const o=Td();return new Promise((i,s)=>{const a=new Xi;a.setWithCredentials(!0),a.listenOnce(Zi.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case eo.NO_ERROR:const n=a.getResponseJson();ho(Rd,"XHR for RPC '".concat(e,"' ").concat(o," received:"),JSON.stringify(n)),i(n);break;case eo.TIMEOUT:ho(Rd,"RPC '".concat(e,"' ").concat(o," timed out")),s(new ko(wo.DEADLINE_EXCEEDED,"Request time out"));break;case eo.HTTP_ERROR:const r=a.getStatus();if(ho(Rd,"RPC '".concat(e,"' ").concat(o," failed with status:"),r,"response text:",a.getResponseText()),r>0){var t;let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const n=null===(t=e)||void 0===t?void 0:t.error;if(n&&n.status&&n.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(wo).indexOf(t)>=0?t:wo.UNKNOWN}(n.status);s(new ko(e,n.message))}else s(new ko(wo.UNKNOWN,"Server responded with status "+a.getStatus()))}else s(new ko(wo.UNAVAILABLE,"Connection failed."));break;default:go(9055,{l_:e,streamId:o,h_:a.getLastErrorCode(),P_:a.getLastError()})}}finally{ho(Rd,"RPC '".concat(e,"' ").concat(o," completed."))}});const l=JSON.stringify(r);ho(Rd,"RPC '".concat(e,"' ").concat(o," sending request:"),r),a.send(t,"POST",l,n,15)})}T_(e,t,n){const r=Td(),i=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=this.createWebChannelTransport(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},a=this.longPollingOptions.timeoutSeconds;void 0!==a&&(s.longPollingTimeout=Math.round(1e3*a)),this.useFetchStreams&&(s.useFetchStreams=!0),this.Go(s.initMessageHeaders,t,n),s.encodeInitMessageHeaders=!0;const l=i.join("");ho(Rd,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(l),s);const c=o.createWebChannel(l,s);this.I_(c);let u=!1,d=!1;const h=new Pd({Ho:t=>{d?ho(Rd,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(u||(ho(Rd,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),c.open(),u=!0),ho(Rd,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),c.send(t))},Jo:()=>c.close()});return Ld(c,Ji.EventType.OPEN,()=>{d||(ho(Rd,"RPC '".concat(e,"' stream ").concat(r," transport opened.")),h.i_())}),Ld(c,Ji.EventType.CLOSE,()=>{d||(d=!0,ho(Rd,"RPC '".concat(e,"' stream ").concat(r," transport closed")),h.o_(),this.E_(c))}),Ld(c,Ji.EventType.ERROR,t=>{d||(d=!0,po(Rd,"RPC '".concat(e,"' stream ").concat(r," transport errored. Name:"),t.name,"Message:",t.message),h.o_(new ko(wo.UNAVAILABLE,"The operation could not be completed")))}),Ld(c,Ji.EventType.MESSAGE,t=>{if(!d){var n;const i=t.data[0];yo(!!i,16349);const o=i,s=(null===o||void 0===o?void 0:o.error)||(null===(n=o[0])||void 0===n?void 0:n.error);if(s){ho(Rd,"RPC '".concat(e,"' stream ").concat(r," received error:"),s);const t=s.status;let n=function(e){const t=Ac[e];if(void 0!==t)return Rc(t)}(t),i=s.message;"NOT_FOUND"===t&&i.includes("database")&&i.includes("does not exist")&&i.includes(this.databaseId.database)&&po("Database '".concat(this.databaseId.database,"' not found. Please check your project configuration.")),void 0===n&&(n=wo.INTERNAL,i="Unknown error status: "+t+" with message "+s.message),d=!0,h.o_(new ko(n,i)),c.close()}else ho(Rd,"RPC '".concat(e,"' stream ").concat(r," received:"),i),h.__(i)}}),Od.u_(),setTimeout(()=>{h.s_()},0),h}terminate(){this.a_.forEach(e=>e.close()),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter(t=>t===e)}Go(e,t,n){super.Go(e,t,n),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return io()}}function Md(e){return new Od(e)}function jd(){return"undefined"!=typeof document?document:null}function Fd(e){return new Zc(e,!0)}Od.c_=!1;class Bd{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.Ci=e,this.timerId=t,this.R_=n,this.A_=r,this.V_=i,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),n=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-n);r>0&&ho("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.d_," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.m_=this.Ci.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),e())),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){null!==this.m_&&(this.m_.skipDelay(),this.m_=null)}cancel(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}const Ud="PersistentStream";class Vd{constructor(e,t,n,r,i,o,s,a){this.Ci=e,this.b_=n,this.S_=r,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=s,this.listener=a,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Bd(e,t)}x_(){return 1===this.state||5===this.state||this.O_()}O_(){return 2===this.state||3===this.state}start(){this.F_=0,4!==this.state?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&null===this.C_&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,()=>this.k_()))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,4!==e?this.M_.reset():t&&t.code===wo.RESOURCE_EXHAUSTED?(fo(t.toString()),fo("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===wo.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(e=>{let[n,r]=e;this.D_===t&&this.G_(n,r)},t=>{e(()=>{const e=new ko(wo.UNKNOWN,"Fetching auth token failed: "+t.message);return this.z_(e)})})}G_(e,t){const n=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo(()=>{n(()=>this.listener.Zo())}),this.stream.Yo(()=>{n(()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.Yo()))}),this.stream.t_(e=>{n(()=>this.z_(e))}),this.stream.onMessage(e=>{n(()=>1==++this.F_?this.H_(e):this.onNext(e))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return ho(Ud,"close with error: ".concat(e)),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget(()=>this.D_===e?t():(ho(Ud,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class zd extends Vd{constructor(e,t,n,r,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,o),this.serializer=i}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:go(39313,{state:e})}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],o=function(e,t){return e.useProto3Json?(yo(void 0===t||"string"==typeof t,58123),ra.fromBase64String(t||"")):(yo(void 0===t||t instanceof Buffer||t instanceof Uint8Array,16193),ra.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),s=t.targetChange.cause,a=s&&function(e){const t=void 0===e.code?wo.UNKNOWN:Rc(e.code);return new ko(t,e.message||"")}(s);n=new qc(r,i,o,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=cu(e,r.document.name),o=iu(r.document.updateTime),s=r.document.createTime?iu(r.document.createTime):ns.min(),a=new Va({mapValue:{fields:r.document.fields}}),l=Wa.newFoundDocument(i,o,s,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new Wc(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=cu(e,r.document),o=r.readTime?iu(r.readTime):ns.min(),s=Wa.newNoDocument(i,o),a=r.removedTargetIds||[];n=new Wc([],a,s.key,s)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=cu(e,r.document),o=r.removedTargetIds||[];n=new Wc([],o,i,null)}else{if(!("filter"in t))return go(11601,{Vt:t});{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,o=new Nc(r,i),s=e.targetId;n=new Hc(s,o)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return ns.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?ns.min():t.readTime?iu(t.readTime):ns.min()}(e);return this.listener.J_(t,n)}Z_(e){const t={};t.database=hu(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=gl(r)?{documents:gu(e,r)}:{query:vu(e,r).ft},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=nu(e,t.resumeToken);const r=eu(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(ns.min())>0){n.readTime=tu(e,t.snapshotVersion.toTimestamp());const r=eu(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return go(28987,{purpose:e})}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.K_(t)}X_(e){const t={};t.database=hu(this.serializer),t.removeTarget=e,this.K_(t)}}class Wd extends Vd{constructor(e,t,n,r,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,o),this.serializer=i}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return yo(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,yo(!e.writeResults||0===e.writeResults.length,55816),this.listener.ta()}onNext(e){yo(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=function(e,t){return e&&e.length>0?(yo(void 0!==t,14353),e.map(e=>function(e,t){let n=e.updateTime?iu(e.updateTime):iu(t);return n.isEqual(ns.min())&&(n=iu(t)),new uc(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=iu(e.commitTime);return this.listener.na(n,t)}ra(){const e={};e.database=hu(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>mu(this.serializer,e))};this.K_(t)}}class Hd{}class qd extends Hd{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new ko(wo.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,n,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(i=>{let[o,s]=i;return this.connection.Wo(e,su(t,n),r,o,s)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===wo.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new ko(wo.UNKNOWN,e.toString())})}jo(e,t,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(o=>{let[s,a]=o;return this.connection.jo(e,su(t,n),r,s,a,i)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===wo.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new ko(wo.UNKNOWN,e.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}function Gd(e,t,n,r){return new qd(e,t,n,r)}class Kd{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){0===this.oa&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){"Online"===this.state?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,"Online"===e&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.aa?(fo(t),this.aa=!1):ho("OnlineStateTracker",t)}Pa(){null!==this._a&&(this._a.cancel(),this._a=null)}}const Qd="RemoteStore";class Yd{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=i,this.Aa.Mo(e=>{n.enqueueAndForget(async()=>{ih(this)&&(ho(Qd,"Restarting streams for network reachability change."),await async function(e){const t=bo(e);t.Ea.add(4),await Xd(t),t.Va.set("Unknown"),t.Ea.delete(4),await $d(t)}(this))})}),this.Va=new Kd(n,r)}}async function $d(e){if(ih(e))for(const t of e.Ra)await t(!0)}async function Xd(e){for(const t of e.Ra)await t(!1)}function Jd(e,t){const n=bo(e);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),rh(n)?nh(n):xh(n).O_()&&eh(n,t))}function Zd(e,t){const n=bo(e),r=xh(n);n.Ia.delete(t),r.O_()&&th(n,t),0===n.Ia.size&&(r.O_()?r.L_():ih(n)&&n.Va.set("Unknown"))}function eh(e,t){if(e.da.$e(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(ns.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}xh(e).Z_(t)}function th(e,t){e.da.$e(t),xh(e).X_(t)}function nh(e){e.da=new Kc({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),xh(e).start(),e.Va.ua()}function rh(e){return ih(e)&&!xh(e).x_()&&e.Ia.size>0}function ih(e){return 0===bo(e).Ea.size}function oh(e){e.da=void 0}async function sh(e){e.Va.set("Online")}async function ah(e){e.Ia.forEach((t,n)=>{eh(e,t)})}async function lh(e,t){oh(e),rh(e)?(e.Va.ha(t),nh(e)):e.Va.set("Unknown")}async function ch(e,t,n){if(e.Va.set("Online"),t instanceof qc&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.Ia.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.Ia.delete(r),e.da.removeTarget(r))}(e,t)}catch(n){ho(Qd,"Failed to remove targets %s: %s ",t.targetIds.join(","),n),await uh(e,n)}else if(t instanceof Wc?e.da.Xe(t):t instanceof Hc?e.da.st(t):e.da.tt(t),!n.isEqual(ns.min()))try{const t=await md(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.da.Tt(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.Ia.get(r);i&&e.Ia.set(r,i.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach((t,n)=>{const r=e.Ia.get(t);if(!r)return;e.Ia.set(t,r.withResumeToken(ra.EMPTY_BYTE_STRING,r.snapshotVersion)),th(e,t);const i=new Nu(r.target,t,n,r.sequenceNumber);eh(e,i)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){ho(Qd,"Failed to raise snapshot:",t),await uh(e,t)}}async function uh(e,t,n){if(!ps(t))throw t;e.Ea.add(1),await Xd(e),e.Va.set("Offline"),n||(n=()=>md(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{ho(Qd,"Retrying IndexedDB access"),await n(),e.Ea.delete(1),await $d(e)})}function dh(e,t){return t().catch(n=>uh(e,n,t))}async function hh(e){const t=bo(e),n=Eh(t);let r=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:gs;for(;fh(t);)try{const e=await vd(t.localStore,r);if(null===e){0===t.Ta.length&&n.L_();break}r=e.batchId,ph(t,e)}catch(e){await uh(t,e)}mh(t)&&gh(t)}function fh(e){return ih(e)&&e.Ta.length<10}function ph(e,t){e.Ta.push(t);const n=Eh(e);n.O_()&&n.Y_&&n.ea(t.mutations)}function mh(e){return ih(e)&&!Eh(e).x_()&&e.Ta.length>0}function gh(e){Eh(e).start()}async function vh(e){Eh(e).ra()}async function yh(e){const t=Eh(e);for(const n of e.Ta)t.ea(n.mutations)}async function bh(e,t,n){const r=e.Ta.shift(),i=_c.from(r,t,n);await dh(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await hh(e)}async function wh(e,t){t&&Eh(e).Y_&&await async function(e,t){if(function(e){return Pc(e)&&e!==wo.ABORTED}(t.code)){const n=e.Ta.shift();Eh(e).B_(),await dh(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await hh(e)}}(e,t),mh(e)&&gh(e)}async function kh(e,t){const n=bo(e);n.asyncQueue.verifyOperationInProgress(),ho(Qd,"RemoteStore received new credentials");const r=ih(n);n.Ea.add(3),await Xd(n),r&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await $d(n)}async function Sh(e,t){const n=bo(e);t?(n.Ea.delete(2),await $d(n)):t||(n.Ea.add(2),await Xd(n),n.Va.set("Unknown"))}function xh(e){return e.ma||(e.ma=function(e,t,n){const r=bo(e);return r.sa(),new zd(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Zo:sh.bind(null,e),Yo:ah.bind(null,e),t_:lh.bind(null,e),J_:ch.bind(null,e)}),e.Ra.push(async t=>{t?(e.ma.B_(),rh(e)?nh(e):e.Va.set("Unknown")):(await e.ma.stop(),oh(e))})),e.ma}function Eh(e){return e.fa||(e.fa=function(e,t,n){const r=bo(e);return r.sa(),new Wd(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Zo:()=>Promise.resolve(),Yo:vh.bind(null,e),t_:wh.bind(null,e),ta:yh.bind(null,e),na:bh.bind(null,e)}),e.Ra.push(async t=>{t?(e.fa.B_(),await hh(e)):(await e.fa.stop(),e.Ta.length>0&&(ho(Qd,"Stopping write stream with ".concat(e.Ta.length," pending writes")),e.Ta=[]))})),e.fa}class Ch{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new So,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const o=Date.now()+n,s=new Ch(e,t,o,r,i);return s.start(n),s}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ko(wo.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ih(e,t){if(fo("AsyncQueue","".concat(t,": ").concat(e)),ps(e))return new ko(wo.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class _h{static emptySet(e){return new _h(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||Ho.comparator(t.key,n.key):(e,t)=>Ho.comparator(e.key,t.key),this.keyedMap=Fl(),this.sortedSet=new $s(this.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof _h))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new _h;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class Th{constructor(){this.ga=new $s(Ho.comparator)}track(e){const t=e.doc.key,n=this.ga.get(t);n?0!==e.type&&3===n.type?this.ga=this.ga.insert(t,e):3===e.type&&1!==n.type?this.ga=this.ga.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.ga=this.ga.remove(t):1===e.type&&2===n.type?this.ga=this.ga.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):go(63341,{Vt:e,pa:n}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal((t,n)=>{e.push(n)}),e}}class Nh{constructor(e,t,n,r,i,o,s,a,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=a,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const o=[];return t.forEach(e=>{o.push({type:0,doc:e})}),new Nh(e,t,_h.emptySet(t),o,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&_l(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class Ah{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some(e=>e.Da())}}class Dh{constructor(){this.queries=Ph(),this.onlineState="Unknown",this.Ca=new Set}terminate(){!function(e,t){const n=bo(e),r=n.queries;n.queries=Ph(),r.forEach((e,n)=>{for(const r of n.ba)r.onError(t)})}(this,new ko(wo.ABORTED,"Firestore shutting down"))}}function Ph(){return new Ll(e=>Tl(e),_l)}async function Rh(e,t){const n=bo(e);let r=3;const i=t.query;let o=n.queries.get(i);o?!o.Sa()&&t.Da()&&(r=2):(o=new Ah,r=t.Da()?0:1);try{switch(r){case 0:o.wa=await n.onListen(i,!0);break;case 1:o.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){const n=Ih(e,"Initialization of query '".concat(Nl(t.query),"' failed"));return void t.onError(n)}n.queries.set(i,o),o.ba.push(t),t.va(n.onlineState),o.wa&&t.Fa(o.wa)&&jh(n)}async function Lh(e,t){const n=bo(e),r=t.query;let i=3;const o=n.queries.get(r);if(o){const e=o.ba.indexOf(t);e>=0&&(o.ba.splice(e,1),0===o.ba.length?i=t.Da()?0:1:!o.Sa()&&t.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Oh(e,t){const n=bo(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.ba)e.Fa(i)&&(r=!0);t.wa=i}}r&&jh(n)}function Mh(e,t,n){const r=bo(e),i=r.queries.get(t);if(i)for(const o of i.ba)o.onError(n);r.queries.delete(t)}function jh(e){e.Ca.forEach(e=>{e.next()})}var Fh,Bh;(Bh=Fh||(Fh={})).Ma="default",Bh.Cache="cache";class Uh{constructor(e,t,n){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new Nh(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache)return!0;if(!this.Da())return!0;const n="Offline"!==t;return(!this.options.Ka||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}ka(e){e=Nh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Fh.Cache}}class Vh{constructor(e){this.key=e}}class zh{constructor(e){this.key=e}}class Wh{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=ql(),this.mutatedKeys=ql(),this.eu=Pl(e),this.tu=new _h(this.eu)}get nu(){return this.Za}ru(e,t){const n=t?t.iu:new Th,r=t?t.tu:this.tu;let i=t?t.mutatedKeys:this.mutatedKeys,o=r,s=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const c=r.get(e),u=Al(this.query,t)?t:null,d=!!c&&this.mutatedKeys.has(c.key),h=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?d!==h&&(n.track({type:3,doc:u}),f=!0):this.su(c,u)||(n.track({type:2,doc:u}),f=!0,(a&&this.eu(u,a)>0||l&&this.eu(u,l)<0)&&(s=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(a||l)&&(s=!0)),f&&(u?(o=o.add(u),i=h?i.add(e):i.delete(e)):(o=o.delete(e),i=i.delete(e)))}),null!==this.query.limit)for(;o.size>this.query.limit;){const e="F"===this.query.limitType?o.last():o.first();o=o.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{tu:o,iu:n,Ss:s,mutatedKeys:i}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return go(20277,{Vt:e})}};return n(e)-n(t)}(e.type,t.type)||this.eu(e.doc,t.doc)),this.ou(n),r=null!==r&&void 0!==r&&r;const s=t&&!r?this._u():[],a=0===this.Ya.size&&this.current&&!r?1:0,l=a!==this.Xa;return this.Xa=a,0!==o.length||l?{snapshot:new Nh(this.query,e.tu,i,o,e.mutatedKeys,0===a,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:s}:{au:s}}va(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Th,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(e=>this.Za=this.Za.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Za=this.Za.delete(e)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=ql(),this.tu.forEach(e=>{this.uu(e.key)&&(this.Ya=this.Ya.add(e.key))});const t=[];return e.forEach(e=>{this.Ya.has(e)||t.push(new zh(e))}),this.Ya.forEach(n=>{e.has(n)||t.push(new Vh(n))}),t}cu(e){this.Za=e.ks,this.Ya=ql();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Nh.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,0===this.Xa,this.hasCachedResults)}}const Hh="SyncEngine";class qh{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class Gh{constructor(e){this.key=e,this.hu=!1}}class Kh{constructor(e,t,n,r,i,o){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Ll(e=>Tl(e),_l),this.Iu=new Map,this.Eu=new Set,this.Ru=new $s(Ho.comparator),this.Au=new Map,this.Vu=new Ju,this.du={},this.mu=new Map,this.fu=Fu.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return!0===this.gu}}async function Qh(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=gf(e);let i;const o=r.Tu.get(t);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.lu()):i=await $h(r,t,n,!0),i}async function Yh(e,t){const n=gf(e);await $h(n,t,!0,!1)}async function $h(e,t,n,r){const i=await yd(e.localStore,xl(t)),o=i.targetId,s=e.sharedClientState.addLocalQueryTarget(o,n);let a;return r&&(a=await Xh(e,t,o,"current"===s,i.resumeToken)),e.isPrimaryClient&&n&&Jd(e.remoteStore,i),a}async function Xh(e,t,n,r,i){e.pu=(t,n,r)=>async function(e,t,n,r){let i=t.view.ru(n);i.Ss&&(i=await wd(e.localStore,t.query,!1).then(e=>{let{documents:n}=e;return t.view.ru(n,i)}));const o=r&&r.targetChanges.get(t.targetId),s=r&&null!=r.targetMismatches.get(t.targetId),a=t.view.applyChanges(i,e.isPrimaryClient,o,s);return uf(e,t.targetId,a.au),a.snapshot}(e,t,n,r);const o=await wd(e.localStore,t,!0),s=new Wh(t,o.ks),a=s.ru(o.documents),l=zc.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),c=s.applyChanges(a,e.isPrimaryClient,l);uf(e,n,c.au);const u=new qh(t,n,s);return e.Tu.set(t,u),e.Iu.has(n)?e.Iu.get(n).push(t):e.Iu.set(n,[t]),c.snapshot}async function Jh(e,t,n){const r=bo(e),i=r.Tu.get(t),o=r.Iu.get(i.targetId);if(o.length>1)return r.Iu.set(i.targetId,o.filter(e=>!_l(e,t))),void r.Tu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await bd(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Zd(r.remoteStore,i.targetId),lf(r,i.targetId)}).catch(ds)):(lf(r,i.targetId),await bd(r.localStore,i.targetId,!0))}async function Zh(e,t){const n=bo(e),r=n.Tu.get(t),i=n.Iu.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Zd(n.remoteStore,r.targetId))}async function ef(e,t){const n=bo(e);try{const e=await function(e,t){const n=bo(e),r=t.snapshotVersion;let i=n.vs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const o=n.xs.newChangeBuffer({trackRemovals:!0});i=n.vs;const s=[];t.targetChanges.forEach((o,a)=>{const l=i.get(a);if(!l)return;s.push(n.li.removeMatchingKeys(e,o.removedDocuments,a).next(()=>n.li.addMatchingKeys(e,o.addedDocuments,a)));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?c=c.withResumeToken(ra.EMPTY_BYTE_STRING,ns.min()).withLastLimboFreeSnapshotVersion(ns.min()):o.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(o.resumeToken,r)),i=i.insert(a,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(l,c,o)&&s.push(n.li.updateTargetData(e,c))});let a=Ml(),l=ql();if(t.documentUpdates.forEach(r=>{t.resolvedLimboDocuments.has(r)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),s.push(gd(e,o,t.documentUpdates).next(e=>{a=e.Bs,l=e.Ls})),!r.isEqual(ns.min())){const t=n.li.getLastRemoteSnapshotVersion(e).next(t=>n.li.setTargetsMetadata(e,e.currentSequenceNumber,r));s.push(t)}return hs.waitFor(s).next(()=>o.apply(e)).next(()=>n.localDocuments.getLocalViewOfDocuments(e,a,l)).next(()=>a)}).then(e=>(n.vs=i,e))}(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.Au.get(t);r&&(yo(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1,22616),e.addedDocuments.size>0?r.hu=!0:e.modifiedDocuments.size>0?yo(r.hu,14607):e.removedDocuments.size>0&&(yo(r.hu,42227),r.hu=!1))}),await ff(n,e,t)}catch(e){await ds(e)}}function tf(e,t,n){const r=bo(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.Tu.forEach((n,r)=>{const i=r.view.va(t);i.snapshot&&e.push(i.snapshot)}),function(e,t){const n=bo(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const i of n.ba)i.va(t)&&(r=!0)}),r&&jh(n)}(r.eventManager,t),e.length&&r.Pu.J_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function nf(e,t,n){const r=bo(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Au.get(t),o=i&&i.key;if(o){let e=new $s(Ho.comparator);e=e.insert(o,Wa.newNoDocument(o,ns.min()));const n=ql().add(o),i=new Vc(ns.min(),new Map,new $s(Ro),e,n);await ef(r,i),r.Ru=r.Ru.remove(o),r.Au.delete(t),hf(r)}else await bd(r.localStore,t,!1).then(()=>lf(r,t,n)).catch(ds)}async function rf(e,t){const n=bo(e),r=t.batch.batchId;try{const e=await function(e,t){const n=bo(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),i=n.xs.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,o=i.keys();let s=hs.resolve();return o.forEach(e=>{s=s.next(()=>r.getEntry(t,e)).next(t=>{const o=n.docVersions.get(e);yo(null!==o,48541),t.version.compareTo(o)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),s.next(()=>e.mutationQueue.removeMutationBatch(t,i))}(n,e,t,i).next(()=>i.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=ql();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,r))})}(n.localStore,t);af(n,r,null),sf(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ff(n,e)}catch(e){await ds(e)}}async function of(e,t,n){const r=bo(e);try{const e=await function(e,t){const n=bo(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(yo(null!==t,37113),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)).next(()=>n.localDocuments.getDocuments(e,r))})}(r.localStore,t);af(r,t,n),sf(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await ff(r,e)}catch(n){await ds(n)}}function sf(e,t){(e.mu.get(t)||[]).forEach(e=>{e.resolve()}),e.mu.delete(t)}function af(e,t,n){const r=bo(e);let i=r.du[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.du[r.currentUser.toKey()]=i}}function lf(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Iu.get(t))e.Tu.delete(r),n&&e.Pu.yu(r,n);e.Iu.delete(t),e.isPrimaryClient&&e.Vu.Gr(t).forEach(t=>{e.Vu.containsKey(t)||cf(e,t)})}function cf(e,t){e.Eu.delete(t.path.canonicalString());const n=e.Ru.get(t);null!==n&&(Zd(e.remoteStore,n),e.Ru=e.Ru.remove(t),e.Au.delete(n),hf(e))}function uf(e,t,n){for(const r of n)r instanceof Vh?(e.Vu.addReference(r.key,t),df(e,r)):r instanceof zh?(ho(Hh,"Document no longer in limbo: "+r.key),e.Vu.removeReference(r.key,t),e.Vu.containsKey(r.key)||cf(e,r.key)):go(19791,{wu:r})}function df(e,t){const n=t.key,r=n.path.canonicalString();e.Ru.get(n)||e.Eu.has(r)||(ho(Hh,"New document in limbo: "+n),e.Eu.add(r),hf(e))}function hf(e){for(;e.Eu.size>0&&e.Ru.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const n=new Ho(Vo.fromString(t)),r=e.fu.next();e.Au.set(r,new Gh(n)),e.Ru=e.Ru.insert(n,r),Jd(e.remoteStore,new Nu(xl(bl(n.path)),r,"TargetPurposeLimboResolution",ms.ce))}}async function ff(e,t,n){const r=bo(e),i=[],o=[],s=[];r.Tu.isEmpty()||(r.Tu.forEach((e,a)=>{s.push(r.pu(a,t,n).then(e=>{if((e||n)&&r.isPrimaryClient){var t;const i=e?!e.fromCache:null===n||void 0===n||null===(t=n.targetChanges.get(a.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(a.targetId,i?"current":"not-current")}if(e){i.push(e);const t=ld.Es(a.targetId,e);o.push(t)}}))}),await Promise.all(s),r.Pu.J_(i),await async function(e,t){const n=bo(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>hs.forEach(t,t=>hs.forEach(t.Ts,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>hs.forEach(t.Is,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(e){if(!ps(e))throw e;ho(dd,"Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.vs.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.vs=n.vs.insert(e,i)}}}(r.localStore,o))}async function pf(e,t){const n=bo(e);if(!n.currentUser.isEqual(t)){ho(Hh,"User change. New user:",t.toKey());const e=await pd(n.localStore,t);n.currentUser=t,function(e,t){e.mu.forEach(e=>{e.forEach(e=>{e.reject(new ko(wo.CANCELLED,t))})}),e.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await ff(n,e.Ns)}}function mf(e,t){const n=bo(e),r=n.Au.get(t);if(r&&r.hu)return ql().add(r.key);{let e=ql();const r=n.Iu.get(t);if(!r)return e;for(const t of r){const r=n.Tu.get(t);e=e.unionWith(r.view.nu)}return e}}function gf(e){const t=bo(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=ef.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=mf.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=nf.bind(null,t),t.Pu.J_=Oh.bind(null,t.eventManager),t.Pu.yu=Mh.bind(null,t.eventManager),t}function vf(e){const t=bo(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=rf.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=of.bind(null,t),t}class yf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Fd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return fd(this.persistence,new ud,e.initialUser,this.serializer)}Cu(e){return new id(sd.Vi,this.serializer)}Du(e){return new xd}async terminate(){var e,t;null!==(e=this.gcScheduler)&&void 0!==e&&e.stop(),null!==(t=this.indexBackfillerScheduler)&&void 0!==t&&t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}yf.provider={build:()=>new yf};class bf extends yf{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){yo(this.persistence.referenceDelegate instanceof ad,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new Wu(n,e.asyncQueue,t)}Cu(e){const t=void 0!==this.cacheSizeBytes?ju.withCacheSize(this.cacheSizeBytes):ju.DEFAULT;return new id(e=>ad.Vi(e,t),this.serializer)}}class wf{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>tf(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=pf.bind(null,this.syncEngine),await Sh(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Dh}createDatastore(e){const t=Fd(e.databaseInfo.databaseId),n=Md(e.databaseInfo);return Gd(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new Yd(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,e=>tf(this.syncEngine,e,0),Id.v()?new Id:new Ed)}createSyncEngine(e,t){return function(e,t,n,r,i,o,s){const a=new Kh(e,t,n,r,i,o);return s&&(a.gu=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=bo(e);ho(Qd,"RemoteStore shutting down."),t.Ea.add(5),await Xd(t),t.Aa.shutdown(),t.Va.set("Unknown")}(this.remoteStore),null!==(e=this.datastore)&&void 0!==e&&e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}wf.provider={build:()=>new wf};class kf{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):fo("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}}const Sf="FirestoreClient";class xf{constructor(e,t,n,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this._databaseInfo=r,this.user=ao.UNAUTHENTICATED,this.clientId=Po.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,async e=>{ho(Sf,"Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>(ho(Sf,"Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new So;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=Ih(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function Ef(e,t){e.asyncQueue.verifyOperationInProgress(),ho(Sf,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async e=>{r.isEqual(e)||(await pd(t.localStore,e),r=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function Cf(e,t){e.asyncQueue.verifyOperationInProgress();const n=await If(e);ho(Sf,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(e=>kh(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>kh(t.remoteStore,n)),e._onlineComponents=t}async function If(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){ho(Sf,"Using user provided OfflineComponentProvider");try{await Ef(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(e){return"FirebaseError"===e.name?e.code===wo.FAILED_PRECONDITION||e.code===wo.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;po("Error using user provided cache. Falling back to memory cache: "+n),await Ef(e,new yf)}}else ho(Sf,"Using default OfflineComponentProvider"),await Ef(e,new bf(void 0));return e._offlineComponents}async function _f(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(ho(Sf,"Using user provided OnlineComponentProvider"),await Cf(e,e._uninitializedComponentsProvider._online)):(ho(Sf,"Using default OnlineComponentProvider"),await Cf(e,new wf))),e._onlineComponents}function Tf(e){return _f(e).then(e=>e.syncEngine)}async function Nf(e){const t=await _f(e),n=t.eventManager;return n.onListen=Qh.bind(null,t.syncEngine),n.onUnlisten=Jh.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=Yh.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=Zh.bind(null,t.syncEngine),n}function Af(e,t){const n=new So;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){const r=vf(e);try{const e=await function(e,t){const n=bo(e),r=ts.now(),i=t.reduce((e,t)=>e.add(t.key),ql());let o,s;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>{let a=Ml(),l=ql();return n.xs.getEntries(e,i).next(e=>{a=e,a.forEach((e,t)=>{t.isValidDocument()||(l=l.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(e,a)).next(i=>{o=i;const s=[];for(const e of t){const t=vc(e,o.get(e.key).overlayedDocument);null!=t&&s.push(new wc(e.key,t,za(t.value.mapValue),dc.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,s,t)}).next(t=>{s=t;const r=t.applyToLocalDocumentSet(o,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)})}).then(()=>({batchId:s.batchId,changes:Bl(o)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.du[e.currentUser.toKey()];r||(r=new $s(Ro)),r=r.insert(t,n),e.du[e.currentUser.toKey()]=r}(r,e.batchId,n),await ff(r,e.changes),await hh(r.remoteStore)}catch(e){const t=Ih(e,"Failed to persist write");n.reject(t)}}(await Tf(e),t,n)),n.promise}function Df(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const Pf="ComponentProvider",Rf=new Map;function Lf(e,t,n,r,i){return new ma(e,t,n,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling,Df(i.experimentalLongPollingOptions),i.useFetchStreams,i.isUsingEmulator,r)}const Of="firestore.googleapis.com",Mf=!0;class jf{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new ko(wo.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Of,this.ssl=Mf}else this.host=e.host,this.ssl=null!==(t=e.ssl)&&void 0!==t?t:Mf;if(this.isUsingEmulator=void 0!==e.emulatorOptions,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=Mu;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<Uu)throw new ko(wo.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new ko(wo.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Df(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new ko(wo.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new ko(wo.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new ko(wo.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ff{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new jf({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ko(wo.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new ko(wo.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new jf(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Eo;switch(e.type){case"firstParty":return new To(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new ko(wo.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Rf.get(e);t&&(ho(Pf,"Removing Datastore"),Rf.delete(e),t.terminate())}(this),Promise.resolve()}}function Bf(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e=$o(e,Ff);const i=x(t),o=e._getSettings(),s=d(d({},o),{},{emulatorOptions:e._getEmulatorOptions()}),a="".concat(t,":").concat(n);i&&(E("https://".concat(a)),_("Firestore",!0)),o.host!==Of&&o.host!==a&&po("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l=d(d({},o),{},{host:a,ssl:i,emulatorOptions:r});if(!O(l,s)&&(e._setSettings(l),r.mockUserToken)){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=ao.MOCK_USER;else{var c;t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=d({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[m(JSON.stringify({alg:"none",type:"JWT"})),m(JSON.stringify(o)),""].join(".")}(r.mockUserToken,null===(c=e._app)||void 0===c?void 0:c.options.projectId);const i=r.mockUserToken.sub||r.mockUserToken.user_id;if(!i)throw new ko(wo.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new ao(i)}e._authCredentials=new Co(new xo(t,n))}}class Uf{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Uf(this.firestore,e,this._query)}}class Vf{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new zf(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Vf(this.firestore,e,this._key)}toJSON(){return{type:Vf._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,n){if(Jo(t,Vf._jsonSchema))return new Vf(e,n||null,new Ho(Vo.fromString(t.referencePath)))}}Vf._jsonSchemaVersion="firestore/documentReference/1.0",Vf._jsonSchema={type:Xo("string",Vf._jsonSchemaVersion),referencePath:Xo("string")};class zf extends Uf{constructor(e,t,n){super(e,t,bl(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Vf(this.firestore,null,new Ho(e))}withConverter(e){return new zf(this.firestore,e,this._path)}}function Wf(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=z(e),qo("collection","path",t),e instanceof Ff){const n=Vo.fromString(t,...r);return Ko(n),new zf(e,null,n)}{if(!(e instanceof Vf||e instanceof zf))throw new ko(wo.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Vo.fromString(t,...r));return Ko(n),new zf(e.firestore,null,n)}}function Hf(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=z(e),1===arguments.length&&(t=Po.newId()),qo("doc","path",t),e instanceof Ff){const n=Vo.fromString(t,...r);return Go(n),new Vf(e,null,new Ho(n))}{if(!(e instanceof Vf||e instanceof zf))throw new ko(wo.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Vo.fromString(t,...r));return Go(n),new Vf(e.firestore,e instanceof zf?e.converter:null,new Ho(n))}}const qf="AsyncQueue";class Gf{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Bd(this,"async_queue_retry"),this._c=()=>{const e=jd();e&&ho(qf,"Visibility state changed to "+e.visibilityState),this.M_.w_()},this.ac=e;const t=jd();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=jd();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const t=new So;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Yu.push(e),this.lc()))}async lc(){if(0!==this.Yu.length){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!ps(e))throw e;ho(qf,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const t=this.ac.then(()=>(this.rc=!0,e().catch(e=>{throw this.nc=e,this.rc=!1,fo("INTERNAL UNHANDLED ERROR: ",Kf(e)),e}).then(e=>(this.rc=!1,e))));return this.ac=t,t}enqueueAfterDelay(e,t,n){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const r=Ch.createAndSchedule(this,e,t,n,e=>this.hc(e));return this.tc.push(r),r}uc(){this.nc&&go(47125,{Pc:Kf(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do{e=this.ac,await e}while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.tc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Tc()})}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function Kf(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}class Qf extends Ff{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new Gf,this._persistenceKey=(null===r||void 0===r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Gf(e),this._firestoreClient=void 0,await e}}}function Yf(e){if(e._terminated)throw new ko(wo.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||$f(e),e._firestoreClient}function $f(e){var t,n,r,i;const o=e._freezeSettings(),s=Lf(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,null===(n=e._app)||void 0===n?void 0:n.options.apiKey,o);e._componentsProvider||null!==(r=o.localCache)&&void 0!==r&&r._offlineComponentProvider&&null!==(i=o.localCache)&&void 0!==i&&i._onlineComponentProvider&&(e._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),e._firestoreClient=new xf(e._authCredentials,e._appCheckCredentials,e._queue,s,e._componentsProvider&&function(e){const t=null===e||void 0===e?void 0:e._online.build();return{_offline:null===e||void 0===e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}class Xf{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Xf(ra.fromBase64String(e))}catch(e){throw new ko(wo.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new Xf(ra.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Xf._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Jo(e,Xf._jsonSchema))return Xf.fromBase64String(e.bytes)}}Xf._jsonSchemaVersion="firestore/bytes/1.0",Xf._jsonSchema={type:Xo("string",Xf._jsonSchemaVersion),bytes:Xo("string")};class Jf{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new ko(wo.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Wo(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Zf{constructor(e){this._methodName=e}}class ep{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ko(wo.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ko(wo.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ro(this._lat,e._lat)||Ro(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ep._jsonSchemaVersion}}static fromJSON(e){if(Jo(e,ep._jsonSchema))return new ep(e.latitude,e.longitude)}}ep._jsonSchemaVersion="firestore/geoPoint/1.0",ep._jsonSchema={type:Xo("string",ep._jsonSchemaVersion),latitude:Xo("number"),longitude:Xo("number")};class tp{constructor(e){this._values=(e||[]).map(e=>e)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}toJSON(){return{type:tp._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Jo(e,tp._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(e=>"number"==typeof e))return new tp(e.vectorValues);throw new ko(wo.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}tp._jsonSchemaVersion="firestore/vectorValue/1.0",tp._jsonSchema={type:Xo("string",tp._jsonSchemaVersion),vectorValues:Xo("object")};const np=/^__.*__$/;class rp{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new wc(e,this.data,this.fieldMask,t,this.fieldTransforms):new bc(e,this.data,t,this.fieldTransforms)}}class ip{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new wc(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function op(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw go(40011,{dataSource:e})}}class sp{constructor(e,t,n,r,i,o){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.validatePath(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new sp(d(d({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return xp(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(0===e.length)throw this.createError("Document fields must not be empty");if(op(this.dataSource)&&np.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class ap{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Fd(e)}createContext(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new sp({dataSource:e,methodName:t,targetDoc:n,path:Wo.emptyPath(),arrayElement:!1,hasConverter:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function lp(e){const t=e._freezeSettings(),n=Fd(e._databaseId);return new ap(e._databaseId,!!t.ignoreUndefinedProperties,n)}function cp(e,t,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const s=e.createContext(o.merge||o.mergeFields?2:0,t,n,i);bp("Data must be an object, but it was:",s,r);const a=vp(r,s);let l,c;if(o.merge)l=new ta(s.fieldMask),c=s.fieldTransforms;else if(o.mergeFields){const e=[];for(const r of o.mergeFields){const i=wp(t,r,n);if(!s.contains(i))throw new ko(wo.INVALID_ARGUMENT,"Field '".concat(i,"' is specified in your field mask but missing from your input data."));Ep(e,i)||e.push(i)}l=new ta(e),c=s.fieldTransforms.filter(e=>l.covers(e.field))}else l=null,c=s.fieldTransforms;return new rp(new Va(a),l,c)}class up extends Zf{_toFieldTransform(e){if(2!==e.dataSource)throw 1===e.dataSource?e.createError("".concat(this._methodName,"() can only appear at the top level of your update data")):e.createError("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof up}}class dp extends Zf{_toFieldTransform(e){return new cc(e.path,new tc)}isEqual(e){return e instanceof dp}}class hp extends Zf{constructor(e,t){super(e),this.Vc=t}_toFieldTransform(e){const t=new sc(e.serializer,$l(e.serializer,this.Vc));return new cc(e.path,t)}isEqual(e){return e instanceof hp&&this.Vc===e.Vc}}function fp(e,t,n,r){const i=e.createContext(1,t,n);bp("Data must be an object, but it was:",i,r);const o=[],s=Va.empty();Qs(r,(e,r)=>{const a=Sp(t,e,n);r=z(r);const l=i.childContextForFieldPath(a);if(r instanceof up)o.push(a);else{const e=gp(r,l);null!=e&&(o.push(a),s.set(a,e))}});const a=new ta(o);return new ip(s,a,i.fieldTransforms)}function pp(e,t,n,r,i,o){const s=e.createContext(1,t,n),a=[wp(t,r,n)],l=[i];if(o.length%2!=0)throw new ko(wo.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let h=0;h<o.length;h+=2)a.push(wp(t,o[h])),l.push(o[h+1]);const c=[],u=Va.empty();for(let h=a.length-1;h>=0;--h)if(!Ep(c,a[h])){const e=a[h];let t=l[h];t=z(t);const n=s.childContextForFieldPath(e);if(t instanceof up)c.push(e);else{const r=gp(t,n);null!=r&&(c.push(e),u.set(e,r))}}const d=new ta(c);return new ip(u,d,s.fieldTransforms)}function mp(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return gp(n,e.createContext(r?4:3,t))}function gp(e,t){if(yp(e=z(e)))return bp("Unsupported field value:",t,e),vp(e,t);if(e instanceof Zf)return function(e,t){if(!op(t.dataSource))throw t.createError("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.createError("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.arrayElement&&4!==t.dataSource)throw t.createError("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=gp(i,t.childContextForArray(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=z(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return $l(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=ts.fromDate(e);return{timestampValue:tu(t.serializer,n)}}if(e instanceof ts){const n=new ts(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:tu(t.serializer,n)}}if(e instanceof ep)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Xf)return{bytesValue:nu(t.serializer,e._byteString)};if(e instanceof Vf){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.createError("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:ou(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof tp)return function(e,t){const n=e instanceof tp?e.toArray():e,r={fields:{[ya]:{stringValue:ka},[Sa]:{arrayValue:{values:n.map(e=>{if("number"!=typeof e)throw t.createError("VectorValues must only contain numeric values.");return Ql(t.serializer,e)})}}}};return{mapValue:r}}(e,t);if(Tu(e))return e._toProto(t.serializer);throw t.createError("Unsupported field value: ".concat(Yo(e)))}(e,t)}function vp(e,t){const n={};return Ys(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Qs(e,(e,r)=>{const i=gp(r,t.childContextForField(e));null!=i&&(n[e]=i)}),{mapValue:{fields:n}}}function yp(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof ts||e instanceof ep||e instanceof Xf||e instanceof Vf||e instanceof Zf||e instanceof tp||Tu(e))}function bp(e,t,n){if(!yp(n)||!Qo(n)){const r=Yo(n);throw"an object"===r?t.createError(e+" a custom object"):t.createError(e+" "+r)}}function wp(e,t,n){if((t=z(t))instanceof Jf)return t._internalPath;if("string"==typeof t)return Sp(e,t);throw xp("Field path arguments must be of type string or ",e,!1,void 0,n)}const kp=new RegExp("[~\\*/\\[\\]]");function Sp(e,t,n){if(t.search(kp)>=0)throw xp("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new Jf(...t.split("."))._internalPath}catch(r){throw xp("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function xp(e,t,n,r,i){const o=r&&!r.isEmpty(),s=void 0!==i;let a="Function ".concat(t,"() called with invalid data");n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(o||s)&&(l+=" (found",o&&(l+=" in field ".concat(r)),s&&(l+=" in document ".concat(i)),l+=")"),new ko(wo.INVALID_ARGUMENT,a+e+l)}function Ep(e,t){return e.some(e=>e.isEqual(t))}class Cp{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(xa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return sa(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(aa(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw go(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return Qs(e,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertVectorValue(e){var t;const n=null===(t=e.fields)||void 0===t||null===(t=t[Sa].arrayValue)||void 0===t||null===(t=t.values)||void 0===t?void 0:t.map(e=>sa(e.doubleValue));return new tp(n)}convertGeoPoint(e){return new ep(sa(e.latitude),sa(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=fa(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(pa(e));default:return null}}convertTimestamp(e){const t=oa(e);return new ts(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Vo.fromString(e);yo(_u(n),9688,{name:e});const r=new va(n.get(1),n.get(3)),i=new Ho(n.popFirst(5));return r.isEqual(t)||fo("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}class Ip extends Cp{constructor(e){super(),this.firestore=e}convertBytes(e){return new Xf(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Vf(this.firestore,null,t)}}function _p(){return new dp("serverTimestamp")}function Tp(e){return new hp("increment",e)}const Np="@firebase/firestore",Ap="4.11.0";class Dp{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Vf(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Pp(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e,t;return null!==(e=null===(t=this._document)||void 0===t?void 0:t.data.clone().value.mapValue.fields)&&void 0!==e?e:void 0}get(e){if(this._document){const t=this._document.data.field(wp("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Pp extends Dp{data(){return super.data()}}function Rp(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new ko(wo.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Lp{}class Op extends Lp{}function Mp(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];t instanceof Lp&&n.push(t),n=n.concat(i),function(e){const t=e.filter(e=>e instanceof Bp).length,n=e.filter(e=>e instanceof jp).length;if(t>1||t>0&&n>0)throw new ko(wo.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const s of n)e=s._apply(e);return e}class jp extends Op{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new jp(e,t,n)}_apply(e){const t=this._parse(e);return Gp(e._query,t),new Uf(e.firestore,e.converter,Cl(e._query,t))}_parse(e){const t=lp(e.firestore),n=function(e,t,n,r,i,o,s){let a;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new ko(wo.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(o,"' queries on documentId()."));if("in"===o||"not-in"===o){qp(s,o);const t=[];for(const n of s)t.push(Hp(r,e,n));a={arrayValue:{values:t}}}else a=Hp(r,e,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||qp(s,o),a=mp(n,t,s,"in"===o||"not-in"===o);return $a.create(i,o,a)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}function Fp(e,t,n){const r=t,i=wp("where",e);return jp._create(i,r,n)}class Bp extends Lp{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Bp(e,t)}_parse(e){const t=this._queryConstraints.map(t=>t._parse(e)).filter(e=>e.getFilters().length>0);return 1===t.length?t[0]:Xa.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)Gp(n,i),n=Cl(n,i)}(e._query,t),new Uf(e.firestore,e.converter,Cl(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Up extends Op{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Up(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new ko(wo.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new ko(wo.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ka(t,n)}(e._query,this._field,this._direction);return new Uf(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new vl(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function Vp(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=wp("orderBy",e);return Up._create(n,t)}class zp extends Op{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new zp(e,t,n)}_apply(e){return new Uf(e.firestore,e.converter,Il(e._query,this._limit,this._limitType))}}function Wp(e){return function(e,t){if(t<=0)throw new ko(wo.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}("limit",e),zp._create("limit",e,"F")}function Hp(e,t,n){if("string"==typeof(n=z(n))){if(""===n)throw new ko(wo.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!kl(t)&&-1!==n.indexOf("/"))throw new ko(wo.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(Vo.fromString(n));if(!Ho.isDocumentKey(r))throw new ko(wo.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Pa(e,new Ho(r))}if(n instanceof Vf)return Pa(e,n._key);throw new ko(wo.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(Yo(n),"."))}function qp(e,t){if(!Array.isArray(e)||0===e.length)throw new ko(wo.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function Gp(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new ko(wo.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new ko(wo.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}function Kp(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class Qp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Yp extends Dp{constructor(e,t,n,r,i,o){super(e,t,n,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new $p(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(wp("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ko(wo.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Yp._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),e&&e.isValidDocument()&&e.isFoundDocument()?(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t):t}}Yp._jsonSchemaVersion="firestore/documentSnapshot/1.0",Yp._jsonSchema={type:Xo("string",Yp._jsonSchemaVersion),bundleSource:Xo("string","DocumentSnapshot"),bundleName:Xo("string"),bundle:Xo("string")};class $p extends Yp{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class Xp{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Qp(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new $p(this._firestore,this._userDataWriter,n.key,n,new Qp(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new ko(wo.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{const r=new $p(e._firestore,e._userDataWriter,n.doc.key,n.doc,new Qp(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new $p(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Qp(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,o=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),o=n.indexOf(t.doc.key)),{type:Jp(t.type),doc:r,oldIndex:i,newIndex:o}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ko(wo.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Xp._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Po.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],n=[],r=[];return this.docs.forEach(e=>{null!==e._document&&(t.push(e._document),n.push(this._userDataWriter.convertObjectMap(e._document.data.value.mapValue.fields,"previous")),r.push(e.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Jp(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return go(61501,{type:e})}}Xp._jsonSchemaVersion="firestore/querySnapshot/1.0",Xp._jsonSchema={type:Xo("string",Xp._jsonSchemaVersion),bundleSource:Xo("string","QuerySnapshot"),bundleName:Xo("string"),bundle:Xo("string")};class Zp{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=lp(e)}set(e,t,n){this._verifyNotCommitted();const r=em(e,this._firestore),i=Kp(r.converter,t,n),o=cp(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(o.toMutation(r._key,dc.none())),this}update(e,t,n){this._verifyNotCommitted();const r=em(e,this._firestore);let i;for(var o=arguments.length,s=new Array(o>3?o-3:0),a=3;a<o;a++)s[a-3]=arguments[a];return i="string"==typeof(t=z(t))||t instanceof Jf?pp(this._dataReader,"WriteBatch.update",r._key,t,n,s):fp(this._dataReader,"WriteBatch.update",r._key,t),this._mutations.push(i.toMutation(r._key,dc.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=em(e,this._firestore);return this._mutations=this._mutations.concat(new Ec(t._key,dc.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ko(wo.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function em(e,t){if((e=z(e)).firestore!==t)throw new ko(wo.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}function tm(e){e=$o(e,Vf);const t=$o(e.firestore,Qf);return function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new So;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const o=new kf({next:a=>{o.Nu(),t.enqueueAndForget(()=>Lh(e,s));const l=a.docs.has(n);!l&&a.fromCache?i.reject(new ko(wo.UNAVAILABLE,"Failed to get document because the client is offline.")):l&&a.fromCache&&r&&"server"===r.source?i.reject(new ko(wo.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:e=>i.reject(e)}),s=new Uh(bl(n.path),o,{includeMetadataChanges:!0,Ka:!0});return Rh(e,s)}(await Nf(e),e.asyncQueue,t,n,r)),r.promise}(Yf(t),e._key).then(n=>sm(t,e,n))}function nm(e){e=$o(e,Uf);const t=$o(e.firestore,Qf),n=Yf(t),r=new Ip(t);return Rp(e._query),function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new So;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const o=new kf({next:n=>{o.Nu(),t.enqueueAndForget(()=>Lh(e,s)),n.fromCache&&"server"===r.source?i.reject(new ko(wo.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),s=new Uh(n,o,{includeMetadataChanges:!0,Ka:!0});return Rh(e,s)}(await Nf(e),e.asyncQueue,t,n,r)),r.promise}(n,e._query).then(n=>new Xp(t,r,e,n))}function rm(e,t,n){e=$o(e,Vf);const r=$o(e.firestore,Qf),i=Kp(e.converter,t,n);return om(r,[cp(lp(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,dc.none())])}function im(e,t){const n=$o(e.firestore,Qf),r=Hf(e),i=Kp(e.converter,t);return om(n,[cp(lp(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,dc.exists(!1))]).then(()=>r)}function om(e,t){return Af(Yf(e),t)}function sm(e,t,n){const r=n.docs.get(t._key),i=new Ip(e);return new Yp(e,i,t._key,r,new Qp(n.hasPendingWrites,n.fromCache),t.converter)}function am(e){return Yf(e=$o(e,Qf)),new Zp(e,t=>om(e,t))}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];lo=rt,Je(new W("firestore",(e,n)=>{let{instanceIdentifier:r,options:i}=n;const o=e.getProvider("app").getImmediate(),s=new Qf(new Io(e.getProvider("auth-internal")),new Ao(o,e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new ko(wo.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new va(e.options.projectId,t)}(o,r),o);return i=d({useFetchStreams:t},i),s._setSettings(i),s},"PUBLIC").setMultipleInstances(!0)),st(Np,Ap,e),st(Np,Ap,"esm2020")}();const lm=it({apiKey:"AIzaSyDQcOtn1iNoYtEezwMIpauCnZ3pdM2fyW0",authDomain:"tenminutesfromhell.firebaseapp.com",projectId:"tenminutesfromhell",storageBucket:"tenminutesfromhell.firebasestorage.app",messagingSenderId:"24426608546",appId:"1:24426608546:web:a38f1e008d0968d8c2a4fb"}),cm=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ot();const t=Ze(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=Ze(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(O(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;Ct(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:Bi,persistence:[Yr,Nr,Lr]}),r=k("authTokenSyncURL");if(r&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=(i=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>Wi)return;const r=null===t||void 0===t?void 0:t.token;Hi!==r&&(Hi=r,await fetch(i,{method:r?"POST":"DELETE",headers:r?{Authorization:"Bearer ".concat(r)}:{}}))});!function(e,t,n){z(e).beforeAuthStateChanged(t,n)}(n,t,()=>t(n.currentUser)),function(e,t,n,r){z(e).onIdTokenChanged(t,n,r)}(n,e=>t(e))}}var i;const o=b("auth");return o&&Qn(n,"http://".concat(o)),n}(lm),um=function(e,t){const n="object"==typeof e?e:ot(),r="string"==typeof e?e:t||ga,i=Ze(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const e=(e=>{const t=b(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]})("firestore");e&&Bf(i,...e)}return i}(lm),dm=new dr,hm=()=>async function(e,t,n){if(et(e.app))return Promise.reject(It(e,"operation-not-supported-in-this-environment"));const r=Mn(e);Nt(e,t,lr);const i=ti(r,n);return new li(r,"signInViaPopup",t,i).executeNotNull()}(cm,dm),fm=async(e,t,n)=>{const r=await async function(e,t,n){if(et(e.app))return Promise.reject(Tt(e));const r=Mn(e),i=Gn(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",pr,"EMAIL_PASSWORD_PROVIDER"),o=await i.catch(t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&xr(e),t}),s=await mr._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(s.user),s}(cm,e,t);return await Er(r.user,{displayName:n}),r},pm=(e,t)=>function(e,t,n){return et(e.app)?Promise.reject(Tt(e)):Sr(z(e),ar.credential(t,n)).catch(async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&xr(e),t})}(cm,e,t),mm=()=>function(e){return z(e).signOut()}(cm),gm=e=>function(e,t,n,r){return z(e).onAuthStateChanged(t,n,r)}(cm,e);var vm=n(579);const ym=(0,r.createContext)(null),bm=e=>{let{children:t}=e;const[n,i]=(0,r.useState)(null),[o,s]=(0,r.useState)(!0);return(0,r.useEffect)(()=>gm(e=>{i(e),s(!1)}),[]),(0,vm.jsx)(ym.Provider,{value:{user:n,loading:o},children:t})},wm=()=>{const e=(0,r.useContext)(ym);return null===e?{user:null,loading:!1}:e},km=e=>{let{timeLeft:t,targetTime:n,isRunning:i,onStart:o,onStop:s,onReset:a,onTimeClick:l,activeColor:c="#ff3b30",restColor:u="#007aff",flickering:d=!1,restTime:h=15,activeLastMinute:f=!0,drawIn:p=!1,revealTime:m=!1,isCompleted:g=!1,setCount:v=1,onNextSet:y}=e;const[b,w]=(0,r.useState)(p?"title":"done"),[k,S]=(0,r.useState)(!1),x=(0,r.useRef)(null);(0,r.useEffect)(()=>{if(!m||"title"!==b)return;w("fadeout");const e=setTimeout(()=>w("time"),300);return()=>clearTimeout(e)},[m]),(0,r.useEffect)(()=>(d?x.current=setInterval(()=>{S(e=>!e)},250):(x.current&&clearInterval(x.current),S(!1)),()=>{x.current&&clearInterval(x.current)}),[d]);const E=(n-t)/n*100,C=2*Math.PI*120,I=C,_=C-E/100*C,T=()=>{if(!i&&t>0)return"#ffffff";if(d)return k?u:c;const e=t%60;return e>=1&&e<=h&&(!f||t>60)?u:c},N=(e,t)=>{const n=parseInt(e.slice(1,3),16),r=parseInt(e.slice(3,5),16),i=parseInt(e.slice(5,7),16);return"rgba(".concat(n,", ").concat(r,", ").concat(i,", ").concat(t,")")},A=e=>{const t=Math.floor(e/60),n=e%60;return"".concat(t.toString().padStart(2,"0"),":").concat(n.toString().padStart(2,"0"))};return(0,vm.jsxs)("div",{className:"timer-display",children:[(0,vm.jsxs)("svg",{className:"progress-ring",width:"300",height:"300",children:[(0,vm.jsx)("circle",{className:"progress-ring-bg ".concat(p?"draw-in":""),stroke:"#2c2c2e",strokeWidth:"8",fill:"transparent",r:"120",cx:"150",cy:"150"}),(0,vm.jsx)("circle",{className:"progress-ring-fill",stroke:T(),strokeWidth:"8",fill:"transparent",r:"120",cx:"150",cy:"150",strokeDasharray:I,strokeDashoffset:_,strokeLinecap:"round",transform:"rotate(-90 150 150)",style:{filter:"#ffffff"===T()?"drop-shadow(0 0 6px ".concat(N(T(),.3),") drop-shadow(0 0 14px ").concat(N(T(),.15),")"):"drop-shadow(0 0 8px ".concat(N(T(),.7),") drop-shadow(0 0 20px ").concat(N(T(),.5),") drop-shadow(0 0 40px ").concat(N(T(),.25),")")}})]}),p&&("title"===b||"fadeout"===b)&&(0,vm.jsx)("div",{className:"ring-brand-title",children:"HIITem".split("").map((e,t)=>(0,vm.jsx)("span",{className:"fadeout"===b?"brand-letter-out":"brand-letter",style:"fadeout"===b?{animationDelay:"".concat(60*t,"ms")}:void 0,children:e},t))}),!(p&&"title"===b)&&(0,vm.jsx)("div",{className:"time-text ".concat(!p||"fadeout"!==b&&"time"!==b?"":"draw-in-time"),onClick:l,style:{cursor:"pointer"},children:p&&"fadeout"===b?A(t).split("").map((e,t)=>(0,vm.jsx)("span",{className:"digit-stagger",style:{animationDelay:"".concat(60*t,"ms")},children:e},t)):A(t)}),!(p&&"title"===b)&&(0,vm.jsx)("button",{className:"play-btn ".concat(i?"hidden":""," ").concat(!p||"fadeout"!==b&&"time"!==b?"":"draw-in-time"),onClick:g?y:o,children:g?(0,vm.jsx)("span",{className:"set-number",children:["I","II","III","IV","V","VI","VII","VIII","IX","X"][v]||v+1}):(0,vm.jsx)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"currentColor",style:{marginLeft:"1px",filter:"drop-shadow(0 0 4px currentColor)"},children:(0,vm.jsx)("path",{d:"M7.5 4.5c0-1.08 1.22-1.71 2.1-1.08l10.2 7.5c.76.56.76 1.6 0 2.16l-10.2 7.5c-.88.63-2.1 0-2.1-1.08V4.5z"})})}),(0,vm.jsx)("button",{className:"reset-btn ".concat(!i&&t<n?"":"hidden"),onClick:a,children:(0,vm.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,vm.jsx)("polyline",{points:"1 4 1 10 7 10"}),(0,vm.jsx)("path",{d:"M3.51 15a9 9 0 1 0 2.13-9.36L1 10"})]})}),(0,vm.jsx)("button",{className:"pause-btn ".concat(i?"":"hidden"),onClick:s,children:(0,vm.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",children:[(0,vm.jsx)("rect",{x:"6",y:"4",width:"4",height:"16",fill:"currentColor"}),(0,vm.jsx)("rect",{x:"14",y:"4",width:"4",height:"16",fill:"currentColor"})]})})]})},Sm=e=>{let{workoutList:t,workoutIndex:n,isRunning:i,timeLeft:o,onWorkoutSelect:s,showAllWhenPaused:a,staggerIn:l=!1,restTime:c=15}=e;const u=(0,r.useRef)(null);return(0,r.useEffect)(()=>{i&&u.current&&u.current.scrollTo({top:0,behavior:"smooth"})},[i]),(0,vm.jsx)("div",{className:"workout-list",ref:u,children:t.map((e,r)=>{const a=r===n&&i&&o>0,u=r<n||0===o&&r<t.length,h=r>n||r===n&&!i&&o>0,f=o%60,p=a&&f>=1&&f<=c&&o>60;return(0,vm.jsxs)("div",{className:"workout-item ".concat(a?"active":""," ").concat(u?"completed":""," ").concat(h?"upcoming":""," ").concat(p?"warning":""," ").concat(i?"":"selectable"," ").concat(l?"fade-in-item":""),onClick:()=>s&&s(r),style:d({cursor:i?"default":"pointer"},l?{"--stagger-delay":"".concat(100+40*r,"ms")}:{}),children:[(0,vm.jsx)("span",{className:"workout-number",children:r+1}),(0,vm.jsx)("span",{className:"workout-text",children:e})]},r)})})},xm=n.p+"static/media/SPARKS.83fda4ffb1e40078a06e.gif",Em=e=>{let{workouts:t=[],prepTime:n=15,timeLeft:i,isRunning:o,targetTime:s,selectedWorkoutIndex:a,onTimerStateChange:l,selectedWorkoutName:c="",activeColor:u="#ff3b30",restColor:h="#007aff",sidePlankAlertEnabled:f=!0,restTime:p=15,activeLastMinute:m=!0,initialLoad:g=!1,workoutReady:v=!0,onInitialLoadDone:y,isVisible:b=!0}=e;const w=t.length>0?t:["Russian Twist","Boat hold or seated in and outs","Glut boat hold","Jack knifes","Sit up twist (weight over head)","Leg raises (weight in feet)","Chair sit ups (weight in one arm)","Plank knees to elbows","Side planks dips","Bicycle","Boat hold leg flutters"],k=()=>60*w.length+n,[S,x]=(0,r.useState)(void 0!==i?i:k()),[E,C]=(0,r.useState)(void 0!==o&&o),[I,_]=(0,r.useState)(void 0!==s?s:k()),[T,N]=(0,r.useState)(void 0!==a?a:0),[A,D]=(0,r.useState)(1),[P,R]=(0,r.useState)(g),[L,O]=(0,r.useState)(!1),M=(0,r.useRef)(g),[j,F]=(0,r.useState)(!g),[B,U]=(0,r.useState)(!g),[V,z]=(0,r.useState)(!g),[W,H]=(0,r.useState)(!g);(0,r.useEffect)(()=>{if(!g)return;const e=setTimeout(()=>H(!0),600);return()=>clearTimeout(e)},[g]),(0,r.useEffect)(()=>{v&&W&&!V&&(z(!0),U(!0))},[v,W,V]),(0,r.useEffect)(()=>{if(B&&!j){const e=150+40*w.length,t=setTimeout(()=>{F(!0),y&&y()},e);return()=>clearTimeout(t)}},[B,j,w.length,y]),(0,r.useEffect)(()=>{!M.current||!E&&b||(M.current=!1,O(!0),setTimeout(()=>{R(!1),O(!1)},600))},[E,b]),(0,r.useEffect)(()=>{0===S&&!E&&I>0&&(R(!0),O(!1))},[S,E,I]),(0,r.useEffect)(()=>{void 0!==i&&x(i),void 0!==o&&C(o),void 0!==s&&_(s),void 0!==a&&N(a)},[i,o,s,a]),(0,r.useEffect)(()=>{D(1)},[s]);const q=e=>{l&&l(d({timeLeft:S,isRunning:E,targetTime:I,selectedWorkoutIndex:T},e))},G=Math.min(Math.floor((I-S)/60),w.length-1),K=(w[G]||"").toLowerCase().includes("side plank"),Q=S%60,Y=!(Q>=1&&Q<=p&&(!m||S>60)),$=Math.round(31+p/2),X=f&&K&&Y&&E&&Q===$;return(0,vm.jsxs)("div",{className:"timer-container",children:[P&&(0,vm.jsx)("div",{className:"timer-sparks-bg ".concat(L?"timer-sparks-closing":""),children:(0,vm.jsx)("img",{src:xm,alt:"",className:"timer-sparks-img"})}),(0,vm.jsx)(km,{timeLeft:S,targetTime:I,isRunning:E,onStart:()=>{S>0&&(C(!0),q({isRunning:!0}))},onStop:()=>{C(!1),q({isRunning:!1})},onReset:()=>{P&&(O(!0),setTimeout(()=>{R(!1),O(!1)},600)),D(e=>e+1),C(!1),x(I),q({isRunning:!1,timeLeft:I})},onTimeClick:()=>{const e=Math.max(0,S-5);x(e),q({timeLeft:e})},activeColor:u,restColor:h,flickering:X,restTime:p,activeLastMinute:m,drawIn:g,revealTime:V,isCompleted:0===S&&!E&&I>0,setCount:A,onNextSet:()=>{P&&(O(!0),setTimeout(()=>{R(!1),O(!1)},600)),D(e=>e+1),x(I),C(!1),q({isRunning:!1,timeLeft:I})}}),B&&(0,vm.jsxs)(vm.Fragment,{children:[c&&(0,vm.jsx)("div",{className:"timer-workout-title ".concat(E?"hidden":""," ").concat(j?"":"fade-in-item"),style:j?void 0:{"--stagger-delay":"0ms"},children:c}),(0,vm.jsx)(Sm,{workoutList:w,workoutIndex:G,isRunning:E,timeLeft:S,onWorkoutSelect:e=>{if(!E){N(e),q({selectedWorkoutIndex:e});const t=I-60*e,n=Math.max(0,t);x(n),q({timeLeft:n})}},showAllWhenPaused:!E,staggerIn:!j,restTime:p})]})]})};function Cm(e,t){return Cm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Cm(e,t)}function Im(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Cm(e,t)}function _m(){return _m=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_m.apply(null,arguments)}function Tm(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var Nm="function"===typeof Symbol&&Symbol.observable||"@@observable",Am=function(){return Math.random().toString(36).substring(7).split("").join(".")},Dm={INIT:"@@redux/INIT"+Am(),REPLACE:"@@redux/REPLACE"+Am(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+Am()}};function Pm(e){if("object"!==typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function Rm(e,t,n){var r;if("function"===typeof t&&"function"===typeof n||"function"===typeof n&&"function"===typeof arguments[3])throw new Error(Tm(0));if("function"===typeof t&&"undefined"===typeof n&&(n=t,t=void 0),"undefined"!==typeof n){if("function"!==typeof n)throw new Error(Tm(1));return n(Rm)(e,t)}if("function"!==typeof e)throw new Error(Tm(2));var i=e,o=t,s=[],a=s,l=!1;function c(){a===s&&(a=s.slice())}function u(){if(l)throw new Error(Tm(3));return o}function d(e){if("function"!==typeof e)throw new Error(Tm(4));if(l)throw new Error(Tm(5));var t=!0;return c(),a.push(e),function(){if(t){if(l)throw new Error(Tm(6));t=!1,c();var n=a.indexOf(e);a.splice(n,1),s=null}}}function h(e){if(!Pm(e))throw new Error(Tm(7));if("undefined"===typeof e.type)throw new Error(Tm(8));if(l)throw new Error(Tm(9));try{l=!0,o=i(o,e)}finally{l=!1}for(var t=s=a,n=0;n<t.length;n++){(0,t[n])()}return e}return h({type:Dm.INIT}),(r={dispatch:h,subscribe:d,getState:u,replaceReducer:function(e){if("function"!==typeof e)throw new Error(Tm(10));i=e,h({type:Dm.REPLACE})}})[Nm]=function(){var e,t=d;return(e={subscribe:function(e){if("object"!==typeof e||null===e)throw new Error(Tm(11));function n(){e.next&&e.next(u())}return n(),{unsubscribe:t(n)}}})[Nm]=function(){return this},e},r}function Lm(e,t){return function(){return t(e.apply(this,arguments))}}function Om(e,t){if("function"===typeof e)return Lm(e,t);if("object"!==typeof e||null===e)throw new Error(Tm(16));var n={};for(var r in e){var i=e[r];"function"===typeof i&&(n[r]=Lm(i,t))}return n}function Mm(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce(function(e,t){return function(){return e(t.apply(void 0,arguments))}})}var jm=r.createContext(null);var Fm=function(e){e()},Bm=function(){return Fm};var Um={notify:function(){},get:function(){return[]}};function Vm(e,t){var n,r=Um;function i(){s.onStateChange&&s.onStateChange()}function o(){n||(n=t?t.addNestedSub(i):e.subscribe(i),r=function(){var e=Bm(),t=null,n=null;return{clear:function(){t=null,n=null},notify:function(){e(function(){for(var e=t;e;)e.callback(),e=e.next})},get:function(){for(var e=[],n=t;n;)e.push(n),n=n.next;return e},subscribe:function(e){var r=!0,i=n={callback:e,next:null,prev:n};return i.prev?i.prev.next=i:t=i,function(){r&&null!==t&&(r=!1,i.next?i.next.prev=i.prev:n=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}())}var s={addNestedSub:function(e){return o(),r.subscribe(e)},notifyNestedSubs:function(){r.notify()},handleChangeWrapper:i,isSubscribed:function(){return Boolean(n)},trySubscribe:o,tryUnsubscribe:function(){n&&(n(),n=void 0,r.clear(),r=Um)},getListeners:function(){return r}};return s}var zm="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement?r.useLayoutEffect:r.useEffect;const Wm=function(e){var t=e.store,n=e.context,i=e.children,o=(0,r.useMemo)(function(){var e=Vm(t);return{store:t,subscription:e}},[t]),s=(0,r.useMemo)(function(){return t.getState()},[t]);zm(function(){var e=o.subscription;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),s!==t.getState()&&e.notifyNestedSubs(),function(){e.tryUnsubscribe(),e.onStateChange=null}},[o,s]);var a=n||jm;return r.createElement(a.Provider,{value:o},i)};var Hm=n(219),qm=n.n(Hm),Gm=n(86),Km=["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"],Qm=["reactReduxForwardedRef"],Ym=[],$m=[null,null];function Xm(e,t){var n=e[1];return[t.payload,n+1]}function Jm(e,t,n){zm(function(){return e.apply(void 0,t)},n)}function Zm(e,t,n,r,i,o,s){e.current=r,t.current=i,n.current=!1,o.current&&(o.current=null,s())}function eg(e,t,n,r,i,o,s,a,l,c){if(e){var u=!1,d=null,h=function(){if(!u){var e,n,h=t.getState();try{e=r(h,i.current)}catch(f){n=f,d=f}n||(d=null),e===o.current?s.current||l():(o.current=e,a.current=e,s.current=!0,c({type:"STORE_UPDATED",payload:{error:n}}))}};n.onStateChange=h,n.trySubscribe(),h();return function(){if(u=!0,n.tryUnsubscribe(),n.onStateChange=null,d)throw d}}}var tg=function(){return[null,0]};function ng(e,t){void 0===t&&(t={});var n=t,i=n.getDisplayName,s=void 0===i?function(e){return"ConnectAdvanced("+e+")"}:i,a=n.methodName,l=void 0===a?"connectAdvanced":a,c=n.renderCountProp,u=void 0===c?void 0:c,d=n.shouldHandleStateChanges,h=void 0===d||d,f=n.storeKey,p=void 0===f?"store":f,m=(n.withRef,n.forwardRef),g=void 0!==m&&m,v=n.context,y=void 0===v?jm:v,b=o(n,Km),w=y;return function(t){var n=t.displayName||t.name||"Component",i=s(n),a=_m({},b,{getDisplayName:s,methodName:l,renderCountProp:u,shouldHandleStateChanges:h,storeKey:p,displayName:i,wrappedComponentName:n,WrappedComponent:t}),c=b.pure;var d=c?r.useMemo:function(e){return e()};function f(n){var i=(0,r.useMemo)(function(){var e=n.reactReduxForwardedRef,t=o(n,Qm);return[n.context,e,t]},[n]),s=i[0],l=i[1],c=i[2],u=(0,r.useMemo)(function(){return s&&s.Consumer&&(0,Gm.isContextConsumer)(r.createElement(s.Consumer,null))?s:w},[s,w]),f=(0,r.useContext)(u),p=Boolean(n.store)&&Boolean(n.store.getState)&&Boolean(n.store.dispatch);Boolean(f)&&Boolean(f.store);var m=p?n.store:f.store,g=(0,r.useMemo)(function(){return function(t){return e(t.dispatch,a)}(m)},[m]),v=(0,r.useMemo)(function(){if(!h)return $m;var e=Vm(m,p?null:f.subscription),t=e.notifyNestedSubs.bind(e);return[e,t]},[m,p,f]),y=v[0],b=v[1],k=(0,r.useMemo)(function(){return p?f:_m({},f,{subscription:y})},[p,f,y]),S=(0,r.useReducer)(Xm,Ym,tg),x=S[0][0],E=S[1];if(x&&x.error)throw x.error;var C=(0,r.useRef)(),I=(0,r.useRef)(c),_=(0,r.useRef)(),T=(0,r.useRef)(!1),N=d(function(){return _.current&&c===I.current?_.current:g(m.getState(),c)},[m,x,c]);Jm(Zm,[I,C,T,c,N,_,b]),Jm(eg,[h,m,y,g,I,C,T,_,b,E],[m,y,g]);var A=(0,r.useMemo)(function(){return r.createElement(t,_m({},N,{ref:l}))},[l,t,N]);return(0,r.useMemo)(function(){return h?r.createElement(u.Provider,{value:k},A):A},[u,A,k])}var m=c?r.memo(f):f;if(m.WrappedComponent=t,m.displayName=f.displayName=i,g){var v=r.forwardRef(function(e,t){return r.createElement(m,_m({},e,{reactReduxForwardedRef:t}))});return v.displayName=i,v.WrappedComponent=t,qm()(v,t)}return qm()(m,t)}}function rg(e,t){return e===t?0!==e||0!==t||1/e===1/t:e!==e&&t!==t}function ig(e,t){if(rg(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var i=0;i<n.length;i++)if(!Object.prototype.hasOwnProperty.call(t,n[i])||!rg(e[n[i]],t[n[i]]))return!1;return!0}function og(e){return function(t,n){var r=e(t,n);function i(){return r}return i.dependsOnOwnProps=!1,i}}function sg(e){return null!==e.dependsOnOwnProps&&void 0!==e.dependsOnOwnProps?Boolean(e.dependsOnOwnProps):1!==e.length}function ag(e,t){return function(t,n){n.displayName;var r=function(e,t){return r.dependsOnOwnProps?r.mapToProps(e,t):r.mapToProps(e)};return r.dependsOnOwnProps=!0,r.mapToProps=function(t,n){r.mapToProps=e,r.dependsOnOwnProps=sg(e);var i=r(t,n);return"function"===typeof i&&(r.mapToProps=i,r.dependsOnOwnProps=sg(i),i=r(t,n)),i},r}}const lg=[function(e){return"function"===typeof e?ag(e):void 0},function(e){return e?void 0:og(function(e){return{dispatch:e}})},function(e){return e&&"object"===typeof e?og(function(t){return function(e,t){var n={},r=function(r){var i=e[r];"function"===typeof i&&(n[r]=function(){return t(i.apply(void 0,arguments))})};for(var i in e)r(i);return n}(e,t)}):void 0}];const cg=[function(e){return"function"===typeof e?ag(e):void 0},function(e){return e?void 0:og(function(){return{}})}];function ug(e,t,n){return _m({},n,e,t)}const dg=[function(e){return"function"===typeof e?function(e){return function(t,n){n.displayName;var r,i=n.pure,o=n.areMergedPropsEqual,s=!1;return function(t,n,a){var l=e(t,n,a);return s?i&&o(l,r)||(r=l):(s=!0,r=l),r}}}(e):void 0},function(e){return e?void 0:function(){return ug}}];var hg=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function fg(e,t,n,r){return function(i,o){return n(e(i,o),t(r,o),o)}}function pg(e,t,n,r,i){var o,s,a,l,c,u=i.areStatesEqual,d=i.areOwnPropsEqual,h=i.areStatePropsEqual,f=!1;function p(i,f){var p=!d(f,s),m=!u(i,o,f,s);return o=i,s=f,p&&m?(a=e(o,s),t.dependsOnOwnProps&&(l=t(r,s)),c=n(a,l,s)):p?(e.dependsOnOwnProps&&(a=e(o,s)),t.dependsOnOwnProps&&(l=t(r,s)),c=n(a,l,s)):m?function(){var t=e(o,s),r=!h(t,a);return a=t,r&&(c=n(a,l,s)),c}():c}return function(i,u){return f?p(i,u):(a=e(o=i,s=u),l=t(r,s),c=n(a,l,s),f=!0,c)}}function mg(e,t){var n=t.initMapStateToProps,r=t.initMapDispatchToProps,i=t.initMergeProps,s=o(t,hg),a=n(e,s),l=r(e,s),c=i(e,s);return(s.pure?pg:fg)(a,l,c,e,s)}var gg=["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"];function vg(e,t,n){for(var r=t.length-1;r>=0;r--){var i=t[r](e);if(i)return i}return function(t,r){throw new Error("Invalid value of type "+typeof e+" for "+n+" argument when connecting component "+r.wrappedComponentName+".")}}function yg(e,t){return e===t}function bg(e){var t=void 0===e?{}:e,n=t.connectHOC,r=void 0===n?ng:n,i=t.mapStateToPropsFactories,s=void 0===i?cg:i,a=t.mapDispatchToPropsFactories,l=void 0===a?lg:a,c=t.mergePropsFactories,u=void 0===c?dg:c,d=t.selectorFactory,h=void 0===d?mg:d;return function(e,t,n,i){void 0===i&&(i={});var a=i,c=a.pure,d=void 0===c||c,f=a.areStatesEqual,p=void 0===f?yg:f,m=a.areOwnPropsEqual,g=void 0===m?ig:m,v=a.areStatePropsEqual,y=void 0===v?ig:v,b=a.areMergedPropsEqual,w=void 0===b?ig:b,k=o(a,gg),S=vg(e,s,"mapStateToProps"),x=vg(t,l,"mapDispatchToProps"),E=vg(n,u,"mergeProps");return r(h,_m({methodName:"connect",getDisplayName:function(e){return"Connect("+e+")"},shouldHandleStateChanges:Boolean(e),initMapStateToProps:S,initMapDispatchToProps:x,initMergeProps:E,pure:d,areStatesEqual:p,areOwnPropsEqual:g,areStatePropsEqual:y,areMergedPropsEqual:w},k))}}const wg=bg();var kg,Sg=n(950);function xg(e,t){var n=(0,r.useState)(function(){return{inputs:t,result:e()}})[0],i=(0,r.useRef)(!0),o=(0,r.useRef)(n),s=i.current||Boolean(t&&o.current.inputs&&function(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}(t,o.current.inputs))?o.current:{inputs:t,result:e()};return(0,r.useEffect)(function(){i.current=!1,o.current=s},[s]),s.result}kg=Sg.unstable_batchedUpdates,Fm=kg;var Eg=xg,Cg=function(e,t){return xg(function(){return e},t)},Ig="Invariant failed";var _g=function(e){var t=e.top,n=e.right,r=e.bottom,i=e.left;return{top:t,right:n,bottom:r,left:i,width:n-i,height:r-t,x:i,y:t,center:{x:(n+i)/2,y:(r+t)/2}}},Tg=function(e,t){return{top:e.top-t.top,left:e.left-t.left,bottom:e.bottom+t.bottom,right:e.right+t.right}},Ng=function(e,t){return{top:e.top+t.top,left:e.left+t.left,bottom:e.bottom-t.bottom,right:e.right-t.right}},Ag={top:0,right:0,bottom:0,left:0},Dg=function(e){var t=e.borderBox,n=e.margin,r=void 0===n?Ag:n,i=e.border,o=void 0===i?Ag:i,s=e.padding,a=void 0===s?Ag:s,l=_g(Tg(t,r)),c=_g(Ng(t,o)),u=_g(Ng(c,a));return{marginBox:l,borderBox:_g(t),paddingBox:c,contentBox:u,margin:r,border:o,padding:a}},Pg=function(e){var t=e.slice(0,-2);if("px"!==e.slice(-2))return 0;var n=Number(t);return isNaN(n)&&function(e){if(!e)throw new Error(Ig)}(!1),n},Rg=function(e,t){var n,r,i=e.borderBox,o=e.border,s=e.margin,a=e.padding,l=(r=t,{top:(n=i).top+r.y,left:n.left+r.x,bottom:n.bottom+r.y,right:n.right+r.x});return Dg({borderBox:l,border:o,margin:s,padding:a})},Lg=function(e,t){return void 0===t&&(t={x:window.pageXOffset,y:window.pageYOffset}),Rg(e,t)},Og=function(e,t){var n={top:Pg(t.marginTop),right:Pg(t.marginRight),bottom:Pg(t.marginBottom),left:Pg(t.marginLeft)},r={top:Pg(t.paddingTop),right:Pg(t.paddingRight),bottom:Pg(t.paddingBottom),left:Pg(t.paddingLeft)},i={top:Pg(t.borderTopWidth),right:Pg(t.borderRightWidth),bottom:Pg(t.borderBottomWidth),left:Pg(t.borderLeftWidth)};return Dg({borderBox:e,margin:n,padding:r,border:i})},Mg=function(e){var t=e.getBoundingClientRect(),n=window.getComputedStyle(e);return Og(t,n)},jg=Number.isNaN||function(e){return"number"===typeof e&&e!==e};function Fg(e,t){return e===t||!(!jg(e)||!jg(t))}function Bg(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!Fg(e[n],t[n]))return!1;return!0}const Ug=function(e,t){var n;void 0===t&&(t=Bg);var r,i=[],o=!1;return function(){for(var s=[],a=0;a<arguments.length;a++)s[a]=arguments[a];return o&&n===this&&t(s,i)||(r=e.apply(this,s),o=!0,n=this,i=s),r}};const Vg=function(e){var t=[],n=null,r=function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];t=i,n||(n=requestAnimationFrame(function(){n=null,e.apply(void 0,t)}))};return r.cancel=function(){n&&(cancelAnimationFrame(n),n=null)},r};function zg(e,t){}zg.bind(null,"warn"),zg.bind(null,"error");function Wg(){}function Hg(e,t,n){var r=t.map(function(t){var r=function(e,t){return _m({},e,{},t)}(n,t.options);return e.addEventListener(t.eventName,t.fn,r),function(){e.removeEventListener(t.eventName,t.fn,r)}});return function(){r.forEach(function(e){e()})}}var qg="Invariant failed";function Gg(e){this.message=e}function Kg(e,t){if(!e)throw new Gg(qg)}Gg.prototype.toString=function(){return this.message};var Qg=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).callbacks=null,t.unbind=Wg,t.onWindowError=function(e){var n=t.getCallbacks();n.isDragging()&&n.tryAbort(),e.error instanceof Gg&&e.preventDefault()},t.getCallbacks=function(){if(!t.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return t.callbacks},t.setCallbacks=function(e){t.callbacks=e},t}Im(t,e);var n=t.prototype;return n.componentDidMount=function(){this.unbind=Hg(window,[{eventName:"error",fn:this.onWindowError}])},n.componentDidCatch=function(e){if(!(e instanceof Gg))throw e;this.setState({})},n.componentWillUnmount=function(){this.unbind()},n.render=function(){return this.props.children(this.setCallbacks)},t}(r.Component),Yg=function(e){return e+1},$g=function(e,t){var n=e.droppableId===t.droppableId,r=Yg(e.index),i=Yg(t.index);return n?"\n      You have moved the item from position "+r+"\n      to position "+i+"\n    ":"\n    You have moved the item from position "+r+"\n    in list "+e.droppableId+"\n    to list "+t.droppableId+"\n    in position "+i+"\n  "},Xg=function(e,t,n){return t.droppableId===n.droppableId?"\n      The item "+e+"\n      has been combined with "+n.draggableId:"\n      The item "+e+"\n      in list "+t.droppableId+"\n      has been combined with "+n.draggableId+"\n      in list "+n.droppableId+"\n    "},Jg=function(e){return"\n  The item has returned to its starting position\n  of "+Yg(e.index)+"\n"},Zg="\n  Press space bar to start a drag.\n  When dragging you can use the arrow keys to move the item around and escape to cancel.\n  Some screen readers may require you to be in focus mode or to use your pass through key\n",ev=function(e){return"\n  You have lifted an item in position "+Yg(e.source.index)+"\n"},tv=function(e){var t=e.destination;if(t)return $g(e.source,t);var n=e.combine;return n?Xg(e.draggableId,e.source,n):"You are over an area that cannot be dropped on"},nv=function(e){if("CANCEL"===e.reason)return"\n      Movement cancelled.\n      "+Jg(e.source)+"\n    ";var t=e.destination,n=e.combine;return t?"\n      You have dropped the item.\n      "+$g(e.source,t)+"\n    ":n?"\n      You have dropped the item.\n      "+Xg(e.draggableId,e.source,n)+"\n    ":"\n    The item has been dropped while not over a drop area.\n    "+Jg(e.source)+"\n  "},rv={x:0,y:0},iv=function(e,t){return{x:e.x+t.x,y:e.y+t.y}},ov=function(e,t){return{x:e.x-t.x,y:e.y-t.y}},sv=function(e,t){return e.x===t.x&&e.y===t.y},av=function(e){return{x:0!==e.x?-e.x:0,y:0!==e.y?-e.y:0}},lv=function(e,t,n){var r;return void 0===n&&(n=0),(r={})[e]=t,r["x"===e?"y":"x"]=n,r},cv=function(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))},uv=function(e,t){return Math.min.apply(Math,t.map(function(t){return cv(e,t)}))},dv=function(e){return function(t){return{x:e(t.x),y:e(t.y)}}},hv=function(e,t){return{top:e.top+t.y,left:e.left+t.x,bottom:e.bottom+t.y,right:e.right+t.x}},fv=function(e){return[{x:e.left,y:e.top},{x:e.right,y:e.top},{x:e.left,y:e.bottom},{x:e.right,y:e.bottom}]},pv=function(e,t){return t&&t.shouldClipSubject?function(e,t){var n=_g({top:Math.max(t.top,e.top),right:Math.min(t.right,e.right),bottom:Math.min(t.bottom,e.bottom),left:Math.max(t.left,e.left)});return n.width<=0||n.height<=0?null:n}(t.pageMarginBox,e):_g(e)},mv=function(e){var t=e.page,n=e.withPlaceholder,r=e.axis,i=e.frame,o=function(e,t){return t?hv(e,t.scroll.diff.displacement):e}(t.marginBox,i),s=function(e,t,n){var r;return n&&n.increasedBy?_m({},e,((r={})[t.end]=e[t.end]+n.increasedBy[t.line],r)):e}(o,r,n);return{page:t,withPlaceholder:n,active:pv(s,i)}},gv=function(e,t){e.frame||Kg(!1);var n=e.frame,r=ov(t,n.scroll.initial),i=av(r),o=_m({},n,{scroll:{initial:n.scroll.initial,current:t,diff:{value:r,displacement:i},max:n.scroll.max}});return _m({},e,{frame:o,subject:mv({page:e.subject.page,withPlaceholder:e.subject.withPlaceholder,axis:e.axis,frame:o})})};function vv(e){return Object.values?Object.values(e):Object.keys(e).map(function(t){return e[t]})}function yv(e,t){if(e.findIndex)return e.findIndex(t);for(var n=0;n<e.length;n++)if(t(e[n]))return n;return-1}function bv(e,t){if(e.find)return e.find(t);var n=yv(e,t);return-1!==n?e[n]:void 0}function wv(e){return Array.prototype.slice.call(e)}var kv=Ug(function(e){return e.reduce(function(e,t){return e[t.descriptor.id]=t,e},{})}),Sv=Ug(function(e){return e.reduce(function(e,t){return e[t.descriptor.id]=t,e},{})}),xv=Ug(function(e){return vv(e)}),Ev=Ug(function(e){return vv(e)}),Cv=Ug(function(e,t){var n=Ev(t).filter(function(t){return e===t.descriptor.droppableId}).sort(function(e,t){return e.descriptor.index-t.descriptor.index});return n});function Iv(e){return e.at&&"REORDER"===e.at.type?e.at.destination:null}function _v(e){return e.at&&"COMBINE"===e.at.type?e.at.combine:null}var Tv=Ug(function(e,t){return t.filter(function(t){return t.descriptor.id!==e.descriptor.id})}),Nv=function(e,t){return e.descriptor.droppableId===t.descriptor.id},Av={point:rv,value:0},Dv={invisible:{},visible:{},all:[]},Pv={displaced:Dv,displacedBy:Av,at:null},Rv=function(e,t){return function(n){return e<=n&&n<=t}},Lv=function(e){var t=Rv(e.top,e.bottom),n=Rv(e.left,e.right);return function(r){if(t(r.top)&&t(r.bottom)&&n(r.left)&&n(r.right))return!0;var i=t(r.top)||t(r.bottom),o=n(r.left)||n(r.right);if(i&&o)return!0;var s=r.top<e.top&&r.bottom>e.bottom,a=r.left<e.left&&r.right>e.right;return!(!s||!a)||(s&&o||a&&i)}},Ov=function(e){var t=Rv(e.top,e.bottom),n=Rv(e.left,e.right);return function(e){return t(e.top)&&t(e.bottom)&&n(e.left)&&n(e.right)}},Mv={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},jv={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"},Fv=function(e){var t=e.target,n=e.destination,r=e.viewport,i=e.withDroppableDisplacement,o=e.isVisibleThroughFrameFn,s=i?function(e,t){var n=t.frame?t.frame.scroll.diff.displacement:rv;return hv(e,n)}(t,n):t;return function(e,t,n){return!!t.subject.active&&n(t.subject.active)(e)}(s,n,o)&&function(e,t,n){return n(t)(e)}(s,r,o)},Bv=function(e){return Fv(_m({},e,{isVisibleThroughFrameFn:Lv}))},Uv=function(e){return Fv(_m({},e,{isVisibleThroughFrameFn:Ov}))};function Vv(e){var t=e.afterDragging,n=e.destination,r=e.displacedBy,i=e.viewport,o=e.forceShouldAnimate,s=e.last;return t.reduce(function(e,t){var a=function(e,t){var n=e.page.marginBox,r={top:t.point.y,right:0,bottom:0,left:t.point.x};return _g(Tg(n,r))}(t,r),l=t.descriptor.id;if(e.all.push(l),!Bv({target:a,destination:n,viewport:i,withDroppableDisplacement:!0}))return e.invisible[t.descriptor.id]=!0,e;var c=function(e,t,n){if("boolean"===typeof n)return n;if(!t)return!0;var r=t.invisible,i=t.visible;if(r[e])return!1;var o=i[e];return!o||o.shouldAnimate}(l,s,o),u={draggableId:l,shouldAnimate:c};return e.visible[l]=u,e},{all:[],visible:{},invisible:{}})}function zv(e){var t=e.insideDestination,n=e.inHomeList,r=e.displacedBy,i=e.destination,o=function(e,t){if(!e.length)return 0;var n=e[e.length-1].descriptor.index;return t.inHomeList?n:n+1}(t,{inHomeList:n});return{displaced:Dv,displacedBy:r,at:{type:"REORDER",destination:{droppableId:i.descriptor.id,index:o}}}}function Wv(e){var t=e.draggable,n=e.insideDestination,r=e.destination,i=e.viewport,o=e.displacedBy,s=e.last,a=e.index,l=e.forceShouldAnimate,c=Nv(t,r);if(null==a)return zv({insideDestination:n,inHomeList:c,displacedBy:o,destination:r});var u=bv(n,function(e){return e.descriptor.index===a});if(!u)return zv({insideDestination:n,inHomeList:c,displacedBy:o,destination:r});var d=Tv(t,n),h=n.indexOf(u);return{displaced:Vv({afterDragging:d.slice(h),destination:r,displacedBy:o,last:s,viewport:i.frame,forceShouldAnimate:l}),displacedBy:o,at:{type:"REORDER",destination:{droppableId:r.descriptor.id,index:a}}}}function Hv(e,t){return Boolean(t.effected[e])}var qv=function(e){var t=e.isMovingForward,n=e.isInHomeList,r=e.draggable,i=e.draggables,o=e.destination,s=e.insideDestination,a=e.previousImpact,l=e.viewport,c=e.afterCritical,u=a.at;if(u||Kg(!1),"REORDER"===u.type){var d=function(e){var t=e.isMovingForward,n=e.isInHomeList,r=e.insideDestination,i=e.location;if(!r.length)return null;var o=i.index,s=t?o+1:o-1,a=r[0].descriptor.index,l=r[r.length-1].descriptor.index;return s<a||s>(n?l:l+1)?null:s}({isMovingForward:t,isInHomeList:n,location:u.destination,insideDestination:s});return null==d?null:Wv({draggable:r,insideDestination:s,destination:o,viewport:l,last:a.displaced,displacedBy:a.displacedBy,index:d})}var h=function(e){var t=e.isMovingForward,n=e.destination,r=e.draggables,i=e.combine,o=e.afterCritical;if(!n.isCombineEnabled)return null;var s=i.draggableId,a=r[s].descriptor.index;return Hv(s,o)?t?a:a-1:t?a+1:a}({isMovingForward:t,destination:o,displaced:a.displaced,draggables:i,combine:u.combine,afterCritical:c});return null==h?null:Wv({draggable:r,insideDestination:s,destination:o,viewport:l,last:a.displaced,displacedBy:a.displacedBy,index:h})},Gv=function(e){var t=e.afterCritical,n=e.impact,r=e.draggables,i=_v(n);i||Kg(!1);var o=i.draggableId,s=r[o].page.borderBox.center,a=function(e){var t=e.displaced,n=e.afterCritical,r=e.combineWith,i=e.displacedBy,o=Boolean(t.visible[r]||t.invisible[r]);return Hv(r,n)?o?rv:av(i.point):o?i.point:rv}({displaced:n.displaced,afterCritical:t,combineWith:o,displacedBy:n.displacedBy});return iv(s,a)},Kv=function(e,t){return t.margin[e.start]+t.borderBox[e.size]/2},Qv=function(e,t,n){return t[e.crossAxisStart]+n.margin[e.crossAxisStart]+n.borderBox[e.crossAxisSize]/2},Yv=function(e){var t=e.axis,n=e.moveRelativeTo,r=e.isMoving;return lv(t.line,n.marginBox[t.end]+Kv(t,r),Qv(t,n.marginBox,r))},$v=function(e){var t=e.axis,n=e.moveRelativeTo,r=e.isMoving;return lv(t.line,n.marginBox[t.start]-function(e,t){return t.margin[e.end]+t.borderBox[e.size]/2}(t,r),Qv(t,n.marginBox,r))},Xv=function(e){var t=e.impact,n=e.draggable,r=e.draggables,i=e.droppable,o=e.afterCritical,s=Cv(i.descriptor.id,r),a=n.page,l=i.axis;if(!s.length)return function(e){var t=e.axis,n=e.moveInto,r=e.isMoving;return lv(t.line,n.contentBox[t.start]+Kv(t,r),Qv(t,n.contentBox,r))}({axis:l,moveInto:i.page,isMoving:a});var c=t.displaced,u=t.displacedBy,d=c.all[0];if(d){var h=r[d];if(Hv(d,o))return $v({axis:l,moveRelativeTo:h.page,isMoving:a});var f=Rg(h.page,u.point);return $v({axis:l,moveRelativeTo:f,isMoving:a})}var p=s[s.length-1];if(p.descriptor.id===n.descriptor.id)return a.borderBox.center;if(Hv(p.descriptor.id,o)){var m=Rg(p.page,av(o.displacedBy.point));return Yv({axis:l,moveRelativeTo:m,isMoving:a})}return Yv({axis:l,moveRelativeTo:p.page,isMoving:a})},Jv=function(e,t){var n=e.frame;return n?iv(t,n.scroll.diff.displacement):t},Zv=function(e){var t=function(e){var t=e.impact,n=e.draggable,r=e.droppable,i=e.draggables,o=e.afterCritical,s=n.page.borderBox.center,a=t.at;return r&&a?"REORDER"===a.type?Xv({impact:t,draggable:n,draggables:i,droppable:r,afterCritical:o}):Gv({impact:t,draggables:i,afterCritical:o}):s}(e),n=e.droppable;return n?Jv(n,t):t},ey=function(e,t){var n=ov(t,e.scroll.initial),r=av(n);return{frame:_g({top:t.y,bottom:t.y+e.frame.height,left:t.x,right:t.x+e.frame.width}),scroll:{initial:e.scroll.initial,max:e.scroll.max,current:t,diff:{value:n,displacement:r}}}};function ty(e,t){return e.map(function(e){return t[e]})}var ny=function(e){var t=e.pageBorderBoxCenter,n=e.draggable,r=function(e,t){return iv(e.scroll.diff.displacement,t)}(e.viewport,t),i=ov(r,n.page.borderBox.center);return iv(n.client.borderBox.center,i)},ry=function(e){var t=e.draggable,n=e.destination,r=e.newPageBorderBoxCenter,i=e.viewport,o=e.withDroppableDisplacement,s=e.onlyOnMainAxis,a=void 0!==s&&s,l=ov(r,t.page.borderBox.center),c={target:hv(t.page.borderBox,l),destination:n,withDroppableDisplacement:o,viewport:i};return a?function(e){return Fv(_m({},e,{isVisibleThroughFrameFn:(t=e.destination.axis,function(e){var n=Rv(e.top,e.bottom),r=Rv(e.left,e.right);return function(e){return t===Mv?n(e.top)&&n(e.bottom):r(e.left)&&r(e.right)}})}));var t}(c):Uv(c)},iy=function(e){var t=e.isMovingForward,n=e.draggable,r=e.destination,i=e.draggables,o=e.previousImpact,s=e.viewport,a=e.previousPageBorderBoxCenter,l=e.previousClientSelection,c=e.afterCritical;if(!r.isEnabled)return null;var u=Cv(r.descriptor.id,i),d=Nv(n,r),h=function(e){var t=e.isMovingForward,n=e.draggable,r=e.destination,i=e.insideDestination,o=e.previousImpact;if(!r.isCombineEnabled)return null;if(!Iv(o))return null;function s(e){var t={type:"COMBINE",combine:{draggableId:e,droppableId:r.descriptor.id}};return _m({},o,{at:t})}var a=o.displaced.all,l=a.length?a[0]:null;if(t)return l?s(l):null;var c=Tv(n,i);if(!l)return c.length?s(c[c.length-1].descriptor.id):null;var u=yv(c,function(e){return e.descriptor.id===l});-1===u&&Kg(!1);var d=u-1;return d<0?null:s(c[d].descriptor.id)}({isMovingForward:t,draggable:n,destination:r,insideDestination:u,previousImpact:o})||qv({isMovingForward:t,isInHomeList:d,draggable:n,draggables:i,destination:r,insideDestination:u,previousImpact:o,viewport:s,afterCritical:c});if(!h)return null;var f=Zv({impact:h,draggable:n,droppable:r,draggables:i,afterCritical:c});if(ry({draggable:n,destination:r,newPageBorderBoxCenter:f,viewport:s.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0}))return{clientSelection:ny({pageBorderBoxCenter:f,draggable:n,viewport:s}),impact:h,scrollJumpRequest:null};var p=ov(f,a),m=function(e){var t=e.impact,n=e.viewport,r=e.destination,i=e.draggables,o=e.maxScrollChange,s=ey(n,iv(n.scroll.current,o)),a=r.frame?gv(r,iv(r.frame.scroll.current,o)):r,l=t.displaced,c=Vv({afterDragging:ty(l.all,i),destination:r,displacedBy:t.displacedBy,viewport:s.frame,last:l,forceShouldAnimate:!1}),u=Vv({afterDragging:ty(l.all,i),destination:a,displacedBy:t.displacedBy,viewport:n.frame,last:l,forceShouldAnimate:!1}),d={},h={},f=[l,c,u];return l.all.forEach(function(e){var t=function(e,t){for(var n=0;n<t.length;n++){var r=t[n].visible[e];if(r)return r}return null}(e,f);t?h[e]=t:d[e]=!0}),_m({},t,{displaced:{all:l.all,invisible:d,visible:h}})}({impact:h,viewport:s,destination:r,draggables:i,maxScrollChange:p});return{clientSelection:l,impact:m,scrollJumpRequest:p}},oy=function(e){var t=e.subject.active;return t||Kg(!1),t},sy=function(e,t){var n=e.page.borderBox.center;return Hv(e.descriptor.id,t)?ov(n,t.displacedBy.point):n},ay=function(e,t){var n=e.page.borderBox;return Hv(e.descriptor.id,t)?hv(n,av(t.displacedBy.point)):n},ly=Ug(function(e,t){var n=t[e.line];return{value:n,point:lv(e.line,n)}}),cy=function(e,t){return _m({},e,{scroll:_m({},e.scroll,{max:t})})},uy=function(e,t,n){var r=e.frame;Nv(t,e)&&Kg(!1),e.subject.withPlaceholder&&Kg(!1);var i=ly(e.axis,t.displaceBy).point,o=function(e,t,n){var r=e.axis;if("virtual"===e.descriptor.mode)return lv(r.line,t[r.line]);var i=e.subject.page.contentBox[r.size],o=Cv(e.descriptor.id,n).reduce(function(e,t){return e+t.client.marginBox[r.size]},0),s=o+t[r.line]-i;return s<=0?null:lv(r.line,s)}(e,i,n),s={placeholderSize:i,increasedBy:o,oldFrameMaxScroll:e.frame?e.frame.scroll.max:null};if(!r)return _m({},e,{subject:mv({page:e.subject.page,withPlaceholder:s,axis:e.axis,frame:e.frame})});var a=o?iv(r.scroll.max,o):r.scroll.max,l=cy(r,a);return _m({},e,{subject:mv({page:e.subject.page,withPlaceholder:s,axis:e.axis,frame:l}),frame:l})},dy=function(e){var t=e.isMovingForward,n=e.previousPageBorderBoxCenter,r=e.draggable,i=e.isOver,o=e.draggables,s=e.droppables,a=e.viewport,l=e.afterCritical,c=function(e){var t=e.isMovingForward,n=e.pageBorderBoxCenter,r=e.source,i=e.droppables,o=e.viewport,s=r.subject.active;if(!s)return null;var a=r.axis,l=Rv(s[a.start],s[a.end]),c=xv(i).filter(function(e){return e!==r}).filter(function(e){return e.isEnabled}).filter(function(e){return Boolean(e.subject.active)}).filter(function(e){return Lv(o.frame)(oy(e))}).filter(function(e){var n=oy(e);return t?s[a.crossAxisEnd]<n[a.crossAxisEnd]:n[a.crossAxisStart]<s[a.crossAxisStart]}).filter(function(e){var t=oy(e),n=Rv(t[a.start],t[a.end]);return l(t[a.start])||l(t[a.end])||n(s[a.start])||n(s[a.end])}).sort(function(e,n){var r=oy(e)[a.crossAxisStart],i=oy(n)[a.crossAxisStart];return t?r-i:i-r}).filter(function(e,t,n){return oy(e)[a.crossAxisStart]===oy(n[0])[a.crossAxisStart]});if(!c.length)return null;if(1===c.length)return c[0];var u=c.filter(function(e){return Rv(oy(e)[a.start],oy(e)[a.end])(n[a.line])});return 1===u.length?u[0]:u.length>1?u.sort(function(e,t){return oy(e)[a.start]-oy(t)[a.start]})[0]:c.sort(function(e,t){var r=uv(n,fv(oy(e))),i=uv(n,fv(oy(t)));return r!==i?r-i:oy(e)[a.start]-oy(t)[a.start]})[0]}({isMovingForward:t,pageBorderBoxCenter:n,source:i,droppables:s,viewport:a});if(!c)return null;var u=Cv(c.descriptor.id,o),d=function(e){var t=e.pageBorderBoxCenter,n=e.viewport,r=e.destination,i=e.insideDestination,o=e.afterCritical,s=i.filter(function(e){return Uv({target:ay(e,o),destination:r,viewport:n.frame,withDroppableDisplacement:!0})}).sort(function(e,n){var i=cv(t,Jv(r,sy(e,o))),s=cv(t,Jv(r,sy(n,o)));return i<s?-1:s<i?1:e.descriptor.index-n.descriptor.index});return s[0]||null}({pageBorderBoxCenter:n,viewport:a,destination:c,insideDestination:u,afterCritical:l}),h=function(e){var t=e.previousPageBorderBoxCenter,n=e.moveRelativeTo,r=e.insideDestination,i=e.draggable,o=e.draggables,s=e.destination,a=e.viewport,l=e.afterCritical;if(!n){if(r.length)return null;var c={displaced:Dv,displacedBy:Av,at:{type:"REORDER",destination:{droppableId:s.descriptor.id,index:0}}},u=Zv({impact:c,draggable:i,droppable:s,draggables:o,afterCritical:l}),d=Nv(i,s)?s:uy(s,i,o);return ry({draggable:i,destination:d,newPageBorderBoxCenter:u,viewport:a.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0})?c:null}var h=Boolean(t[s.axis.line]<=n.page.borderBox.center[s.axis.line]),f=function(){var e=n.descriptor.index;return n.descriptor.id===i.descriptor.id||h?e:e+1}(),p=ly(s.axis,i.displaceBy);return Wv({draggable:i,insideDestination:r,destination:s,viewport:a,displacedBy:p,last:Dv,index:f})}({previousPageBorderBoxCenter:n,destination:c,draggable:r,draggables:o,moveRelativeTo:d,insideDestination:u,viewport:a,afterCritical:l});if(!h)return null;var f=Zv({impact:h,draggable:r,droppable:c,draggables:o,afterCritical:l});return{clientSelection:ny({pageBorderBoxCenter:f,draggable:r,viewport:a}),impact:h,scrollJumpRequest:null}},hy=function(e){var t=e.at;return t?"REORDER"===t.type?t.destination.droppableId:t.combine.droppableId:null},fy=function(e){var t=e.state,n=e.type,r=function(e,t){var n=hy(e);return n?t[n]:null}(t.impact,t.dimensions.droppables),i=Boolean(r),o=t.dimensions.droppables[t.critical.droppable.id],s=r||o,a=s.axis.direction,l="vertical"===a&&("MOVE_UP"===n||"MOVE_DOWN"===n)||"horizontal"===a&&("MOVE_LEFT"===n||"MOVE_RIGHT"===n);if(l&&!i)return null;var c="MOVE_DOWN"===n||"MOVE_RIGHT"===n,u=t.dimensions.draggables[t.critical.draggable.id],d=t.current.page.borderBoxCenter,h=t.dimensions,f=h.draggables,p=h.droppables;return l?iy({isMovingForward:c,previousPageBorderBoxCenter:d,draggable:u,destination:s,draggables:f,viewport:t.viewport,previousClientSelection:t.current.client.selection,previousImpact:t.impact,afterCritical:t.afterCritical}):dy({isMovingForward:c,previousPageBorderBoxCenter:d,draggable:u,isOver:s,draggables:f,droppables:p,viewport:t.viewport,afterCritical:t.afterCritical})};function py(e){return"DRAGGING"===e.phase||"COLLECTING"===e.phase}function my(e){var t=Rv(e.top,e.bottom),n=Rv(e.left,e.right);return function(e){return t(e.y)&&n(e.x)}}function gy(e){var t=e.pageBorderBox,n=e.draggable,r=e.droppables,i=xv(r).filter(function(e){if(!e.isEnabled)return!1;var n,r,i=e.subject.active;if(!i)return!1;if(r=i,!((n=t).left<r.right&&n.right>r.left&&n.top<r.bottom&&n.bottom>r.top))return!1;if(my(i)(t.center))return!0;var o=e.axis,s=i.center[o.crossAxisLine],a=t[o.crossAxisStart],l=t[o.crossAxisEnd],c=Rv(i[o.crossAxisStart],i[o.crossAxisEnd]),u=c(a),d=c(l);return!u&&!d||(u?a<s:l>s)});return i.length?1===i.length?i[0].descriptor.id:function(e){var t=e.pageBorderBox,n=e.draggable,r=e.candidates,i=n.page.borderBox.center,o=r.map(function(e){var n=e.axis,r=lv(e.axis.line,t.center[n.line],e.page.borderBox.center[n.crossAxisLine]);return{id:e.descriptor.id,distance:cv(i,r)}}).sort(function(e,t){return t.distance-e.distance});return o[0]?o[0].id:null}({pageBorderBox:t,draggable:n,candidates:i}):null}var vy=function(e,t){return _g(hv(e,t))};function yy(e){var t=e.displaced,n=e.id;return Boolean(t.visible[n]||t.invisible[n])}var by=function(e){var t=e.pageOffset,n=e.draggable,r=e.draggables,i=e.droppables,o=e.previousImpact,s=e.viewport,a=e.afterCritical,l=vy(n.page.borderBox,t),c=gy({pageBorderBox:l,draggable:n,droppables:i});if(!c)return Pv;var u=i[c],d=Cv(u.descriptor.id,r),h=function(e,t){var n=e.frame;return n?vy(t,n.scroll.diff.value):t}(u,l);return function(e){var t=e.draggable,n=e.pageBorderBoxWithDroppableScroll,r=e.previousImpact,i=e.destination,o=e.insideDestination,s=e.afterCritical;if(!i.isCombineEnabled)return null;var a=i.axis,l=ly(i.axis,t.displaceBy),c=l.value,u=n[a.start],d=n[a.end],h=bv(Tv(t,o),function(e){var t=e.descriptor.id,n=e.page.borderBox,i=n[a.size]/4,o=Hv(t,s),l=yy({displaced:r.displaced,id:t});return o?l?d>n[a.start]+i&&d<n[a.end]-i:u>n[a.start]-c+i&&u<n[a.end]-c-i:l?d>n[a.start]+c+i&&d<n[a.end]+c-i:u>n[a.start]+i&&u<n[a.end]-i});return h?{displacedBy:l,displaced:r.displaced,at:{type:"COMBINE",combine:{draggableId:h.descriptor.id,droppableId:i.descriptor.id}}}:null}({pageBorderBoxWithDroppableScroll:h,draggable:n,previousImpact:o,destination:u,insideDestination:d,afterCritical:a})||function(e){var t=e.pageBorderBoxWithDroppableScroll,n=e.draggable,r=e.destination,i=e.insideDestination,o=e.last,s=e.viewport,a=e.afterCritical,l=r.axis,c=ly(r.axis,n.displaceBy),u=c.value,d=t[l.start],h=t[l.end],f=function(e){var t=e.draggable,n=e.closest,r=e.inHomeList;return n?r&&n.descriptor.index>t.descriptor.index?n.descriptor.index-1:n.descriptor.index:null}({draggable:n,closest:bv(Tv(n,i),function(e){var t=e.descriptor.id,n=e.page.borderBox.center[l.line],r=Hv(t,a),i=yy({displaced:o,id:t});return r?i?h<=n:d<n-u:i?h<=n+u:d<n}),inHomeList:Nv(n,r)});return Wv({draggable:n,insideDestination:i,destination:r,viewport:s,last:o,displacedBy:c,index:f})}({pageBorderBoxWithDroppableScroll:h,draggable:n,destination:u,insideDestination:d,last:o.displaced,viewport:s,afterCritical:a})},wy=function(e,t){var n;return _m({},e,((n={})[t.descriptor.id]=t,n))},ky=function(e){var t=e.previousImpact,n=e.impact,r=e.droppables,i=hy(t),o=hy(n);if(!i)return r;if(i===o)return r;var s=r[i];if(!s.subject.withPlaceholder)return r;var a=function(e){var t=e.subject.withPlaceholder;t||Kg(!1);var n=e.frame;if(!n)return _m({},e,{subject:mv({page:e.subject.page,axis:e.axis,frame:null,withPlaceholder:null})});var r=t.oldFrameMaxScroll;r||Kg(!1);var i=cy(n,r);return _m({},e,{subject:mv({page:e.subject.page,axis:e.axis,frame:i,withPlaceholder:null}),frame:i})}(s);return wy(r,a)},Sy=function(e){var t=e.state,n=e.clientSelection,r=e.dimensions,i=e.viewport,o=e.impact,s=e.scrollJumpRequest,a=i||t.viewport,l=r||t.dimensions,c=n||t.current.client.selection,u=ov(c,t.initial.client.selection),d={offset:u,selection:c,borderBoxCenter:iv(t.initial.client.borderBoxCenter,u)},h={selection:iv(d.selection,a.scroll.current),borderBoxCenter:iv(d.borderBoxCenter,a.scroll.current),offset:iv(d.offset,a.scroll.diff.value)},f={client:d,page:h};if("COLLECTING"===t.phase)return _m({phase:"COLLECTING"},t,{dimensions:l,viewport:a,current:f});var p=l.draggables[t.critical.draggable.id],m=o||by({pageOffset:h.offset,draggable:p,draggables:l.draggables,droppables:l.droppables,previousImpact:t.impact,viewport:a,afterCritical:t.afterCritical}),g=function(e){var t=e.draggable,n=e.draggables,r=e.droppables,i=e.previousImpact,o=e.impact,s=ky({previousImpact:i,impact:o,droppables:r}),a=hy(o);if(!a)return s;var l=r[a];if(Nv(t,l))return s;if(l.subject.withPlaceholder)return s;var c=uy(l,t,n);return wy(s,c)}({draggable:p,impact:m,previousImpact:t.impact,draggables:l.draggables,droppables:l.droppables});return _m({},t,{current:f,dimensions:{draggables:l.draggables,droppables:g},impact:m,viewport:a,scrollJumpRequest:s||null,forceShouldAnimate:!s&&null})};var xy=function(e){var t=e.impact,n=e.viewport,r=e.draggables,i=e.destination,o=e.forceShouldAnimate,s=t.displaced,a=function(e,t){return e.map(function(e){return t[e]})}(s.all,r);return _m({},t,{displaced:Vv({afterDragging:a,destination:i,displacedBy:t.displacedBy,viewport:n.frame,forceShouldAnimate:o,last:s})})},Ey=function(e){var t=e.impact,n=e.draggable,r=e.droppable,i=e.draggables,o=e.viewport,s=e.afterCritical,a=Zv({impact:t,draggable:n,draggables:i,droppable:r,afterCritical:s});return ny({pageBorderBoxCenter:a,draggable:n,viewport:o})},Cy=function(e){var t=e.state,n=e.dimensions,r=e.viewport;"SNAP"!==t.movementMode&&Kg(!1);var i=t.impact,o=r||t.viewport,s=n||t.dimensions,a=s.draggables,l=s.droppables,c=a[t.critical.draggable.id],u=hy(i);u||Kg(!1);var d=l[u],h=xy({impact:i,viewport:o,destination:d,draggables:a}),f=Ey({impact:h,draggable:c,droppable:d,draggables:a,viewport:o,afterCritical:t.afterCritical});return Sy({impact:h,clientSelection:f,state:t,dimensions:s,viewport:o})},Iy=function(e){var t=e.draggable,n=e.home,r=e.draggables,i=e.viewport,o=ly(n.axis,t.displaceBy),s=Cv(n.descriptor.id,r),a=s.indexOf(t);-1===a&&Kg(!1);var l,c=s.slice(a+1),u=c.reduce(function(e,t){return e[t.descriptor.id]=!0,e},{}),d={inVirtualList:"virtual"===n.descriptor.mode,displacedBy:o,effected:u};return{impact:{displaced:Vv({afterDragging:c,destination:n,displacedBy:o,last:null,viewport:i.frame,forceShouldAnimate:!1}),displacedBy:o,at:{type:"REORDER",destination:(l=t.descriptor,{index:l.index,droppableId:l.droppableId})}},afterCritical:d}},_y=function(e){0},Ty=function(e){0},Ny=function(e){var t=e.additions,n=e.updatedDroppables,r=e.viewport,i=r.scroll.diff.value;return t.map(function(e){var t=e.descriptor.droppableId,o=function(e){var t=e.frame;return t||Kg(!1),t}(n[t]),s=o.scroll.diff.value,a=function(e){var t=e.draggable,n=e.offset,r=e.initialWindowScroll,i=Rg(t.client,n),o=Lg(i,r);return _m({},t,{placeholder:_m({},t.placeholder,{client:i}),client:i,page:o})}({draggable:e,offset:iv(i,s),initialWindowScroll:r.scroll.initial});return a})},Ay=function(e){return"SNAP"===e.movementMode},Dy=function(e,t,n){var r=function(e,t){return{draggables:e.draggables,droppables:wy(e.droppables,t)}}(e.dimensions,t);return!Ay(e)||n?Sy({state:e,dimensions:r}):Cy({state:e,dimensions:r})};function Py(e){return e.isDragging&&"SNAP"===e.movementMode?_m({phase:"DRAGGING"},e,{scrollJumpRequest:null}):e}var Ry={phase:"IDLE",completed:null,shouldFlush:!1},Ly=function(e,t){if(void 0===e&&(e=Ry),"FLUSH"===t.type)return _m({},Ry,{shouldFlush:!0});if("INITIAL_PUBLISH"===t.type){"IDLE"!==e.phase&&Kg(!1);var n=t.payload,r=n.critical,i=n.clientSelection,o=n.viewport,s=n.dimensions,a=n.movementMode,l=s.draggables[r.draggable.id],c=s.droppables[r.droppable.id],u={selection:i,borderBoxCenter:l.client.borderBox.center,offset:rv},d={client:u,page:{selection:iv(u.selection,o.scroll.initial),borderBoxCenter:iv(u.selection,o.scroll.initial),offset:iv(u.selection,o.scroll.diff.value)}},h=xv(s.droppables).every(function(e){return!e.isFixedOnPage}),f=Iy({draggable:l,home:c,draggables:s.draggables,viewport:o}),p=f.impact;return{phase:"DRAGGING",isDragging:!0,critical:r,movementMode:a,dimensions:s,initial:d,current:d,isWindowScrollAllowed:h,impact:p,afterCritical:f.afterCritical,onLiftImpact:p,viewport:o,scrollJumpRequest:null,forceShouldAnimate:null}}if("COLLECTION_STARTING"===t.type)return"COLLECTING"===e.phase||"DROP_PENDING"===e.phase?e:("DRAGGING"!==e.phase&&Kg(!1),_m({phase:"COLLECTING"},e,{phase:"COLLECTING"}));if("PUBLISH_WHILE_DRAGGING"===t.type)return"COLLECTING"!==e.phase&&"DROP_PENDING"!==e.phase&&Kg(!1),function(e){var t=e.state,n=e.published;_y();var r=n.modified.map(function(e){var n=t.dimensions.droppables[e.droppableId];return gv(n,e.scroll)}),i=_m({},t.dimensions.droppables,{},kv(r)),o=Sv(Ny({additions:n.additions,updatedDroppables:i,viewport:t.viewport})),s=_m({},t.dimensions.draggables,{},o);n.removals.forEach(function(e){delete s[e]});var a={droppables:i,draggables:s},l=hy(t.impact),c=l?a.droppables[l]:null,u=a.draggables[t.critical.draggable.id],d=a.droppables[t.critical.droppable.id],h=Iy({draggable:u,home:d,draggables:s,viewport:t.viewport}),f=h.impact,p=h.afterCritical,m=c&&c.isCombineEnabled?t.impact:f,g=by({pageOffset:t.current.page.offset,draggable:a.draggables[t.critical.draggable.id],draggables:a.draggables,droppables:a.droppables,previousImpact:m,viewport:t.viewport,afterCritical:p});Ty();var v=_m({phase:"DRAGGING"},t,{phase:"DRAGGING",impact:g,onLiftImpact:f,dimensions:a,afterCritical:p,forceShouldAnimate:!1});return"COLLECTING"===t.phase?v:_m({phase:"DROP_PENDING"},v,{phase:"DROP_PENDING",reason:t.reason,isWaiting:!1})}({state:e,published:t.payload});if("MOVE"===t.type){if("DROP_PENDING"===e.phase)return e;py(e)||Kg(!1);var m=t.payload.client;return sv(m,e.current.client.selection)?e:Sy({state:e,clientSelection:m,impact:Ay(e)?e.impact:null})}if("UPDATE_DROPPABLE_SCROLL"===t.type){if("DROP_PENDING"===e.phase)return Py(e);if("COLLECTING"===e.phase)return Py(e);py(e)||Kg(!1);var g=t.payload,v=g.id,y=g.newScroll,b=e.dimensions.droppables[v];if(!b)return e;var w=gv(b,y);return Dy(e,w,!1)}if("UPDATE_DROPPABLE_IS_ENABLED"===t.type){if("DROP_PENDING"===e.phase)return e;py(e)||Kg(!1);var k=t.payload,S=k.id,x=k.isEnabled,E=e.dimensions.droppables[S];E||Kg(!1),E.isEnabled===x&&Kg(!1);var C=_m({},E,{isEnabled:x});return Dy(e,C,!0)}if("UPDATE_DROPPABLE_IS_COMBINE_ENABLED"===t.type){if("DROP_PENDING"===e.phase)return e;py(e)||Kg(!1);var I=t.payload,_=I.id,T=I.isCombineEnabled,N=e.dimensions.droppables[_];N||Kg(!1),N.isCombineEnabled===T&&Kg(!1);var A=_m({},N,{isCombineEnabled:T});return Dy(e,A,!0)}if("MOVE_BY_WINDOW_SCROLL"===t.type){if("DROP_PENDING"===e.phase||"DROP_ANIMATING"===e.phase)return e;py(e)||Kg(!1),e.isWindowScrollAllowed||Kg(!1);var D=t.payload.newScroll;if(sv(e.viewport.scroll.current,D))return Py(e);var P=ey(e.viewport,D);return Ay(e)?Cy({state:e,viewport:P}):Sy({state:e,viewport:P})}if("UPDATE_VIEWPORT_MAX_SCROLL"===t.type){if(!py(e))return e;var R=t.payload.maxScroll;if(sv(R,e.viewport.scroll.max))return e;var L=_m({},e.viewport,{scroll:_m({},e.viewport.scroll,{max:R})});return _m({phase:"DRAGGING"},e,{viewport:L})}if("MOVE_UP"===t.type||"MOVE_DOWN"===t.type||"MOVE_LEFT"===t.type||"MOVE_RIGHT"===t.type){if("COLLECTING"===e.phase||"DROP_PENDING"===e.phase)return e;"DRAGGING"!==e.phase&&Kg(!1);var O=fy({state:e,type:t.type});return O?Sy({state:e,impact:O.impact,clientSelection:O.clientSelection,scrollJumpRequest:O.scrollJumpRequest}):e}if("DROP_PENDING"===t.type){var M=t.payload.reason;return"COLLECTING"!==e.phase&&Kg(!1),_m({phase:"DROP_PENDING"},e,{phase:"DROP_PENDING",isWaiting:!0,reason:M})}if("DROP_ANIMATE"===t.type){var j=t.payload,F=j.completed,B=j.dropDuration,U=j.newHomeClientOffset;return"DRAGGING"!==e.phase&&"DROP_PENDING"!==e.phase&&Kg(!1),{phase:"DROP_ANIMATING",completed:F,dropDuration:B,newHomeClientOffset:U,dimensions:e.dimensions}}return"DROP_COMPLETE"===t.type?{phase:"IDLE",completed:t.payload.completed,shouldFlush:!1}:e},Oy=function(e){return{type:"PUBLISH_WHILE_DRAGGING",payload:e}},My=function(){return{type:"COLLECTION_STARTING",payload:null}},jy=function(e){return{type:"UPDATE_DROPPABLE_SCROLL",payload:e}},Fy=function(e){return{type:"UPDATE_DROPPABLE_IS_ENABLED",payload:e}},By=function(e){return{type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:e}},Uy=function(e){return{type:"MOVE",payload:e}},Vy=function(){return{type:"MOVE_UP",payload:null}},zy=function(){return{type:"MOVE_DOWN",payload:null}},Wy=function(){return{type:"MOVE_RIGHT",payload:null}},Hy=function(){return{type:"MOVE_LEFT",payload:null}},qy=function(e){return{type:"DROP_COMPLETE",payload:e}},Gy=function(e){return{type:"DROP",payload:e}},Ky=function(){return{type:"DROP_ANIMATION_FINISHED",payload:null}};var Qy="cubic-bezier(.2,1,.1,1)",Yy={drop:0,combining:.7},$y={drop:.75},Xy=.2+"s "+"cubic-bezier(0.2, 0, 0, 1)",Jy={fluid:"opacity "+Xy,snap:"transform "+Xy+", opacity "+Xy,drop:function(e){var t=e+"s "+Qy;return"transform "+t+", opacity "+t},outOfTheWay:"transform "+Xy,placeholder:"height "+Xy+", width "+Xy+", margin "+Xy},Zy=function(e){return sv(e,rv)?null:"translate("+e.x+"px, "+e.y+"px)"},eb=Zy,tb=function(e,t){var n=Zy(e);return n?t?n+" scale("+$y.drop+")":n:null},nb=.33,rb=.55,ib=rb-nb,ob=function(e){var t=e.getState,n=e.dispatch;return function(e){return function(r){if("DROP"===r.type){var i=t(),o=r.payload.reason;if("COLLECTING"!==i.phase){if("IDLE"!==i.phase){"DROP_PENDING"===i.phase&&i.isWaiting&&Kg(!1),"DRAGGING"!==i.phase&&"DROP_PENDING"!==i.phase&&Kg(!1);var s=i.critical,a=i.dimensions,l=a.draggables[i.critical.draggable.id],c=function(e){var t=e.draggables,n=e.reason,r=e.lastImpact,i=e.home,o=e.viewport,s=e.onLiftImpact;return r.at&&"DROP"===n?"REORDER"===r.at.type?{impact:r,didDropInsideDroppable:!0}:{impact:_m({},r,{displaced:Dv}),didDropInsideDroppable:!0}:{impact:xy({draggables:t,impact:s,destination:i,viewport:o,forceShouldAnimate:!0}),didDropInsideDroppable:!1}}({reason:o,lastImpact:i.impact,afterCritical:i.afterCritical,onLiftImpact:i.onLiftImpact,home:i.dimensions.droppables[i.critical.droppable.id],viewport:i.viewport,draggables:i.dimensions.draggables}),u=c.impact,d=c.didDropInsideDroppable,h=d?Iv(u):null,f=d?_v(u):null,p={index:s.draggable.index,droppableId:s.droppable.id},m={draggableId:l.descriptor.id,type:l.descriptor.type,source:p,reason:o,mode:i.movementMode,destination:h,combine:f},g=function(e){var t=e.impact,n=e.draggable,r=e.dimensions,i=e.viewport,o=e.afterCritical,s=r.draggables,a=r.droppables,l=hy(t),c=l?a[l]:null,u=a[n.descriptor.droppableId],d=Ey({impact:t,draggable:n,draggables:s,afterCritical:o,droppable:c||u,viewport:i});return ov(d,n.client.borderBox.center)}({impact:u,draggable:l,dimensions:a,viewport:i.viewport,afterCritical:i.afterCritical}),v={critical:i.critical,afterCritical:i.afterCritical,result:m,impact:u};if(!sv(i.current.client.offset,g)||Boolean(m.combine)){var y=function(e){var t=e.current,n=e.destination,r=e.reason,i=cv(t,n);if(i<=0)return nb;if(i>=1500)return rb;var o=nb+ib*(i/1500);return Number(("CANCEL"===r?.6*o:o).toFixed(2))}({current:i.current.client.offset,destination:g,reason:o});n(function(e){return{type:"DROP_ANIMATE",payload:e}}({newHomeClientOffset:g,dropDuration:y,completed:v}))}else n(qy({completed:v}))}}else n(function(e){return{type:"DROP_PENDING",payload:e}}({reason:o}))}else e(r)}}},sb=function(){return{x:window.pageXOffset,y:window.pageYOffset}};function ab(e){var t=e.onWindowScroll;var n=Vg(function(){t(sb())}),r=function(e){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(t){t.target!==window&&t.target!==window.document||e()}}}(n),i=Wg;function o(){return i!==Wg}return{start:function(){o()&&Kg(!1),i=Hg(window,[r])},stop:function(){o()||Kg(!1),n.cancel(),i(),i=Wg},isActive:o}}var lb=function(e){var t=ab({onWindowScroll:function(t){e.dispatch({type:"MOVE_BY_WINDOW_SCROLL",payload:{newScroll:t}})}});return function(e){return function(n){t.isActive()||"INITIAL_PUBLISH"!==n.type||t.start(),t.isActive()&&function(e){return"DROP_COMPLETE"===e.type||"DROP_ANIMATE"===e.type||"FLUSH"===e.type}(n)&&t.stop(),e(n)}}},cb=function(){var e=[];return{add:function(t){var n=setTimeout(function(){return function(t){var n=yv(e,function(e){return e.timerId===t});-1===n&&Kg(!1),e.splice(n,1)[0].callback()}(n)}),r={timerId:n,callback:t};e.push(r)},flush:function(){if(e.length){var t=[].concat(e);e.length=0,t.forEach(function(e){clearTimeout(e.timerId),e.callback()})}}}},ub=function(e,t){_y(),t(),Ty()},db=function(e,t){return{draggableId:e.draggable.id,type:e.droppable.type,source:{droppableId:e.droppable.id,index:e.draggable.index},mode:t}},hb=function(e,t,n,r){if(e){var i=function(e){var t=!1,n=!1,r=setTimeout(function(){n=!0}),i=function(i){t||n||(t=!0,e(i),clearTimeout(r))};return i.wasCalled=function(){return t},i}(n);e(t,{announce:i}),i.wasCalled()||n(r(t))}else n(r(t))},fb=function(e,t){var n=function(e,t){var n=cb(),r=null,i=function(n){r||Kg(!1),r=null,ub(0,function(){return hb(e().onDragEnd,n,t,nv)})};return{beforeCapture:function(t,n){r&&Kg(!1),ub(0,function(){var r=e().onBeforeCapture;r&&r({draggableId:t,mode:n})})},beforeStart:function(t,n){r&&Kg(!1),ub(0,function(){var r=e().onBeforeDragStart;r&&r(db(t,n))})},start:function(i,o){r&&Kg(!1);var s=db(i,o);r={mode:o,lastCritical:i,lastLocation:s.source,lastCombine:null},n.add(function(){ub(0,function(){return hb(e().onDragStart,s,t,ev)})})},update:function(i,o){var s=Iv(o),a=_v(o);r||Kg(!1);var l=!function(e,t){if(e===t)return!0;var n=e.draggable.id===t.draggable.id&&e.draggable.droppableId===t.draggable.droppableId&&e.draggable.type===t.draggable.type&&e.draggable.index===t.draggable.index,r=e.droppable.id===t.droppable.id&&e.droppable.type===t.droppable.type;return n&&r}(i,r.lastCritical);l&&(r.lastCritical=i);var c,u,d=(u=s,!(null==(c=r.lastLocation)&&null==u||null!=c&&null!=u&&c.droppableId===u.droppableId&&c.index===u.index));d&&(r.lastLocation=s);var h=!function(e,t){return null==e&&null==t||null!=e&&null!=t&&e.draggableId===t.draggableId&&e.droppableId===t.droppableId}(r.lastCombine,a);if(h&&(r.lastCombine=a),l||d||h){var f=_m({},db(i,r.mode),{combine:a,destination:s});n.add(function(){ub(0,function(){return hb(e().onDragUpdate,f,t,tv)})})}},flush:function(){r||Kg(!1),n.flush()},drop:i,abort:function(){if(r){var e=_m({},db(r.lastCritical,r.mode),{combine:null,destination:null,reason:"CANCEL"});i(e)}}}}(e,t);return function(e){return function(t){return function(r){if("BEFORE_INITIAL_CAPTURE"!==r.type){if("INITIAL_PUBLISH"===r.type){var i=r.payload.critical;return n.beforeStart(i,r.payload.movementMode),t(r),void n.start(i,r.payload.movementMode)}if("DROP_COMPLETE"===r.type){var o=r.payload.completed.result;return n.flush(),t(r),void n.drop(o)}if(t(r),"FLUSH"!==r.type){var s=e.getState();"DRAGGING"===s.phase&&n.update(s.critical,s.impact)}else n.abort()}else n.beforeCapture(r.payload.draggableId,r.payload.movementMode)}}}},pb=function(e){return function(t){return function(n){if("DROP_ANIMATION_FINISHED"===n.type){var r=e.getState();"DROP_ANIMATING"!==r.phase&&Kg(!1),e.dispatch(qy({completed:r.completed}))}else t(n)}}},mb=function(e){var t=null,n=null;return function(r){return function(i){if("FLUSH"!==i.type&&"DROP_COMPLETE"!==i.type&&"DROP_ANIMATION_FINISHED"!==i.type||(n&&(cancelAnimationFrame(n),n=null),t&&(t(),t=null)),r(i),"DROP_ANIMATE"===i.type){var o={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){"DROP_ANIMATING"===e.getState().phase&&e.dispatch({type:"DROP_ANIMATION_FINISHED",payload:null})}};n=requestAnimationFrame(function(){n=null,t=Hg(window,[o])})}}}},gb=function(e){return function(t){return function(n){if(t(n),"PUBLISH_WHILE_DRAGGING"===n.type){var r=e.getState();"DROP_PENDING"===r.phase&&(r.isWaiting||e.dispatch(Gy({reason:r.reason})))}}}},vb=Mm,yb=function(e){var t,n=e.dimensionMarshal,r=e.focusMarshal,i=e.styleMarshal,o=e.getResponders,s=e.announce,a=e.autoScroller;return Rm(Ly,vb(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){var n=e.apply(void 0,arguments),r=function(){throw new Error(Tm(15))},i={getState:n.getState,dispatch:function(){return r.apply(void 0,arguments)}},o=t.map(function(e){return e(i)});return r=Mm.apply(void 0,o)(n.dispatch),d(d({},n),{},{dispatch:r})}}}((t=i,function(){return function(e){return function(n){"INITIAL_PUBLISH"===n.type&&t.dragging(),"DROP_ANIMATE"===n.type&&t.dropping(n.payload.completed.result.reason),"FLUSH"!==n.type&&"DROP_COMPLETE"!==n.type||t.resting(),e(n)}}}),function(e){return function(){return function(t){return function(n){"DROP_COMPLETE"!==n.type&&"FLUSH"!==n.type&&"DROP_ANIMATE"!==n.type||e.stopPublishing(),t(n)}}}}(n),function(e){return function(t){var n=t.getState,r=t.dispatch;return function(t){return function(i){if("LIFT"===i.type){var o=i.payload,s=o.id,a=o.clientSelection,l=o.movementMode,c=n();"DROP_ANIMATING"===c.phase&&r(qy({completed:c.completed})),"IDLE"!==n().phase&&Kg(!1),r({type:"FLUSH",payload:null}),r({type:"BEFORE_INITIAL_CAPTURE",payload:{draggableId:s,movementMode:l}});var u={draggableId:s,scrollOptions:{shouldPublishImmediately:"SNAP"===l}},d=e.startPublishing(u),h=d.critical,f=d.dimensions,p=d.viewport;r({type:"INITIAL_PUBLISH",payload:{critical:h,dimensions:f,clientSelection:a,movementMode:l,viewport:p}})}else t(i)}}}}(n),ob,pb,mb,gb,function(e){return function(t){return function(n){return function(r){if(function(e){return"DROP_COMPLETE"===e.type||"DROP_ANIMATE"===e.type||"FLUSH"===e.type}(r))return e.stop(),void n(r);if("INITIAL_PUBLISH"===r.type){n(r);var i=t.getState();return"DRAGGING"!==i.phase&&Kg(!1),void e.start(i)}n(r),e.scroll(t.getState())}}}}(a),lb,function(e){var t=!1;return function(){return function(n){return function(r){if("INITIAL_PUBLISH"===r.type)return t=!0,e.tryRecordFocus(r.payload.critical.draggable.id),n(r),void e.tryRestoreFocusRecorded();if(n(r),t){if("FLUSH"===r.type)return t=!1,void e.tryRestoreFocusRecorded();if("DROP_COMPLETE"===r.type){t=!1;var i=r.payload.completed.result;i.combine&&e.tryShiftRecord(i.draggableId,i.combine.draggableId),e.tryRestoreFocusRecorded()}}}}}}(r),fb(o,s))))};var bb=function(e){var t=e.scrollHeight,n=e.scrollWidth,r=e.height,i=e.width,o=ov({x:n,y:t},{x:i,y:r});return{x:Math.max(0,o.x),y:Math.max(0,o.y)}},wb=function(){var e=document.documentElement;return e||Kg(!1),e},kb=function(){var e=wb();return bb({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,width:e.clientWidth,height:e.clientHeight})},Sb=function(e){var t=e.critical,n=e.scrollOptions,r=e.registry;_y();var i=function(){var e=sb(),t=kb(),n=e.y,r=e.x,i=wb(),o=i.clientWidth,s=i.clientHeight;return{frame:_g({top:n,left:r,right:r+o,bottom:n+s}),scroll:{initial:e,current:e,max:t,diff:{value:rv,displacement:rv}}}}(),o=i.scroll.current,s=t.droppable,a=r.droppable.getAllByType(s.type).map(function(e){return e.callbacks.getDimensionAndWatchScroll(o,n)}),l=r.draggable.getAllByType(t.draggable.type).map(function(e){return e.getDimension(o)}),c={draggables:Sv(l),droppables:kv(a)};return Ty(),{dimensions:c,critical:t,viewport:i}};function xb(e,t,n){return n.descriptor.id!==t.id&&(n.descriptor.type===t.type&&"virtual"===e.droppable.getById(n.descriptor.droppableId).descriptor.mode)}var Eb=function(e,t){var n=null,r=function(e){var t=e.registry,n=e.callbacks,r={additions:{},removals:{},modified:{}},i=null,o=function(){i||(n.collectionStarting(),i=requestAnimationFrame(function(){i=null,_y();var e=r,o=e.additions,s=e.removals,a=e.modified,l=Object.keys(o).map(function(e){return t.draggable.getById(e).getDimension(rv)}).sort(function(e,t){return e.descriptor.index-t.descriptor.index}),c=Object.keys(a).map(function(e){return{droppableId:e,scroll:t.droppable.getById(e).callbacks.getScrollWhileDragging()}}),u={additions:l,removals:Object.keys(s),modified:c};r={additions:{},removals:{},modified:{}},Ty(),n.publish(u)}))};return{add:function(e){var t=e.descriptor.id;r.additions[t]=e,r.modified[e.descriptor.droppableId]=!0,r.removals[t]&&delete r.removals[t],o()},remove:function(e){var t=e.descriptor;r.removals[t.id]=!0,r.modified[t.droppableId]=!0,r.additions[t.id]&&delete r.additions[t.id],o()},stop:function(){i&&(cancelAnimationFrame(i),i=null,r={additions:{},removals:{},modified:{}})}}}({callbacks:{publish:t.publishWhileDragging,collectionStarting:t.collectionStarting},registry:e}),i=function(t){n||Kg(!1);var i=n.critical.draggable;"ADDITION"===t.type&&xb(e,i,t.value)&&r.add(t.value),"REMOVAL"===t.type&&xb(e,i,t.value)&&r.remove(t.value)},o={updateDroppableIsEnabled:function(r,i){e.droppable.exists(r)||Kg(!1),n&&t.updateDroppableIsEnabled({id:r,isEnabled:i})},updateDroppableIsCombineEnabled:function(r,i){n&&(e.droppable.exists(r)||Kg(!1),t.updateDroppableIsCombineEnabled({id:r,isCombineEnabled:i}))},scrollDroppable:function(t,r){n&&e.droppable.getById(t).callbacks.scroll(r)},updateDroppableScroll:function(r,i){n&&(e.droppable.exists(r)||Kg(!1),t.updateDroppableScroll({id:r,newScroll:i}))},startPublishing:function(t){n&&Kg(!1);var r=e.draggable.getById(t.draggableId),o=e.droppable.getById(r.descriptor.droppableId),s={draggable:r.descriptor,droppable:o.descriptor},a=e.subscribe(i);return n={critical:s,unsubscribe:a},Sb({critical:s,registry:e,scrollOptions:t.scrollOptions})},stopPublishing:function(){if(n){r.stop();var t=n.critical.droppable;e.droppable.getAllByType(t.type).forEach(function(e){return e.callbacks.dragStopped()}),n.unsubscribe(),n=null}}};return o},Cb=function(e,t){return"IDLE"===e.phase||"DROP_ANIMATING"===e.phase&&(e.completed.result.draggableId!==t&&"DROP"===e.completed.result.reason)},Ib=function(e){window.scrollBy(e.x,e.y)},_b=Ug(function(e){return xv(e).filter(function(e){return!!e.isEnabled&&!!e.frame})}),Tb=function(e){var t=e.center,n=e.destination,r=e.droppables;if(n){var i=r[n];return i.frame?i:null}var o=function(e,t){var n=bv(_b(t),function(t){return t.frame||Kg(!1),my(t.frame.pageMarginBox)(e)});return n}(t,r);return o},Nb=.25,Ab=.05,Db=28,Pb=function(e){return Math.pow(e,2)},Rb={stopDampeningAt:1200,accelerateAt:360},Lb=function(e){var t=e.startOfRange,n=e.endOfRange,r=e.current,i=n-t;return 0===i?0:(r-t)/i},Ob=Rb.accelerateAt,Mb=Rb.stopDampeningAt,jb=function(e){var t=e.distanceToEdge,n=e.thresholds,r=e.dragStartTime,i=e.shouldUseTimeDampening,o=function(e,t){if(e>t.startScrollingFrom)return 0;if(e<=t.maxScrollValueAt)return Db;if(e===t.startScrollingFrom)return 1;var n=Lb({startOfRange:t.maxScrollValueAt,endOfRange:t.startScrollingFrom,current:e}),r=Db*Pb(1-n);return Math.ceil(r)}(t,n);return 0===o?0:i?Math.max(function(e,t){var n=t,r=Mb,i=Date.now()-n;if(i>=Mb)return e;if(i<Ob)return 1;var o=Lb({startOfRange:Ob,endOfRange:r,current:i}),s=e*Pb(o);return Math.ceil(s)}(o,r),1):o},Fb=function(e){var t=e.container,n=e.distanceToEdges,r=e.dragStartTime,i=e.axis,o=e.shouldUseTimeDampening,s=function(e,t){return{startScrollingFrom:e[t.size]*Nb,maxScrollValueAt:e[t.size]*Ab}}(t,i);return n[i.end]<n[i.start]?jb({distanceToEdge:n[i.end],thresholds:s,dragStartTime:r,shouldUseTimeDampening:o}):-1*jb({distanceToEdge:n[i.start],thresholds:s,dragStartTime:r,shouldUseTimeDampening:o})},Bb=dv(function(e){return 0===e?0:e}),Ub=function(e){var t=e.dragStartTime,n=e.container,r=e.subject,i=e.center,o=e.shouldUseTimeDampening,s={top:i.y-n.top,right:n.right-i.x,bottom:n.bottom-i.y,left:i.x-n.left},a=Fb({container:n,distanceToEdges:s,dragStartTime:t,axis:Mv,shouldUseTimeDampening:o}),l=Fb({container:n,distanceToEdges:s,dragStartTime:t,axis:jv,shouldUseTimeDampening:o}),c=Bb({x:l,y:a});if(sv(c,rv))return null;var u=function(e){var t=e.container,n=e.subject,r=e.proposedScroll,i=n.height>t.height,o=n.width>t.width;return o||i?o&&i?null:{x:o?0:r.x,y:i?0:r.y}:r}({container:n,subject:r,proposedScroll:c});return u?sv(u,rv)?null:u:null},Vb=dv(function(e){return 0===e?0:e>0?1:-1}),zb=function(){var e=function(e,t){return e<0?e:e>t?e-t:0};return function(t){var n=t.current,r=t.max,i=t.change,o=iv(n,i),s={x:e(o.x,r.x),y:e(o.y,r.y)};return sv(s,rv)?null:s}}(),Wb=function(e){var t=e.max,n=e.current,r=e.change,i={x:Math.max(n.x,t.x),y:Math.max(n.y,t.y)},o=Vb(r),s=zb({max:i,current:n,change:o});return!s||(0!==o.x&&0===s.x||0!==o.y&&0===s.y)},Hb=function(e,t){return Wb({current:e.scroll.current,max:e.scroll.max,change:t})},qb=function(e,t){var n=e.frame;return!!n&&Wb({current:n.scroll.current,max:n.scroll.max,change:t})},Gb=function(e){var t=e.state,n=e.dragStartTime,r=e.shouldUseTimeDampening,i=e.scrollWindow,o=e.scrollDroppable,s=t.current.page.borderBoxCenter,a=t.dimensions.draggables[t.critical.draggable.id].page.marginBox;if(t.isWindowScrollAllowed){var l=function(e){var t=e.viewport,n=e.subject,r=e.center,i=e.dragStartTime,o=e.shouldUseTimeDampening,s=Ub({dragStartTime:i,container:t.frame,subject:n,center:r,shouldUseTimeDampening:o});return s&&Hb(t,s)?s:null}({dragStartTime:n,viewport:t.viewport,subject:a,center:s,shouldUseTimeDampening:r});if(l)return void i(l)}var c=Tb({center:s,destination:hy(t.impact),droppables:t.dimensions.droppables});if(c){var u=function(e){var t=e.droppable,n=e.subject,r=e.center,i=e.dragStartTime,o=e.shouldUseTimeDampening,s=t.frame;if(!s)return null;var a=Ub({dragStartTime:i,container:s.pageMarginBox,subject:n,center:r,shouldUseTimeDampening:o});return a&&qb(t,a)?a:null}({dragStartTime:n,droppable:c,subject:a,center:s,shouldUseTimeDampening:r});u&&o(c.descriptor.id,u)}},Kb=function(e){var t=e.move,n=e.scrollDroppable,r=e.scrollWindow,i=function(e,t){if(!qb(e,t))return t;var r=function(e,t){var n=e.frame;return n&&qb(e,t)?zb({current:n.scroll.current,max:n.scroll.max,change:t}):null}(e,t);if(!r)return n(e.descriptor.id,t),null;var i=ov(t,r);return n(e.descriptor.id,i),ov(t,i)},o=function(e,t,n){if(!e)return n;if(!Hb(t,n))return n;var i=function(e,t){if(!Hb(e,t))return null;var n=e.scroll.max,r=e.scroll.current;return zb({current:r,max:n,change:t})}(t,n);if(!i)return r(n),null;var o=ov(n,i);return r(o),ov(n,o)};return function(e){var n=e.scrollJumpRequest;if(n){var r=hy(e.impact);r||Kg(!1);var s=i(e.dimensions.droppables[r],n);if(s){var a=e.viewport,l=o(e.isWindowScrollAllowed,a,s);l&&function(e,n){var r=iv(e.current.client.selection,n);t({client:r})}(e,l)}}}},Qb=function(e){var t=e.scrollDroppable,n=e.scrollWindow,r=e.move,i=function(e){var t=e.scrollWindow,n=e.scrollDroppable,r=Vg(t),i=Vg(n),o=null,s=function(e){o||Kg(!1);var t=o,n=t.shouldUseTimeDampening,s=t.dragStartTime;Gb({state:e,scrollWindow:r,scrollDroppable:i,dragStartTime:s,shouldUseTimeDampening:n})};return{start:function(e){_y(),o&&Kg(!1);var t=Date.now(),n=!1,r=function(){n=!0};Gb({state:e,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:r,scrollDroppable:r}),o={dragStartTime:t,shouldUseTimeDampening:n},Ty(),n&&s(e)},stop:function(){o&&(r.cancel(),i.cancel(),o=null)},scroll:s}}({scrollWindow:n,scrollDroppable:t}),o=Kb({move:r,scrollWindow:n,scrollDroppable:t});return{scroll:function(e){"DRAGGING"===e.phase&&("FLUID"!==e.movementMode?e.scrollJumpRequest&&o(e):i.scroll(e))},start:i.start,stop:i.stop}},Yb="data-rbd",$b=function(){var e=Yb+"-drag-handle";return{base:e,draggableId:e+"-draggable-id",contextId:e+"-context-id"}}(),Xb=function(){var e=Yb+"-draggable";return{base:e,contextId:e+"-context-id",id:e+"-id"}}(),Jb=function(){var e=Yb+"-droppable";return{base:e,contextId:e+"-context-id",id:e+"-id"}}(),Zb={contextId:Yb+"-scroll-container-context-id"},ew=function(e,t){return e.map(function(e){var n=e.styles[t];return n?e.selector+" { "+n+" }":""}).join(" ")},tw="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement?r.useLayoutEffect:r.useEffect,nw=function(){var e=document.querySelector("head");return e||Kg(!1),e},rw=function(e){var t=document.createElement("style");return e&&t.setAttribute("nonce",e),t.type="text/css",t};function iw(e,t){var n=Eg(function(){return function(e){var t,n=(t=e,function(e){return"["+e+'="'+t+'"]'}),r=function(){var e="\n      cursor: -webkit-grab;\n      cursor: grab;\n    ";return{selector:n($b.contextId),styles:{always:"\n          -webkit-touch-callout: none;\n          -webkit-tap-highlight-color: rgba(0,0,0,0);\n          touch-action: manipulation;\n        ",resting:e,dragging:"pointer-events: none;",dropAnimating:e}}}(),i=[function(){var e="\n      transition: "+Jy.outOfTheWay+";\n    ";return{selector:n(Xb.contextId),styles:{dragging:e,dropAnimating:e,userCancel:e}}}(),r,{selector:n(Jb.contextId),styles:{always:"overflow-anchor: none;"}},{selector:"body",styles:{dragging:"\n        cursor: grabbing;\n        cursor: -webkit-grabbing;\n        user-select: none;\n        -webkit-user-select: none;\n        -moz-user-select: none;\n        -ms-user-select: none;\n        overflow-anchor: none;\n      "}}];return{always:ew(i,"always"),resting:ew(i,"resting"),dragging:ew(i,"dragging"),dropAnimating:ew(i,"dropAnimating"),userCancel:ew(i,"userCancel")}}(e)},[e]),i=(0,r.useRef)(null),o=(0,r.useRef)(null),s=Cg(Ug(function(e){var t=o.current;t||Kg(!1),t.textContent=e}),[]),a=Cg(function(e){var t=i.current;t||Kg(!1),t.textContent=e},[]);tw(function(){(i.current||o.current)&&Kg(!1);var r=rw(t),l=rw(t);return i.current=r,o.current=l,r.setAttribute(Yb+"-always",e),l.setAttribute(Yb+"-dynamic",e),nw().appendChild(r),nw().appendChild(l),a(n.always),s(n.resting),function(){var e=function(e){var t=e.current;t||Kg(!1),nw().removeChild(t),e.current=null};e(i),e(o)}},[t,a,s,n.always,n.resting,e]);var l=Cg(function(){return s(n.dragging)},[s,n.dragging]),c=Cg(function(e){s("DROP"!==e?n.userCancel:n.dropAnimating)},[s,n.dropAnimating,n.userCancel]),u=Cg(function(){o.current&&s(n.resting)},[s,n.resting]);return Eg(function(){return{dragging:l,dropping:c,resting:u}},[l,c,u])}var ow=function(e){return e&&e.ownerDocument?e.ownerDocument.defaultView:window};function sw(e){return e instanceof ow(e).HTMLElement}function aw(e,t){var n="["+$b.contextId+'="'+e+'"]',r=wv(document.querySelectorAll(n));if(!r.length)return null;var i=bv(r,function(e){return e.getAttribute($b.draggableId)===t});return i&&sw(i)?i:null}function lw(){var e={draggables:{},droppables:{}},t=[];function n(e){t.length&&t.forEach(function(t){return t(e)})}function r(t){return e.draggables[t]||null}function i(t){return e.droppables[t]||null}return{draggable:{register:function(t){e.draggables[t.descriptor.id]=t,n({type:"ADDITION",value:t})},update:function(t,n){var r=e.draggables[n.descriptor.id];r&&r.uniqueId===t.uniqueId&&(delete e.draggables[n.descriptor.id],e.draggables[t.descriptor.id]=t)},unregister:function(t){var i=t.descriptor.id,o=r(i);o&&t.uniqueId===o.uniqueId&&(delete e.draggables[i],n({type:"REMOVAL",value:t}))},getById:function(e){var t=r(e);return t||Kg(!1),t},findById:r,exists:function(e){return Boolean(r(e))},getAllByType:function(t){return vv(e.draggables).filter(function(e){return e.descriptor.type===t})}},droppable:{register:function(t){e.droppables[t.descriptor.id]=t},unregister:function(t){var n=i(t.descriptor.id);n&&t.uniqueId===n.uniqueId&&delete e.droppables[t.descriptor.id]},getById:function(e){var t=i(e);return t||Kg(!1),t},findById:i,exists:function(e){return Boolean(i(e))},getAllByType:function(t){return vv(e.droppables).filter(function(e){return e.descriptor.type===t})}},subscribe:function(e){return t.push(e),function(){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}},clean:function(){e.draggables={},e.droppables={},t.length=0}}}var cw=r.createContext(null),uw=function(){var e=document.body;return e||Kg(!1),e},dw={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"};var hw=0,fw={separator:"::"};function pw(e,t){return void 0===t&&(t=fw),Eg(function(){return""+e+t.separator+hw++},[t.separator,e])}var mw=r.createContext(null);function gw(e){0}function vw(e,t){gw()}function yw(){vw()}function bw(e){var t=(0,r.useRef)(e);return(0,r.useEffect)(function(){t.current=e}),t}var ww,kw=((ww={})[13]=!0,ww[9]=!0,ww),Sw=function(e){kw[e.keyCode]&&e.preventDefault()},xw=function(){var e="visibilitychange";return"undefined"===typeof document?e:bv([e,"ms"+e,"webkit"+e,"moz"+e,"o"+e],function(e){return"on"+e in document})||e}();var Ew,Cw={type:"IDLE"};function Iw(e){var t=e.cancel,n=e.completed,r=e.getPhase,i=e.setPhase;return[{eventName:"mousemove",fn:function(e){var t=e.button,n=e.clientX,o=e.clientY;if(0===t){var s={x:n,y:o},a=r();if("DRAGGING"===a.type)return e.preventDefault(),void a.actions.move(s);"PENDING"!==a.type&&Kg(!1);var l=a.point;if(c=l,u=s,Math.abs(u.x-c.x)>=5||Math.abs(u.y-c.y)>=5){var c,u;e.preventDefault();var d=a.actions.fluidLift(s);i({type:"DRAGGING",actions:d})}}}},{eventName:"mouseup",fn:function(e){var i=r();"DRAGGING"===i.type?(e.preventDefault(),i.actions.drop({shouldBlockNextClick:!0}),n()):t()}},{eventName:"mousedown",fn:function(e){"DRAGGING"===r().type&&e.preventDefault(),t()}},{eventName:"keydown",fn:function(e){if("PENDING"!==r().type)return 27===e.keyCode?(e.preventDefault(),void t()):void Sw(e);t()}},{eventName:"resize",fn:t},{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(){"PENDING"===r().type&&t()}},{eventName:"webkitmouseforcedown",fn:function(e){var n=r();"IDLE"===n.type&&Kg(!1),n.actions.shouldRespectForcePress()?t():e.preventDefault()}},{eventName:xw,fn:t}]}function _w(){}var Tw=((Ew={})[34]=!0,Ew[33]=!0,Ew[36]=!0,Ew[35]=!0,Ew);function Nw(e,t){function n(){t(),e.cancel()}return[{eventName:"keydown",fn:function(r){return 27===r.keyCode?(r.preventDefault(),void n()):32===r.keyCode?(r.preventDefault(),t(),void e.drop()):40===r.keyCode?(r.preventDefault(),void e.moveDown()):38===r.keyCode?(r.preventDefault(),void e.moveUp()):39===r.keyCode?(r.preventDefault(),void e.moveRight()):37===r.keyCode?(r.preventDefault(),void e.moveLeft()):void(Tw[r.keyCode]?r.preventDefault():Sw(r))}},{eventName:"mousedown",fn:n},{eventName:"mouseup",fn:n},{eventName:"click",fn:n},{eventName:"touchstart",fn:n},{eventName:"resize",fn:n},{eventName:"wheel",fn:n,options:{passive:!0}},{eventName:xw,fn:n}]}var Aw={type:"IDLE"};var Dw={input:!0,button:!0,textarea:!0,select:!0,option:!0,optgroup:!0,video:!0,audio:!0};function Pw(e,t){if(null==t)return!1;if(Boolean(Dw[t.tagName.toLowerCase()]))return!0;var n=t.getAttribute("contenteditable");return"true"===n||""===n||t!==e&&Pw(e,t.parentElement)}function Rw(e,t){var n=t.target;return!!sw(n)&&Pw(e,n)}var Lw=function(e){return _g(e.getBoundingClientRect()).center};var Ow=function(){var e="matches";return"undefined"===typeof document?e:bv([e,"msMatchesSelector","webkitMatchesSelector"],function(e){return e in Element.prototype})||e}();function Mw(e,t){return null==e?null:e[Ow](t)?e:Mw(e.parentElement,t)}function jw(e,t){return e.closest?e.closest(t):Mw(e,t)}function Fw(e,t){var n,r=t.target;if(!((n=r)instanceof ow(n).Element))return null;var i=function(e){return"["+$b.contextId+'="'+e+'"]'}(e),o=jw(r,i);return o&&sw(o)?o:null}function Bw(e){e.preventDefault()}function Uw(e){var t=e.expected,n=e.phase,r=e.isLockActive;e.shouldWarn;return!!r()&&t===n}function Vw(e){var t=e.lockAPI,n=e.store,r=e.registry,i=e.draggableId;if(t.isClaimed())return!1;var o=r.draggable.findById(i);return!!o&&(!!o.options.isEnabled&&!!Cb(n.getState(),i))}function zw(e){var t=e.lockAPI,n=e.contextId,r=e.store,i=e.registry,o=e.draggableId,s=e.forceSensorStop,a=e.sourceEvent;if(!Vw({lockAPI:t,store:r,registry:i,draggableId:o}))return null;var l=i.draggable.getById(o),c=function(e,t){var n="["+Xb.contextId+'="'+e+'"]',r=bv(wv(document.querySelectorAll(n)),function(e){return e.getAttribute(Xb.id)===t});return r&&sw(r)?r:null}(n,l.descriptor.id);if(!c)return null;if(a&&!l.options.canDragInteractiveElements&&Rw(c,a))return null;var u=t.claim(s||Wg),d="PRE_DRAG";function h(){return l.options.shouldRespectForcePress}function f(){return t.isActive(u)}var p=function(e,t){Uw({expected:e,phase:d,isLockActive:f,shouldWarn:!0})&&r.dispatch(t())}.bind(null,"DRAGGING");function m(e){function n(){t.release(),d="COMPLETED"}function i(t,i){if(void 0===i&&(i={shouldBlockNextClick:!1}),e.cleanup(),i.shouldBlockNextClick){var o=Hg(window,[{eventName:"click",fn:Bw,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(o)}n(),r.dispatch(Gy({reason:t}))}return"PRE_DRAG"!==d&&(n(),"PRE_DRAG"!==d&&Kg(!1)),r.dispatch(function(e){return{type:"LIFT",payload:e}}(e.liftActionArgs)),d="DRAGGING",_m({isActive:function(){return Uw({expected:"DRAGGING",phase:d,isLockActive:f,shouldWarn:!1})},shouldRespectForcePress:h,drop:function(e){return i("DROP",e)},cancel:function(e){return i("CANCEL",e)}},e.actions)}var g={isActive:function(){return Uw({expected:"PRE_DRAG",phase:d,isLockActive:f,shouldWarn:!1})},shouldRespectForcePress:h,fluidLift:function(e){var t=Vg(function(e){p(function(){return Uy({client:e})})});return _m({},m({liftActionArgs:{id:o,clientSelection:e,movementMode:"FLUID"},cleanup:function(){return t.cancel()},actions:{move:t}}),{move:t})},snapLift:function(){var e={moveUp:function(){return p(Vy)},moveRight:function(){return p(Wy)},moveDown:function(){return p(zy)},moveLeft:function(){return p(Hy)}};return m({liftActionArgs:{id:o,clientSelection:Lw(c),movementMode:"SNAP"},cleanup:Wg,actions:e})},abort:function(){Uw({expected:"PRE_DRAG",phase:d,isLockActive:f,shouldWarn:!0})&&t.release()}};return g}var Ww=[function(e){var t=(0,r.useRef)(Cw),n=(0,r.useRef)(Wg),i=Eg(function(){return{eventName:"mousedown",fn:function(t){if(!t.defaultPrevented&&0===t.button&&!(t.ctrlKey||t.metaKey||t.shiftKey||t.altKey)){var r=e.findClosestDraggableId(t);if(r){var i=e.tryGetLock(r,a,{sourceEvent:t});if(i){t.preventDefault();var o={x:t.clientX,y:t.clientY};n.current(),u(i,o)}}}}}},[e]),o=Eg(function(){return{eventName:"webkitmouseforcewillbegin",fn:function(t){if(!t.defaultPrevented){var n=e.findClosestDraggableId(t);if(n){var r=e.findOptionsForDraggable(n);r&&(r.shouldRespectForcePress||e.canGetLock(n)&&t.preventDefault())}}}}},[e]),s=Cg(function(){n.current=Hg(window,[o,i],{passive:!1,capture:!0})},[o,i]),a=Cg(function(){"IDLE"!==t.current.type&&(t.current=Cw,n.current(),s())},[s]),l=Cg(function(){var e=t.current;a(),"DRAGGING"===e.type&&e.actions.cancel({shouldBlockNextClick:!0}),"PENDING"===e.type&&e.actions.abort()},[a]),c=Cg(function(){var e=Iw({cancel:l,completed:a,getPhase:function(){return t.current},setPhase:function(e){t.current=e}});n.current=Hg(window,e,{capture:!0,passive:!1})},[l,a]),u=Cg(function(e,n){"IDLE"!==t.current.type&&Kg(!1),t.current={type:"PENDING",point:n,actions:e},c()},[c]);tw(function(){return s(),function(){n.current()}},[s])},function(e){var t=(0,r.useRef)(_w),n=Eg(function(){return{eventName:"keydown",fn:function(n){if(!n.defaultPrevented&&32===n.keyCode){var r=e.findClosestDraggableId(n);if(r){var o=e.tryGetLock(r,l,{sourceEvent:n});if(o){n.preventDefault();var s=!0,a=o.snapLift();t.current(),t.current=Hg(window,Nw(a,l),{capture:!0,passive:!1})}}}function l(){s||Kg(!1),s=!1,t.current(),i()}}}},[e]),i=Cg(function(){t.current=Hg(window,[n],{passive:!1,capture:!0})},[n]);tw(function(){return i(),function(){t.current()}},[i])},function(e){var t=(0,r.useRef)(Aw),n=(0,r.useRef)(Wg),i=Cg(function(){return t.current},[]),o=Cg(function(e){t.current=e},[]),s=Eg(function(){return{eventName:"touchstart",fn:function(t){if(!t.defaultPrevented){var r=e.findClosestDraggableId(t);if(r){var i=e.tryGetLock(r,l,{sourceEvent:t});if(i){var o=t.touches[0],s={x:o.clientX,y:o.clientY};n.current(),h(i,s)}}}}}},[e]),a=Cg(function(){n.current=Hg(window,[s],{capture:!0,passive:!1})},[s]),l=Cg(function(){var e=t.current;"IDLE"!==e.type&&("PENDING"===e.type&&clearTimeout(e.longPressTimerId),o(Aw),n.current(),a())},[a,o]),c=Cg(function(){var e=t.current;l(),"DRAGGING"===e.type&&e.actions.cancel({shouldBlockNextClick:!0}),"PENDING"===e.type&&e.actions.abort()},[l]),u=Cg(function(){var e={capture:!0,passive:!1},t={cancel:c,completed:l,getPhase:i},r=Hg(window,function(e){var t=e.cancel,n=e.completed,r=e.getPhase;return[{eventName:"touchmove",options:{capture:!1},fn:function(e){var n=r();if("DRAGGING"===n.type){n.hasMoved=!0;var i=e.touches[0],o={x:i.clientX,y:i.clientY};e.preventDefault(),n.actions.move(o)}else t()}},{eventName:"touchend",fn:function(e){var i=r();"DRAGGING"===i.type?(e.preventDefault(),i.actions.drop({shouldBlockNextClick:!0}),n()):t()}},{eventName:"touchcancel",fn:function(e){"DRAGGING"===r().type?(e.preventDefault(),t()):t()}},{eventName:"touchforcechange",fn:function(e){var n=r();"IDLE"===n.type&&Kg(!1);var i=e.touches[0];if(i&&i.force>=.15){var o=n.actions.shouldRespectForcePress();if("PENDING"!==n.type)return o?n.hasMoved?void e.preventDefault():void t():void e.preventDefault();o&&t()}}},{eventName:xw,fn:t}]}(t),e),o=Hg(window,function(e){var t=e.cancel,n=e.getPhase;return[{eventName:"orientationchange",fn:t},{eventName:"resize",fn:t},{eventName:"contextmenu",fn:function(e){e.preventDefault()}},{eventName:"keydown",fn:function(e){"DRAGGING"===n().type?(27===e.keyCode&&e.preventDefault(),t()):t()}},{eventName:xw,fn:t}]}(t),e);n.current=function(){r(),o()}},[c,i,l]),d=Cg(function(){var e=i();"PENDING"!==e.type&&Kg(!1);var t=e.actions.fluidLift(e.point);o({type:"DRAGGING",actions:t,hasMoved:!1})},[i,o]),h=Cg(function(e,t){"IDLE"!==i().type&&Kg(!1);var n=setTimeout(d,120);o({type:"PENDING",point:t,actions:e,longPressTimerId:n}),u()},[u,i,o,d]);tw(function(){return a(),function(){n.current();var e=i();"PENDING"===e.type&&(clearTimeout(e.longPressTimerId),o(Aw))}},[i,a,o]),tw(function(){return Hg(window,[{eventName:"touchmove",fn:function(){},options:{capture:!1,passive:!1}}])},[])}];function Hw(e){var t=e.contextId,n=e.store,i=e.registry,o=e.customSensors,s=e.enableDefaultSensors,a=[].concat(s?Ww:[],o||[]),l=(0,r.useState)(function(){return function(){var e=null;function t(){e||Kg(!1),e=null}return{isClaimed:function(){return Boolean(e)},isActive:function(t){return t===e},claim:function(t){e&&Kg(!1);var n={abandon:t};return e=n,n},release:t,tryAbandon:function(){e&&(e.abandon(),t())}}}()})[0],c=Cg(function(e,t){e.isDragging&&!t.isDragging&&l.tryAbandon()},[l]);tw(function(){var e=n.getState();return n.subscribe(function(){var t=n.getState();c(e,t),e=t})},[l,n,c]),tw(function(){return l.tryAbandon},[l.tryAbandon]);var u=Cg(function(e){return Vw({lockAPI:l,registry:i,store:n,draggableId:e})},[l,i,n]),d=Cg(function(e,r,o){return zw({lockAPI:l,registry:i,contextId:t,store:n,draggableId:e,forceSensorStop:r,sourceEvent:o&&o.sourceEvent?o.sourceEvent:null})},[t,l,i,n]),h=Cg(function(e){return function(e,t){var n=Fw(e,t);return n?n.getAttribute($b.draggableId):null}(t,e)},[t]),f=Cg(function(e){var t=i.draggable.findById(e);return t?t.options:null},[i.draggable]),p=Cg(function(){l.isClaimed()&&(l.tryAbandon(),"IDLE"!==n.getState().phase&&n.dispatch({type:"FLUSH",payload:null}))},[l,n]),m=Cg(l.isClaimed,[l]),g=Eg(function(){return{canGetLock:u,tryGetLock:d,findClosestDraggableId:h,findOptionsForDraggable:f,tryReleaseLock:p,isLockClaimed:m}},[u,d,h,f,p,m]);gw();for(var v=0;v<a.length;v++)a[v](g)}function qw(e){return e.current||Kg(!1),e.current}function Gw(e){var t=e.contextId,n=e.setCallbacks,i=e.sensors,o=e.nonce,s=e.dragHandleUsageInstructions,a=(0,r.useRef)(null);yw();var l=bw(e),c=Cg(function(){return function(e){return{onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragEnd:e.onDragEnd,onDragUpdate:e.onDragUpdate}}(l.current)},[l]),u=function(e){var t=Eg(function(){return function(e){return"rbd-announcement-"+e}(e)},[e]),n=(0,r.useRef)(null);return(0,r.useEffect)(function(){var e=document.createElement("div");return n.current=e,e.id=t,e.setAttribute("aria-live","assertive"),e.setAttribute("aria-atomic","true"),_m(e.style,dw),uw().appendChild(e),function(){setTimeout(function(){var t=uw();t.contains(e)&&t.removeChild(e),e===n.current&&(n.current=null)})}},[t]),Cg(function(e){var t=n.current;t&&(t.textContent=e)},[])}(t),d=function(e){var t=e.contextId,n=e.text,i=pw("hidden-text",{separator:"-"}),o=Eg(function(){return"rbd-hidden-text-"+(e={contextId:t,uniqueId:i}).contextId+"-"+e.uniqueId;var e},[i,t]);return(0,r.useEffect)(function(){var e=document.createElement("div");return e.id=o,e.textContent=n,e.style.display="none",uw().appendChild(e),function(){var t=uw();t.contains(e)&&t.removeChild(e)}},[o,n]),o}({contextId:t,text:s}),h=iw(t,o),f=Cg(function(e){qw(a).dispatch(e)},[]),p=Eg(function(){return Om({publishWhileDragging:Oy,updateDroppableScroll:jy,updateDroppableIsEnabled:Fy,updateDroppableIsCombineEnabled:By,collectionStarting:My},f)},[f]),m=function(){var e=Eg(lw,[]);return(0,r.useEffect)(function(){return function(){requestAnimationFrame(e.clean)}},[e]),e}(),g=Eg(function(){return Eb(m,p)},[m,p]),v=Eg(function(){return Qb(_m({scrollWindow:Ib,scrollDroppable:g.scrollDroppable},Om({move:Uy},f)))},[g.scrollDroppable,f]),y=function(e){var t=(0,r.useRef)({}),n=(0,r.useRef)(null),i=(0,r.useRef)(null),o=(0,r.useRef)(!1),s=Cg(function(e,n){var r={id:e,focus:n};return t.current[e]=r,function(){var n=t.current;n[e]!==r&&delete n[e]}},[]),a=Cg(function(t){var n=aw(e,t);n&&n!==document.activeElement&&n.focus()},[e]),l=Cg(function(e,t){n.current===e&&(n.current=t)},[]),c=Cg(function(){i.current||o.current&&(i.current=requestAnimationFrame(function(){i.current=null;var e=n.current;e&&a(e)}))},[a]),u=Cg(function(e){n.current=null;var t=document.activeElement;t&&t.getAttribute($b.draggableId)===e&&(n.current=e)},[]);return tw(function(){return o.current=!0,function(){o.current=!1;var e=i.current;e&&cancelAnimationFrame(e)}},[]),Eg(function(){return{register:s,tryRecordFocus:u,tryRestoreFocusRecorded:c,tryShiftRecord:l}},[s,u,c,l])}(t),b=Eg(function(){return yb({announce:u,autoScroller:v,dimensionMarshal:g,focusMarshal:y,getResponders:c,styleMarshal:h})},[u,v,g,y,c,h]);a.current=b;var w=Cg(function(){var e=qw(a);"IDLE"!==e.getState().phase&&e.dispatch({type:"FLUSH",payload:null})},[]),k=Cg(function(){var e=qw(a).getState();return e.isDragging||"DROP_ANIMATING"===e.phase},[]);n(Eg(function(){return{isDragging:k,tryAbort:w}},[k,w]));var S=Cg(function(e){return Cb(qw(a).getState(),e)},[]),x=Cg(function(){return py(qw(a).getState())},[]),E=Eg(function(){return{marshal:g,focus:y,contextId:t,canLift:S,isMovementAllowed:x,dragHandleUsageInstructionsId:d,registry:m}},[t,g,d,y,S,x,m]);return Hw({contextId:t,store:b,registry:m,customSensors:i,enableDefaultSensors:!1!==e.enableDefaultSensors}),(0,r.useEffect)(function(){return w},[w]),r.createElement(mw.Provider,{value:E},r.createElement(Wm,{context:cw,store:b},e.children))}var Kw=0;function Qw(e){var t=Eg(function(){return""+Kw++},[]),n=e.dragHandleUsageInstructions||Zg;return r.createElement(Qg,null,function(i){return r.createElement(Gw,{nonce:e.nonce,contextId:t,setCallbacks:i,dragHandleUsageInstructions:n,enableDefaultSensors:e.enableDefaultSensors,sensors:e.sensors,onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragUpdate:e.onDragUpdate,onDragEnd:e.onDragEnd},e.children)})}var Yw=function(e){return function(t){return e===t}},$w=Yw("scroll"),Xw=Yw("auto"),Jw=(Yw("visible"),function(e,t){return t(e.overflowX)||t(e.overflowY)}),Zw=function e(t){return null==t||t===document.body||t===document.documentElement?null:function(e){var t=window.getComputedStyle(e),n={overflowX:t.overflowX,overflowY:t.overflowY};return Jw(n,$w)||Jw(n,Xw)}(t)?t:e(t.parentElement)},ek=function(e){return{x:e.scrollLeft,y:e.scrollTop}},tk=function e(t){return!!t&&("fixed"===window.getComputedStyle(t).position||e(t.parentElement))},nk=function(e){return{closestScrollable:Zw(e),isFixedOnPage:tk(e)}},rk=function(e){var t=e.ref,n=e.descriptor,r=e.env,i=e.windowScroll,o=e.direction,s=e.isDropDisabled,a=e.isCombineEnabled,l=e.shouldClipSubject,c=r.closestScrollable,u=function(e,t){var n=Mg(e);if(!t)return n;if(e!==t)return n;var r=n.paddingBox.top-t.scrollTop,i=n.paddingBox.left-t.scrollLeft,o=r+t.scrollHeight,s=i+t.scrollWidth,a=Tg({top:r,right:s,bottom:o,left:i},n.border);return Dg({borderBox:a,margin:n.margin,border:n.border,padding:n.padding})}(t,c),d=Lg(u,i),h=function(){if(!c)return null;var e=Mg(c),t={scrollHeight:c.scrollHeight,scrollWidth:c.scrollWidth};return{client:e,page:Lg(e,i),scroll:ek(c),scrollSize:t,shouldClipSubject:l}}(),f=function(e){var t=e.descriptor,n=e.isEnabled,r=e.isCombineEnabled,i=e.isFixedOnPage,o=e.direction,s=e.client,a=e.page,l=e.closest,c=function(){if(!l)return null;var e=l.scrollSize,t=l.client,n=bb({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,height:t.paddingBox.height,width:t.paddingBox.width});return{pageMarginBox:l.page.marginBox,frameClient:t,scrollSize:e,shouldClipSubject:l.shouldClipSubject,scroll:{initial:l.scroll,current:l.scroll,max:n,diff:{value:rv,displacement:rv}}}}(),u="vertical"===o?Mv:jv;return{descriptor:t,isCombineEnabled:r,isFixedOnPage:i,axis:u,isEnabled:n,client:s,page:a,frame:c,subject:mv({page:a,withPlaceholder:null,axis:u,frame:c})}}({descriptor:n,isEnabled:!s,isCombineEnabled:a,isFixedOnPage:r.isFixedOnPage,direction:o,client:u,page:d,closest:h});return f},ik={passive:!1},ok={passive:!0},sk=function(e){return e.shouldPublishImmediately?ik:ok};function ak(e){var t=(0,r.useContext)(e);return t||Kg(!1),t}var lk=function(e){return e&&e.env.closestScrollable||null};function ck(){}var uk={width:0,height:0,margin:{top:0,right:0,bottom:0,left:0}},dk=function(e){var t=e.isAnimatingOpenOnMount,n=e.placeholder,r=e.animate,i=function(e){var t=e.isAnimatingOpenOnMount,n=e.placeholder,r=e.animate;return t||"close"===r?uk:{height:n.client.borderBox.height,width:n.client.borderBox.width,margin:n.client.margin}}({isAnimatingOpenOnMount:t,placeholder:n,animate:r});return{display:n.display,boxSizing:"border-box",width:i.width,height:i.height,marginTop:i.margin.top,marginRight:i.margin.right,marginBottom:i.margin.bottom,marginLeft:i.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:"none"!==r?Jy.placeholder:null}};var hk=r.memo(function(e){var t=(0,r.useRef)(null),n=Cg(function(){t.current&&(clearTimeout(t.current),t.current=null)},[]),i=e.animate,o=e.onTransitionEnd,s=e.onClose,a=e.contextId,l=(0,r.useState)("open"===e.animate),c=l[0],u=l[1];(0,r.useEffect)(function(){return c?"open"!==i?(n(),u(!1),ck):t.current?ck:(t.current=setTimeout(function(){t.current=null,u(!1)}),n):ck},[i,c,n]);var d=Cg(function(e){"height"===e.propertyName&&(o(),"close"===i&&s())},[i,s,o]),h=dk({isAnimatingOpenOnMount:c,animate:e.animate,placeholder:e.placeholder});return r.createElement(e.placeholder.tagName,{style:h,"data-rbd-placeholder-context-id":a,onTransitionEnd:d,ref:e.innerRef})}),fk=r.createContext(null);var pk=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).state={isVisible:Boolean(t.props.on),data:t.props.on,animate:t.props.shouldAnimate&&t.props.on?"open":"none"},t.onClose=function(){"close"===t.state.animate&&t.setState({isVisible:!1})},t}return Im(t,e),t.getDerivedStateFromProps=function(e,t){return e.shouldAnimate?e.on?{isVisible:!0,data:e.on,animate:"open"}:t.isVisible?{isVisible:!0,data:t.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:Boolean(e.on),data:e.on,animate:"none"}},t.prototype.render=function(){if(!this.state.isVisible)return null;var e={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(e)},t}(r.PureComponent),mk=5e3,gk=4500,vk=function(e,t){return t?Jy.drop(t.duration):e?Jy.snap:Jy.fluid},yk=function(e,t){return e?t?Yy.drop:Yy.combining:null};function bk(e){return"DRAGGING"===e.type?function(e){var t=e.dimension.client,n=e.offset,r=e.combineWith,i=e.dropping,o=Boolean(r),s=function(e){return null!=e.forceShouldAnimate?e.forceShouldAnimate:"SNAP"===e.mode}(e),a=Boolean(i),l=a?tb(n,o):eb(n);return{position:"fixed",top:t.marginBox.top,left:t.marginBox.left,boxSizing:"border-box",width:t.borderBox.width,height:t.borderBox.height,transition:vk(s,i),transform:l,opacity:yk(o,a),zIndex:a?gk:mk,pointerEvents:"none"}}(e):{transform:eb((t=e).offset),transition:t.shouldAnimateDisplacement?null:"none"};var t}function wk(e){var t=pw("draggable"),n=e.descriptor,i=e.registry,o=e.getDraggableRef,s=e.canDragInteractiveElements,a=e.shouldRespectForcePress,l=e.isEnabled,c=Eg(function(){return{canDragInteractiveElements:s,shouldRespectForcePress:a,isEnabled:l}},[s,l,a]),u=Cg(function(e){var t=o();return t||Kg(!1),function(e,t,n){void 0===n&&(n=rv);var r=window.getComputedStyle(t),i=t.getBoundingClientRect(),o=Og(i,r),s=Lg(o,n);return{descriptor:e,placeholder:{client:o,tagName:t.tagName.toLowerCase(),display:r.display},displaceBy:{x:o.marginBox.width,y:o.marginBox.height},client:o,page:s}}(n,t,e)},[n,o]),d=Eg(function(){return{uniqueId:t,descriptor:n,options:c,getDimension:u}},[n,u,c,t]),h=(0,r.useRef)(d),f=(0,r.useRef)(!0);tw(function(){return i.draggable.register(h.current),function(){return i.draggable.unregister(h.current)}},[i.draggable]),tw(function(){if(f.current)f.current=!1;else{var e=h.current;h.current=d,i.draggable.update(d,e)}},[d,i.draggable])}function kk(e,t,n){vw()}function Sk(e){e.preventDefault()}var xk=function(e,t){return e===t},Ek=function(e){var t=e.combine,n=e.destination;return n?n.droppableId:t?t.droppableId:null};function Ck(e){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:e,combineWith:null}}var Ik={mapped:{type:"SECONDARY",offset:rv,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:Ck(null)}};var _k=wg(function(){var e=function(){var e=Ug(function(e,t){return{x:e,y:t}}),t=Ug(function(e,t,n,r,i){return{isDragging:!0,isClone:t,isDropAnimating:Boolean(i),dropAnimation:i,mode:e,draggingOver:n,combineWith:r,combineTargetFor:null}}),n=Ug(function(e,n,r,i,o,s,a){return{mapped:{type:"DRAGGING",dropping:null,draggingOver:o,combineWith:s,mode:n,offset:e,dimension:r,forceShouldAnimate:a,snapshot:t(n,i,o,s,null)}}});return function(r,i){if(r.isDragging){if(r.critical.draggable.id!==i.draggableId)return null;var o=r.current.client.offset,s=r.dimensions.draggables[i.draggableId],a=hy(r.impact),l=(u=r.impact).at&&"COMBINE"===u.at.type?u.at.combine.draggableId:null,c=r.forceShouldAnimate;return n(e(o.x,o.y),r.movementMode,s,i.isClone,a,l,c)}var u;if("DROP_ANIMATING"===r.phase){var d=r.completed;if(d.result.draggableId!==i.draggableId)return null;var h=i.isClone,f=r.dimensions.draggables[i.draggableId],p=d.result,m=p.mode,g=Ek(p),v=function(e){return e.combine?e.combine.draggableId:null}(p),y={duration:r.dropDuration,curve:Qy,moveTo:r.newHomeClientOffset,opacity:v?Yy.drop:null,scale:v?$y.drop:null};return{mapped:{type:"DRAGGING",offset:r.newHomeClientOffset,dimension:f,dropping:y,draggingOver:g,combineWith:v,mode:m,forceShouldAnimate:null,snapshot:t(m,h,g,v,y)}}}return null}}(),t=function(){var e=Ug(function(e,t){return{x:e,y:t}}),t=Ug(Ck),n=Ug(function(e,n,r){return void 0===n&&(n=null),{mapped:{type:"SECONDARY",offset:e,combineTargetFor:n,shouldAnimateDisplacement:r,snapshot:t(n)}}}),r=function(e){return e?n(rv,e,!0):null},i=function(t,i,o,s){var a=o.displaced.visible[t],l=Boolean(s.inVirtualList&&s.effected[t]),c=_v(o),u=c&&c.draggableId===t?i:null;if(!a){if(!l)return r(u);if(o.displaced.invisible[t])return null;var d=av(s.displacedBy.point),h=e(d.x,d.y);return n(h,u,!0)}if(l)return r(u);var f=o.displacedBy.point,p=e(f.x,f.y);return n(p,u,a.shouldAnimate)};return function(e,t){if(e.isDragging)return e.critical.draggable.id===t.draggableId?null:i(t.draggableId,e.critical.draggable.id,e.impact,e.afterCritical);if("DROP_ANIMATING"===e.phase){var n=e.completed;return n.result.draggableId===t.draggableId?null:i(t.draggableId,n.result.draggableId,n.impact,n.afterCritical)}return null}}();return function(n,r){return e(n,r)||t(n,r)||Ik}},{dropAnimationFinished:Ky},null,{context:cw,pure:!0,areStatePropsEqual:xk})(function(e){var t=(0,r.useRef)(null),n=Cg(function(e){t.current=e},[]),i=Cg(function(){return t.current},[]),o=ak(mw),s=o.contextId,a=o.dragHandleUsageInstructionsId,l=o.registry,c=ak(fk),u=c.type,d=c.droppableId,h=Eg(function(){return{id:e.draggableId,index:e.index,type:u,droppableId:d}},[e.draggableId,e.index,u,d]),f=e.children,p=e.draggableId,m=e.isEnabled,g=e.shouldRespectForcePress,v=e.canDragInteractiveElements,y=e.isClone,b=e.mapped,w=e.dropAnimationFinished;kk(),gw(),y||wk(Eg(function(){return{descriptor:h,registry:l,getDraggableRef:i,canDragInteractiveElements:v,shouldRespectForcePress:g,isEnabled:m}},[h,l,i,v,g,m]));var k=Eg(function(){return m?{tabIndex:0,role:"button","aria-describedby":a,"data-rbd-drag-handle-draggable-id":p,"data-rbd-drag-handle-context-id":s,draggable:!1,onDragStart:Sk}:null},[s,a,p,m]),S=Cg(function(e){"DRAGGING"===b.type&&b.dropping&&"transform"===e.propertyName&&w()},[w,b]),x=Eg(function(){var e=bk(b),t="DRAGGING"===b.type&&b.dropping?S:null;return{innerRef:n,draggableProps:{"data-rbd-draggable-context-id":s,"data-rbd-draggable-id":p,style:e,onTransitionEnd:t},dragHandleProps:k}},[s,k,p,b,S,n]),E=Eg(function(){return{draggableId:h.id,type:h.type,source:{index:h.index,droppableId:h.droppableId}}},[h.droppableId,h.id,h.index,h.type]);return f(x,b.snapshot,E)});function Tk(e){return ak(fk).isUsingCloneFor!==e.draggableId||e.isClone?r.createElement(_k,e):null}function Nk(e){var t="boolean"!==typeof e.isDragDisabled||!e.isDragDisabled,n=Boolean(e.disableInteractiveElementBlocking),i=Boolean(e.shouldRespectForcePress);return r.createElement(Tk,_m({},e,{isClone:!1,isEnabled:t,canDragInteractiveElements:n,shouldRespectForcePress:i}))}var Ak=function(e,t){return e===t.droppable.type},Dk=function(e,t){return t.draggables[e.draggable.id]};var Pk={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:function(){return document.body||Kg(!1),document.body}},Rk=wg(function(){var e={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},t=_m({},e,{shouldAnimatePlaceholder:!1}),n=Ug(function(e){return{draggableId:e.id,type:e.type,source:{index:e.index,droppableId:e.droppableId}}}),r=Ug(function(r,i,o,s,a,l){var c=a.descriptor.id;if(a.descriptor.droppableId===r){var u=l?{render:l,dragging:n(a.descriptor)}:null,d={isDraggingOver:o,draggingOverWith:o?c:null,draggingFromThisWith:c,isUsingPlaceholder:!0};return{placeholder:a.placeholder,shouldAnimatePlaceholder:!1,snapshot:d,useClone:u}}if(!i)return t;if(!s)return e;var h={isDraggingOver:o,draggingOverWith:c,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:a.placeholder,shouldAnimatePlaceholder:!0,snapshot:h,useClone:null}});return function(n,i){var o=i.droppableId,s=i.type,a=!i.isDropDisabled,l=i.renderClone;if(n.isDragging){var c=n.critical;if(!Ak(s,c))return t;var u=Dk(c,n.dimensions),d=hy(n.impact)===o;return r(o,a,d,d,u,l)}if("DROP_ANIMATING"===n.phase){var h=n.completed;if(!Ak(s,h.critical))return t;var f=Dk(h.critical,n.dimensions);return r(o,a,Ek(h.result)===o,hy(h.impact)===o,f,l)}if("IDLE"===n.phase&&n.completed&&!n.shouldFlush){var p=n.completed;if(!Ak(s,p.critical))return t;var m=hy(p.impact)===o,g=Boolean(p.impact.at&&"COMBINE"===p.impact.at.type),v=p.critical.droppable.id===o;return m?g?e:t:v?e:t}return t}},{updateViewportMaxScroll:function(e){return{type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:e}}},null,{context:cw,pure:!0,areStatePropsEqual:xk})(function(e){var t=(0,r.useContext)(mw);t||Kg(!1);var n=t.contextId,i=t.isMovementAllowed,o=(0,r.useRef)(null),s=(0,r.useRef)(null),a=e.children,l=e.droppableId,c=e.type,u=e.mode,d=e.direction,h=e.ignoreContainerClipping,f=e.isDropDisabled,p=e.isCombineEnabled,m=e.snapshot,g=e.useClone,v=e.updateViewportMaxScroll,y=e.getContainerForClone,b=Cg(function(){return o.current},[]),w=Cg(function(e){o.current=e},[]),k=(Cg(function(){return s.current},[]),Cg(function(e){s.current=e},[]));vw();var S=Cg(function(){i()&&v({maxScroll:kb()})},[i,v]);!function(e){var t=(0,r.useRef)(null),n=ak(mw),i=pw("droppable"),o=n.registry,s=n.marshal,a=bw(e),l=Eg(function(){return{id:e.droppableId,type:e.type,mode:e.mode}},[e.droppableId,e.mode,e.type]),c=(0,r.useRef)(l),u=Eg(function(){return Ug(function(e,n){t.current||Kg(!1);var r={x:e,y:n};s.updateDroppableScroll(l.id,r)})},[l.id,s]),d=Cg(function(){var e=t.current;return e&&e.env.closestScrollable?ek(e.env.closestScrollable):rv},[]),h=Cg(function(){var e=d();u(e.x,e.y)},[d,u]),f=Eg(function(){return Vg(h)},[h]),p=Cg(function(){var e=t.current,n=lk(e);e&&n||Kg(!1),e.scrollOptions.shouldPublishImmediately?h():f()},[f,h]),m=Cg(function(e,r){t.current&&Kg(!1);var i=a.current,o=i.getDroppableRef();o||Kg(!1);var s=nk(o),c={ref:o,descriptor:l,env:s,scrollOptions:r};t.current=c;var u=rk({ref:o,descriptor:l,env:s,windowScroll:e,direction:i.direction,isDropDisabled:i.isDropDisabled,isCombineEnabled:i.isCombineEnabled,shouldClipSubject:!i.ignoreContainerClipping}),d=s.closestScrollable;return d&&(d.setAttribute(Zb.contextId,n.contextId),d.addEventListener("scroll",p,sk(c.scrollOptions))),u},[n.contextId,l,p,a]),g=Cg(function(){var e=t.current,n=lk(e);return e&&n||Kg(!1),ek(n)},[]),v=Cg(function(){var e=t.current;e||Kg(!1);var n=lk(e);t.current=null,n&&(f.cancel(),n.removeAttribute(Zb.contextId),n.removeEventListener("scroll",p,sk(e.scrollOptions)))},[p,f]),y=Cg(function(e){var n=t.current;n||Kg(!1);var r=lk(n);r||Kg(!1),r.scrollTop+=e.y,r.scrollLeft+=e.x},[]),b=Eg(function(){return{getDimensionAndWatchScroll:m,getScrollWhileDragging:g,dragStopped:v,scroll:y}},[v,m,g,y]),w=Eg(function(){return{uniqueId:i,descriptor:l,callbacks:b}},[b,l,i]);tw(function(){return c.current=w.descriptor,o.droppable.register(w),function(){t.current&&v(),o.droppable.unregister(w)}},[b,l,v,w,s,o.droppable]),tw(function(){t.current&&s.updateDroppableIsEnabled(c.current.id,!e.isDropDisabled)},[e.isDropDisabled,s]),tw(function(){t.current&&s.updateDroppableIsCombineEnabled(c.current.id,e.isCombineEnabled)},[e.isCombineEnabled,s])}({droppableId:l,type:c,mode:u,direction:d,isDropDisabled:f,isCombineEnabled:p,ignoreContainerClipping:h,getDroppableRef:b});var x=r.createElement(pk,{on:e.placeholder,shouldAnimate:e.shouldAnimatePlaceholder},function(e){var t=e.onClose,i=e.data,o=e.animate;return r.createElement(hk,{placeholder:i,onClose:t,innerRef:k,animate:o,contextId:n,onTransitionEnd:S})}),E=Eg(function(){return{innerRef:w,placeholder:x,droppableProps:{"data-rbd-droppable-id":l,"data-rbd-droppable-context-id":n}}},[n,l,x,w]),C=g?g.dragging.draggableId:null,I=Eg(function(){return{droppableId:l,type:c,isUsingCloneFor:C}},[l,C,c]);return r.createElement(fk.Provider,{value:I},a(E,m),function(){if(!g)return null;var e=g.dragging,t=g.render,n=r.createElement(Tk,{draggableId:e.draggableId,index:e.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},function(n,r){return t(n,r,e)});return Sg.createPortal(n,y())}())});Rk.defaultProps=Pk;const Lk=e=>{let{onProfileClick:t,onLoginClick:n}=e;const{user:r,loading:i}=wm();if(i)return null;return(0,vm.jsx)("button",{className:"auth-button",onClick:()=>{r?t&&t():n&&n()},children:r?r.photoURL?(0,vm.jsx)("img",{src:r.photoURL,alt:r.displayName,className:"auth-avatar",referrerPolicy:"no-referrer"}):(0,vm.jsx)("span",{className:"auth-avatar-placeholder",children:(r.displayName||"?")[0].toUpperCase()}):(0,vm.jsx)("svg",{className:"auth-icon",viewBox:"0 0 24 24",fill:"currentColor",children:(0,vm.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"})})})},Ok=["Full Body","Chest","Back","Shoulders","Biceps","Triceps","Arms","Core","Legs","Quads","Hamstrings","Glutes","Calves"],Mk=e=>{let{timerWorkoutData:t,timerSelectedWorkout:n,workoutHistory:i,onWorkoutSelect:o,onArrowClick:s,onNavigateToTab:a,onDeleteWorkout:l,onReorder:c,onBellClick:u,onLoginClick:h,onProfileClick:f,prepTime:p=15,globalRestTime:m=15,onDetailSave:g,onStartWorkout:v,defaultWorkoutNames:y=[],onVisibilityToggle:b,requestCloseDetail:w=!1,showCardPhotos:k=!0}=e;const{user:S}=wm(),[x,E]=(0,r.useState)(null),[C,I]=(0,r.useState)(0),[_,T]=(0,r.useState)(!1),N=(0,r.useRef)(!1),[A,D]=(0,r.useState)(null),[P,R]=(0,r.useState)(null),[L,O]=(0,r.useState)(null),[M,j]=(0,r.useState)(null),[F,B]=(0,r.useState)(null),[U,V]=(0,r.useState)(!1),[z,W]=(0,r.useState)([]),H=(0,r.useRef)([]),q=(0,r.useRef)([]),G=(0,r.useRef)(!1),K=(0,r.useRef)(null),[,Q]=(0,r.useState)(0),[Y,$]=(0,r.useState)(""),[X,J]=(0,r.useState)(null),[Z,ee]=(0,r.useState)([]),[te,ne]=(0,r.useState)(!1),[re,ie]=(0,r.useState)(!1),[oe,se]=(0,r.useState)(!1),[ae,le]=(0,r.useState)(!1),[ce,ue]=(0,r.useState)(""),[de,he]=(0,r.useState)(null),[fe,pe]=(0,r.useState)(!1),[me,ge]=(0,r.useState)(null),[ve,ye]=(0,r.useState)(null),[be,we]=(0,r.useState)(!1),[ke,Se]=(0,r.useState)(!1),[xe,Ee]=(0,r.useState)(0),[Ce,Ie]=(0,r.useState)(null),_e=Ce&&U?Math.min(Ce.overhead+z.length*Ce.rowH,Ce.maxPanelH):null,Te=(()=>{if(!Ce||!U||null===_e)return 1/0;const{overhead:e,rowH:t,paginationH:n}=Ce,r=_e-e;return z.length*t<=r?1/0:Math.max(3,Math.floor((r-n)/t))})(),Ne=(0,r.useRef)({active:!1,fromIndex:null,toIndex:null,rowHeight:0}),Ae=(0,r.useRef)([]),De=(0,r.useRef)(0),Pe=(0,r.useRef)(!1),Re=(0,r.useRef)(!1),Le=(0,r.useRef)(null),Oe=(0,r.useRef)({perPage:1/0,totalPages:1,currentPage:0,exerciseCount:0}),Me=(0,r.useRef)(null),je=(0,r.useRef)(null);(0,r.useLayoutEffect)(()=>{Pe.current&&(Pe.current=!1,Ae.current.forEach(e=>{if(!e)return;const t=e.querySelector(".home-detail-exercise");t&&(t.style.transform="",t.style.transition="",t.style.zIndex="",t.style.position="")}))},[z]),(0,r.useLayoutEffect)(()=>{var e;if(!je.current)return;const{newLocalIndex:t,lastY:n}=je.current;je.current=null;const r=Me.current;if(!r||!r.isDragging)return;const i=Oe.current,o=Math.min(i.perPage,i.exerciseCount-i.currentPage*i.perPage);Ae.current.length=o,r.originalMids=Ae.current.map(e=>{if(!e)return 0;const t=e.getBoundingClientRect();return t.top+t.height/2});const s=null===(e=Ae.current[0])||void 0===e?void 0:e.parentElement;if(s){const e=s.getBoundingClientRect();r.containerTop=e.top,r.containerBottom=e.bottom}r.fromLocalIndex=t,r.offset=De.current,r.edgeDirection=null;const a=Ae.current[t];if(r.draggedCard=null===a||void 0===a?void 0:a.querySelector(".home-detail-exercise"),r.draggedCard){const e=r.draggedCard.getBoundingClientRect();r.startY=e.top+e.height/2,r.draggedCard.classList.add("exercise-dragging-card"),r.draggedCard.style.zIndex="10",r.draggedCard.style.position="relative",r.draggedCard.style.transform="translateY(".concat(n-r.startY,"px) scale(1.03)")}Ne.current={active:!0,fromIndex:t,toIndex:t,rowHeight:r.rowH}},[z,xe]);const Fe=(0,r.useRef)(null),Be=(0,r.useRef)({}),Ue=(0,r.useRef)(null),Ve=(0,r.useRef)(0),ze=(0,r.useRef)(0),We=(0,r.useRef)(!1),He=(0,r.useRef)(0),qe=(0,r.useRef)(null),Ge=(0,r.useRef)(null),Ke=e=>{const t=Math.floor(e/60),n=e%60;return"".concat(t,":").concat(n.toString().padStart(2,"0"))},Qe=(e,t)=>e.workoutId?e.workoutId===t.id:!t.id&&e.workoutName===t.name,Ye=(0,r.useMemo)(()=>{const e=[];i&&i.some(e=>t.some(t=>Qe(e,t)))&&e.push("Recent");const n={};return t.forEach(e=>{(e.tags||(e.tag?[e.tag]:[])).forEach(e=>{n[e]=(n[e]||0)+1})}),Object.keys(n).sort((e,t)=>n[t]-n[e]).forEach(t=>e.push(t)),e},[t,i]),$e=(0,r.useMemo)(()=>{if(null===P)return t;if("Recent"===P){const e=[],n=[];return t.forEach(t=>{const r=null===i||void 0===i?void 0:i.filter(e=>Qe(e,t)).sort((e,t)=>{var n,r;const i=null!==(n=e.completedAt)&&void 0!==n&&n.toDate?e.completedAt.toDate():new Date(e.completedAt);return(null!==(r=t.completedAt)&&void 0!==r&&r.toDate?t.completedAt.toDate():new Date(t.completedAt))-i}),o=null===r||void 0===r?void 0:r[0];var s;o?e.push({workout:t,lastDate:null!==(s=o.completedAt)&&void 0!==s&&s.toDate?o.completedAt.toDate():new Date(o.completedAt)}):n.push(t)}),e.sort((e,t)=>t.lastDate-e.lastDate),[...e.map(e=>e.workout),...n]}return t.filter(e=>(e.tags||(e.tag?[e.tag]:[])).includes(P))},[P,t,i]),Xe=S&&Ye.length>0&&t.length>5;(0,r.useEffect)(()=>{null===P||Ye.includes(P)||R(null)},[P,Ye]);const Je=(0,r.useCallback)(e=>{var t;const n=Be.current[e.name],r=n?n.getBoundingClientRect():null;j(r),O(e),B("entering"),Ee(0),V(!1),W([...e.exercises]),$(e.name),J(null!==(t=e.restTime)&&void 0!==t?t:null),ee(e.tags||(e.tag?[e.tag]:[]))},[]);(0,r.useLayoutEffect)(()=>{if("entering"!==F||!Ue.current)return;if(!M)return void B("open");const e=Ue.current,t=e.getBoundingClientRect(),n=M.left+M.width/2-(t.left+t.width/2),r=M.top+M.height/2-(t.top+t.height/2),i=M.width/t.width,o=M.height/t.height;e.style.transition="none",e.style.transform="translate(".concat(n,"px, ").concat(r,"px) scale(").concat(i,", ").concat(o,")"),e.style.borderRadius="14px",e.style.background="rgba(255, 59, 48, 0.1)",e.style.borderColor="rgba(255, 59, 48, 0.3)",e.offsetHeight,e.style.transition=["transform 0.38s cubic-bezier(0.32, 0.72, 0, 1)","border-radius 0.38s cubic-bezier(0.32, 0.72, 0, 1)","background 0.28s ease 0.1s","border-color 0.28s ease 0.1s"].join(", "),e.style.transform="none",e.style.borderRadius="",e.style.background="",e.style.borderColor="";const s=setTimeout(()=>{e.style.transition="",e.style.transform="",B("open")},400);return()=>clearTimeout(s)},[F,M]),(0,r.useLayoutEffect)(()=>{if("open"!==F||!U||Ce||!Ue.current)return;const e=Ue.current,t=e.querySelector(".home-detail-exercises"),n=t?t.getBoundingClientRect().height:0,r=e.getBoundingClientRect().height-n,i=e.querySelector(".home-detail-exercise"),o=i?i.getBoundingClientRect().height:32,s=e.parentElement,a=getComputedStyle(s),l=s.clientHeight-parseFloat(a.paddingTop)-parseFloat(a.paddingBottom);Ie({overhead:r,rowH:o,maxPanelH:l,paginationH:38})},[F,U,Ce]),(0,r.useEffect)(()=>{if(!U||!Ce)return;const e=()=>{const e=Ue.current;if(!e)return;const t=e.parentElement;if(!t)return;const n=getComputedStyle(t),r=t.clientHeight-parseFloat(n.paddingTop)-parseFloat(n.paddingBottom);Ie(e=>e?d(d({},e),{},{maxPanelH:r}):null)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[U,Ce]),(0,r.useEffect)(()=>{U||Ie(null)},[U]),(0,r.useEffect)(()=>U?G.current?(G.current=!1,void(K.current=z)):(null!==K.current&&(H.current.push(K.current),q.current=[],Q(e=>e+1)),void(K.current=z)):(H.current=[],q.current=[],void(K.current=null)),[z,U]);const Ze=(0,r.useCallback)(()=>{if(0===H.current.length)return;G.current=!0,q.current.push(z);const e=H.current.pop();W(e),Q(e=>e+1)},[z]),et=(0,r.useCallback)(()=>{if(0===q.current.length)return;G.current=!0,H.current.push(z);const e=q.current.pop();W(e),Q(e=>e+1)},[z]);(0,r.useEffect)(()=>{if(Te===1/0)return;const e=U?z:(null===L||void 0===L?void 0:L.exercises)||[],t=Math.ceil(e.length/Te);t>0&&xe>=t&&Ee(t-1)},[z,L,Te,xe,U]);const tt=(0,r.useCallback)(()=>{if("leaving"===F)return;const e=Ue.current;if(!e||!L)return O(null),j(null),void B(null);B("leaving");const t=L.name?Be.current[L.name]:null,n=Fe.current,r=t?t.getBoundingClientRect():n?n.getBoundingClientRect():M;if(!r)return void setTimeout(()=>{O(null),j(null),B(null),V(!1),pe(!1),se(!1)},280);const i=e.getBoundingClientRect(),o=r.left+r.width/2-(i.left+i.width/2),s=r.top+r.height/2-(i.top+i.height/2),a=r.width/i.width,l=r.height/i.height;e.style.transition=["transform 0.22s cubic-bezier(0.2, 0, 0.6, 1)","border-radius 0.22s cubic-bezier(0.2, 0, 0.6, 1)","background 0.15s ease","border-color 0.15s ease"].join(", "),e.style.transform="translate(".concat(o,"px, ").concat(s,"px) scale(").concat(a,", ").concat(l,")"),e.style.borderRadius="14px",e.style.background="rgba(255, 59, 48, 0.1)",e.style.borderColor="rgba(255, 59, 48, 0.3)",setTimeout(()=>{O(null),j(null),B(null),V(!1),pe(!1),se(!1)},230)},[F,L,M]);(0,r.useEffect)(()=>{w&&L&&tt()},[w]);const nt=()=>{const e=Fe.current?Fe.current.getBoundingClientRect():null;O({name:"",type:"timer",exercises:[],isNew:!0}),j(e),B("entering"),Ee(0),V(!0),pe(!0),W([]),$(""),J(null),ee([])},rt=(0,r.useCallback)(function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(t.target.closest(".home-detail-delete-btn"))return;const r=t.touches?t.touches[0].clientY:t.clientY,i=Ae.current[e],o=null===i||void 0===i?void 0:i.querySelector(".home-detail-exercise"),s=i?i.getBoundingClientRect().height:40,a=Ae.current.map(e=>{if(!e)return 0;const t=e.getBoundingClientRect();return t.top+t.height/2}),l=null===i||void 0===i?void 0:i.parentElement;let c=0,u=0;if(l){const e=l.getBoundingClientRect();c=e.top,u=e.bottom}const d={isDragging:!1,startY:r,fromLocalIndex:e,draggedCard:o,originalMids:a,containerTop:c,containerBottom:u,rowH:s,offset:n,edgeDirection:null,lastY:r};Me.current=d,Ne.current={active:!1,fromIndex:e,toIndex:e,rowHeight:s};const h=()=>{Le.current&&(clearTimeout(Le.current),Le.current=null),d.edgeDirection=null},f=e=>{const t=e.touches?e.touches[0].clientY:e.clientY;d.lastY=t;const n=Math.abs(t-d.startY);if(!d.isDragging&&n>8&&(d.isDragging=!0,Ne.current.active=!0,d.draggedCard&&(d.draggedCard.classList.add("exercise-dragging-card"),d.draggedCard.style.zIndex="10",d.draggedCard.style.position="relative"),navigator.vibrate&&navigator.vibrate(30)),d.isDragging){e.cancelable&&e.preventDefault(),d.draggedCard&&(d.draggedCard.style.transform="translateY(".concat(t-d.startY,"px) scale(1.03)"));let n=d.fromLocalIndex,o=1/0;d.originalMids.forEach((e,r)=>{const i=Math.abs(t-e);i<o&&(o=i,n=r)}),n!==Ne.current.toIndex&&(Ne.current.toIndex=n,r=d.fromLocalIndex,i=n,Ae.current.forEach((e,t)=>{if(!e||t===r)return;const n=e.querySelector(".home-detail-exercise");if(!n)return;let o=0;r!==i&&(r<i&&t>r&&t<=i?o=-d.rowH:r>i&&t>=i&&t<r&&(o=d.rowH)),n.style.transform="translateY(".concat(o,"px)"),n.style.transition="transform 0.2s cubic-bezier(0.2, 0, 0, 1)"}));const{totalPages:s,currentPage:a}=Oe.current;if(s>1){const n=e.touches?e.touches[0].clientX:e.clientX,r=.75*d.rowH,i=30,o=t<d.containerTop+r&&a>0,l=t>d.containerBottom-r&&a<s-1,c=n<i&&a>0,u=n>window.innerWidth-i&&a<s-1,f=o||c?"prev":l||u?"next":null;f!==d.edgeDirection&&(h(),f&&(d.edgeDirection=f,Le.current=setTimeout(()=>{(e=>{const{perPage:t,totalPages:n,currentPage:r}=Oe.current;if(n<=1)return;const i="next"===e?r+1:r-1;if(i<0||i>=n)return;const o=d.offset+Ne.current.fromIndex,s="next"===e?i*t:(i+1)*t-1,a="next"===e?0:t-1;d.draggedCard&&(d.draggedCard.classList.remove("exercise-dragging-card"),d.draggedCard.style.transform="",d.draggedCard.style.transition="",d.draggedCard.style.zIndex="",d.draggedCard.style.position=""),Ae.current.forEach(e=>{if(!e)return;const t=e.querySelector(".home-detail-exercise");t&&(t.style.transform="",t.style.transition="",t.style.zIndex="",t.style.position="")}),je.current={newLocalIndex:a,lastY:d.lastY},W(e=>{const t=[...e],[n]=t.splice(o,1);return t.splice(Math.max(0,Math.min(s,t.length)),0,n),t}),Ee(i),navigator.vibrate&&navigator.vibrate(20)})(f)},800)))}}var r,i},p=()=>{if(h(),je.current=null,d.draggedCard&&d.draggedCard.classList.remove("exercise-dragging-card"),d.isDragging){Re.current=!0,setTimeout(()=>{Re.current=!1},50);const{fromIndex:e,toIndex:t}=Ne.current;if(null!==e&&null!==t&&e!==t){Pe.current=!0;const n=d.offset+e,r=d.offset+t;W(e=>{const t=[...e],[i]=t.splice(n,1);return t.splice(r,0,i),t}),ge(e=>null===e?null:e===n?r:n<e&&r>=e?e-1:n>e&&r<=e?e+1:e)}else Ae.current.forEach(e=>{if(!e)return;const t=e.querySelector(".home-detail-exercise");t&&(t.style.transform="",t.style.transition="",t.style.zIndex="",t.style.position="")})}Me.current=null,Ne.current={active:!1,fromIndex:null,toIndex:null,rowHeight:0},window.removeEventListener("touchmove",f),window.removeEventListener("touchend",p),window.removeEventListener("mousemove",f),window.removeEventListener("mouseup",p)};window.addEventListener("touchmove",f,{passive:!1}),window.addEventListener("touchend",p),window.addEventListener("mousemove",f),window.addEventListener("mouseup",p)},[]),it=(0,r.useCallback)(e=>{if(!e)return;const t=e.querySelector(".workout-card");t&&(t.style.transform="",t.style.transition=""),e.classList.remove("swipe-left","swipe-right","swipe-full")},[]),ot=(0,r.useCallback)(()=>{if(null!==qe.current){const e=$e[qe.current],t=e?Be.current[e.name]:null;t&&it(t)}He.current=0,qe.current=null,E(null),I(0)},[$e,it]);(0,r.useEffect)(()=>{if(null===x)return;const e=e=>{var t;const n=Be.current[null===(t=$e[x])||void 0===t?void 0:t.name];n&&!n.contains(e.target)&&ot()};return document.addEventListener("touchstart",e),document.addEventListener("mousedown",e),()=>{document.removeEventListener("touchstart",e),document.removeEventListener("mousedown",e)}},[x,$e]),(0,r.useEffect)(()=>{if(null===A)return;const e=e=>{e.target.closest(".workout-card-menu-popup")||e.target.closest(".workout-card-menu-btn")||D(null)};return document.addEventListener("mousedown",e),document.addEventListener("touchstart",e),()=>{document.removeEventListener("mousedown",e),document.removeEventListener("touchstart",e)}},[A]);const st=(0,r.useRef)(null),at=(0,r.useRef)(null),lt=(0,r.useRef)(null),ct=(0,r.useRef)(null),ut=(0,r.useCallback)(e=>{if(!e.touches||null===st.current||N.current)return;const t=e.touches[0].clientX,n=e.touches[0].clientY,r=t-Ve.current,i=n-ze.current;if(!ct.current){if(Math.abs(r)<8&&Math.abs(i)<8)return;ct.current=Math.abs(r)>=Math.abs(i)?"horizontal":"vertical"}if("vertical"===ct.current)return;e.preventDefault(),We.current=!0;const o=Math.max(-80,Math.min(80,r));He.current=o;const s=at.current,a=lt.current;s&&(s.style.transform="translateX(".concat(o,"px)")),a&&(a.classList.toggle("swipe-left",o<0),a.classList.toggle("swipe-right",o>0),a.classList.toggle("swipe-full",Math.abs(o)>=80))},[]),dt=(0,r.useRef)(null),ht=(0,r.useRef)(null),ft=(0,r.useCallback)(e=>{dt.current&&(dt.current.removeEventListener("touchmove",ut),ht.current&&dt.current.removeEventListener("scroll",ht.current)),dt.current=e,e&&(e.addEventListener("touchmove",ut,{passive:!1}),ht.current=()=>{e.classList.toggle("scrolled",e.scrollTop>0)},e.addEventListener("scroll",ht.current,{passive:!0}))},[ut]),pt=null===L||void 0===L?void 0:L.isNew,mt=()=>{if(U){if(!Y.trim()||pt&&0===z.length)return;gt()}else{const e=Ue.current;if(e){const t=e.querySelector(".home-detail-exercises"),n=t?t.getBoundingClientRect().height:0,r=e.getBoundingClientRect().height-n,i=e.querySelector(".home-detail-exercise"),o=i?i.getBoundingClientRect().height:32,s=e.parentElement,a=getComputedStyle(s),l=s.clientHeight-parseFloat(a.paddingTop)-parseFloat(a.paddingBottom);Ie({overhead:r,rowH:o,maxPanelH:l,paginationH:38})}}V(!U),Ee(0),pe(!1),se(!1),ge(null)},gt=()=>{if(!L)return;const e=L.forked||!y.includes(L.name);g(L.name,z,Y,X,Z,{isOwned:e}),O(e?e=>d(d({},e),{},{name:Y,exercises:[...z],restTime:X,tags:[...Z]}):e=>d(d({},e),{},{name:Y,exercises:[...z],restTime:X,tags:[...Z],id:void 0,forked:!0}))},vt=(0,r.useCallback)(()=>{ae||(le(!0),setTimeout(()=>{se(!1),le(!1),ue(""),ye(null)},200))},[ae]),yt=()=>{if(ce.trim()){if(null!==ve)W(e=>e.map((e,t)=>t===ve?ce.trim():e));else{const e=z.length;W(e=>[...e,ce.trim()]),he(e),setTimeout(()=>he(null),350),Te!==1/0&&Ee(Math.ceil((z.length+1)/Te)-1)}ue(""),ye(null),le(!0),setTimeout(()=>{se(!1),le(!1)},200)}},bt=e=>{J(t=>{const n=null!==t&&void 0!==t?t:m;return Math.max(0,Math.min(30,n+e))})};(0,r.useEffect)(()=>{if(!fe)return;const e=e=>{if(Ge.current&&!Ge.current.contains(e.target)){if(e.target.closest(".home-detail-edit-btn")||e.target.closest(".home-detail-save-circle")||e.target.closest(".home-detail-start-btn"))return;if(!Y.trim())return;pe(!1)}};return document.addEventListener("mousedown",e),document.addEventListener("touchstart",e),()=>{document.removeEventListener("mousedown",e),document.removeEventListener("touchstart",e)}},[fe]);const wt=!!L&&(!L.forked&&y.includes(L.name)),kt=L&&null!=L.restTime?L.restTime:m,St="open"===F||"entering"===F,xt=U?z:(null===L||void 0===L?void 0:L.exercises)||[],Et=U&&Te!==1/0?Te:xt.length,Ct=Et>0?Math.max(1,Math.ceil(xt.length/Et)):1,It=Math.min(xe,Math.max(0,Ct-1)),_t=It*Et,Tt=xt.slice(_t,_t+Et);return De.current=_t,Oe.current={perPage:Et,totalPages:Ct,currentPage:It,exerciseCount:xt.length},(0,vm.jsxs)("div",{className:"home-container ".concat(L&&"leaving"!==F?"home-detail-open":""," ").concat(_?"home-reordering":""),children:[(0,vm.jsx)("div",{className:"home-sparks-bg",children:(0,vm.jsx)("img",{src:xm,alt:"",className:"home-sparks-img"})}),(0,vm.jsxs)("div",{className:"home-header",children:[(0,vm.jsx)("div",{className:"home-header-auth",children:(0,vm.jsx)(Lk,{onLoginClick:h,onProfileClick:f})}),(0,vm.jsx)("span",{className:"home-header-title",children:"HIITem"}),S&&(0,vm.jsx)("button",{className:"home-header-bell",onClick:u,children:(0,vm.jsxs)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,vm.jsx)("path",{d:"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"}),(0,vm.jsx)("path",{d:"M13.73 21a2 2 0 0 1-3.46 0"})]})})]}),Xe&&(0,vm.jsx)("div",{className:"home-filter-bar".concat(L&&"leaving"!==F?" home-filter-bar-hidden":""),children:Ye.map(e=>(0,vm.jsx)("button",{className:"home-filter-chip".concat(P===e?" active":""),onClick:()=>R(t=>t===e?null:e),children:e},e))}),(0,vm.jsx)(Qw,{onDragStart:()=>{T(!0),N.current=!0;const e=at.current,t=lt.current;e&&(e.style.transform="",e.style.transition=""),t&&t.classList.remove("swipe-left","swipe-right","swipe-full"),st.current=null,at.current=null,lt.current=null,He.current=0,qe.current=null,We.current=!1,E(null),I(0),navigator.vibrate&&navigator.vibrate(30)},onDragEnd:e=>{if(T(!1),N.current=!1,e.destination&&e.source.index!==e.destination.index)if(null===P||"Recent"===P){const n=Array.from(t),[r]=n.splice(e.source.index,1);n.splice(e.destination.index,0,r),c(n)}else{const n=$e[e.source.index],r=$e[e.destination.index],i=t.indexOf(n),o=t.indexOf(r);if(-1===i||-1===o)return;const s=Array.from(t),[a]=s.splice(i,1);s.splice(o,0,a),c(s)}},children:(0,vm.jsx)(Rk,{droppableId:"home-workouts",direction:"vertical",isDropDisabled:!!L||"Recent"===P,children:e=>(0,vm.jsxs)("div",d(d({},e.droppableProps),{},{ref:t=>{e.innerRef(t),ft(t)},className:"home-workout-list ".concat(_?"reordering":""),children:[$e.map((e,t)=>{const r=60*e.exercises.length+p,s=(e=>i&&0!==i.length?i.filter(t=>t.workoutId?t.workoutId===e.id:!e.id&&t.workoutName===e.name).length:0)(e),a=n===e.name;return(0,vm.jsx)(Nk,{draggableId:e.name,index:t,children:(n,i)=>(0,vm.jsxs)("div",d(d(d({ref:t=>{n.innerRef(t),Be.current[e.name]=t}},n.draggableProps),n.dragHandleProps),{},{className:"workout-card-wrapper",style:d(d({},n.draggableProps.style),{},{marginBottom:"9px",padding:0}),children:[(0,vm.jsxs)("div",{className:"workout-card ".concat(a?"selected":""," ").concat(i.isDragging?"dragging":""),onClick:()=>(e=>{We.current||_||(o("timer",e.name),Je(e))})(e),onTouchStart:e=>((e,t)=>{if(!S||_||!t.touches)return;Ve.current=t.touches[0].clientX,ze.current=t.touches[0].clientY,We.current=!1,st.current=e,ct.current=null;const n=$e[e],r=n?Be.current[n.name]:null;lt.current=r,at.current=r?r.querySelector(".workout-card"):null})(t,e),onTouchEnd:()=>(()=>{if(_)return;st.current=null,ct.current=null;const e=at.current,t=lt.current;e&&(e.style.transition="transform 0.25s ease",e.style.transform="translateX(0px)"),setTimeout(()=>{e&&(e.style.transform="",e.style.transition=""),t&&t.classList.remove("swipe-left","swipe-right","swipe-full")},260),He.current=0,qe.current=null,E(null),I(0),at.current=null,lt.current=null,setTimeout(()=>{We.current=!1},50)})(),children:[k&&(!e.isCustom&&y.includes(e.name)?(0,vm.jsx)("img",{src:"/logo192.png",alt:"",className:"workout-card-avatar"}):null!==S&&void 0!==S&&S.photoURL?(0,vm.jsx)("img",{src:S.photoURL,alt:"",className:"workout-card-avatar",referrerPolicy:"no-referrer"}):(0,vm.jsx)("div",{className:"workout-card-avatar workout-card-avatar-fallback",children:(0,vm.jsx)("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"currentColor",children:(0,vm.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"})})})),(0,vm.jsxs)("div",{className:"workout-card-left",children:[(0,vm.jsxs)("div",{className:"workout-card-name-row",children:[(0,vm.jsx)("span",{className:"workout-card-name",children:e.name}),(e.tags||(e.tag?[e.tag]:[])).map(e=>(0,vm.jsx)("span",{className:"workout-card-tag",children:e.toUpperCase()},e))]}),(0,vm.jsxs)("div",{className:"workout-card-detail",children:[(0,vm.jsx)("span",{className:"workout-card-time",children:Ke(r)}),(0,vm.jsx)("span",{className:"workout-card-dot",children:"\xb7"}),(0,vm.jsxs)("span",{className:"workout-card-exercises",children:[e.exercises.length," exercises"]}),s>0&&(0,vm.jsxs)(vm.Fragment,{children:[(0,vm.jsx)("span",{className:"workout-card-dot",children:"\xb7"}),(0,vm.jsxs)("span",{className:"workout-card-completions",children:[s,"x"]})]})]})]}),(0,vm.jsx)("button",{className:"workout-card-start-btn".concat(S?"":" always-visible"),onClick:t=>{t.stopPropagation(),v(e.name)},children:(0,vm.jsx)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:(0,vm.jsx)("polyline",{points:"9 18 15 12 9 6"})})}),S&&(0,vm.jsx)("button",{className:"workout-card-menu-btn",onClick:e=>{e.stopPropagation(),D(A===t?null:t)},children:(0,vm.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:[(0,vm.jsx)("circle",{cx:"12",cy:"5",r:"2"}),(0,vm.jsx)("circle",{cx:"12",cy:"12",r:"2"}),(0,vm.jsx)("circle",{cx:"12",cy:"19",r:"2"})]})})]}),A===t&&(0,vm.jsxs)("div",{className:"workout-card-menu-popup",children:[(0,vm.jsxs)("button",{className:"workout-card-menu-item",onClick:e=>{e.stopPropagation(),D(null)},children:[(0,vm.jsxs)("svg",{width:"15",height:"15",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,vm.jsx)("path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"}),(0,vm.jsx)("polyline",{points:"16 6 12 2 8 6"}),(0,vm.jsx)("line",{x1:"12",y1:"2",x2:"12",y2:"15"})]}),"Share"]}),(0,vm.jsxs)("button",{className:"workout-card-menu-item",onClick:e=>{e.stopPropagation(),D(null)},children:[(0,vm.jsxs)("svg",{width:"15",height:"15",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,vm.jsx)("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),(0,vm.jsx)("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),(0,vm.jsx)("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),(0,vm.jsx)("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]}),"Schedule"]}),(0,vm.jsxs)("button",{className:"workout-card-menu-item",onClick:t=>{t.stopPropagation(),D(null),v(e.name)},children:[(0,vm.jsx)("svg",{width:"15",height:"15",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,vm.jsx)("polygon",{points:"5 3 19 12 5 21 5 3"})}),"Start"]})]}),(0,vm.jsx)("div",{className:"workout-card-action workout-card-action-left",children:(0,vm.jsxs)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,vm.jsx)("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),(0,vm.jsx)("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),(0,vm.jsx)("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),(0,vm.jsx)("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]})}),(0,vm.jsx)("div",{className:"workout-card-action workout-card-action-right",children:(0,vm.jsxs)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,vm.jsx)("path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"}),(0,vm.jsx)("polyline",{points:"16 6 12 2 8 6"}),(0,vm.jsx)("line",{x1:"12",y1:"2",x2:"12",y2:"15"})]})})]}))},e.name)}),e.placeholder,S&&(0,vm.jsxs)("div",{ref:Fe,className:"workout-card-add",onClick:nt,children:[(0,vm.jsxs)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,vm.jsx)("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),(0,vm.jsx)("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),(0,vm.jsx)("span",{children:"New Workout"})]})]}))})}),L&&(0,vm.jsxs)("div",{className:"home-detail-overlay ".concat("leaving"===F?"closing":""),onClick:e=>{e.target===e.currentTarget&&tt()},children:[(0,vm.jsx)("div",{ref:Ue,className:"home-detail-panel",style:null!==_e?{height:_e}:void 0,children:(0,vm.jsxs)("div",{className:"home-detail-content ".concat(St?"visible":""),children:[(0,vm.jsxs)("div",{className:"home-detail-header",children:[(0,vm.jsx)("div",{className:"home-detail-creator",children:wt?(0,vm.jsx)("img",{src:"/logo192.png",alt:"",className:"home-detail-creator-icon home-detail-app-icon"}):null!==S&&void 0!==S&&S.photoURL?(0,vm.jsx)("img",{src:S.photoURL,alt:"",className:"home-detail-creator-icon"}):(0,vm.jsx)("div",{className:"home-detail-creator-icon home-detail-user-icon",children:(0,vm.jsx)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"currentColor",children:(0,vm.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"})})})}),(0,vm.jsxs)("div",{className:"home-detail-title-group ".concat((U?Z.length>0:(L.tags||(L.tag?[L.tag]:[])).length>0)?"has-tags":""),children:[U&&fe?(0,vm.jsx)("input",{ref:Ge,type:"text",value:Y,onChange:e=>$(e.target.value),onKeyDown:e=>{"Enter"===e.key&&(pe(!1),e.target.blur())},className:"home-detail-name-input",autoFocus:!0}):(0,vm.jsx)("h2",{className:"home-detail-name",onClick:()=>{U&&pe(!0)},children:U?Y:L.name}),(()=>{const e=L.tags||(L.tag?[L.tag]:[]);return U&&!fe||e.length>0?(0,vm.jsx)("div",{className:"home-detail-tags-row",children:U?Z.map(e=>(0,vm.jsxs)("span",{className:"home-detail-tag-pill editable",onClick:()=>ee(t=>t.filter(t=>t!==e)),children:[e.toUpperCase()," \xd7"]},e)):e.map(e=>(0,vm.jsx)("span",{className:"home-detail-tag-pill",children:e.toUpperCase()},e))}):null})()]}),(0,vm.jsxs)("div",{className:"home-detail-header-actions",children:[S&&(0,vm.jsx)("button",{className:"home-detail-edit-btn",onClick:()=>{fe?pe(!1):mt()},disabled:U&&!fe&&(!Y.trim()||pt&&0===z.length),children:U?(0,vm.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,vm.jsx)("polyline",{points:"20 6 9 17 4 12"})}):(0,vm.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,vm.jsx)("path",{d:"M17 3a2.83 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"}),(0,vm.jsx)("path",{d:"m15 5 4 4"})]})}),(0,vm.jsx)("button",{className:"home-detail-close-btn",onClick:()=>{U?pt?tt():(gt(),V(!1),pe(!1),se(!1),ge(null)):tt()},children:(0,vm.jsxs)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,vm.jsx)("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),(0,vm.jsx)("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]})]}),(0,vm.jsxs)("div",{className:"home-detail-meta",children:[(0,vm.jsxs)("div",{className:"home-detail-meta-view ".concat(U?"hidden":""),children:[(0,vm.jsxs)("div",{className:"home-detail-meta-view-left",children:[(0,vm.jsxs)("div",{className:"home-detail-stats",children:[(0,vm.jsx)("span",{children:Ke(60*L.exercises.length+p)}),(0,vm.jsx)("span",{className:"home-detail-stats-dot",children:"\xb7"}),(0,vm.jsxs)("span",{children:[L.exercises.length," exercises"]})]}),(0,vm.jsxs)("span",{className:"home-detail-rest-display",children:[kt,"s rest between exercises"]})]}),S&&!wt&&(0,vm.jsxs)("button",{className:"home-detail-visibility-btn",onClick:()=>{const e=!L.isPublic;b(L.name,e),O(t=>d(d({},t),{},{isPublic:e}))},children:[(0,vm.jsx)("span",{className:"home-detail-visibility-icon ".concat(L.isPublic?"hidden":""),children:(0,vm.jsxs)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,vm.jsx)("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),(0,vm.jsx)("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]})}),(0,vm.jsx)("span",{className:"home-detail-visibility-icon ".concat(L.isPublic?"":"hidden"),children:(0,vm.jsxs)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,vm.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,vm.jsx)("line",{x1:"2",y1:"12",x2:"22",y2:"12"}),(0,vm.jsx)("path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10A15.3 15.3 0 0 1 12 2z"})]})})]})]}),(0,vm.jsxs)("div",{className:"home-detail-meta-edit ".concat(U?"":"hidden"),children:[(0,vm.jsx)("span",{className:"home-detail-add-tag-btn",onClick:()=>ne(!0),children:"+ Tag"}),(0,vm.jsxs)("div",{className:"home-detail-rest-stepper",children:[(0,vm.jsx)("span",{className:"home-detail-rest-label",children:"Rest"}),(0,vm.jsx)("button",{className:"home-detail-stepper-btn",onClick:()=>bt(-5),disabled:(null!==X&&void 0!==X?X:m)<=0,children:"-"}),(0,vm.jsxs)("span",{className:"home-detail-rest-value",children:[null!==X&&void 0!==X?X:m,"s"]}),(0,vm.jsx)("button",{className:"home-detail-stepper-btn",onClick:()=>bt(5),disabled:(null!==X&&void 0!==X?X:m)>=30,children:"+"})]})]})]}),U?(0,vm.jsx)("div",{className:"home-detail-exercises editing",children:Tt.map((e,t)=>{const n=_t+t;return(0,vm.jsxs)("div",{ref:e=>{Ae.current[t]=e},className:"home-detail-exercise-row".concat(n===de?" exercise-just-added":""),onTouchStart:e=>rt(t,e,_t),onMouseDown:e=>rt(t,e,_t),children:[(0,vm.jsx)("span",{className:"home-detail-exercise-num",children:n+1}),(0,vm.jsxs)("div",{className:"home-detail-exercise".concat(me===n?" selected":""),onClick:()=>{Re.current||(ye(n),ue(e),se(!0))},children:[(0,vm.jsx)("span",{className:"home-detail-exercise-name",children:e}),(0,vm.jsx)("button",{className:"home-detail-duplicate-btn",onClick:t=>{t.stopPropagation();const r=n+1;W(t=>[...t.slice(0,r),e,...t.slice(r)]),he(r),setTimeout(()=>he(null),350)},children:(0,vm.jsxs)("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:[(0,vm.jsx)("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),(0,vm.jsx)("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})]})}),(0,vm.jsx)("button",{className:"home-detail-delete-btn",onClick:e=>{e.stopPropagation(),(e=>{W(t=>t.filter((t,n)=>n!==e)),me===e?ge(null):null!==me&&e<me&&ge(me-1)})(n)},children:(0,vm.jsxs)("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:[(0,vm.jsx)("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),(0,vm.jsx)("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]})]},"ex-".concat(n))})}):(0,vm.jsx)("div",{className:"home-detail-exercises",children:Tt.map((e,t)=>{const n=_t+t;return(0,vm.jsxs)("div",{className:"home-detail-exercise",children:[(0,vm.jsx)("span",{className:"home-detail-exercise-num",children:n+1}),(0,vm.jsx)("span",{className:"home-detail-exercise-name",children:e})]},"".concat(e,"-").concat(n))})}),Ct>1&&(0,vm.jsxs)("div",{className:"home-detail-pagination",children:[(0,vm.jsx)("button",{className:"home-detail-pagination-arrow",onClick:()=>Ee(e=>Math.max(0,e-1)),disabled:0===It,children:(0,vm.jsx)("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:(0,vm.jsx)("polyline",{points:"15 18 9 12 15 6"})})}),(0,vm.jsx)("div",{className:"home-detail-pagination-dots",children:Array.from({length:Ct},(e,t)=>(0,vm.jsx)("div",{className:"home-detail-pagination-dot".concat(t===It?" active":""),onClick:()=>Ee(t)},t))}),(0,vm.jsx)("button",{className:"home-detail-pagination-arrow",onClick:()=>Ee(e=>Math.min(Ct-1,e+1)),disabled:It===Ct-1,children:(0,vm.jsx)("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:(0,vm.jsx)("polyline",{points:"9 18 15 12 9 6"})})})]}),U?(0,vm.jsxs)("div",{className:"home-detail-bottom-row",children:[H.current.length>0?(0,vm.jsxs)("div",{className:"home-detail-undo-redo",children:[(0,vm.jsx)("button",{className:"home-detail-undo-btn",onClick:Ze,disabled:0===H.current.length,children:(0,vm.jsxs)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,vm.jsx)("polyline",{points:"1 4 1 10 7 10"}),(0,vm.jsx)("path",{d:"M3.51 15a9 9 0 1 0 2.13-9.36L1 10"})]})}),(0,vm.jsx)("button",{className:"home-detail-redo-btn",onClick:et,disabled:0===q.current.length,children:(0,vm.jsxs)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,vm.jsx)("polyline",{points:"23 4 23 10 17 10"}),(0,vm.jsx)("path",{d:"M20.49 15a9 9 0 1 1-2.13-9.36L23 10"})]})})]}):wt||pt?(0,vm.jsx)("div",{className:"home-detail-undo-redo"}):(0,vm.jsx)("button",{className:"home-detail-delete-workout-btn",onClick:()=>we(!0),children:(0,vm.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,vm.jsx)("polyline",{points:"3 6 5 6 21 6"}),(0,vm.jsx)("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]})}),(0,vm.jsx)("button",{className:"home-detail-start-btn",onClick:()=>{pt&&!Y.trim()&&$("My Workout"),pe(!1),ye(null),ue(""),se(!0)},children:"Add Exercise"}),(0,vm.jsx)("button",{className:"home-detail-save-circle",onClick:()=>{fe?pe(!1):mt()},disabled:!Y.trim()||pt&&0===z.length,children:(0,vm.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:(0,vm.jsx)("polyline",{points:"20 6 9 17 4 12"})})})]}):(0,vm.jsx)("div",{className:"home-detail-bottom-row",onClick:tt,children:(0,vm.jsx)("button",{className:"home-detail-start-btn",onClick:e=>{e.stopPropagation(),v(L.name),tt()},children:"Start Workout"})})]})}),oe&&(0,vm.jsxs)("div",{className:"home-detail-add-popup ".concat(ae?"closing":""),children:[(0,vm.jsx)("div",{className:"home-detail-popup-overlay",onClick:vt}),(0,vm.jsxs)("div",{className:"home-detail-popup-content",children:[(0,vm.jsx)("h3",{children:null!==ve?"Edit Exercise":"Add Exercise"}),(0,vm.jsx)("input",{type:"text",placeholder:"Exercise name...",value:ce,onChange:e=>ue(e.target.value),onKeyDown:e=>{"Enter"===e.key?yt():"Escape"===e.key&&vt()},autoFocus:!0,className:"home-detail-popup-input"}),(0,vm.jsxs)("div",{className:"home-detail-popup-actions",children:[(0,vm.jsx)("button",{className:"home-detail-popup-cancel",onClick:vt,children:"Cancel"}),(0,vm.jsx)("button",{className:"home-detail-popup-confirm",onClick:yt,children:null!==ve?"Save":"Add"})]})]})]}),te&&(0,vm.jsxs)("div",{className:"home-detail-add-popup ".concat(re?"closing":""),children:[(0,vm.jsx)("div",{className:"home-detail-popup-overlay",onClick:()=>{ie(!0),setTimeout(()=>{ne(!1),ie(!1)},200)}}),(0,vm.jsx)("div",{className:"home-detail-tag-popup-content",children:(0,vm.jsx)("div",{className:"home-detail-tag-picker",children:Ok.map(e=>(0,vm.jsx)("button",{className:"home-detail-tag-option ".concat(Z.includes(e)?"active":""),onClick:()=>{ee(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e]),ie(!0),setTimeout(()=>{ne(!1),ie(!1)},200)},children:e.toUpperCase()},e))})})]}),be&&(0,vm.jsxs)("div",{className:"home-detail-delete-confirm ".concat(ke?"closing":""),children:[(0,vm.jsx)("div",{className:"home-detail-delete-confirm-backdrop",onClick:()=>{Se(!0),setTimeout(()=>{we(!1),Se(!1)},150)}}),(0,vm.jsxs)("div",{className:"home-detail-delete-confirm-box",children:[(0,vm.jsx)("p",{className:"home-detail-delete-confirm-title",children:"Delete Workout?"}),(0,vm.jsx)("p",{className:"home-detail-delete-confirm-msg",children:"This can't be undone."}),(0,vm.jsxs)("div",{className:"home-detail-delete-confirm-actions",children:[(0,vm.jsx)("button",{className:"home-detail-delete-confirm-cancel",onClick:()=>{Se(!0),setTimeout(()=>{we(!1),Se(!1)},150)},children:"Cancel"}),(0,vm.jsx)("button",{className:"home-detail-delete-confirm-delete",onClick:()=>{we(!1),Se(!1),l(L.name),tt()},children:"Delete"})]})]})]})]})]})},jk=async e=>{const t=await tm(Hf(um,"users",e,"settings","preferences"));return t.exists()&&t.data().workoutOrder||null},Fk=async(e,t)=>{await rm(Hf(um,"users",e,"settings","preferences"),{autoShare:t,updatedAt:_p()},{merge:!0})},Bk=async(e,t)=>{await rm(Hf(um,"users",e,"settings","preferences"),{selectedWorkout:t,updatedAt:_p()},{merge:!0})},Uk=async(e,t)=>{await rm(Hf(um,"users",e,"settings","preferences"),{workoutOrder:t,updatedAt:_p()},{merge:!0})},Vk=async()=>(await nm(Wf(um,"userProfiles"))).docs.map(e=>d({id:e.id},e.data())),zk=async e=>(await nm(Wf(um,"following",e,"userFollowing"))).docs.map(e=>e.id),Wk=async e=>(await nm(Wf(um,"followers",e,"userFollowers"))).docs.map(e=>e.id),Hk=async e=>{if(!e||0===e.length)return[];return await Promise.all(e.map(async e=>{const t=await tm(Hf(um,"userProfiles",e));return t.exists()?d({uid:e},t.data()):{uid:e,displayName:"Unknown"}}))},qk=async e=>{const t=await zk(e);if(0===t.length)return[];const n={};return await Promise.all(t.map(async r=>{(await zk(r)).forEach(r=>{r===e||t.includes(r)||(n[r]=(n[r]||0)+1)})})),Object.entries(n).map(e=>{let[t,n]=e;return{uid:t,mutualCount:n}}).sort((e,t)=>t.mutualCount-e.mutualCount)},Gk=["S","M","T","W","T","F","S"],Kk=e=>{let{user:t,history:n,loading:i,onLoginClick:o,timerWorkoutData:s=[],stopwatchWorkoutData:a=[],prepTime:l=15,globalRestTime:c=15,onStartWorkout:u,defaultWorkoutNames:h=[],followingIds:f=[],followerIds:p=[],pinnedWorkouts:m=[],onPinnedWorkoutsChange:g}=e;const v=(0,r.useRef)(null),[y,b]=(0,r.useState)((new Date).getFullYear()),[w,k]=(0,r.useState)(!1),S=(0,r.useRef)(null),[x,E]=(0,r.useState)(null),[C,I]=(0,r.useState)(null),_=(0,r.useRef)(null),[T,N]=(0,r.useState)(null),A=(0,r.useRef)(null),D=f,P=p,R=D.length,L=P.length,[O,M]=(0,r.useState)(null),[j,F]=(0,r.useState)([]),[B,U]=(0,r.useState)(!1),[V,z]=(0,r.useState)(!1),[W,H]=(0,r.useState)(null),[q,G]=(0,r.useState)(null),[K,Q]=(0,r.useState)(null),Y=(0,r.useRef)(null),$=(0,r.useRef)({});(0,r.useEffect)(()=>{if(!w)return;const e=e=>{S.current&&!S.current.contains(e.target)&&k(!1)};return document.addEventListener("pointerdown",e),()=>document.removeEventListener("pointerdown",e)},[w]);const X=(0,r.useCallback)(e=>{const t=new Date,n=t.getDay(),r=new Date(t);r.setDate(t.getDate()-n);if(e==="".concat(r.getFullYear(),"-").concat(String(r.getMonth()+1).padStart(2,"0"),"-").concat(String(r.getDate()).padStart(2,"0")))E(null);else{const t=e.split("-");E(new Date(+t[0],+t[1]-1,+t[2]))}I(e),_.current&&clearTimeout(_.current),_.current=setTimeout(()=>I(null),300)},[]),J=(0,r.useMemo)(()=>{const e={};return(n||[]).forEach(t=>{const n=t.completedAt||t.date;if(!n)return;const r="".concat(n.getFullYear(),"-").concat(String(n.getMonth()+1).padStart(2,"0"),"-").concat(String(n.getDate()).padStart(2,"0"));e[r]=(e[r]||0)+(t.duration||0)}),e},[n]),Z=(0,r.useMemo)(()=>{const e={};return(n||[]).forEach(t=>{const n=t.completedAt||t.date;if(!n||!t.workoutName)return;const r="".concat(n.getFullYear(),"-").concat(String(n.getMonth()+1).padStart(2,"0"),"-").concat(String(n.getDate()).padStart(2,"0"));e[r]||(e[r]=[]),e[r].push(t.workoutName)}),e},[n]),ee=(0,r.useMemo)(()=>{const e=(new Date).getFullYear(),t=new Set([e]);return(n||[]).forEach(e=>{const n=e.completedAt||e.date;n&&t.add(n.getFullYear())}),[...t].sort((e,t)=>t-e)},[n]),te=(0,r.useMemo)(()=>{const e=n||[],t=e.reduce((e,t)=>e+(t.duration||0),0),r=Math.floor(t/3600),i=Math.floor(t%3600/60),o={};return e.forEach(e=>{const t=e.completedAt||e.date;if(!t)return;const n="".concat(t.getFullYear(),"-").concat(String(t.getMonth()+1).padStart(2,"0"),"-").concat(String(t.getDate()).padStart(2,"0"));o[n]=(o[n]||0)+1}),{totalHours:r,totalMinutes:i,totalSeconds:t,totalWorkouts:e.length,dailyMap:o}},[n]),ne=(0,r.useMemo)(()=>{const e=new Date;let t;if(x)t=new Date(x);else{const n=e.getDay();t=new Date(e),t.setDate(e.getDate()-n)}const n=[];for(let r=0;r<7;r++){const i=new Date(t);i.setDate(t.getDate()+r);const o="".concat(i.getFullYear(),"-").concat(String(i.getMonth()+1).padStart(2,"0"),"-").concat(String(i.getDate()).padStart(2,"0")),s=i>e;n.push({label:Gk[r],minutes:s?null:Math.round((J[o]||0)/60),seconds:s?0:J[o]||0,workouts:Z[o]||[],date:i,isToday:i.toDateString()===e.toDateString(),isFuture:s})}return n},[J,Z,x]),{weekStreak:re,weekStreakRecord:ie}=(0,r.useMemo)(()=>{const e=new Date,t=e.getDay(),n=new Date(e);n.setDate(e.getDate()-t),n.setHours(0,0,0,0);const r=e=>{for(let t=0;t<7;t++){const n=new Date(e);n.setDate(e.getDate()+t);const r="".concat(n.getFullYear(),"-").concat(String(n.getMonth()+1).padStart(2,"0"),"-").concat(String(n.getDate()).padStart(2,"0"));if(te.dailyMap[r])return!0}return!1};let i=0,o=new Date(n);for(;r(o);)i++,o.setDate(o.getDate()-7);let s=i;const a=Object.keys(te.dailyMap);if(a.length>0){const e=a.map(e=>new Date(e+"T00:00:00")),t=new Date(Math.min(...e)),i=new Date(t);i.setDate(i.getDate()-i.getDay());let o=new Date(i),l=0;for(;o<=n;)r(o)?(l++,l>s&&(s=l)):l=0,o.setDate(o.getDate()+7)}return{weekStreak:i,weekStreakRecord:s}},[te.dailyMap]),oe=(0,r.useMemo)(()=>{const e=new Date,t=y,n=new Date(t,0,1),r=new Date(n);r.setDate(n.getDate()-n.getDay());const i=new Date(t,11,31),o=new Date(i);o.setDate(i.getDate()+(6-i.getDay()));const s=[],a=[];let l=new Date(r),c=0,u=0;for(;l<=o;){const t=[],n=new Date(l),r="".concat(n.getFullYear(),"-").concat(String(n.getMonth()+1).padStart(2,"0"),"-").concat(String(n.getDate()).padStart(2,"0"));for(let i=0;i<7;i++){if(l<=o){const n="".concat(l.getFullYear(),"-").concat(String(l.getMonth()+1).padStart(2,"0"),"-").concat(String(l.getDate()).padStart(2,"0")),o=l>e;l.toDateString()===e.toDateString()&&(u=c),t.push({date:n,count:te.dailyMap[n]||0,isFuture:o,sundayKey:r}),l.getDate()<=7&&0===i&&a.push({weekIndex:c,label:l.toLocaleString("default",{month:"short"})})}l.setDate(l.getDate()+1)}s.push(t),c++}return{weeks:s,monthLabels:a,numWeeks:s.length,todayWeekIndex:u}},[te.dailyMap,y]),se=(e,t)=>t||0===e?"var(--heat-empty)":1===e?"var(--heat-1)":2===e?"var(--heat-2)":3===e?"var(--heat-3)":"var(--heat-4)",ae=(0,r.useMemo)(()=>{const e={},t=new Date;let n=12345;const r=()=>(n=(16807*n+0)%2147483647,(n-1)/2147483646);for(let i=0;i<365;i++){const n=new Date(t);n.setDate(n.getDate()-i);const o="".concat(n.getFullYear(),"-").concat(String(n.getMonth()+1).padStart(2,"0"),"-").concat(String(n.getDate()).padStart(2,"0")),s=r();s<.18?e[o]=1:s<.27?e[o]=2:s<.32?e[o]=3:s<.35&&(e[o]=4)}return e},[]),le=(0,r.useMemo)(()=>{const e=new Date,t=e.getFullYear(),n=new Date(t,0,1),r=new Date(n);r.setDate(n.getDate()-n.getDay());const i=new Date(t,11,31),o=new Date(i);o.setDate(i.getDate()+(6-i.getDay()));const s=[],a=[];let l=new Date(r),c=0,u=0;for(;l<=o;){const t=[];for(let n=0;n<7;n++){if(l<=o){const r="".concat(l.getFullYear(),"-").concat(String(l.getMonth()+1).padStart(2,"0"),"-").concat(String(l.getDate()).padStart(2,"0")),i=l>e;l.toDateString()===e.toDateString()&&(u=c),t.push({date:r,count:ae[r]||0,isFuture:i}),l.getDate()<=7&&0===n&&a.push({weekIndex:c,label:l.toLocaleString("default",{month:"short"})})}l.setDate(l.getDate()+1)}s.push(t),c++}return{weeks:s,monthLabels:a,numWeeks:s.length,todayWeekIndex:u}},[ae]),ce=t?te:{totalHours:42,totalMinutes:15,totalWorkouts:156},ue=t?oe:le,de=t?ne:[{label:"S",minutes:15,isToday:!1,isFuture:!1},{label:"M",minutes:22,isToday:!1,isFuture:!1},{label:"T",minutes:11,isToday:!1,isFuture:!1},{label:"W",minutes:0,isToday:!1,isFuture:!1},{label:"T",minutes:33,isToday:!1,isFuture:!1},{label:"F",minutes:11,isToday:!0,isFuture:!1},{label:"S",minutes:null,isToday:!1,isFuture:!0}],he=t?re:12,fe=t?ie:12;(0,r.useEffect)(()=>{var e;const t=v.current;if(!t)return;const n=14*((null!==(e=ue.todayWeekIndex)&&void 0!==e?e:0)+1)-t.clientWidth;t.scrollLeft=Math.max(0,n)},[ue]);const pe=320,me=126,ge=de.filter(e=>null!==e.minutes),ve=Math.max(...ge.map(e=>e.minutes),1),ye=e=>28+e/6*280,be=e=>98-e/ve*86,we=ve<=5?Array.from({length:ve+1},(e,t)=>t):[0,Math.round(ve/2),ve],ke=de.map((e,t)=>null!==e.minutes?d(d({x:ye(t),y:be(e.minutes)},e),{},{i:t}):null).filter(Boolean),Se=ke.length>1?ke.map((e,t)=>"".concat(0===t?"M":"L").concat(e.x,",").concat(e.y)).join(" "):"",xe=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],Ee=(0,r.useCallback)(e=>{const t=A.current;if(!t)return null;const n=t.getBoundingClientRect(),r=(e-n.left)/n.width*pe;let i=0,o=1/0;for(let s=0;s<7;s++){const e=28+s/6*280,t=Math.abs(r-e);t<o&&(o=t,i=s)}return i},[pe,28,12]),Ce=(0,r.useCallback)(e=>{N(Ee(e))},[Ee]),Ie=(0,r.useCallback)(e=>{N(Ee(e))},[Ee]),_e=(0,r.useCallback)(()=>{N(null)},[]),Te=(0,r.useMemo)(()=>[...s,...a],[s,a]),Ne=(0,r.useMemo)(()=>Te.filter(e=>e.forked||!h.includes(e.name)),[Te,h]),Ae=(0,r.useMemo)(()=>m.map(e=>Te.find(t=>t.name===e)).filter(Boolean),[m,Te]),[De,Pe]=(0,r.useState)(!1),[Re,Le]=(0,r.useState)(!1),[Oe,Me]=(0,r.useState)(!1),[je,Fe]=(0,r.useState)(!1),Be=e=>{const t=Math.floor(e/60),n=e%60;return"".concat(t,":").concat(n.toString().padStart(2,"0"))},Ue=async e=>{M(e),U(!0),z(!1),F([]);try{const t="following"===e?D:P,n=await Hk(t);F(n)}catch(t){console.error("Failed to load profiles:",t)}U(!1)},Ve=()=>{z(!0),setTimeout(()=>{M(null),z(!1),F([])},200)},ze=(0,r.useCallback)(e=>{const t=$.current[e.name],n=t?t.getBoundingClientRect():null;Q(n),H(e),G("entering")},[]);(0,r.useLayoutEffect)(()=>{if("entering"!==q||!Y.current)return;if(!K)return void G("open");const e=Y.current,t=e.getBoundingClientRect(),n=K.left+K.width/2-(t.left+t.width/2),r=K.top+K.height/2-(t.top+t.height/2),i=K.width/t.width,o=K.height/t.height;e.style.transition="none",e.style.transform="translate(".concat(n,"px, ").concat(r,"px) scale(").concat(i,", ").concat(o,")"),e.style.borderRadius="14px",e.style.background="rgba(255, 59, 48, 0.1)",e.style.borderColor="rgba(255, 59, 48, 0.3)",e.offsetHeight,e.style.transition=["transform 0.38s cubic-bezier(0.32, 0.72, 0, 1)","border-radius 0.38s cubic-bezier(0.32, 0.72, 0, 1)","background 0.28s ease 0.1s","border-color 0.28s ease 0.1s"].join(", "),e.style.transform="none",e.style.borderRadius="",e.style.background="",e.style.borderColor="";const s=setTimeout(()=>{e.style.transition="",e.style.transform="",G("open")},400);return()=>clearTimeout(s)},[q,K]);const We=(0,r.useCallback)(()=>{if("leaving"===q)return;const e=Y.current;if(!e)return H(null),void G(null);G("leaving");const t=null!==W&&void 0!==W&&W.name?$.current[W.name]:null,n=t?t.getBoundingClientRect():K;if(!n)return void setTimeout(()=>{H(null),G(null)},230);const r=e.getBoundingClientRect(),i=n.left+n.width/2-(r.left+r.width/2),o=n.top+n.height/2-(r.top+r.height/2),s=n.width/r.width,a=n.height/r.height;e.style.transition=["transform 0.22s cubic-bezier(0.2, 0, 0.6, 1)","border-radius 0.22s cubic-bezier(0.2, 0, 0.6, 1)","background 0.15s ease","border-color 0.15s ease"].join(", "),e.style.transform="translate(".concat(i,"px, ").concat(o,"px) scale(").concat(s,", ").concat(a,")"),e.style.borderRadius="14px",e.style.background="rgba(255, 59, 48, 0.1)",e.style.borderColor="rgba(255, 59, 48, 0.3)",setTimeout(()=>{H(null),G(null)},230)},[q,W,K]),He=async e=>{const t="".concat(e.name," - ").concat(e.exercises.length," exercises");if(navigator.share)try{await navigator.share({title:e.name,text:t})}catch(n){}else try{await navigator.clipboard.writeText(t)}catch(n){console.error("Failed to copy:",n)}},qe=W&&"leaving"!==q,Ge=()=>{Pe(!0),Le(!1)},Ke=()=>{Le(!0),setTimeout(()=>{Pe(!1),Le(!1)},200)},Qe=e=>{const t=60*e.exercises.length+l;return(0,vm.jsxs)("div",{ref:t=>{$.current[e.name]=t},className:"stats-workout-card",onClick:()=>ze(e),children:[(0,vm.jsxs)("div",{className:"stats-card-left",children:[(0,vm.jsxs)("div",{className:"stats-card-name-row",children:[(0,vm.jsx)("span",{className:"stats-card-name",children:e.name}),(e.tags||(e.tag?[e.tag]:[])).map(e=>(0,vm.jsx)("span",{className:"stats-card-tag",children:e.toUpperCase()},e))]}),(0,vm.jsxs)("div",{className:"stats-card-detail",children:[(0,vm.jsx)("span",{className:"stats-card-time",children:Be(t)}),(0,vm.jsx)("span",{className:"stats-card-dot",children:"\xb7"}),(0,vm.jsxs)("span",{children:[e.exercises.length," exercises"]})]})]}),(0,vm.jsx)("button",{className:"stats-card-action-btn",onClick:t=>{t.stopPropagation(),He(e)},children:(0,vm.jsxs)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,vm.jsx)("path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"}),(0,vm.jsx)("polyline",{points:"16 6 12 2 8 6"}),(0,vm.jsx)("line",{x1:"12",y1:"2",x2:"12",y2:"15"})]})})]},e.name)},Ye=()=>(0,vm.jsxs)("div",{className:"stats-container ".concat(qe?"stats-detail-open":""),children:[(0,vm.jsxs)("div",{className:"stats-profile-header",children:[(0,vm.jsxs)("div",{className:"stats-profile-left",children:[null!==t&&void 0!==t&&t.photoURL?(0,vm.jsx)("img",{src:t.photoURL,alt:"",className:"stats-profile-pic",referrerPolicy:"no-referrer"}):(0,vm.jsx)("div",{className:"stats-profile-pic stats-profile-pic-fallback",children:(0,vm.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:(0,vm.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"})})}),(0,vm.jsxs)("div",{className:"stats-profile-info",children:[(0,vm.jsx)("span",{className:"stats-profile-name",children:(null===t||void 0===t?void 0:t.displayName)||"Guest"}),(0,vm.jsxs)("div",{className:"stats-follow-row",children:[(0,vm.jsxs)("button",{className:"stats-follow-stat",onClick:()=>Ue("following"),children:[(0,vm.jsx)("span",{className:"stats-follow-num",children:R}),(0,vm.jsx)("span",{className:"stats-follow-label",children:"Following"})]}),(0,vm.jsxs)("button",{className:"stats-follow-stat",onClick:()=>Ue("followers"),children:[(0,vm.jsx)("span",{className:"stats-follow-num",children:L}),(0,vm.jsx)("span",{className:"stats-follow-label",children:"Followers"})]})]})]})]}),(0,vm.jsxs)("div",{className:"stats-profile-right",children:[(0,vm.jsxs)("div",{className:"stats-profile-time",children:[ce.totalHours>0&&(0,vm.jsxs)(vm.Fragment,{children:[(0,vm.jsx)("span",{className:"stats-profile-time-value",children:ce.totalHours}),(0,vm.jsx)("span",{className:"stats-profile-time-unit",children:"h "})]}),(0,vm.jsx)("span",{className:"stats-profile-time-value",children:ce.totalMinutes}),(0,vm.jsx)("span",{className:"stats-profile-time-unit",children:"m"})]}),(0,vm.jsx)("div",{className:"stats-profile-time-label",children:"Time Training"})]})]}),(0,vm.jsx)("div",{className:"stats-scroll-body",children:(0,vm.jsxs)("div",{className:"stats-content",children:[(0,vm.jsxs)("div",{className:"stats-section",children:[(0,vm.jsxs)("h3",{className:"stats-section-title",children:["Activity",ee.length<=1?(0,vm.jsx)("span",{className:"stats-year-label",children:y}):(0,vm.jsxs)("div",{className:"stats-year-dropdown",ref:S,children:[(0,vm.jsxs)("button",{className:"stats-year-toggle",onClick:()=>k(e=>!e),children:[y,(0,vm.jsx)("svg",{width:"10",height:"10",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:(0,vm.jsx)("polyline",{points:w?"18 15 12 9 6 15":"6 9 12 15 18 9"})})]}),w&&(0,vm.jsx)("div",{className:"stats-year-menu",children:ee.map(e=>(0,vm.jsx)("button",{className:"stats-year-option ".concat(e===y?"active":""),onClick:()=>{b(e),k(!1)},children:e},e))})]})]}),(0,vm.jsx)("div",{className:"calendar-scroll",ref:v,children:(0,vm.jsxs)("div",{className:"calendar-grid",style:{minWidth:"".concat(14*ue.numWeeks,"px")},children:[(0,vm.jsx)("div",{className:"calendar-month-labels",style:{gridTemplateColumns:"repeat(".concat(ue.numWeeks,", 1fr)")},children:ue.monthLabels.map((e,t)=>(0,vm.jsx)("span",{className:"month-label ".concat(/^\d{4}$/.test(e.label)?"year-label":""),style:{gridColumnStart:e.weekIndex+1},children:e.label},t))}),(0,vm.jsx)("div",{className:"calendar-cells",children:ue.weeks.map((e,t)=>{var n;return(0,vm.jsx)("div",{className:"calendar-week ".concat((null===(n=e[0])||void 0===n?void 0:n.sundayKey)===C?"selected":""),onClick:()=>{var t;return(null===(t=e[0])||void 0===t?void 0:t.sundayKey)&&X(e[0].sundayKey)},children:e.map((e,t)=>(0,vm.jsx)("div",{className:"calendar-cell",style:{backgroundColor:se(e.count,e.isFuture)},title:"".concat(e.date,": ").concat(e.count," workout").concat(1!==e.count?"s":"")},t))},t)})})]})}),(0,vm.jsxs)("div",{className:"stats-streak-sub",children:["Week Streak: ",he," \xb7 Best: ",fe]})]}),(0,vm.jsxs)("div",{className:"stats-section",children:[(0,vm.jsxs)("h3",{className:"stats-section-title",children:[null!==T?(e=>{const t=null===(e=de[T])||void 0===e?void 0:e.date;return t?t.toLocaleDateString("default",{weekday:"long",month:"short",day:"numeric"}):xe[T]})():x?(()=>{const e=new Date(x);e.setDate(e.getDate()+6);const t=e=>e.toLocaleDateString("default",{month:"short",day:"numeric"});return"".concat(t(x)," \u2013 ").concat(t(e))})():"This Week",(0,vm.jsx)("span",{className:"stats-section-title-detail",children:(()=>{if(null!==T){var e,t;const n=null!==(e=null===(t=de[T])||void 0===t?void 0:t.minutes)&&void 0!==e?e:0;return"".concat(n,"m")}const n=de.reduce((e,t)=>e+(t.seconds||0),0);if(0===n)return"";const r=Math.floor(n/3600),i=Math.floor(n%3600/60);return r>0?"".concat(r,"h ").concat(i,"m"):"".concat(i,"m")})()})]}),(0,vm.jsx)("div",{className:"week-line-chart",ref:A,onTouchStart:e=>{e.preventDefault(),Ce(e.touches[0].clientX)},onTouchMove:e=>{e.preventDefault(),Ie(e.touches[0].clientX)},onTouchEnd:_e,onMouseDown:e=>Ce(e.clientX),onMouseMove:e=>{1===e.buttons&&Ie(e.clientX)},onMouseUp:_e,onMouseLeave:_e,children:(0,vm.jsxs)("svg",{viewBox:"0 0 ".concat(pe," ").concat(me),preserveAspectRatio:"xMidYMid meet",className:"week-line-svg",children:[we.map(e=>(0,vm.jsxs)("g",{children:[(0,vm.jsx)("line",{x1:0,x2:pe,y1:be(e),y2:be(e),stroke:"rgba(255,255,255,0.15)",strokeWidth:"1"}),(0,vm.jsx)("text",{x:2,y:be(e)+1,textAnchor:"start",dominantBaseline:"middle",fill:"rgba(255,255,255,0.3)",fontSize:"9",children:e})]},e)),null!==T&&(0,vm.jsx)("line",{x1:ye(T),x2:ye(T),y1:12,y2:98,stroke:"rgba(255,255,255,0.4)",strokeWidth:"1",strokeDasharray:"3,3"}),Se&&(0,vm.jsx)("path",{d:Se,fill:"none",stroke:"#e74c3c",strokeWidth:"2",strokeLinejoin:"round",strokeLinecap:"round"}),ke.map(e=>(0,vm.jsx)("circle",{cx:e.x,cy:e.y,r:4,fill:e.minutes>0?"#e74c3c":"#333"},e.i)),de.map((e,t)=>(0,vm.jsx)("text",{x:ye(t),y:124,textAnchor:"middle",fill:e.isToday?"#e74c3c":"rgba(255,255,255,0.3)",fontSize:"10",fontWeight:e.isToday?"600":"500",children:e.label},t))]})})]}),(0,vm.jsxs)("div",{className:"stats-section",children:[(0,vm.jsxs)("h3",{className:"stats-section-title",children:["Pinned Workouts ",(0,vm.jsxs)("span",{className:"stats-section-title-detail",children:[m.length,"/3"]})]}),(0,vm.jsxs)("div",{className:"stats-workout-cards",children:[Ae.map(Qe),(0,vm.jsxs)("div",{className:"stats-pin-add",onClick:Ge,children:[(0,vm.jsxs)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,vm.jsx)("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),(0,vm.jsx)("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),(0,vm.jsx)("span",{children:"Pin Workout"})]})]})]}),De&&(0,vm.jsx)("div",{className:"stats-pin-picker-overlay ".concat(Re?"closing":""),onClick:e=>{e.target===e.currentTarget&&Ke()},children:(0,vm.jsxs)("div",{className:"stats-pin-picker-panel",children:[(0,vm.jsxs)("div",{className:"stats-pin-picker-header",children:[(0,vm.jsxs)("span",{className:"stats-pin-picker-title",children:["Choose a Workout ",(0,vm.jsxs)("span",{className:"stats-pin-picker-count ".concat(Oe?"flash-red":""),children:[m.length,"/3"]})]}),(0,vm.jsx)("button",{className:"stats-pin-picker-close",onClick:Ke,children:(0,vm.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,vm.jsx)("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),(0,vm.jsx)("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),(0,vm.jsx)("div",{className:"stats-pin-picker-list",children:Ne.map(e=>{const t=m.includes(e.name);return(0,vm.jsx)("button",{className:"stats-pin-picker-item ".concat(t?"pinned":"").concat(t&&je?" pulse-hint":""),onClick:()=>(e=>{if(m.includes(e)){const t=m.filter(t=>t!==e);return void(g&&g(t))}if(m.length>=3)return Me(!0),Fe(!0),void setTimeout(()=>{Me(!1),Fe(!1)},600);const t=[...m,e];g&&g(t),Ke()})(e.name),children:e.name},e.name)})})]})})]})}),W&&(0,vm.jsx)("div",{className:"stats-detail-overlay ".concat("leaving"===q?"closing":""),onClick:e=>{e.target===e.currentTarget&&We()},children:(0,vm.jsxs)("div",{className:"stats-detail-panel",ref:Y,children:[(0,vm.jsxs)("div",{className:"stats-detail-header",children:[(0,vm.jsxs)("div",{className:"stats-detail-title-group ".concat((W.tags||(W.tag?[W.tag]:[])).length>0?"has-tags":""),children:[(0,vm.jsx)("h2",{className:"stats-detail-name",children:W.name}),(W.tags||(W.tag?[W.tag]:[])).length>0&&(0,vm.jsx)("div",{className:"stats-detail-tags-row",children:(W.tags||(W.tag?[W.tag]:[])).map(e=>(0,vm.jsx)("span",{className:"stats-detail-tag-pill",children:e.toUpperCase()},e))})]}),(0,vm.jsxs)("div",{className:"stats-detail-header-actions",children:[(0,vm.jsx)("button",{className:"stats-detail-share-btn",onClick:()=>He(W),children:(0,vm.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,vm.jsx)("path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"}),(0,vm.jsx)("polyline",{points:"16 6 12 2 8 6"}),(0,vm.jsx)("line",{x1:"12",y1:"2",x2:"12",y2:"15"})]})}),(0,vm.jsx)("button",{className:"stats-detail-close-btn",onClick:We,children:(0,vm.jsxs)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,vm.jsx)("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),(0,vm.jsx)("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]})]}),(0,vm.jsxs)("div",{className:"stats-detail-meta",children:[(0,vm.jsx)("span",{children:Be(60*W.exercises.length+l)}),(0,vm.jsx)("span",{className:"stats-detail-dot",children:"\xb7"}),(0,vm.jsxs)("span",{children:[W.exercises.length," exercises"]}),(0,vm.jsx)("span",{className:"stats-detail-dot",children:"\xb7"}),(0,vm.jsxs)("span",{children:["Rest ",null!=W.restTime?W.restTime:c,"s"]})]}),(0,vm.jsx)("div",{className:"stats-detail-exercises",children:W.exercises.map((e,t)=>(0,vm.jsxs)("div",{className:"stats-detail-exercise",children:[(0,vm.jsx)("span",{className:"stats-detail-exercise-num",children:t+1}),(0,vm.jsx)("span",{className:"stats-detail-exercise-name",children:e})]},"".concat(e,"-").concat(t)))}),(0,vm.jsx)("button",{className:"stats-detail-start-btn",onClick:()=>{We(),u&&u(W.name)},children:"Start Workout"})]})}),O&&(0,vm.jsx)("div",{className:"stats-follow-overlay ".concat(V?"closing":""),onClick:e=>{e.target===e.currentTarget&&Ve()},children:(0,vm.jsxs)("div",{className:"stats-follow-panel",children:[(0,vm.jsxs)("div",{className:"stats-follow-panel-header",children:[(0,vm.jsx)("span",{className:"stats-follow-panel-title",children:"following"===O?"Following":"Followers"}),(0,vm.jsx)("button",{className:"stats-follow-panel-close",onClick:Ve,children:(0,vm.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,vm.jsx)("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),(0,vm.jsx)("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),(0,vm.jsx)("div",{className:"stats-follow-panel-list",children:B?(0,vm.jsx)("div",{className:"stats-follow-panel-empty",children:"Loading..."}):0===j.length?(0,vm.jsx)("div",{className:"stats-follow-panel-empty",children:"following"===O?"Not following anyone yet":"No followers yet"}):j.map((e,t)=>(0,vm.jsxs)("div",{className:"stats-follow-panel-item",style:{animationDelay:"".concat(40*t,"ms")},children:[(0,vm.jsx)("div",{className:"stats-follow-panel-avatar",children:e.photoURL?(0,vm.jsx)("img",{src:e.photoURL,alt:"",referrerPolicy:"no-referrer"}):(0,vm.jsx)("div",{className:"stats-follow-panel-avatar-placeholder",children:(e.displayName||"?")[0].toUpperCase()})}),(0,vm.jsx)("span",{className:"stats-follow-panel-name",children:e.displayName})]},e.uid))})]})})]});return i?(0,vm.jsx)("div",{className:"stats-page",children:(0,vm.jsx)("div",{className:"stats-loading",children:"Loading..."})}):(0,vm.jsxs)("div",{className:"stats-page",children:[!t&&(0,vm.jsxs)(vm.Fragment,{children:[(0,vm.jsx)("div",{className:"stats-blur-wrapper",children:Ye()}),(0,vm.jsx)("div",{className:"stats-signin-overlay",children:(0,vm.jsx)("button",{className:"stats-signin-btn",onClick:o,children:"Sign in to track your stats"})})]}),t&&Ye()]})},Qk=n.p+"static/media/Tab1.644705db5cadae3d7152.jpg",Yk=n.p+"static/media/Tab2.9129897094ad3458e7fd.jpg",$k=n.p+"static/media/Tab4.3e48094e7240969b93d0.jpg",Xk=e=>{let{activeTab:t,onTabChange:n}=e;const[i,o]=(0,r.useState)("portrait");return(0,r.useEffect)(()=>{const e=()=>{window.screen&&window.screen.orientation?o(window.screen.orientation.type):o(window.innerHeight>window.innerWidth?"portrait":"landscape")};return e(),window.addEventListener("orientationchange",e),window.addEventListener("resize",e),()=>{window.removeEventListener("orientationchange",e),window.removeEventListener("resize",e)}},[]),(0,vm.jsxs)("div",{className:"tab-bar ".concat(i),children:[(0,vm.jsxs)("button",{className:"tab-item ".concat("home"===t?"active":""),onClick:()=>n("home"),children:[(0,vm.jsx)("div",{className:"tab-icon",children:(0,vm.jsx)("img",{src:Qk,alt:"Home"})}),(0,vm.jsx)("span",{className:"tab-label",children:"Home"})]}),(0,vm.jsxs)("button",{className:"tab-item ".concat("timer"===t?"active":""),onClick:()=>n("timer"),children:[(0,vm.jsx)("div",{className:"tab-icon",children:(0,vm.jsx)("img",{src:Yk,alt:"Timer"})}),(0,vm.jsx)("span",{className:"tab-label",children:"Timer"})]}),(0,vm.jsxs)("button",{className:"tab-item ".concat("stats"===t?"active":""),onClick:()=>n("stats"),children:[(0,vm.jsx)("div",{className:"tab-icon",children:(0,vm.jsx)("img",{src:$k,alt:"Stats"})}),(0,vm.jsx)("span",{className:"tab-label",children:"Stats"})]})]})},Jk=n.p+"static/media/Tab3.2dffe92ec627be42ba52.jpg",Zk=e=>{let{type:t,level:n,workouts:i,selectedWorkout:o,onWorkoutSelect:s,onArrowClick:a,onBack:l,onNavigateToTab:c}=e;const[u,d]=(0,r.useState)(o);r.useEffect(()=>{d(o)},[o]);return(0,vm.jsxs)("div",{className:"edit-page-container",children:[(0,vm.jsxs)("div",{className:"edit-page-header",children:[(0,vm.jsx)("button",{className:"close-button",onClick:()=>{console.log("Back button clicked"),l()},children:(0,vm.jsx)("span",{className:"close-icon",children:"\xd7"})}),(0,vm.jsx)("h1",{className:"edit-page-title",children:"categories"===n?"timer"===t?"Timer":"Stopwatch":"Edit ".concat(o)}),(0,vm.jsx)("img",{src:"timer"===t?Yk:Jk,alt:"timer"===t?"Timer":"Stopwatch",className:"header-image",onClick:()=>{c&&c(t)}})]}),(0,vm.jsx)("div",{className:"workouts-list",children:i.map((e,t)=>(0,vm.jsxs)("div",{className:"workout-item ".concat(u===e?"selected":""),onClick:()=>(e=>{d(e),s(e)})(e),children:[(0,vm.jsx)("div",{className:"workout-number",children:t+1}),(0,vm.jsx)("div",{className:"workout-name",children:e}),(0,vm.jsx)("div",{className:"arrow-indicator",onClick:t=>((e,t)=>{t.stopPropagation(),a(e)})(e,t),children:"\u2192"})]},t))}),"exercises"===n&&(0,vm.jsx)("div",{className:"edit-page-footer",children:(0,vm.jsxs)("p",{children:["Selected: ",u||"None"]})})]})},eS=e=>{let{workoutName:t,exercises:n,onSave:i,onBack:o,workoutType:s,onStart:a}=e;const[l,c]=(0,r.useState)([...n]),[u,h]=(0,r.useState)(!1),[f,p]=(0,r.useState)(""),[m,g]=(0,r.useState)(!1),[v,y]=(0,r.useState)(!1),[b,w]=(0,r.useState)(t),[k,S]=(0,r.useState)([...n]),[x,E]=(0,r.useState)(t),C=(0,r.useRef)(null);(0,r.useEffect)(()=>{const e=JSON.stringify(l)!==JSON.stringify(k)||b!==x;g(e)},[l,k,b,x]),(0,r.useEffect)(()=>{const e=e=>{v&&C.current&&!C.current.contains(e.target)&&y(!1)};return v&&(document.addEventListener("mousedown",e),document.addEventListener("touchstart",e)),()=>{document.removeEventListener("mousedown",e),document.removeEventListener("touchstart",e)}},[v]);const I=()=>{f.trim()&&(c([...l,f.trim()]),p(""),h(!1))},_=()=>{p(""),h(!1)};return(0,vm.jsxs)("div",{className:"exercise-edit-container",children:[(0,vm.jsxs)("div",{className:"exercise-edit-header",children:[(0,vm.jsx)("button",{className:"close-button",onClick:o,children:(0,vm.jsx)("span",{className:"close-icon",children:"\xd7"})}),v?(0,vm.jsx)("input",{ref:C,type:"text",value:b,onChange:e=>{w(e.target.value)},onKeyDown:e=>{"Enter"===e.key?y(!1):"Escape"===e.key&&(w(t),y(!1))},onBlur:()=>{y(!1)},className:"exercise-edit-title-input",autoFocus:!0}):(0,vm.jsx)("h1",{className:"exercise-edit-title",onClick:e=>{("ontouchstart"in window||navigator.maxTouchPoints>0)&&y(!0)},onDoubleClick:()=>{y(!0)},children:b})]}),(0,vm.jsx)(Qw,{onDragEnd:e=>{if(!e.destination)return;const t=Array.from(l),[n]=t.splice(e.source.index,1);t.splice(e.destination.index,0,n),c(t)},children:(0,vm.jsx)(Rk,{droppableId:"exercises",direction:"vertical",children:(e,t)=>(0,vm.jsxs)("div",d(d({},e.droppableProps),{},{ref:e.innerRef,className:"exercises-list",children:[l.map((e,t)=>(0,vm.jsx)(Nk,{draggableId:"".concat(e,"-").concat(t),index:t,children:(n,r)=>(0,vm.jsxs)("div",d(d(d({ref:n.innerRef},n.draggableProps),n.dragHandleProps),{},{className:"exercise-item ".concat(r.isDragging?"dragging":""),style:d(d({},n.draggableProps.style),{},{opacity:r.isDragging?.8:1,margin:0,padding:0}),children:[(0,vm.jsx)("div",{className:"exercise-number",children:t+1}),(0,vm.jsx)("div",{className:"exercise-name",children:e}),(0,vm.jsx)("button",{className:"delete-exercise-btn",onClick:()=>(e=>{const t=l.filter((t,n)=>n!==e);c(t)})(t),children:"\xd7"})]}))},"".concat(e,"-").concat(t))),e.placeholder]}))})}),(0,vm.jsxs)("div",{className:"exercise-edit-actions",children:[(0,vm.jsx)("button",{className:"add-exercise-btn",onClick:()=>{h(!0)},children:"+ Add Exercise"}),(0,vm.jsx)("button",{className:"save-btn",onClick:()=>{m||b!==x?(m||b!==x)&&(i(l,b),S([...l]),E(b)):a&&a()},children:m?"Save Changes":"Start"})]}),u&&(0,vm.jsxs)("div",{className:"add-exercise-popup",children:[(0,vm.jsx)("div",{className:"popup-overlay",onClick:_}),(0,vm.jsxs)("div",{className:"popup-content",children:[(0,vm.jsx)("h3",{children:"Add New Exercise"}),(0,vm.jsx)("input",{type:"text",placeholder:"Enter exercise name...",value:f,onChange:e=>p(e.target.value),onKeyDown:e=>{"Enter"===e.key?I():"Escape"===e.key&&_()},autoFocus:!0,className:"exercise-name-input"}),(0,vm.jsxs)("div",{className:"popup-actions",children:[(0,vm.jsx)("button",{className:"popup-btn cancel-btn",onClick:_,children:"Cancel"}),(0,vm.jsx)("button",{className:"popup-btn confirm-btn",onClick:I,children:"Add"})]})]})]})]})};var tS,nS=Object.defineProperty,rS=Object.getOwnPropertySymbols,iS=Object.prototype.hasOwnProperty,oS=Object.prototype.propertyIsEnumerable,sS=(e,t,n)=>t in e?nS(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,aS=(e,t)=>{for(var n in t||(t={}))iS.call(t,n)&&sS(e,n,t[n]);if(rS)for(var n of rS(t))oS.call(t,n)&&sS(e,n,t[n]);return e},lS=(e,t)=>{var n={};for(var r in e)iS.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&rS)for(var r of rS(e))t.indexOf(r)<0&&oS.call(e,r)&&(n[r]=e[r]);return n};(e=>{const t=class t{constructor(e,n,r,o){if(this.version=e,this.errorCorrectionLevel=n,this.modules=[],this.isFunction=[],e<t.MIN_VERSION||e>t.MAX_VERSION)throw new RangeError("Version value out of range");if(o<-1||o>7)throw new RangeError("Mask value out of range");this.size=4*e+17;let s=[];for(let t=0;t<this.size;t++)s.push(!1);for(let t=0;t<this.size;t++)this.modules.push(s.slice()),this.isFunction.push(s.slice());this.drawFunctionPatterns();const a=this.addEccAndInterleave(r);if(this.drawCodewords(a),-1==o){let e=1e9;for(let t=0;t<8;t++){this.applyMask(t),this.drawFormatBits(t);const n=this.getPenaltyScore();n<e&&(o=t,e=n),this.applyMask(t)}}i(0<=o&&o<=7),this.mask=o,this.applyMask(o),this.drawFormatBits(o),this.isFunction=[]}static encodeText(n,r){const i=e.QrSegment.makeSegments(n);return t.encodeSegments(i,r)}static encodeBinary(n,r){const i=e.QrSegment.makeBytes(n);return t.encodeSegments([i],r)}static encodeSegments(e,r){let o,a,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:40,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1,d=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];if(!(t.MIN_VERSION<=l&&l<=c&&c<=t.MAX_VERSION)||u<-1||u>7)throw new RangeError("Invalid value");for(o=l;;o++){const n=8*t.getNumDataCodewords(o,r),i=s.getTotalBits(e,o);if(i<=n){a=i;break}if(o>=c)throw new RangeError("Data too long")}for(const n of[t.Ecc.MEDIUM,t.Ecc.QUARTILE,t.Ecc.HIGH])d&&a<=8*t.getNumDataCodewords(o,n)&&(r=n);let h=[];for(const t of e){n(t.mode.modeBits,4,h),n(t.numChars,t.mode.numCharCountBits(o),h);for(const e of t.getData())h.push(e)}i(h.length==a);const f=8*t.getNumDataCodewords(o,r);i(h.length<=f),n(0,Math.min(4,f-h.length),h),n(0,(8-h.length%8)%8,h),i(h.length%8==0);for(let t=236;h.length<f;t^=253)n(t,8,h);let p=[];for(;8*p.length<h.length;)p.push(0);return h.forEach((e,t)=>p[t>>>3]|=e<<7-(7&t)),new t(o,r,p,u)}getModule(e,t){return 0<=e&&e<this.size&&0<=t&&t<this.size&&this.modules[t][e]}getModules(){return this.modules}drawFunctionPatterns(){for(let n=0;n<this.size;n++)this.setFunctionModule(6,n,n%2==0),this.setFunctionModule(n,6,n%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const e=this.getAlignmentPatternPositions(),t=e.length;for(let n=0;n<t;n++)for(let r=0;r<t;r++)0==n&&0==r||0==n&&r==t-1||n==t-1&&0==r||this.drawAlignmentPattern(e[n],e[r]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(e){const t=this.errorCorrectionLevel.formatBits<<3|e;let n=t;for(let r=0;r<10;r++)n=n<<1^1335*(n>>>9);const o=21522^(t<<10|n);i(o>>>15==0);for(let i=0;i<=5;i++)this.setFunctionModule(8,i,r(o,i));this.setFunctionModule(8,7,r(o,6)),this.setFunctionModule(8,8,r(o,7)),this.setFunctionModule(7,8,r(o,8));for(let i=9;i<15;i++)this.setFunctionModule(14-i,8,r(o,i));for(let i=0;i<8;i++)this.setFunctionModule(this.size-1-i,8,r(o,i));for(let i=8;i<15;i++)this.setFunctionModule(8,this.size-15+i,r(o,i));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let e=this.version;for(let n=0;n<12;n++)e=e<<1^7973*(e>>>11);const t=this.version<<12|e;i(t>>>18==0);for(let n=0;n<18;n++){const e=r(t,n),i=this.size-11+n%3,o=Math.floor(n/3);this.setFunctionModule(i,o,e),this.setFunctionModule(o,i,e)}}drawFinderPattern(e,t){for(let n=-4;n<=4;n++)for(let r=-4;r<=4;r++){const i=Math.max(Math.abs(r),Math.abs(n)),o=e+r,s=t+n;0<=o&&o<this.size&&0<=s&&s<this.size&&this.setFunctionModule(o,s,2!=i&&4!=i)}}drawAlignmentPattern(e,t){for(let n=-2;n<=2;n++)for(let r=-2;r<=2;r++)this.setFunctionModule(e+r,t+n,1!=Math.max(Math.abs(r),Math.abs(n)))}setFunctionModule(e,t,n){this.modules[t][e]=n,this.isFunction[t][e]=!0}addEccAndInterleave(e){const n=this.version,r=this.errorCorrectionLevel;if(e.length!=t.getNumDataCodewords(n,r))throw new RangeError("Invalid argument");const o=t.NUM_ERROR_CORRECTION_BLOCKS[r.ordinal][n],s=t.ECC_CODEWORDS_PER_BLOCK[r.ordinal][n],a=Math.floor(t.getNumRawDataModules(n)/8),l=o-a%o,c=Math.floor(a/o);let u=[];const d=t.reedSolomonComputeDivisor(s);for(let i=0,f=0;i<o;i++){let n=e.slice(f,f+c-s+(i<l?0:1));f+=n.length;const r=t.reedSolomonComputeRemainder(n,d);i<l&&n.push(0),u.push(n.concat(r))}let h=[];for(let t=0;t<u[0].length;t++)u.forEach((e,n)=>{(t!=c-s||n>=l)&&h.push(e[t])});return i(h.length==a),h}drawCodewords(e){if(e.length!=Math.floor(t.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let n=0;for(let t=this.size-1;t>=1;t-=2){6==t&&(t=5);for(let i=0;i<this.size;i++)for(let o=0;o<2;o++){const s=t-o,a=0==(t+1&2)?this.size-1-i:i;!this.isFunction[a][s]&&n<8*e.length&&(this.modules[a][s]=r(e[n>>>3],7-(7&n)),n++)}}i(n==8*e.length)}applyMask(e){if(e<0||e>7)throw new RangeError("Mask value out of range");for(let t=0;t<this.size;t++)for(let n=0;n<this.size;n++){let r;switch(e){case 0:r=(n+t)%2==0;break;case 1:r=t%2==0;break;case 2:r=n%3==0;break;case 3:r=(n+t)%3==0;break;case 4:r=(Math.floor(n/3)+Math.floor(t/2))%2==0;break;case 5:r=n*t%2+n*t%3==0;break;case 6:r=(n*t%2+n*t%3)%2==0;break;case 7:r=((n+t)%2+n*t%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[t][n]&&r&&(this.modules[t][n]=!this.modules[t][n])}}getPenaltyScore(){let e=0;for(let i=0;i<this.size;i++){let n=!1,r=0,o=[0,0,0,0,0,0,0];for(let s=0;s<this.size;s++)this.modules[i][s]==n?(r++,5==r?e+=t.PENALTY_N1:r>5&&e++):(this.finderPenaltyAddHistory(r,o),n||(e+=this.finderPenaltyCountPatterns(o)*t.PENALTY_N3),n=this.modules[i][s],r=1);e+=this.finderPenaltyTerminateAndCount(n,r,o)*t.PENALTY_N3}for(let i=0;i<this.size;i++){let n=!1,r=0,o=[0,0,0,0,0,0,0];for(let s=0;s<this.size;s++)this.modules[s][i]==n?(r++,5==r?e+=t.PENALTY_N1:r>5&&e++):(this.finderPenaltyAddHistory(r,o),n||(e+=this.finderPenaltyCountPatterns(o)*t.PENALTY_N3),n=this.modules[s][i],r=1);e+=this.finderPenaltyTerminateAndCount(n,r,o)*t.PENALTY_N3}for(let i=0;i<this.size-1;i++)for(let n=0;n<this.size-1;n++){const r=this.modules[i][n];r==this.modules[i][n+1]&&r==this.modules[i+1][n]&&r==this.modules[i+1][n+1]&&(e+=t.PENALTY_N2)}let n=0;for(const t of this.modules)n=t.reduce((e,t)=>e+(t?1:0),n);const r=this.size*this.size,o=Math.ceil(Math.abs(20*n-10*r)/r)-1;return i(0<=o&&o<=9),e+=o*t.PENALTY_N4,i(0<=e&&e<=2568888),e}getAlignmentPatternPositions(){if(1==this.version)return[];{const e=Math.floor(this.version/7)+2,t=32==this.version?26:2*Math.ceil((4*this.version+4)/(2*e-2));let n=[6];for(let r=this.size-7;n.length<e;r-=t)n.splice(1,0,r);return n}}static getNumRawDataModules(e){if(e<t.MIN_VERSION||e>t.MAX_VERSION)throw new RangeError("Version number out of range");let n=(16*e+128)*e+64;if(e>=2){const t=Math.floor(e/7)+2;n-=(25*t-10)*t-55,e>=7&&(n-=36)}return i(208<=n&&n<=29648),n}static getNumDataCodewords(e,n){return Math.floor(t.getNumRawDataModules(e)/8)-t.ECC_CODEWORDS_PER_BLOCK[n.ordinal][e]*t.NUM_ERROR_CORRECTION_BLOCKS[n.ordinal][e]}static reedSolomonComputeDivisor(e){if(e<1||e>255)throw new RangeError("Degree out of range");let n=[];for(let t=0;t<e-1;t++)n.push(0);n.push(1);let r=1;for(let i=0;i<e;i++){for(let e=0;e<n.length;e++)n[e]=t.reedSolomonMultiply(n[e],r),e+1<n.length&&(n[e]^=n[e+1]);r=t.reedSolomonMultiply(r,2)}return n}static reedSolomonComputeRemainder(e,n){let r=n.map(e=>0);for(const i of e){const e=i^r.shift();r.push(0),n.forEach((n,i)=>r[i]^=t.reedSolomonMultiply(n,e))}return r}static reedSolomonMultiply(e,t){if(e>>>8!=0||t>>>8!=0)throw new RangeError("Byte out of range");let n=0;for(let r=7;r>=0;r--)n=n<<1^285*(n>>>7),n^=(t>>>r&1)*e;return i(n>>>8==0),n}finderPenaltyCountPatterns(e){const t=e[1];i(t<=3*this.size);const n=t>0&&e[2]==t&&e[3]==3*t&&e[4]==t&&e[5]==t;return(n&&e[0]>=4*t&&e[6]>=t?1:0)+(n&&e[6]>=4*t&&e[0]>=t?1:0)}finderPenaltyTerminateAndCount(e,t,n){return e&&(this.finderPenaltyAddHistory(t,n),t=0),t+=this.size,this.finderPenaltyAddHistory(t,n),this.finderPenaltyCountPatterns(n)}finderPenaltyAddHistory(e,t){0==t[0]&&(e+=this.size),t.pop(),t.unshift(e)}};t.MIN_VERSION=1,t.MAX_VERSION=40,t.PENALTY_N1=3,t.PENALTY_N2=3,t.PENALTY_N3=40,t.PENALTY_N4=10,t.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],t.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]];function n(e,t,n){if(t<0||t>31||e>>>t!=0)throw new RangeError("Value out of range");for(let r=t-1;r>=0;r--)n.push(e>>>r&1)}function r(e,t){return 0!=(e>>>t&1)}function i(e){if(!e)throw new Error("Assertion error")}e.QrCode=t;const o=class e{constructor(e,t,n){if(this.mode=e,this.numChars=t,this.bitData=n,t<0)throw new RangeError("Invalid argument");this.bitData=n.slice()}static makeBytes(t){let r=[];for(const e of t)n(e,8,r);return new e(e.Mode.BYTE,t.length,r)}static makeNumeric(t){if(!e.isNumeric(t))throw new RangeError("String contains non-numeric characters");let r=[];for(let e=0;e<t.length;){const i=Math.min(t.length-e,3);n(parseInt(t.substring(e,e+i),10),3*i+1,r),e+=i}return new e(e.Mode.NUMERIC,t.length,r)}static makeAlphanumeric(t){if(!e.isAlphanumeric(t))throw new RangeError("String contains unencodable characters in alphanumeric mode");let r,i=[];for(r=0;r+2<=t.length;r+=2){let o=45*e.ALPHANUMERIC_CHARSET.indexOf(t.charAt(r));o+=e.ALPHANUMERIC_CHARSET.indexOf(t.charAt(r+1)),n(o,11,i)}return r<t.length&&n(e.ALPHANUMERIC_CHARSET.indexOf(t.charAt(r)),6,i),new e(e.Mode.ALPHANUMERIC,t.length,i)}static makeSegments(t){return""==t?[]:e.isNumeric(t)?[e.makeNumeric(t)]:e.isAlphanumeric(t)?[e.makeAlphanumeric(t)]:[e.makeBytes(e.toUtf8ByteArray(t))]}static makeEci(t){let r=[];if(t<0)throw new RangeError("ECI assignment value out of range");if(t<128)n(t,8,r);else if(t<16384)n(2,2,r),n(t,14,r);else{if(!(t<1e6))throw new RangeError("ECI assignment value out of range");n(6,3,r),n(t,21,r)}return new e(e.Mode.ECI,0,r)}static isNumeric(t){return e.NUMERIC_REGEX.test(t)}static isAlphanumeric(t){return e.ALPHANUMERIC_REGEX.test(t)}getData(){return this.bitData.slice()}static getTotalBits(e,t){let n=0;for(const r of e){const e=r.mode.numCharCountBits(t);if(r.numChars>=1<<e)return 1/0;n+=4+e+r.bitData.length}return n}static toUtf8ByteArray(e){e=encodeURI(e);let t=[];for(let n=0;n<e.length;n++)"%"!=e.charAt(n)?t.push(e.charCodeAt(n)):(t.push(parseInt(e.substring(n+1,n+3),16)),n+=2);return t}};o.NUMERIC_REGEX=/^[0-9]*$/,o.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,o.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let s=o;e.QrSegment=o})(tS||(tS={})),(e=>{let t;(e=>{const t=class{constructor(e,t){this.ordinal=e,this.formatBits=t}};t.LOW=new t(0,1),t.MEDIUM=new t(1,0),t.QUARTILE=new t(2,3),t.HIGH=new t(3,2);e.Ecc=t})(t=e.QrCode||(e.QrCode={}))})(tS||(tS={})),(e=>{let t;(e=>{const t=class{constructor(e,t){this.modeBits=e,this.numBitsCharCount=t}numCharCountBits(e){return this.numBitsCharCount[Math.floor((e+7)/17)]}};t.NUMERIC=new t(1,[10,12,14]),t.ALPHANUMERIC=new t(2,[9,11,13]),t.BYTE=new t(4,[8,16,16]),t.KANJI=new t(8,[8,10,12]),t.ECI=new t(7,[0,0,0]);e.Mode=t})(t=e.QrSegment||(e.QrSegment={}))})(tS||(tS={}));var cS=tS,uS={L:cS.QrCode.Ecc.LOW,M:cS.QrCode.Ecc.MEDIUM,Q:cS.QrCode.Ecc.QUARTILE,H:cS.QrCode.Ecc.HIGH},dS=128,hS="L",fS="#FFFFFF",pS="#000000",mS=!1,gS=1;function vS(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=[];return e.forEach(function(e,r){let i=null;e.forEach(function(o,s){if(!o&&null!==i)return n.push("M".concat(i+t," ").concat(r+t,"h").concat(s-i,"v1H").concat(i+t,"z")),void(i=null);if(s!==e.length-1)o&&null===i&&(i=s);else{if(!o)return;null===i?n.push("M".concat(s+t,",").concat(r+t," h1v1H").concat(s+t,"z")):n.push("M".concat(i+t,",").concat(r+t," h").concat(s+1-i,"v1H").concat(i+t,"z"))}})}),n.join("")}function yS(e,t){return e.slice().map((e,n)=>n<t.y||n>=t.y+t.h?e:e.map((e,n)=>(n<t.x||n>=t.x+t.w)&&e))}function bS(e){let{value:t,level:n,minVersion:i,includeMargin:o,marginSize:s,imageSettings:a,size:l,boostLevel:c}=e,u=r.useMemo(()=>{const e=(Array.isArray(t)?t:[t]).reduce((e,t)=>(e.push(...cS.QrSegment.makeSegments(t)),e),[]);return cS.QrCode.encodeSegments(e,uS[n],i,void 0,void 0,c)},[t,n,i,c]);const{cells:d,margin:h,numCells:f,calculatedImageSettings:p}=r.useMemo(()=>{let e=u.getModules();const t=function(e,t){return null!=t?Math.max(Math.floor(t),0):e?4:0}(o,s),n=e.length+2*t,r=function(e,t,n,r){if(null==r)return null;const i=e.length+2*n,o=Math.floor(.1*t),s=i/t,a=(r.width||o)*s,l=(r.height||o)*s,c=null==r.x?e.length/2-a/2:r.x*s,u=null==r.y?e.length/2-l/2:r.y*s,d=null==r.opacity?1:r.opacity;let h=null;if(r.excavate){let e=Math.floor(c),t=Math.floor(u);h={x:e,y:t,w:Math.ceil(a+c-e),h:Math.ceil(l+u-t)}}return{x:c,y:u,h:l,w:a,excavation:h,opacity:d,crossOrigin:r.crossOrigin}}(e,l,t,a);return{cells:e,margin:t,numCells:n,calculatedImageSettings:r}},[u,l,a,o,s]);return{qrcode:u,margin:h,cells:d,numCells:f,calculatedImageSettings:p}}var wS=function(){try{(new Path2D).addPath(new Path2D)}catch(e){return!1}return!0}(),kS=r.forwardRef(function(e,t){const n=e,{value:i,size:o=dS,level:s=hS,bgColor:a=fS,fgColor:l=pS,includeMargin:c=mS,minVersion:u=gS,boostLevel:d,marginSize:h,imageSettings:f}=n,p=lS(n,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:m}=p,g=lS(p,["style"]),v=null==f?void 0:f.src,y=r.useRef(null),b=r.useRef(null),w=r.useCallback(e=>{y.current=e,"function"===typeof t?t(e):t&&(t.current=e)},[t]),[k,S]=r.useState(!1),{margin:x,cells:E,numCells:C,calculatedImageSettings:I}=bS({value:i,level:s,minVersion:u,boostLevel:d,includeMargin:c,marginSize:h,imageSettings:f,size:o});r.useEffect(()=>{if(null!=y.current){const e=y.current,t=e.getContext("2d");if(!t)return;let n=E;const r=b.current,i=null!=I&&null!==r&&r.complete&&0!==r.naturalHeight&&0!==r.naturalWidth;i&&null!=I.excavation&&(n=yS(E,I.excavation));const s=window.devicePixelRatio||1;e.height=e.width=o*s;const c=o/C*s;t.scale(c,c),t.fillStyle=a,t.fillRect(0,0,C,C),t.fillStyle=l,wS?t.fill(new Path2D(vS(n,x))):E.forEach(function(e,n){e.forEach(function(e,r){e&&t.fillRect(r+x,n+x,1,1)})}),I&&(t.globalAlpha=I.opacity),i&&t.drawImage(r,I.x+x,I.y+x,I.w,I.h)}}),r.useEffect(()=>{S(!1)},[v]);const _=aS({height:o,width:o},m);let T=null;return null!=v&&(T=r.createElement("img",{src:v,key:v,style:{display:"none"},onLoad:()=>{S(!0)},ref:b,crossOrigin:null==I?void 0:I.crossOrigin})),r.createElement(r.Fragment,null,r.createElement("canvas",aS({style:_,height:o,width:o,ref:w,role:"img"},g)),T)});kS.displayName="QRCodeCanvas";var SS=r.forwardRef(function(e,t){const n=e,{value:i,size:o=dS,level:s=hS,bgColor:a=fS,fgColor:l=pS,includeMargin:c=mS,minVersion:u=gS,boostLevel:d,title:h,marginSize:f,imageSettings:p}=n,m=lS(n,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:g,cells:v,numCells:y,calculatedImageSettings:b}=bS({value:i,level:s,minVersion:u,boostLevel:d,includeMargin:c,marginSize:f,imageSettings:p,size:o});let w=v,k=null;null!=p&&null!=b&&(null!=b.excavation&&(w=yS(v,b.excavation)),k=r.createElement("image",{href:p.src,height:b.h,width:b.w,x:b.x+g,y:b.y+g,preserveAspectRatio:"none",opacity:b.opacity,crossOrigin:b.crossOrigin}));const S=vS(w,g);return r.createElement("svg",aS({height:o,width:o,viewBox:"0 0 ".concat(y," ").concat(y),ref:t,role:"img"},m),!!h&&r.createElement("title",null,h),r.createElement("path",{fill:a,d:"M0,0 h".concat(y,"v").concat(y,"H0z"),shapeRendering:"crispEdges"}),r.createElement("path",{fill:l,d:S,shapeRendering:"crispEdges"}),k)});SS.displayName="QRCodeSVG";const xS="https://hiitem.com",ES="Join me on HIITem \u2014 build and share custom HIIT workouts, follow friends, and track your progress! ".concat(xS),CS=e=>{let{isOpen:t,onClose:n,requestClose:i}=e;const{user:o}=wm(),[s,a]=(0,r.useState)("feed"),[l,c]=(0,r.useState)([]),[u,h]=(0,r.useState)([]),[f,p]=(0,r.useState)([]),[m,g]=(0,r.useState)({}),[v,y]=(0,r.useState)(!1),[b,w]=(0,r.useState)(!1),[k,S]=(0,r.useState)("suggested"),[x,E]=(0,r.useState)(""),[C,I]=(0,r.useState)([]),_=(0,r.useCallback)(async()=>{if(o){y(!0);try{const e=await async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30;const n=[e,...await zk(e)];if(0===n.length)return[];const r=[];for(let o=0;o<n.length;o+=30)r.push(n.slice(o,o+30));let i=[];for(const o of r){const e=Mp(Wf(um,"posts"),Fp("userId","in",o),Vp("createdAt","desc"),Wp(t)),n=(await nm(e)).docs.map(e=>{var t,n;const r=e.data();return d(d({id:e.id},r),{},{createdAt:(null===(t=r.createdAt)||void 0===t||null===(n=t.toDate)||void 0===n?void 0:n.call(t))||null})});i=i.concat(n)}return i.sort((e,t)=>(t.createdAt||0)-(e.createdAt||0)),i.slice(0,t)}(o.uid);if(c(e),e.length>0){const t=await(async(e,t)=>{if(0===e.length)return{};const n={};return await Promise.all(e.map(async e=>{const r=await tm(Hf(um,"posts",e,"likes",t));n[e]=r.exists()})),n})(e.map(e=>e.id),o.uid);g(t)}}catch(e){console.error("[Feed] Failed to load feed:",e.message,e)}finally{y(!1)}}},[o]),T=(0,r.useCallback)(async()=>{if(o){y(!0);try{const[e,t,n]=await Promise.all([Vk(),zk(o.uid),qk(o.uid)]);h(e.filter(e=>e.uid!==o.uid)),p(t),I(n)}catch(e){console.error("Failed to load people:",e)}finally{y(!1)}}},[o]);(0,r.useEffect)(()=>{t&&o&&("feed"===s?_():T())},[t,o,s,_,T]),(0,r.useEffect)(()=>{i&&t&&!b&&(w(!0),setTimeout(()=>{w(!1),n()},280))},[i,t,b,n]);const N=async e=>{if(o)try{await(async(e,t)=>{const n=am(um);n.set(Hf(um,"following",e,"userFollowing",t),{followedAt:_p()}),n.set(Hf(um,"followers",t,"userFollowers",e),{followedAt:_p()}),await n.commit()})(o.uid,e),p(t=>[...t,e])}catch(t){console.error("Failed to follow:",t)}},A=async e=>{if(o)try{await(async(e,t)=>{const n=am(um);n.delete(Hf(um,"following",e,"userFollowing",t)),n.delete(Hf(um,"followers",t,"userFollowers",e)),await n.commit()})(o.uid,e),p(t=>t.filter(t=>t!==e))}catch(t){console.error("Failed to unfollow:",t)}},D=async e=>{if(!o)return;const t=m[e];g(n=>d(d({},n),{},{[e]:!t})),c(n=>n.map(n=>n.id===e?d(d({},n),{},{likeCount:n.likeCount+(t?-1:1)}):n));try{await(async(e,t)=>{const n=Hf(um,"posts",e,"likes",t),r=Hf(um,"posts",e);if((await tm(n)).exists()){const e=am(um);return e.delete(n),e.set(r,{likeCount:Tp(-1)},{merge:!0}),await e.commit(),!1}{const e=am(um);return e.set(n,{userId:t,createdAt:_p()}),e.set(r,{likeCount:Tp(1)},{merge:!0}),await e.commit(),!0}})(e,o.uid)}catch(n){g(n=>d(d({},n),{},{[e]:t})),c(n=>n.map(n=>n.id===e?d(d({},n),{},{likeCount:n.likeCount+(t?1:-1)}):n)),console.error("Failed to toggle like:",n)}},P=async()=>{if(navigator.share)try{await navigator.share({title:"HIITem",text:ES,url:xS})}catch(e){}else try{await navigator.clipboard.writeText(ES),alert("Invite link copied!")}catch(t){window.prompt("Copy this invite link:",ES)}},R=e=>{if(!e&&0!==e)return"0:00";const t=Math.floor(e/60),n=e%60;return"".concat(t,":").concat(n.toString().padStart(2,"0"))},L=e=>{if(!x.trim())return e;const t=x.toLowerCase();return e.filter(e=>(e.displayName||e.name||"").toLowerCase().includes(t))};if(!t)return null;const O=(()=>{const e={};C.forEach(t=>{e[t.uid]=t.mutualCount});const t=u.filter(e=>!f.includes(e.uid)),n=u.filter(e=>f.includes(e.uid));return t.sort((t,n)=>{const r=e[t.uid]||0;return(e[n.uid]||0)-r}),[...t,...n].map(t=>d(d({},t),{},{mutualCount:e[t.uid]||0,isFollowing:f.includes(t.uid)}))})();return(0,vm.jsxs)("div",{className:"feed-page ".concat(b?"feed-page-closing":""),children:[(0,vm.jsxs)("div",{className:"feed-header",children:[(0,vm.jsx)("button",{className:"feed-back-btn",onClick:()=>{w(!0),setTimeout(()=>{w(!1),n()},280)},children:(0,vm.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,vm.jsx)("polyline",{points:"15 18 9 12 15 6"})})}),(0,vm.jsx)("span",{className:"feed-header-title",children:"Activity"}),(0,vm.jsx)("div",{className:"feed-header-spacer"})]}),(0,vm.jsxs)("div",{className:"feed-tabs",children:[(0,vm.jsx)("button",{className:"feed-tab ".concat("feed"===s?"active":""),onClick:()=>a("feed"),children:"Feed"}),(0,vm.jsx)("button",{className:"feed-tab ".concat("people"===s?"active":""),onClick:()=>a("people"),children:"People"})]}),(0,vm.jsxs)("div",{className:"feed-content",children:[!o&&(0,vm.jsx)("div",{className:"feed-empty",children:(0,vm.jsx)("p",{children:"Sign in to see activity"})}),o&&v&&(0,vm.jsx)("div",{className:"feed-empty",children:(0,vm.jsx)("p",{children:"Loading..."})}),o&&!v&&"feed"===s&&(0,vm.jsx)(vm.Fragment,{children:0===l.length?(0,vm.jsxs)("div",{className:"feed-empty",children:[(0,vm.jsx)("p",{children:"No posts yet"}),(0,vm.jsx)("span",{children:"Complete a workout or follow people to see activity here"})]}):l.map(e=>(0,vm.jsx)("div",{className:"feed-post-card",children:(0,vm.jsxs)("div",{className:"feed-post-header",children:[(0,vm.jsx)("div",{className:"feed-post-avatar",children:e.photoURL?(0,vm.jsx)("img",{src:e.photoURL,alt:"",referrerPolicy:"no-referrer"}):(0,vm.jsx)("div",{className:"feed-post-avatar-placeholder",children:(e.displayName||"?")[0].toUpperCase()})}),(0,vm.jsxs)("div",{className:"feed-post-meta",children:[(0,vm.jsx)("span",{className:"feed-post-name",children:e.displayName}),(0,vm.jsxs)("span",{className:"feed-post-time",children:[e.createdAt?e.createdAt.toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"}):"",e.createdAt?" at ".concat(e.createdAt.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"})):""]}),(0,vm.jsxs)("span",{className:"feed-post-subtitle",children:[e.workoutName," \xb7 ",R(e.duration)," \xb7 ",e.exerciseCount," exercises"]})]}),(0,vm.jsxs)("button",{className:"feed-like-btn ".concat(m[e.id]?"liked":""),onClick:()=>D(e.id),children:[(0,vm.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:m[e.id]?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,vm.jsx)("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"})}),(0,vm.jsx)("span",{children:e.likeCount||0})]})]})},e.id))}),o&&!v&&"people"===s&&(0,vm.jsxs)(vm.Fragment,{children:[(0,vm.jsxs)("div",{className:"feed-search-wrap",children:[(0,vm.jsxs)("svg",{className:"feed-search-icon",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,vm.jsx)("circle",{cx:"11",cy:"11",r:"8"}),(0,vm.jsx)("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),(0,vm.jsx)("input",{className:"feed-search",type:"text",placeholder:"Search for people",value:x,onChange:e=>E(e.target.value)})]}),(0,vm.jsxs)("div",{className:"feed-subtabs",children:[(0,vm.jsxs)("button",{className:"feed-subtab ".concat("suggested"===k?"active":""),onClick:()=>S("suggested"),children:[(0,vm.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,vm.jsx)("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),(0,vm.jsx)("circle",{cx:"9",cy:"7",r:"4"}),(0,vm.jsx)("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87"}),(0,vm.jsx)("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),(0,vm.jsx)("span",{children:"Suggested"})]}),(0,vm.jsxs)("button",{className:"feed-subtab ".concat("contacts"===k?"active":""),onClick:()=>S("contacts"),children:[(0,vm.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,vm.jsx)("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),(0,vm.jsx)("circle",{cx:"12",cy:"7",r:"4"})]}),(0,vm.jsx)("span",{children:"Contacts"})]}),(0,vm.jsxs)("button",{className:"feed-subtab ".concat("qr"===k?"active":""),onClick:()=>S("qr"),children:[(0,vm.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,vm.jsx)("rect",{x:"2",y:"2",width:"8",height:"8",rx:"1"}),(0,vm.jsx)("rect",{x:"14",y:"2",width:"8",height:"8",rx:"1"}),(0,vm.jsx)("rect",{x:"2",y:"14",width:"8",height:"8",rx:"1"}),(0,vm.jsx)("rect",{x:"14",y:"14",width:"4",height:"4",rx:"0.5"}),(0,vm.jsx)("line",{x1:"22",y1:"14",x2:"22",y2:"22"}),(0,vm.jsx)("line",{x1:"18",y1:"22",x2:"22",y2:"22"})]}),(0,vm.jsx)("span",{children:"QR Code"})]})]}),"suggested"===k&&(0,vm.jsx)(vm.Fragment,{children:0===L(O).length?(0,vm.jsxs)("div",{className:"feed-empty",children:[(0,vm.jsx)("p",{children:x?"No results":"No users yet"}),(0,vm.jsx)("span",{children:x?"Try a different name":"Invite friends to join"})]}):L(O).map(e=>(0,vm.jsxs)("div",{className:"feed-person-card",children:[(0,vm.jsx)("div",{className:"feed-person-avatar",children:e.photoURL?(0,vm.jsx)("img",{src:e.photoURL,alt:"",referrerPolicy:"no-referrer"}):(0,vm.jsx)("div",{className:"feed-person-avatar-placeholder",children:(e.displayName||"?")[0].toUpperCase()})}),(0,vm.jsxs)("div",{className:"feed-person-info",children:[(0,vm.jsx)("span",{className:"feed-person-name",children:e.displayName}),(0,vm.jsx)("span",{className:"feed-person-stats",children:e.mutualCount>0?"".concat(e.mutualCount," mutual friend").concat(1!==e.mutualCount?"s":""):"".concat(e.workoutCount||0," workouts")})]}),(0,vm.jsx)("button",{className:"feed-follow-btn ".concat(e.isFollowing?"following":""),onClick:()=>e.isFollowing?A(e.uid):N(e.uid),children:e.isFollowing?"Following":"Follow"})]},e.uid))}),"contacts"===k&&(0,vm.jsx)("div",{className:"feed-contacts-invite",children:(0,vm.jsxs)("button",{className:"feed-bottom-invite-btn",onClick:P,children:[(0,vm.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,vm.jsx)("circle",{cx:"18",cy:"5",r:"3"}),(0,vm.jsx)("circle",{cx:"6",cy:"12",r:"3"}),(0,vm.jsx)("circle",{cx:"18",cy:"19",r:"3"}),(0,vm.jsx)("line",{x1:"8.59",y1:"13.51",x2:"15.42",y2:"17.49"}),(0,vm.jsx)("line",{x1:"15.41",y1:"6.51",x2:"8.59",y2:"10.49"})]}),"Invite Friends"]})}),"qr"===k&&(0,vm.jsxs)("div",{className:"feed-qr-container",children:[(0,vm.jsx)("div",{className:"feed-qr-card",children:(0,vm.jsx)(SS,{value:xS,size:180,bgColor:"#ffffff",fgColor:"#0a0a0c",level:"M"})}),(0,vm.jsx)("span",{className:"feed-qr-label",children:"Scan to join"})]}),(0,vm.jsx)("div",{className:"feed-bottom-invite",children:(0,vm.jsxs)("button",{className:"feed-bottom-invite-btn",onClick:P,children:[(0,vm.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,vm.jsx)("circle",{cx:"18",cy:"5",r:"3"}),(0,vm.jsx)("circle",{cx:"6",cy:"12",r:"3"}),(0,vm.jsx)("circle",{cx:"18",cy:"19",r:"3"}),(0,vm.jsx)("line",{x1:"8.59",y1:"13.51",x2:"15.42",y2:"17.49"}),(0,vm.jsx)("line",{x1:"15.41",y1:"6.51",x2:"8.59",y2:"10.49"})]}),"Invite Friends"]})})]})]})]})},IS="#ff3b30",_S="#007aff",TS=["#ff9500","#34c759","#af52de","#ff2d55","#5ac8fa","#30b0c7","#ffffff"],NS=e=>{let{isOpen:t,onClose:n,requestClose:i,autoShareEnabled:o,onToggleAutoShare:s,sidePlankAlertEnabled:a,onToggleSidePlankAlert:l,prepTime:c,onPrepTimeChange:u,restTime:d,onRestTimeChange:h,activeLastMinute:f,onToggleActiveLastMinute:p,activeColor:m,restColor:g,onColorChange:v,showCardPhotos:y,onToggleShowCardPhotos:b}=e;const{user:w}=wm(),[k,S]=(0,r.useState)(!1),[x,E]=(0,r.useState)(null),[C,I]=(0,r.useState)([]),[_,T]=(0,r.useState)([]),[N,A]=(0,r.useState)(null),[D,P]=(0,r.useState)([]),[R,L]=(0,r.useState)(!1),O=(0,r.useRef)(0);(0,r.useEffect)(()=>{t&&w&&Promise.all([zk(w.uid),Wk(w.uid)]).then(e=>{let[t,n]=e;I(t),T(n)}).catch(e=>console.error("Failed to load follow counts:",e))},[t,w]);const M=(0,r.useCallback)(async e=>{if(N===e)return void A(null);A(e),L(!0);const t=++O.current,n="following"===e?C:_;try{const e=await Hk(n);t===O.current&&(P(e),L(!1))}catch(r){t===O.current&&(P([]),L(!1))}},[N,C,_]);(0,r.useEffect)(()=>{i&&t&&!k&&j()},[i,t,k]);const j=()=>{S(!0),A(null),setTimeout(()=>{S(!1),n()},280)};return t&&w?(0,vm.jsxs)("div",{className:"sidemenu-overlay ".concat(k?"sidemenu-overlay-closing":""),children:[(0,vm.jsxs)("div",{className:"sidemenu-panel ".concat(k?"sidemenu-panel-closing":""),children:[(0,vm.jsxs)("div",{className:"sidemenu-profile",children:[(0,vm.jsx)("div",{className:"sidemenu-avatar",children:w.photoURL?(0,vm.jsx)("img",{src:w.photoURL,alt:"",referrerPolicy:"no-referrer"}):(0,vm.jsx)("div",{className:"sidemenu-avatar-placeholder",children:(w.displayName||"?")[0].toUpperCase()})}),(0,vm.jsxs)("div",{className:"sidemenu-profile-info",children:[(0,vm.jsx)("span",{className:"sidemenu-profile-name",children:w.displayName}),(0,vm.jsx)("span",{className:"sidemenu-profile-email",children:w.email})]})]}),(0,vm.jsxs)("div",{className:"sidemenu-follow-row",children:[(0,vm.jsxs)("button",{className:"sidemenu-follow-stat ".concat("following"===N?"active":""),onClick:()=>M("following"),children:[(0,vm.jsx)("span",{className:"sidemenu-follow-count",children:C.length}),(0,vm.jsx)("span",{className:"sidemenu-follow-label",children:"Following"})]}),(0,vm.jsxs)("button",{className:"sidemenu-follow-stat ".concat("followers"===N?"active":""),onClick:()=>M("followers"),children:[(0,vm.jsx)("span",{className:"sidemenu-follow-count",children:_.length}),(0,vm.jsx)("span",{className:"sidemenu-follow-label",children:"Followers"})]})]}),(0,vm.jsxs)("div",{className:"sidemenu-items ".concat(N?"sidemenu-items-hidden":""),children:[(0,vm.jsxs)("div",{className:"sidemenu-item",onClick:async()=>{try{await mm(),j()}catch(e){console.error("Sign out error:",e)}},children:[(0,vm.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,vm.jsx)("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),(0,vm.jsx)("polyline",{points:"16 17 21 12 16 7"}),(0,vm.jsx)("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]}),(0,vm.jsx)("span",{className:"sidemenu-item-label",children:"Sign Out"})]}),(0,vm.jsx)("div",{className:"sidemenu-divider"}),(0,vm.jsxs)("div",{className:"sidemenu-item",onClick:s,children:[(0,vm.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,vm.jsx)("path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"}),(0,vm.jsx)("polyline",{points:"16 6 12 2 8 6"}),(0,vm.jsx)("line",{x1:"12",y1:"2",x2:"12",y2:"15"})]}),(0,vm.jsx)("span",{className:"sidemenu-item-label",children:"Auto-Share Workouts"}),(0,vm.jsx)("div",{className:"sidemenu-toggle ".concat(!0===o?"on":""),children:(0,vm.jsx)("div",{className:"sidemenu-toggle-knob"})})]}),(0,vm.jsx)("div",{className:"sidemenu-divider"}),(0,vm.jsxs)("div",{className:"sidemenu-item",onClick:l,children:[(0,vm.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:(0,vm.jsx)("path",{d:"M12 2v4M12 18v4M4.93 4.93l2.83 2.83M16.24 16.24l2.83 2.83M2 12h4M18 12h4M4.93 19.07l2.83-2.83M16.24 7.76l2.83-2.83"})}),(0,vm.jsx)("span",{className:"sidemenu-item-label",children:"Side plank switch side alert"}),(0,vm.jsx)("div",{className:"sidemenu-toggle ".concat(!0===a?"on":""),children:(0,vm.jsx)("div",{className:"sidemenu-toggle-knob"})})]}),(0,vm.jsx)("div",{className:"sidemenu-divider"}),(0,vm.jsxs)("div",{className:"sidemenu-item sidemenu-item-stepper",children:[(0,vm.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,vm.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,vm.jsx)("polyline",{points:"12 6 12 12 16 14"})]}),(0,vm.jsx)("span",{className:"sidemenu-item-label",children:"Prep time"}),(0,vm.jsxs)("div",{className:"sidemenu-stepper",children:[(0,vm.jsx)("button",{className:"sidemenu-stepper-btn",onClick:e=>{e.stopPropagation(),c>0&&u(c-5)},children:"\u2212"}),(0,vm.jsxs)("span",{className:"sidemenu-stepper-value",children:[c,"s"]}),(0,vm.jsx)("button",{className:"sidemenu-stepper-btn",onClick:e=>{e.stopPropagation(),c<30&&u(c+5)},children:"+"})]})]}),(0,vm.jsxs)("div",{className:"sidemenu-item sidemenu-item-stepper",children:[(0,vm.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,vm.jsx)("path",{d:"M18.36 5.64a9 9 0 1 1-12.73 0"}),(0,vm.jsx)("line",{x1:"12",y1:"2",x2:"12",y2:"12"})]}),(0,vm.jsx)("span",{className:"sidemenu-item-label",children:"Rest time"}),(0,vm.jsxs)("div",{className:"sidemenu-stepper",children:[(0,vm.jsx)("button",{className:"sidemenu-stepper-btn",onClick:e=>{e.stopPropagation(),d>0&&h(d-5)},children:"\u2212"}),(0,vm.jsxs)("span",{className:"sidemenu-stepper-value",children:[d,"s"]}),(0,vm.jsx)("button",{className:"sidemenu-stepper-btn",onClick:e=>{e.stopPropagation(),d<30&&h(d+5)},children:"+"})]})]}),(0,vm.jsx)("div",{className:"sidemenu-divider"}),(0,vm.jsxs)("div",{className:"sidemenu-item",onClick:p,children:[(0,vm.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:(0,vm.jsx)("polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"})}),(0,vm.jsx)("span",{className:"sidemenu-item-label",children:"Stay active last minute"}),(0,vm.jsx)("div",{className:"sidemenu-toggle ".concat(!0===f?"on":""),children:(0,vm.jsx)("div",{className:"sidemenu-toggle-knob"})})]}),(0,vm.jsx)("div",{className:"sidemenu-divider"}),(0,vm.jsxs)("div",{className:"sidemenu-item",onClick:b,children:[(0,vm.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,vm.jsx)("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),(0,vm.jsx)("circle",{cx:"12",cy:"12",r:"3"})]}),(0,vm.jsx)("span",{className:"sidemenu-item-label",children:"Show profile on cards"}),(0,vm.jsx)("div",{className:"sidemenu-toggle ".concat(!0===y?"on":""),children:(0,vm.jsx)("div",{className:"sidemenu-toggle-knob"})})]}),(0,vm.jsx)("div",{className:"sidemenu-divider"}),(0,vm.jsxs)("div",{className:"sidemenu-color-section",children:[(0,vm.jsx)("span",{className:"sidemenu-color-header",children:"Timer Colors"}),(0,vm.jsxs)("div",{className:"sidemenu-color-row",children:[(0,vm.jsx)("span",{className:"sidemenu-color-label",children:"Active"}),(0,vm.jsx)("div",{className:"sidemenu-color-preview",style:{background:m},onClick:()=>E("active"===x?null:"active")})]}),(0,vm.jsxs)("div",{className:"sidemenu-color-row",children:[(0,vm.jsx)("span",{className:"sidemenu-color-label",children:"Rest"}),(0,vm.jsx)("div",{className:"sidemenu-color-preview",style:{background:g},onClick:()=>E("rest"===x?null:"rest")})]})]})]}),N&&(0,vm.jsx)("div",{className:"sidemenu-follow-list",children:R?(0,vm.jsx)("div",{className:"sidemenu-follow-list-empty",children:"Loading..."}):0===D.length?(0,vm.jsx)("div",{className:"sidemenu-follow-list-empty",children:"following"===N?"Not following anyone yet":"No followers yet"}):D.map((e,t)=>(0,vm.jsxs)("div",{className:"sidemenu-follow-list-item",style:{animationDelay:"".concat(40*t,"ms")},children:[(0,vm.jsx)("div",{className:"sidemenu-follow-list-avatar",children:e.photoURL?(0,vm.jsx)("img",{src:e.photoURL,alt:"",referrerPolicy:"no-referrer"}):(0,vm.jsx)("div",{className:"sidemenu-follow-list-avatar-placeholder",children:(e.displayName||"?")[0].toUpperCase()})}),(0,vm.jsx)("span",{className:"sidemenu-follow-list-name",children:e.displayName})]},e.uid))})]}),x&&(0,vm.jsx)("div",{className:"sidemenu-color-popup-overlay",onClick:()=>E(null),children:(0,vm.jsx)("div",{className:"sidemenu-color-popup",onClick:e=>e.stopPropagation(),children:(0,vm.jsx)("div",{className:"sidemenu-color-popup-swatches",children:[..."active"===x?[IS,_S]:[_S,IS],...TS].map(e=>(0,vm.jsx)("div",{className:"sidemenu-swatch ".concat(("active"===x?m:g)===e?"selected":""),style:{background:e},onClick:()=>{v(x,e),E(null)}},e))})})}),(0,vm.jsx)("div",{className:"sidemenu-backdrop",onClick:()=>{j()}})]}):null},AS=e=>{let{isOpen:t,onClose:n,requestClose:i}=e;const[o,s]=(0,r.useState)("picker"),[a,l]=(0,r.useState)(!0),[c,u]=(0,r.useState)(""),[d,h]=(0,r.useState)(""),[f,p]=(0,r.useState)(""),[m,g]=(0,r.useState)(""),[v,y]=(0,r.useState)(!1),[b,w]=(0,r.useState)(!1);(0,r.useEffect)(()=>{t&&(s("picker"),l(!0),u(""),h(""),p(""),g(""),y(!1),w(!1))},[t]),(0,r.useEffect)(()=>{i&&t&&!b&&k()},[i,t,b]);const k=()=>{w(!0),setTimeout(()=>{w(!1),n()},280)},S=e=>{switch(e){case"auth/email-already-in-use":return"An account with this email already exists";case"auth/invalid-email":return"Invalid email address";case"auth/weak-password":return"Password must be at least 6 characters";case"auth/user-not-found":return"No account found with this email";case"auth/wrong-password":return"Incorrect password";case"auth/invalid-credential":return"Invalid email or password";case"auth/too-many-requests":return"Too many attempts. Try again later";default:return"Something went wrong. Please try again"}};return t?(0,vm.jsxs)("div",{className:"login-modal ".concat(b?"login-modal-closing":""),children:[(0,vm.jsxs)("div",{className:"login-header",children:["email"===o?(0,vm.jsx)("button",{className:"login-back-btn",onClick:()=>{s("picker"),g("")},children:(0,vm.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,vm.jsx)("polyline",{points:"15 18 9 12 15 6"})})}):(0,vm.jsx)("button",{className:"login-close-btn",onClick:k,children:(0,vm.jsxs)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,vm.jsx)("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),(0,vm.jsx)("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})}),(0,vm.jsx)("span",{className:"login-header-title",children:"Sign in"}),(0,vm.jsx)("div",{className:"login-header-spacer"})]}),(0,vm.jsxs)("div",{className:"login-content",children:["picker"===o&&(0,vm.jsxs)(vm.Fragment,{children:[(0,vm.jsxs)("div",{className:"login-picker-top",children:[(0,vm.jsx)("span",{className:"login-brand-title",children:"HIITem"}),(0,vm.jsxs)("button",{className:"login-method-btn login-google-btn",onClick:async()=>{try{g(""),await hm(),k()}catch(e){"auth/popup-closed-by-user"!==e.code&&g(S(e.code))}},children:[(0,vm.jsxs)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",children:[(0,vm.jsx)("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92a5.06 5.06 0 0 1-2.2 3.32v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.1z",fill:"#4285F4"}),(0,vm.jsx)("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),(0,vm.jsx)("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",fill:"#FBBC05"}),(0,vm.jsx)("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),"Continue with Google"]})]}),(0,vm.jsx)("div",{className:"login-divider",children:(0,vm.jsx)("span",{children:"or"})}),(0,vm.jsxs)("div",{className:"login-picker-bottom",children:[(0,vm.jsxs)("button",{className:"login-method-btn login-email-btn",onClick:()=>s("email"),children:[(0,vm.jsxs)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,vm.jsx)("path",{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"}),(0,vm.jsx)("polyline",{points:"22,6 12,13 2,6"})]}),"Continue with Email"]}),m&&(0,vm.jsx)("p",{className:"login-error",children:m})]})]}),"email"===o&&(0,vm.jsxs)("form",{className:"login-email-form",onSubmit:async e=>{e.preventDefault(),g(""),y(!0);try{a?await fm(d,f,c.trim()||"Anonymous"):await pm(d,f),k()}catch(t){g(S(t.code))}finally{y(!1)}},children:[(0,vm.jsxs)("div",{className:"login-mode-tabs",children:[(0,vm.jsx)("button",{type:"button",className:"login-mode-tab ".concat(a?"active":""),onClick:()=>{l(!0),g("")},children:"Sign Up"}),(0,vm.jsx)("button",{type:"button",className:"login-mode-tab ".concat(a?"":"active"),onClick:()=>{l(!1),g("")},children:"Sign In"})]}),a&&(0,vm.jsx)("input",{className:"login-input",type:"text",placeholder:"Display Name",value:c,onChange:e=>u(e.target.value),autoComplete:"name"}),(0,vm.jsx)("input",{className:"login-input",type:"email",placeholder:"Email",value:d,onChange:e=>h(e.target.value),required:!0,autoComplete:"email"}),(0,vm.jsx)("input",{className:"login-input",type:"password",placeholder:"Password",value:f,onChange:e=>p(e.target.value),required:!0,minLength:6,autoComplete:a?"new-password":"current-password"}),m&&(0,vm.jsx)("p",{className:"login-error",children:m}),(0,vm.jsx)("button",{className:"login-submit-btn",type:"submit",disabled:v,children:v?"Please wait...":a?"Sign Up":"Sign In"}),(0,vm.jsx)("p",{className:"login-toggle",onClick:()=>{l(!a),g("")},children:a?"Already have an account?":"Don't have an account?"})]})]})]}):null},DS=e=>{let{onShare:t,onDismiss:n}=e;return(0,vm.jsx)("div",{className:"share-prompt-overlay",onClick:n,children:(0,vm.jsxs)("div",{className:"share-prompt-card",onClick:e=>e.stopPropagation(),children:[(0,vm.jsx)("div",{className:"share-prompt-icon",children:(0,vm.jsxs)("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,vm.jsx)("path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"}),(0,vm.jsx)("polyline",{points:"16 6 12 2 8 6"}),(0,vm.jsx)("line",{x1:"12",y1:"2",x2:"12",y2:"15"})]})}),(0,vm.jsx)("h3",{className:"share-prompt-title",children:"Share Your Workouts?"}),(0,vm.jsx)("p",{className:"share-prompt-text",children:"Automatically share completed workouts to the activity feed so friends can see your progress."}),(0,vm.jsxs)("div",{className:"share-prompt-buttons",children:[(0,vm.jsx)("button",{className:"share-prompt-btn share-prompt-btn-primary",onClick:t,children:"Share My Workouts"}),(0,vm.jsx)("button",{className:"share-prompt-btn share-prompt-btn-secondary",onClick:n,children:"Not Now"})]})]})})},PS=[{name:"The Devils 10",type:"timer",exercises:["Russian Twist","Seated in and outs","Boat hold","Jack knifes","Sit up twist","Leg raises","Chair sit ups","Plank knees to elbows","Side planks dips","Bicycle","Boat hold leg flutters"]},{name:"Abs 2",type:"timer",exercises:["Leg raises","Single leg raises","Chair crunches","In and outs","Sit ups","Planks","Bicycles","Russian twists"]},{name:"Core Blaster",type:"timer",exercises:["Mountain climbers","Plank to pushup","Dead bug","Hollow body hold","Side plank dips","Bicycle crunches","Leg raises","Russian twists","Plank jacks","Sit-up to stand"]},{name:"Leg Day Hell",type:"timer",exercises:["Squats","Jump squats","Lunges","Single leg deadlifts","Wall sits","Calf raises","Glute bridges","Side lunges","Pistol squats","Bulgarian split squats"]},{name:"Full Body Burn",type:"timer",exercises:["Burpees","Jumping jacks","High knees","Mountain climbers","Push-ups","Squats","Plank","Jump squats","Tricep dips","Lunges"]},{name:"Cardio Inferno",type:"timer",exercises:["Jumping jacks","High knees","Butt kicks","Mountain climbers","Burpees","Jump squats","Plank jacks","Star jumps","Skaters","Sprint in place"]}],RS=[{name:"Back & Bis",type:"stopwatch",exercises:["10 pull ups (or muscle ups)","Bent over one arm curls","Dead lift","10 pull ups","Bent over curls","Shrugs","Bicep curls","Concentrated curls","10 pull ups"]},{name:"Shoulders",type:"stopwatch",exercises:["Normal handstand hold","Handstand pushups (Max against wall)","Pike pushups","Shoulder flies outwards","Shoulder flies front","Bent over shoulder flies outwards","Parallets handstand hold","Parallets ground to handstand wall cheat","Handstand against wall 1 minute"]},{name:"Chest & Tris",type:"stopwatch",exercises:["Inclined press","Jumping pushups","Curl press","Close pushups","Flies","Dips","Close inclined press","Archer pushups","Bench dips"]},{name:"Legs & Glutes",type:"stopwatch",exercises:["Squats","Deadlifts","Lunges","Glute bridges","Calf raises","Wall sits","Single leg deadlifts","Bulgarian split squats","Hip thrusts"]},{name:"Upper Body Power",type:"stopwatch",exercises:["Pull-ups","Push-ups","Dips","Pike push-ups","Inverted rows","Diamond push-ups","Archer push-ups","Handstand push-ups","Muscle-ups"]},{name:"Strength & Endurance",type:"stopwatch",exercises:["Deadlifts","Squats","Pull-ups","Push-ups","Plank holds","Burpees","Mountain climbers","Jump squats","Dips"]}],LS=async e=>(await nm(Wf(um,"users",e,"customWorkouts"))).docs.map(e=>d({id:e.id},e.data())),OS=async(e,t)=>{var n,r;const i=Wf(um,"users",e,"customWorkouts"),o=(await nm(i)).docs.find(e=>{const n=e.data();return!n.deleted&&(n.name===t.name||t.defaultName&&n.defaultName===t.defaultName||n.defaultName===t.name)}),s={name:t.name,type:t.type,exercises:t.exercises,isDefault:t.isDefault||!1,isCustom:t.isCustom||!1,defaultName:t.defaultName||null,restTime:null!==(n=t.restTime)&&void 0!==n?n:null,isPublic:null!==(r=t.isPublic)&&void 0!==r&&r,tags:t.tags||null,updatedAt:_p()};o?await rm(Hf(um,"users",e,"customWorkouts",o.id),s,{merge:!0}):await im(i,d(d({},s),{},{createdAt:_p()}))},MS=async e=>{const t=Mp(Wf(um,"users",e,"history"),Vp("completedAt","desc"));return(await nm(t)).docs.map(e=>{var t,n,r,i;const o=e.data();return d(d({id:e.id},o),{},{completedAt:(null===(t=o.completedAt)||void 0===t||null===(n=t.toDate)||void 0===n?void 0:n.call(t))||null,date:(null===(r=o.date)||void 0===r||null===(i=r.toDate)||void 0===i?void 0:i.call(r))||null})})},jS=async(e,t,n)=>{const r=Wf(um,"users",e,"customWorkouts"),i=(await nm(r)).docs.find(e=>{const n=e.data();return!n.isCustom&&(n.name===t||n.defaultName===t)});var o;n?i?await rm(Hf(um,"users",e,"customWorkouts",i.id),{deleted:!0,defaultName:t,updatedAt:_p()}):await im(r,{deleted:!0,defaultName:t,createdAt:_p(),updatedAt:_p()}):i&&await(o=Hf(um,"users",e,"customWorkouts",i.id),om($o(o.firestore,Qf),[new Ec(o._key,dc.none())]))},FS=async(e,t)=>{const n={workoutName:t.workoutName,workoutType:t.workoutType,date:_p(),duration:t.duration,setCount:t.setCount,exercises:t.exercises,completedAt:_p()};t.workoutId&&(n.workoutId=t.workoutId),await im(Wf(um,"users",e,"history"),n)},BS=e=>{if(!e||"string"!==typeof e||e.length<7)return"255, 59, 48";const t=parseInt(e.slice(1,3),16),n=parseInt(e.slice(3,5),16),r=parseInt(e.slice(5,7),16);return isNaN(t)||isNaN(n)||isNaN(r)?"255, 59, 48":"".concat(t,", ").concat(n,", ").concat(r)},US=()=>{const[e,t]=(0,r.useState)("timer"),{user:n,loading:i}=wm(),[o,s]=(0,r.useState)(!0),[a,l]=(0,r.useState)(!1);(0,r.useEffect)(()=>{if(a)return;if(!i&&!n)return void l(!0);const e=setTimeout(()=>l(!0),2500);return()=>clearTimeout(e)},[i,n,a]);const[c,u]=(0,r.useState)(PS),[h,f]=(0,r.useState)(RS),p=c.map(e=>e.name),m=h.map(e=>e.name),g=(0,r.useCallback)(e=>{if("New Workout"===e)return[];const t=[...c,...h].find(t=>t.name===e);return t?t.exercises:[]},[c,h]),[v,y]=(0,r.useState)(15),[b,w]=(0,r.useState)(15),[k,S]=(0,r.useState)(!0),x=(0,r.useCallback)(e=>60*g(e||"The Devils 10").length+v,[g,v]),[E,C]=(0,r.useState)(()=>{const e=60*PS[0].exercises.length+15;return{timeLeft:e,isRunning:!1,targetTime:e,selectedWorkoutIndex:0}}),[I,_]=(0,r.useState)({time:0,isRunning:!1,laps:[]}),[T,N]=(0,r.useState)(!1),[A,D]=(0,r.useState)(!1),[P,R]=(0,r.useState)(0),[L,O]=(0,r.useState)(!1),[M,j]=(0,r.useState)(0),[F,B]=(0,r.useState)(-1),[U,V]=(0,r.useState)(null),[z,W]=(0,r.useState)("categories"),[H,q]=(0,r.useState)(null),[G,K]=(0,r.useState)("The Devils 10"),[Q,Y]=(0,r.useState)("Back & Bis"),[$,X]=(0,r.useState)([]),[J,Z]=(0,r.useState)(!1),[ee,te]=(0,r.useState)(!1),[ne,re]=(0,r.useState)(!1),[ie,oe]=(0,r.useState)(!1),[se,ae]=(0,r.useState)(!1),[le,ce]=(0,r.useState)(!1),[ue,de]=(0,r.useState)(null),[he,fe]=(0,r.useState)(null),[pe,me]=(0,r.useState)(!1),[ge,ve]=(0,r.useState)(!1),[ye,be]=(0,r.useState)(!1),[we,ke]=(0,r.useState)("#ff3b30"),[Se,xe]=(0,r.useState)("#007aff"),[Ee,Ce]=(0,r.useState)(!0),[Ie,_e]=(0,r.useState)(!0),[Te,Ne]=(0,r.useState)([]),[Ae,De]=(0,r.useState)([]),[Pe,Re]=(0,r.useState)([]);(0,r.useEffect)(()=>{if(!n)return u(PS),f(RS),X([]),fe(null),ke("#ff3b30"),xe("#007aff"),Ce(!0),_e(!0),Ne([]),De([]),Re([]),y(15),w(15),S(!0),void K("The Devils 10");let e=!1;return(async()=>{try{const[t,r]=await Promise.all([LS(n.uid),jk(n.uid)]);if(e)return;if(t.length>0){const e=Le(t);let n=e.timer;if(r&&r.length>0){const e=new Map(r.map((e,t)=>[e,t]));n=[...n].sort((t,n)=>(e.has(t.name)?e.get(t.name):r.length)-(e.has(n.name)?e.get(n.name):r.length))}u(n),f(e.stopwatch)}else if(r&&r.length>0){const e=new Map(r.map((e,t)=>[e,t]));u(t=>[...t].sort((t,n)=>(e.has(t.name)?e.get(t.name):r.length)-(e.has(n.name)?e.get(n.name):r.length)))}}catch(t){console.error("Failed to load workouts:",t)}})(),(async()=>{Z(!0);try{const t=await MS(n.uid);e||X(t)}catch(t){console.error("Failed to load history:",t)}finally{e||Z(!1)}})(),(async()=>{try{await(async e=>{const t=Hf(um,"userProfiles",e.uid);(await tm(t)).exists()?await rm(t,{displayName:e.displayName||"Anonymous",photoURL:e.photoURL||null,updatedAt:_p()},{merge:!0}):await rm(t,{uid:e.uid,displayName:e.displayName||"Anonymous",photoURL:e.photoURL||null,workoutCount:0,autoShare:null,createdAt:_p(),updatedAt:_p()})})(n)}catch(t){console.error("Failed to ensure user profile:",t)}try{const t=await(async e=>{var t,n,r,i,o,s;const a=await tm(Hf(um,"users",e,"settings","preferences"));if(!a.exists())return{autoShare:null,activeColor:null,restColor:null,workoutOrder:null,sidePlankAlert:!0,prepTime:15,restTime:15,activeLastMinute:!0,selectedWorkout:null,showCardPhotos:!0,pinnedWorkouts:[]};const l=a.data();return{autoShare:null!==(t=l.autoShare)&&void 0!==t?t:null,activeColor:l.activeColor||null,restColor:l.restColor||null,workoutOrder:l.workoutOrder||null,sidePlankAlert:null===(n=l.sidePlankAlert)||void 0===n||n,prepTime:null!==(r=l.prepTime)&&void 0!==r?r:15,restTime:null!==(i=l.restTime)&&void 0!==i?i:15,activeLastMinute:null===(o=l.activeLastMinute)||void 0===o||o,selectedWorkout:l.selectedWorkout||null,showCardPhotos:null===(s=l.showCardPhotos)||void 0===s||s,pinnedWorkouts:l.pinnedWorkouts||[]}})(n.uid);if(e)return;fe(t.autoShare),t.activeColor&&ke(t.activeColor),t.restColor&&xe(t.restColor),Ce(t.sidePlankAlert),_e(t.showCardPhotos),Ne(t.pinnedWorkouts||[]),y(t.prepTime),w(t.restTime),S(t.activeLastMinute),t.selectedWorkout&&K(t.selectedWorkout),l(!0),Promise.all([zk(n.uid),Wk(n.uid)]).then(t=>{let[n,r]=t;e||(De(n),Re(r))}).catch(e=>console.error("Failed to load follow data:",e))}catch(t){console.error("Failed to load settings:",t)}})(),()=>{e=!0}},[n]);const Le=e=>{const t=[...PS],n=[...RS],r=e.filter(e=>e.deleted).map(e=>e.defaultName).filter(Boolean),i=t.filter(e=>!r.includes(e.name)).map(t=>{const n=e.find(e=>!e.deleted&&(e.defaultName===t.name||!e.defaultName&&e.name===t.name));return n?d(d(d({},t),n),{},{exercises:n.exercises}):t}),o=n.filter(e=>!r.includes(e.name)).map(t=>{const n=e.find(e=>!e.deleted&&(e.defaultName===t.name||!e.defaultName&&e.name===t.name));return n?d(d(d({},t),n),{},{exercises:n.exercises}):t}),s=[...t,...n].map(e=>e.name);return e.forEach(e=>{if(e.deleted)return;if(e.isCustom)return void("timer"===e.type?i.push(e):o.push(e));s.includes(e.name)||s.includes(e.defaultName)||("timer"===e.type?i.push(e):o.push(e))}),{timer:i,stopwatch:o}},Oe=(0,r.useCallback)(async e=>{if(n)try{await(async(e,t,n)=>{const r=await im(Wf(um,"posts"),{userId:e,displayName:n.displayName||"Anonymous",photoURL:n.photoURL||null,workoutName:t.workoutName,workoutType:t.workoutType,duration:t.duration,exerciseCount:t.exercises.length,exercises:t.exercises,likeCount:0,createdAt:_p()});return await rm(Hf(um,"userProfiles",e),{workoutCount:Tp(1),updatedAt:_p()},{merge:!0}),r.id})(n.uid,e,{displayName:n.displayName,photoURL:n.photoURL})}catch(t){console.error("Failed to share workout:",t)}},[n]),Me=(0,r.useCallback)(async()=>{n&&(await Fk(n.uid,!0),fe(!0),ce(!1),ue&&(Oe(ue),de(null)))},[n,ue,Oe]),je=(0,r.useCallback)(async()=>{if(!n)return;const e=!0!==he;fe(e),await Fk(n.uid,e)},[n,he]),Fe=(0,r.useCallback)(async()=>{const e=!Ee;Ce(e),n&&(async(e,t)=>{await rm(Hf(um,"users",e,"settings","preferences"),{sidePlankAlert:t,updatedAt:_p()},{merge:!0})})(n.uid,e).catch(e=>console.error("Failed to save side plank alert:",e))},[n,Ee]),Be=(0,r.useCallback)(async e=>{Ne(e),n&&(async(e,t)=>{await rm(Hf(um,"users",e,"settings","preferences"),{pinnedWorkouts:t,updatedAt:_p()},{merge:!0})})(n.uid,e).catch(e=>console.error("Failed to save pinned workouts:",e))},[n]),Ue=(0,r.useCallback)(async()=>{const e=!Ie;_e(e),n&&(async(e,t)=>{await rm(Hf(um,"users",e,"settings","preferences"),{showCardPhotos:t,updatedAt:_p()},{merge:!0})})(n.uid,e).catch(e=>console.error("Failed to save show card photos:",e))},[n,Ie]),Ve=(0,r.useCallback)(async e=>{y(e),n&&(async(e,t)=>{await rm(Hf(um,"users",e,"settings","preferences"),{prepTime:t,updatedAt:_p()},{merge:!0})})(n.uid,e).catch(e=>console.error("Failed to save prep time:",e))},[n]),ze=(0,r.useCallback)(async()=>{const e=!k;S(e),n&&(async(e,t)=>{await rm(Hf(um,"users",e,"settings","preferences"),{activeLastMinute:t,updatedAt:_p()},{merge:!0})})(n.uid,e).catch(e=>console.error("Failed to save active last minute:",e))},[n,k]),We=(0,r.useCallback)(async e=>{w(e),n&&(async(e,t)=>{await rm(Hf(um,"users",e,"settings","preferences"),{restTime:t,updatedAt:_p()},{merge:!0})})(n.uid,e).catch(e=>console.error("Failed to save rest time:",e))},[n]),He=(0,r.useCallback)(async(e,t)=>{if("active"===e?ke(t):xe(t),n){const r="active"===e?{activeColor:t,restColor:Se}:{activeColor:we,restColor:t};(async(e,t)=>{let{activeColor:n,restColor:r}=t;await rm(Hf(um,"users",e,"settings","preferences"),{activeColor:n,restColor:r,updatedAt:_p()},{merge:!0})})(n.uid,r).catch(e=>console.error("Failed to save colors:",e))}},[n,we,Se]),qe=(0,r.useCallback)(async()=>{n&&(await Fk(n.uid,!1),fe(!1),ce(!1),de(null))},[n]);(0,r.useEffect)(()=>{const e=x(G);C(t=>d(d({},t),{},{timeLeft:e,targetTime:e}))},[G,x]);const Ge=(0,r.useRef)(null),Ke=(0,r.useRef)(null);(0,r.useEffect)(()=>(E.isRunning?Ge.current=setInterval(()=>{C(e=>e.timeLeft<=1?d(d({},e),{},{timeLeft:0,isRunning:!1}):d(d({},e),{},{timeLeft:e.timeLeft-1}))},1e3):Ge.current&&(clearInterval(Ge.current),Ge.current=null),()=>{Ge.current&&clearInterval(Ge.current)}),[E.isRunning]);const Qe=(0,r.useRef)(!1);(0,r.useEffect)(()=>{if(0===E.timeLeft&&!E.isRunning&&E.targetTime>0&&!Qe.current&&(Qe.current=!0,Ke.current&&(Ke.current.release(),Ke.current=null),window.dataLayer&&window.dataLayer.push({event:"workout_complete",workout_duration:E.targetTime,workout_type:"ten_minutes_from_hell"}),n)){const e=g(G),t=c.find(e=>e.name===G),r={workoutName:G,workoutId:(null===t||void 0===t?void 0:t.id)||null,workoutType:"timer",duration:E.targetTime,setCount:e.length,exercises:e};FS(n.uid,r).then(()=>{MS(n.uid).then(X).catch(e=>console.error("Failed to refresh history:",e))}).catch(e=>console.error("Failed to record history:",e)),!0===he?Oe(r):null===he&&(de(r),ce(!0))}E.timeLeft>0&&(Qe.current=!1)},[E.timeLeft,E.isRunning,E.targetTime,n,G,g,he,Oe]);const Ye=(0,r.useRef)(null);(0,r.useEffect)(()=>(I.isRunning?Ye.current=setInterval(()=>{_(e=>d(d({},e),{},{time:e.time+10}))},10):Ye.current&&(clearInterval(Ye.current),Ye.current=null),()=>{Ye.current&&clearInterval(Ye.current)}),[I.isRunning]);const $e=async()=>{try{"wakeLock"in navigator&&(Ke.current=await navigator.wakeLock.request("screen"))}catch(e){console.log("Wake Lock not supported")}},Xe=async()=>{try{Ke.current&&(await Ke.current.release(),Ke.current=null)}catch(e){console.log("Error releasing wake lock")}},Je=()=>{"exercise-edit"===z?"home"===e?(V(null),W("categories"),q(null),t("home")):(W("categories"),q(null)):(V(null),W("categories"),q(null),t("home"))},Ze=e=>{V(null),t(e)},et=(e,t)=>{if(e&&!U&&(V(e),W("categories")),"categories"===z){if("New Workout"===t)return W("exercise-edit"),void q("New Workout");"timer"===e?K(t):"stopwatch"===e&&Y(t),W("exercise-edit"),q(t)}else W("categories"),q(null)},tt=(e,t)=>{"timer"===e?(K(t),n&&Bk(n.uid,t).catch(e=>console.error("Failed to save selected workout:",e))):"stopwatch"===e&&Y(t)},nt=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const r=U,i=H,o="New Workout"===i,s=t||i;if(("timer"===r?u:f)(t=>o?[...t,{name:s,type:r,exercises:e}]:t.map(t=>t.name===i?d(d({},t),{},{name:s,exercises:e}):t)),t&&"New Workout"!==i&&("timer"===r&&G===i?K(s):"stopwatch"===r&&Q===i&&Y(s)),o&&("timer"===r?K(s):Y(s)),q(s),n){const o=[...PS,...RS].map(e=>e.name).includes(i);OS(n.uid,{name:s,type:r,exercises:e,isDefault:o,defaultName:o&&t?i:null}).catch(e=>console.error("Failed to save workout:",e))}},rt=(0,r.useCallback)(function(e,t,r,i,o){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const{isOwned:a=!0}=s,l=r||e,c=!e,h=o&&o.length>0?o:null;if(!a&&!c){const r={name:l,type:"timer",exercises:t,restTime:null!==i&&void 0!==i?i:null,tags:h,isCustom:!0};if(u(t=>t.map(t=>t.name===e?r:t)),K(l),n&&l){const t=[...PS,...RS].map(e=>e.name);(async()=>{t.includes(e)&&await jS(n.uid,e,!0),await OS(n.uid,d(d({},r),{},{isDefault:!1,defaultName:null}))})().catch(e=>console.error("Failed to persist forked workout:",e))}return}if(c&&l?(u(e=>[...e,{name:l,type:"timer",exercises:t,restTime:null!==i&&void 0!==i?i:null,tags:h}]),K(l)):(u(n=>n.map(n=>n.name===e?d(d({},n),{},{name:l,exercises:t,restTime:null!==i&&void 0!==i?i:null,tags:h}):n)),r&&r!==e&&G===e&&K(l)),n&&l){const o=[...PS,...RS].map(e=>e.name).includes(e);OS(n.uid,{name:l,type:"timer",exercises:t,isDefault:!c&&o,defaultName:o&&r?e:null,restTime:null!==i&&void 0!==i?i:null,tags:h}).catch(e=>console.error("Failed to save workout:",e))}},[n,G]),it=(0,r.useCallback)(e=>{K(e),n&&Bk(n.uid,e).catch(e=>console.error("Failed to save selected workout:",e)),t("timer")},[n]),ot=e=>{const t=PS.map(e=>e.name).includes(e);u(t=>{const r=t.filter(t=>t.name!==e);return G===e&&r.length>0&&setTimeout(()=>K(r[0].name),0),n&&setTimeout(()=>{Uk(n.uid,r.map(e=>e.name)).catch(e=>console.error("Failed to save workout order:",e))},0),r}),n&&jS(n.uid,e,t).catch(e=>console.error("Failed to delete workout:",e))},st=e=>{u(e),n&&Uk(n.uid,e.map(e=>e.name)).catch(e=>console.error("Failed to save workout order:",e))},at=()=>{let e=U;const n=H;!e&&n&&(p.includes(n)?e="timer":m.includes(n)&&(e="stopwatch")),!e||"timer"!==e&&"stopwatch"!==e?console.error("Invalid workout type:",e,"for workout:",n):("timer"===e?K(n):"stopwatch"===e&&Y(n),t(e),V(null),W("categories"),q(null))};return(0,vm.jsxs)("main",{className:"tab-content tab-".concat(e),style:{"--color-active":we,"--color-active-rgb":BS(we),"--color-rest":Se,"--color-rest-rgb":BS(Se)},children:[(0,vm.jsx)("div",{style:{display:"timer"!==e||U?"none":"block"},children:(0,vm.jsx)(Em,{timeLeft:E.timeLeft,isRunning:E.isRunning,targetTime:E.targetTime,selectedWorkoutIndex:E.selectedWorkoutIndex,onTimerStateChange:e=>{void 0!==e.isRunning?C(t=>(e.isRunning&&!t.isRunning?$e():!e.isRunning&&t.isRunning&&Xe(),d(d({},t),e))):C(t=>d(d({},t),e))},workouts:g(G),selectedWorkoutName:G,activeColor:we,restColor:Se,sidePlankAlertEnabled:Ee,prepTime:v,restTime:(()=>{const e=c.find(e=>e.name===G);return null!=(null===e||void 0===e?void 0:e.restTime)?e.restTime:b})(),activeLastMinute:k,initialLoad:o,workoutReady:a,onInitialLoadDone:()=>s(!1),isVisible:"timer"===e&&!U})}),(()=>{if("timer"===e&&!U)return null;if("stats"===e&&!U)return(0,vm.jsx)(Kk,{user:n,history:$,loading:J,onLoginClick:()=>me(!0),timerWorkoutData:c,stopwatchWorkoutData:h,prepTime:v,globalRestTime:b,onStartWorkout:it,defaultWorkoutNames:[...PS,...RS].map(e=>e.name),followingIds:Ae,followerIds:Pe,pinnedWorkouts:Te,onPinnedWorkoutsChange:Be});if("exercise-edit"===z&&H){const e=g(H);return(0,vm.jsx)(eS,{workoutName:H,exercises:e,onSave:nt,onBack:Je,workoutType:U,onStart:at})}if(U){const e="timer"===U?p:m,t="timer"===U?G:Q;return(0,vm.jsx)(Zk,{type:U,level:z,workouts:e,selectedWorkout:t,onWorkoutSelect:e=>tt(U,e),onArrowClick:e=>et(U,e),onBack:Je,onNavigateToTab:Ze})}switch(e){case"home":default:return(0,vm.jsx)(Mk,{timerWorkoutData:c,timerSelectedWorkout:G,workoutHistory:$,onWorkoutSelect:tt,onArrowClick:et,onNavigateToTab:Ze,onDeleteWorkout:ot,onReorder:st,onBellClick:()=>te(!0),onLoginClick:()=>me(!0),onProfileClick:()=>oe(!0),prepTime:v,globalRestTime:b,onDetailSave:rt,onStartWorkout:it,defaultWorkoutNames:[...PS,...RS].map(e=>e.name),requestCloseDetail:ye,showCardPhotos:Ie});case"stats":return(0,vm.jsx)(Kk,{user:n,history:$,loading:J,timerWorkoutData:c,stopwatchWorkoutData:h,prepTime:v,globalRestTime:b,onStartWorkout:it,defaultWorkoutNames:[...PS,...RS].map(e=>e.name),pinnedWorkouts:Te,onPinnedWorkoutsChange:Be})}})(),!U&&"exercise-edit"!==z&&(0,vm.jsx)(Xk,{activeTab:e,onTabChange:n=>{"home"===n&&"home"===e&&(be(!0),setTimeout(()=>be(!1),50)),t(n),ee&&re(!0),ie&&ae(!0),pe&&ve(!0)}}),(0,vm.jsx)(CS,{isOpen:ee,onClose:()=>{te(!1),re(!1)},requestClose:ne}),(0,vm.jsx)(NS,{isOpen:ie,onClose:()=>{oe(!1),ae(!1)},requestClose:se,autoShareEnabled:he,onToggleAutoShare:je,sidePlankAlertEnabled:Ee,onToggleSidePlankAlert:Fe,prepTime:v,onPrepTimeChange:Ve,restTime:b,onRestTimeChange:We,activeLastMinute:k,onToggleActiveLastMinute:ze,activeColor:we,restColor:Se,onColorChange:He,showCardPhotos:Ie,onToggleShowCardPhotos:Ue}),(0,vm.jsx)(AS,{isOpen:pe,onClose:()=>{me(!1),ve(!1)},requestClose:ge}),le&&(0,vm.jsx)(DS,{onShare:Me,onDismiss:qe})]})};const VS=function(){return(0,vm.jsx)(bm,{children:(0,vm.jsx)("div",{className:"App",children:(0,vm.jsx)(US,{})})})};i.createRoot(document.getElementById("root")).render((0,vm.jsx)(VS,{}))})();
//# sourceMappingURL=main.e398a387.js.map